<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Исследование защиты Xamarin Mono/Android - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="В связи с планируемой покупкой смартфона решил научиться писать под Андроид. Давно пишу на C#; хотя до этого еще больше писал на C++, возвращаться к нему неохота, не говоря уже про жабу. Поэтому порадовался, когда нашел сабж. Я,">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=8344'>Magister Yoda</a>, <a target='_blank' href='?action=userinfo&amp;user=50833'>vasilevradislav</a> (+5 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/red.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=2&sortBy=0&page=0.html"><b>Крэки, обсуждения</b></a> <b class=bulletHead>&#8212;&#8250;</b> Исследование защиты Xamarin Mono/Android</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=2&amp;topic=21734&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=2&amp;topic=21734&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 мая 2013 16:23 &middot; Поправил: andrique <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
В связи с планируемой покупкой смартфона решил научиться писать под Андроид. Давно пишу на C#; хотя до этого еще больше писал на C++, возвращаться к нему неохота, не говоря уже про жабу. Поэтому порадовался, когда нашел <noindex><a href="http://xamarin.com/monoforandroid" rel="nofollow" target="_blank">сабж</a></noindex>.<br><br>Я, в общем-то, не противник покупки софта за разумную цену. Купил N-е количество средств разработки, например .NET Reflector -- посчитал сотню долл. приемлемой ценой. Но мандроид стоит немног-немал USD1899 (в топовой конфигурации; за Visual Studio минимум над косарь зеленых отдать)! Жесть... данный заоблачный прайс породил просто-таки компульсивное желание исследовать защиту и узнать, чёш там таког!<br><br>Забегая вперед, скажу, что защиту сделали интересно. На этом форуме был <noindex><a href="https://ssl.exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19810" rel="nofollow" target="_blank">вопрос</a></noindex> по мандроиду; да и на других сайтах народ активно интересуется. Имеются патчи, обладающие одним существенным недостатком - все они под строго определенную версию, и сделаны просто заменой ассемблерных команд по некоему адресу. Следовательно, при выходе новой версии надо опять искать патч. Кроме того, эти патчи просто делают триальный период до 2050 года. А хочется крякнуть так, чтобы слышно было до самого лицензионного файла <img src="img/smilies/s5.gif" alt="">; и чтобы менялись версии, апдейтился софт, а защита так и оставалась исследованной.<br><br>На данный момент техническая часть работы выполнена процентов на 65-70, а принципиально - защита изучена. Данный пост [надеюсь, его можно будет редактировать] представляет собой отчет об этом процессе. Не только что было найдено/поменяно, но и как найдено, какие шаги предприняты для этого. Так сказать, некий кейс-стади для новичков. И кстати, хорошо, что нашелся русскоязычный сайт (этот). Писать отчет на английском не хотца - т.к., очевидно, такой отчет могут прочесть и разработчики, и защитить защиту от исследования <img src="img/smilies/s9.gif" alt="">. А это нежелательно для нас <img src="img/smilies/s2.gif" alt="">.<br><br><b>Введение</b> (не смеяться!)<br><br>Весь продукт состоит из двух частей: Xamarin Android и Xamarin Studio. Первая - это SDK для разработки на C# под Android. Представляет собой плагин для студий (как вижуалки, так и своей, см. ниже). Плагин добавляет несколько новых типов проекта на C# - Андроид. Там несколько вариантов приложений можно создать. Собственно этот плагин и является платным. То есть существует и бесплатная версия, но она очень урезанная. Более полную инфу по редакциям смотрим <noindex><a href="https://store.xamarin.com/" rel="nofollow" target="_blank">здесь</a></noindex>.<br><br>Вторая часть - это полноценная .NET IDE, хотя и не такая навороченная. Надо сказать, это некоторое подслащение горькой пилюли на 2K USD: работает она даже в бесплатном режиме, и может создавать нормальные проекты на C#. Ваш покорный слуга, чтоп проверить это утверждение, тольк чт создал проект консольного приложения, добавил ссылку на один из своих студийных проектов, дернул службу - прога работает, запускается, все ОК.<br><br>По файлам проекта она совместима с вижуалкой, то есть проект создал в одной, открываешь в другой и наоборот. Иными словами, отличная альтернатива V-студии, когда над на коленке что-нить слабать, а ставится за 5 минут, в отличие от вижуалки.<br><br><b>Лицензирование</b><br><br>Оба варианта студии привязываются на сайте Xamarin к учетке, которую над создать. Как именно происходит привязка, я не выяснял, возможно, по айпишнику. Но может и нет, для наших целей это несущественно. Пока вы работаете в Xamarin студии, или пока Вы не запустите явно активацию, плагин работает в бесплатном режиме (Starter). Как только будет открыт проект Андроид в вижуалке, плагин начнет пытаться активироваться, обратившись к веб-службе на сайте. Для активации используются следующие данные: имя, телефон, эл. почта, название компании. Активироваться можно либо в триальном режиме, либо в платном. Триал дает все возможности на месяц, а платный - навсегда, но в рамках оплаченной редакции. После истечения триального месяца, можно либо оплатить и активировать платную лицензию, либо вернуться к бесплатной редакции Starter.<br><br><b>Что где лежит</b><br><br>Файла продукта лежат в следующих местах:<br><br>C:\Program Files (x86)\Xamarin Studio\ - ксамарийная студия<br>C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Xamarin\ - плагин для вижуалки<br>C:\Program Files (x86)\MSBuild\Xamarin\Android\ - мсбилдные таски для сборки андроид-проектов<br>C:\ProgramData\Mono for Android\License\ - лицуха!<br><br>Также продукту нужны следующие зависимости:<br><br>Android SDK<br>JDK<br>GTK#<br><br>которые могут лежать в своих собственных местах.<br><br><b>Общее устройство защиты</b><br><br>Во первых, большая часть сборок не подписана. Хотя подписывание сборок не является препятствием, оно отнимает N-е количество времени на снятие. Не подписали, и на том спасибо.<br><br>Основная сборка вижуального плагина (а начал я с него) - Mono.Android.VisualStudio.dll. Быстрая пробежка по рефлекторному коду показала, что при решении вопроса о состоянии активации эта сборка обращается к программе mandroid.exe, которая оказалась... ой! ой!!! -- НЕУПРАВЛЯЕМАЯ! Блин, это нечестно! - я очень расстроился...<br><br>В парадигму защиты Xamarin входит: продукт (MonoAndroid), редакция (XamarinEdition) - которая бывает Starter, Indie, Business и Priority, она же Enterprise. Также еще отдельная редакция называется Trial. В последнем случае у нее есть срок действия (expiration). <br><br>Итак, сборки просят мандроид дать им нечто под названием Entitlements, то есть &quot;права&quot; - что пользователю положено. Entitlements представляет собой строчку следующего вида:<br><br>04e5fd6b801c5914be8d1bb302a4738b28039656<br>MonoAndroid<br>Priority<br>2050-01-01T00:00:00<br><br>Четыре строки, разделенные &quot;\n&quot;. Первая строка - это хеш, вторая - название продукта, третья - редакция, четвертая - expriation. Формируются эти строчки следующим кодом:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>const</b></span>&nbsp;string&nbsp;product&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_quote">&quot;MonoAndroid&quot;</span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>const</b></span>&nbsp;string&nbsp;edition&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_quote">&quot;Priority&quot;</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>const</b></span>&nbsp;string&nbsp;expiration&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_quote">&quot;2050-01-01T00:00:00&quot;</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;machineName&nbsp;</span><span class="hl_char">=</span>&nbsp;Environment<span class="hl_char">.</span>MachineName<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;secret&nbsp;</span><span class="hl_char">=</span>&nbsp;product&nbsp;<span class="hl_char">+</span>&nbsp;expiration&nbsp;<span class="hl_char">+</span>&nbsp;edition&nbsp;<span class="hl_char">+</span>&nbsp;machineName&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_quote">&quot;nlJ2/Tj\fn,Xi(4rVq!A&quot;</span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;bytes&nbsp;<span class="hl_char">=</span>&nbsp;Encoding<span class="hl_char">.</span>UTF8<span class="hl_char">.</span>GetBytes<span class="hl_char">(</span>secret<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;buffer&nbsp;<span class="hl_char">=</span>&nbsp;SHA1<span class="hl_char">.</span>Create<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_char">.</span>ComputeHash<span class="hl_char">(</span>bytes<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;builder&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;StringBuilder<span class="hl_char">(</span>buffer<span class="hl_char">.</span>Length&nbsp;<span class="hl_char">*</span>&nbsp;<span class="hl_number">2</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;</span><span class="hl_char">(</span><span class="hl_function"><b>byte</b></span>&nbsp;num&nbsp;<span class="hl_function"><b>in</b></span>&nbsp;buffer<span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;builder</span><span class="hl_char">.</span>Append<span class="hl_char">(</span>num<span class="hl_char">.</span>ToString<span class="hl_char">(</span><span class="hl_quote">&quot;x2&quot;</span><span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;hash&nbsp;</span><span class="hl_char">=</span>&nbsp;builder<span class="hl_char">.</span>ToString<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;entitlements&nbsp;</span><span class="hl_char">=</span>&nbsp;string<span class="hl_char">.</span><span class="hl_function">Format</span><span class="hl_char">(</span><span class="hl_quote">&quot;{0}\n{1}\n{2}\n{3}&quot;</span><span class="hl_char">,</span>&nbsp;hash<span class="hl_char">,</span>&nbsp;product<span class="hl_char">,</span>&nbsp;edition<span class="hl_char">,</span>&nbsp;expiration<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;entitlements</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>Так вот. Получив от мандроида эти самые строчки, компоненты студии их проверяют. В проверку входит много чего, начиная от хеша и кончая проверкой даты файла, в котором хранятся Entitlements. Если проверка проходит, компоненты приступают к работе. Если нет - они просят мандроид произвести повторную активацию. До активации мы еще дойдем. Дальше пошла<br><br><b>Собственно работа</b><br><br>Первой моей идеей было: внести изменения в сборки, чтобы .NET-часть просто не спрашивала неуправляемую прогу ни о чем. На тот момент я еще не знал точно, что это за прога и какая у нее роль.<br><br>Изначальный подход был такой. Получить исходники сборок при помощи рефлектора, внести нужные изменения, и снова собрать. Но не тут-то было. Дело в том, что рефлектор выдает код &quot;как есть&quot;, то есть не компилящийся на C#. Данная мысль требует пояснения.<br><br>Когда мы пишем на C#, допустим, анонимные делегаты или лямбда-выражения, компилятор создает анонимный класс, у него делает метод, и этот метод подставляет туда, где мы используем эту самую лямбду. Все это оттого, что анонимные делегаты и лямбды - это в парадигме C#, а не CLR. Рантайм про это знать не знает.<br><br>Идем дальше. Всем известно, что такие символы как &#039;&lt;&#039; &#039;&gt;&#039; &#039;-&#039; и проч. в идентификаторах использовать нельзя. Угу, в идентификаторах C#... Но на ассемблере (IL) - можно. Каковым фактом компилятор радостно и пользуется. Чесн говоря, я не знаю, чем руководствовались разработчики C#, но сделал они так.<br><br>Допустим, вы пишите такой код:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span class="hl_function"><b>data</b></span>&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function">new</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;{1<span class="hl_char">,</span>&nbsp;<span class="hl_number">2</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">3</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">4</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">5</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">7</span><span class="hl_char">,</span>&nbsp;8}<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;filtered&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">data</span><span class="hl_char">.</span>Where<span class="hl_char">(</span>d&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;d<span class="hl_char">%</span><span class="hl_number">2</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>В этом случае компилятор создаст вот такой метод - статический член класса Program:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_char">[</span>CompilerGenerated<span class="hl_char">]</span></li><li class="hl_l1">private&nbsp;static&nbsp;bool&nbsp;<span class="hl_char">&lt;</span>Main<span class="hl_char">&gt;</span>b__0<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;d<span class="hl_char">)</span></li><li class="hl_l0">{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<span class="hl_char">(</span><span class="hl_char">(</span>d&nbsp;<span class="hl_char">%</span>&nbsp;<span class="hl_number">2</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">}</li>        </ol>
    </div>
</div></div>
<br><br>Вполне понятно, что C# такое не скомпилит. К сожалению, .NET Reflector вместе со своим плагином FileDisassembler именно такой код и создает. На эту тему я собираюсь создать отдельный топик, т.к. это не дело. Отсутствие надежного инструмента - тревожная ситуация.<br><br>Ну, а в сборке размером пол-гигабайта таких мест, понятно, выше крыши. Что же делать? Вариант 1: запастись терпением на пару месяцев, и строчка за строчкой исправлять все каки. Вариант, на самом деле, плохой, т.к. за два месяца они выпустят новую версию и все над будет начинать сначала. Вариант второй: дизассемблировать сборку через ILDASM, и вносить изменения в код на IL. Отличный вариант, в управляемом мире ILDASM генерирует отличный код, который собирается без ошибок, одно только &quot;но&quot;: кто у нас свободно пишет на IL? Ха ха.<br><br>В результате был выбран вариант промежуточный: сборка разбирается ILDASM&#039;ом, затем на C# пишется код-заглушка, которую надо вставить в сборку. Затем этот код компилится, разбирается ILDASM&#039;ом, и нужный кусок на IL вставляется в код исходной сборки. Таким образом, мы получаем нужное нам изменение (патч), при этом процесс разборки-сборки проходит вполне надежно.<br><br>Таким образом, мною были внесены изменения в следующие сборки:<br><br>Mono.Android.VisualStudio<br>Mono.VisualStudio.Extension2<br>Mono.VisualStudio.Shell<br>Xamarin.Components.Ide<br>Xamarin.Android.Build.Tasks<br><br><b>Видимо, мое сообщение превысило какой-то размер, т.к. то, что я пишу дальше, не сохраняется. Продолжение будет в ответных постах.</b>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324371&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=1" class="addthx" data-post="324371"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=34737" title="08-05-2013 12:24, ранг:0.0" target="_blank">lsreg</a>, <a href="action=userinfo&user=33253" title="11-05-2013 04:53, ранг:11.0" target="_blank">Abraham</a>, <a href="action=userinfo&user=1931" title="11-05-2013 08:16, ранг:491.0" target="_blank">4kusNick</a></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]SaNX[/b]','')">SaNX</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 456.3 (мудрец), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.03'>Активность: 0.28<span style='color:red'>&searr;</span>0.02</span><br>Статус: <a href="action=userinfo&amp;user=2108">Участник</a><br><font color=blue>Android Reverser</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 мая 2013 16:32 <br><script type="text/javascript">QU('SaNX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SaNX" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Не надо на этом тормознутом говне писать <img src="img/smilies/s9.gif" alt="">
<br><br><font size="1"><i>-----<br>SaNX</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324372&amp;user=2108&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=2" class="addthx" data-post="324372"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=33253" title="10-05-2013 16:03, ранг:11.0" target="_blank">Abraham</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 мая 2013 16:33 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<I>andrique пишет:<br>Продолжение следует, ожидайте...  </I><br>Запасаемся попкорном.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324373&amp;user=26651&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=3" class="addthx" data-post="324373"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]NIKOLA[/b]','')">NIKOLA</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/247.jpg" alt=""><br><span class=txtSm>Ранг: 500.6 (<b>!</b>), 7thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.87'>Активность: 0.26<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=247">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 мая 2013 18:04 <br><script type="text/javascript">QU('NIKOLA','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=NIKOLA" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<I>SaNX пишет:<br>Не надо на этом тормознутом говне писать </I><br><br>а что посоветуешь ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324381&amp;user=247&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=4" class="addthx" data-post="324381"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]SaNX[/b]','')">SaNX</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 456.3 (мудрец), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.03'>Активность: 0.28<span style='color:red'>&searr;</span>0.02</span><br>Статус: <a href="action=userinfo&amp;user=2108">Участник</a><br><font color=blue>Android Reverser</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 мая 2013 18:13 &middot; Поправил: SaNX <br><script type="text/javascript">QU('SaNX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SaNX" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
жаба+НДК или просто жаба.<br>Дабы убедиться в тормознутости сего чуда предлагаю поставить http://4pda.ru/forum/showtopic=335952 на мобилу.<br><br>Я его юзал недельку. Запуск идет секунд 15, во время работы наблюдаются тормоза.<br>Перешел на чисто жабовскую anMoney - запуск секунда, причем в анмани бОльший функционал.<br><br>Как то я ставил себе моно для пробы. Написал хелло ворлд. Запускалось секунд 5, размер апк был весьма огромным. Снес нахер, пишу на жабе.
<br><br><font size="1"><i>-----<br>SaNX</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324383&amp;user=2108&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=5" class="addthx" data-post="324383"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 мая 2013 18:32 &middot; Поправил: andrique <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Ммм... я пока реально не кодил на мандроиде, за исключением Hello World для целей лома защиты. Но вот <noindex><a href="http://habrahabr.ru/post/170629/" rel="nofollow" target="_blank">здесь</a></noindex> пишут, что очень даже быстрее жабы работает!<br><br>Эх, пока сам не протестишь, не поймёшь... Сам по себе эмулятор из Android SDK работает ПИИПЕЕЦ как медленно!!! Дней через 10 возьму себе Galaxy Note 2, вот тогда и сделаю выводы...<br><br>В жабу не верю. Структур, говорят, даже нет!<br><br>А кстати, где написано, что CoinKeeper написан на мандроиде?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324384&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=6" class="addthx" data-post="324384"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]SaNX[/b]','')">SaNX</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 456.3 (мудрец), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.03'>Активность: 0.28<span style='color:red'>&searr;</span>0.02</span><br>Статус: <a href="action=userinfo&amp;user=2108">Участник</a><br><font color=blue>Android Reverser</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 мая 2013 19:20 &middot; Поправил: SaNX <br><script type="text/javascript">QU('SaNX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SaNX" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<I>andrique пишет:<br>CoinKeeper написан на мандроиде?  </I><br>апк открой винраром, увидишь библы <img src="img/smilies/s1.gif" alt=""><br><br><I>andrique пишет:<br>Но вот здесь пишут, что очень даже быстрее жабы работает! </I><br>нуда, статья аффтаров сего чуда. как же у них могло быть иначе?
<br><br><font size="1"><i>-----<br>SaNX</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324387&amp;user=2108&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=7" class="addthx" data-post="324387"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 17:41 &middot; Поправил: andrique <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
Сделав это, я уже радостно плясал и праздновал победу, пока не увидел в выводе отлаживаемой программы слова о том, что Xamarin/Mandroid работает в триальном режиме. Тут я здорово взбесился. Думаю, коллегам чувства мои будут понятны. Было очень жалко, что сделанная работа прошла впустую. На самом деле, если публика захочет, я могу выложить пропатченные исходники на IL, но пока у меня нет уверенности, что они вообще понадобятся в окончательном варианте.<br><br><b>Перехват мандроида</b><br><br>На следующем этапе я решил разобраться, что то собственно, за зверь mandroid.exe. Т.к. это неуправляемая прога, исходного кода от него нет и получить не получается <img src="img/smilies/s3.gif" alt="">. Тогда я пошел таким путем. Я сделал программу-перехватчик. Переименовал mandroid.exe в mandroid-xamarin.exe, сделал программу под названием mandroid.exe и положил ее в папку C:\Program Files (x86)\MSBuild\Xamarin\Android. Таким образом, компоненты студии звали мою программу, а она вызывала сам мандроид, по пути записывая в лог-файл весь обмен данными. Подробно описывать здесь все это я не буду, т.к. выкладываю <noindex><a href="http://my.filechum.com/7PQBke4wQ3Ds6nI/mandroid-proxy.zip" rel="nofollow" target="_blank">проект программы-перехватчика</a></noindex>.<br><br>Собственно, как компоненты студии вызывают мандроид. Примерно так:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;&nbsp;&nbsp;Make&nbsp;up&nbsp;command<span class="hl_char">-</span>line&nbsp;params</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;argumentString&nbsp;</span><span class="hl_char">=</span>&nbsp;string<span class="hl_char">.</span>Join<span class="hl_char">(</span><span class="hl_quote">&quot; &quot;</span><span class="hl_char">,</span>&nbsp;arguments<span class="hl_char">.</span>Select<span class="hl_char">(</span>a&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;string<span class="hl_char">.</span><span class="hl_function">Format</span><span class="hl_char">(</span><span class="hl_quote">&quot;&quot;</span><span class="hl_quote">{0}&quot;&quot;</span><span class="hl_char">,</span>&nbsp;a<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span class="hl_function"><b>directory</b></span>&nbsp;<span class="hl_char">=</span>&nbsp;Environment<span class="hl_char">.</span>CurrentDirectory<span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_quote">@&quot;C:\usr\dev\unlicense\xamarin\trunk\msbuild&quot;</span><span class="hl_comment">;	// </span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;path&nbsp;</span><span class="hl_char">=</span>&nbsp;Path<span class="hl_char">.</span>Combine<span class="hl_char">(</span>_msbuildDirectory<span class="hl_char">,</span>&nbsp;EXE_NAME<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;&nbsp;&nbsp;How&nbsp;to&nbsp;launch&nbsp;the&nbsp;daemon</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;info&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;ProcessStartInfo<span class="hl_char">(</span>path<span class="hl_char">,</span>&nbsp;argumentString<span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RedirectStandardInput&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">true</span><span class="hl_char">,</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RedirectStandardOutput&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">true</span><span class="hl_char">,</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RedirectStandardError&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">true</span><span class="hl_char">,</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UseShellExecute&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">false</span><span class="hl_char">,</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WorkingDirectory&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">directory</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;&nbsp;&nbsp;Prepare&nbsp;process</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;process&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;Process</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StartInfo&nbsp;</span><span class="hl_char">=</span>&nbsp;info<span class="hl_char">,</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EnableRaisingEvents&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">true</span><span class="hl_char">,</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;&nbsp;&nbsp;Subscribe&nbsp;to&nbsp;process&nbsp;output</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process</span><span class="hl_char">.</span>OutputDataReceived&nbsp;<span class="hl_char">+</span><span class="hl_char">=</span>&nbsp;OnStdOutData<span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process</span><span class="hl_char">.</span>ErrorDataReceived&nbsp;<span class="hl_char">+</span><span class="hl_char">=</span>&nbsp;OnStdErrData<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function">try</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WriteLineWithTime</span><span class="hl_char">(</span><span class="hl_quote">&quot;mandroid.exe is being called with command line: {0}&quot;</span><span class="hl_char">,</span>&nbsp;argumentString<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;&nbsp;Start&nbsp;mandroid<span class="hl_char">.</span>exe</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process</span><span class="hl_char">.</span>Start<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WriteLineWithTime</span><span class="hl_char">(</span><span class="hl_quote">&quot;{0} has started&quot;</span><span class="hl_char">,</span>&nbsp;EXE_NAME<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;&nbsp;Initiate&nbsp;reading&nbsp;mandroid<span class="hl_char">.</span>exe's standard outputs</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process</span><span class="hl_char">.</span>BeginOutputReadLine<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process</span><span class="hl_char">.</span>BeginErrorReadLine<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;@in</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;&nbsp;Read&nbsp;standard&nbsp;input</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>null</b></span>&nbsp;<span class="hl_char">!</span><span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>@in&nbsp;<span class="hl_char">=</span>&nbsp;Console<span class="hl_char">.</span><span class="hl_function">In</span><span class="hl_char">.</span>ReadLine<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WriteLineWithTime</span><span class="hl_char">(</span><span class="hl_quote">&quot;stdin: '{0}'&quot;</span><span class="hl_char">,</span>&nbsp;@in<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;<span class="hl_function"><b>And</b></span>&nbsp;route&nbsp;<span class="hl_function"><b>data</b></span>&nbsp;to&nbsp;mandroid<span class="hl_char">.</span>exe</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process</span><span class="hl_char">.</span>StandardInput<span class="hl_char">.</span>WriteLine<span class="hl_char">(</span>@in<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WriteLineWithTime</span><span class="hl_char">(</span><span class="hl_quote">&quot;stdin: &lt;eof&gt;&quot;</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process</span><span class="hl_char">.</span>StandardInput<span class="hl_char">.</span>Close<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process</span><span class="hl_char">.</span>WaitForExit<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WriteLineWithTime</span><span class="hl_char">(</span><span class="hl_quote">&quot;{0} exit code is {1}.&quot;</span><span class="hl_char">,</span>&nbsp;EXE_NAME<span class="hl_char">,</span>&nbsp;process<span class="hl_char">.</span>ExitCode<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;process</span><span class="hl_char">.</span>ExitCode<span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>catch</b></span>&nbsp;<span class="hl_char">(</span>Exception&nbsp;x<span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WriteLineWithTime</span><span class="hl_char">(</span><span class="hl_quote">&quot;Error: {0}&quot;</span><span class="hl_char">,</span>&nbsp;x<span class="hl_char">.</span>Message<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span class="hl_number">1</span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li>        </ol>
    </div>
</div></div>
<br><br>Данный код - это мой, но он сделан по подобию оригинального. Итак, компоненты студии запускают мандроид, перехватывают стандартный ввод, вывод и поток ошибок, пихают в stdin команды и читают stdout и stderr. Моя мысль была в том, чтобы вмешаться в этот процесс, отдавать студии мои собственные Entitlements, команды на активацию игнорировать и говорить, что все хорошо - то есть возвращать код 0. Так я и сделал. Опять студия была счастлива, НО! при сборке моего проекта mandroid-xamarin пожаловался на фатальную ошибку. Я понял, что родной mandroid.exe в процессе сборки проверяет, сука, лицензию. И никак это не обойдешь, пока не взломаешь собственно мандроид.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324540&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=8" class="addthx" data-post="324540"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]SaNX[/b]','')">SaNX</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 456.3 (мудрец), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.03'>Активность: 0.28<span style='color:red'>&searr;</span>0.02</span><br>Статус: <a href="action=userinfo&amp;user=2108">Участник</a><br><font color=blue>Android Reverser</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 18:00 &middot; Поправил: SaNX <br><script type="text/javascript">QU('SaNX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SaNX" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
А не проще сделать поиск по сигнатурам и патчить, как патчили на хабре (ну или где там)? Я, когда заморочился, быстро нашел нужные места и пропатчил.
<br><br><font size="1"><i>-----<br>SaNX</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324541&amp;user=2108&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=9" class="addthx" data-post="324541"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 18:04 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Пришлось так и сделать.<br><br><b>Взлом mandroid.exe</b><br><br>Т.к. эта сволочь неуправляемая, я стал думать, что бы такое предпринять. Начал с ИДЫ, но она сделала мне файл на ассемблере в миллион (!) строк. Ясно, что с этим разбираться не надо даже пытаться...<br><br>Дальше я начал тусить на форумах, и вскоре обнаружил, что мандроид запускает некую еще программу mandroid-win.exe, которая, дескать, все и делает. И что она - УПРАВЛЯЕМАЯ!!! Мой энтузиазм увеличился, и я начал разбираться. Я задумался. Процесс монитор ничего такого не показывал, отсюда вывод: он запускает сборки прямо из памяти. Запускает рантайм, создает домен приложения, грузит туда сборки, и вперед.<br><br>Дальше моя мысль была следующая. Если неуправляемая программа запускает управляемую, налицо желание разработчиков писать все на .NET. Можно сделать вывод, что роль mandroid.exe и состоит в том, чтобы скрытно запустить управляемую прогу. То есть он, козел такой, есть простой запускатор. Значит, если получится вытащить управляемую часть, можно таким образом добраться до самого сердца защиты.<br><br>ОК, в теле mandroid.exe ничего похожего на сборки не видно. Ага, дальше я выяснил, что программа-то запакована!!! Попробовал искать распаковщики, но ничего не нашел. Все они сообщали, что прога запакована не ими. В конце концов интуитивно я нашел выход.<br><br>Я нашел отладчик OllyDbg. Очень здоровская штука. Когда я запустил мандроид под этим отладчиком, он отработал, но Олли не выключила все, как это делает студия, а просто остановилась где-то в недрах системы. Выглядело это так:<br><br><noindex><a href="http://postimage.org/" rel="nofollow" target="_blank"> <img src="http://s7.postimg.org/szywuw79n/screenshot_6.png" border="0" align="" alt=""></a></noindex>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324542&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=10" class="addthx" data-post="324542"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 18:10 &middot; Поправил: andrique <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
Дальше я нашел окно Memory. Оно, ни много ни мало, показывает всё виртуальное пространство процесса. Все сегменты памяти, все загруженные системные DLL. И я стал рыться в этой памяти. На мое - нет, наше! счастье разработчики не додумались очищать память перед завершением процесса. Очевидно, они не предположили, что кто-то зайдет так далеко.<br><br>Ребята, это наш большой секрет. Надо, чтобы они и не узнали. <b>НЕ БОЛТАЙТЕ!!!</b><br><br>Итак, я начал искать в памяти сигнатуры EXE и DLL файлов - знаменитые MZ. И нашел, представьте мою радость!!! Что я сделал дальше? Я сохранил на диск все сегменты памяти, в которых находились эти сигнатуры. Олли позволяет это делать, и выглядит это вот так:<br><br><noindex><a href="http://postimage.org/" rel="nofollow" target="_blank"> <img src="http://s7.postimg.org/47zannq2z/screenshot_7.png" border="0" align="" alt=""></a></noindex><br><br>То есть, ясное дело, каким бы упаковщиком не был запакован мандроид, при запуске он распаковывается в памяти, и все становится доступным и беззащитным.<br><br>Дальше, я написал прогу, которая вытаскивает из дампов сегментов памяти находящиеся там исполняемые образы. Опять, много писать здесь не буду, т.к. выкладываю <noindex><a href="http://my.filechum.com/rj1BaaN735Wnv4s/unlicense.zip" rel="nofollow" target="_blank">проект экстрактора</a></noindex>.<br><br>В этих дампов памяти очень много чего нашлось, в том числе 76 (!) системных DLL типа user32, kernel32 и проч проч проч! Они, кстати, 64-битные, и ни чем не открываются. Найденные DLL я сохранял на диск, и проверял, не управляемые ли они. Проверял так: создавал домен приложения, и пытался грузить туда сборки. <b>Заметьте:</b> грузил &quot;для отражения&quot;, это режим позволяет загрузить сборку и не учитывать зависимости. Иначе не загрузились бы. Код в студию <img src="img/smilies/s3.gif" alt="">:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;<span class="hl_char">&lt;</span>summary<span class="hl_char">&gt;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Сохраняет&nbsp;найденные&nbsp;исполняемые&nbsp;образы&nbsp;на&nbsp;диск<span class="hl_char">.</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">/</span>summary<span class="hl_char">&gt;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;ExtractionAgent<span class="hl_char">(</span><span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;cd&nbsp;</span><span class="hl_char">=</span>&nbsp;AppDomain<span class="hl_char">.</span>CurrentDomain<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;&nbsp;&nbsp;Получаем&nbsp;объект<span class="hl_char">-</span>параметр<span class="hl_char">,</span>&nbsp;переданный&nbsp;в&nbsp;домен&nbsp;приложения<span class="hl_char">.</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tasking&nbsp;</span><span class="hl_char">=</span>&nbsp;cd<span class="hl_char">.</span>GetData<span class="hl_char">(</span>typeof&nbsp;<span class="hl_char">(</span>ExtractionTasking<span class="hl_char">)</span><span class="hl_char">.</span>FullName<span class="hl_char">)</span>&nbsp;as&nbsp;ExtractionTasking<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>null</b></span>&nbsp;<span class="hl_char">!</span><span class="hl_char">=</span>&nbsp;tasking<span class="hl_char">)</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;segmentName&nbsp;</span><span class="hl_char">=</span>&nbsp;Path<span class="hl_char">.</span>GetFileNameWithoutExtension<span class="hl_char">(</span>tasking<span class="hl_char">.</span>SegmentFile<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug</span><span class="hl_char">.</span>Assert<span class="hl_char">(</span><span class="hl_function"><b>null</b></span>&nbsp;<span class="hl_char">!</span><span class="hl_char">=</span>&nbsp;segmentName<span class="hl_char">)</span><span class="hl_comment">;	//	гарантированно true т.к. иначе файл сегмента не был бы открыт.</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;workingDirectory&nbsp;</span><span class="hl_char">=</span>&nbsp;Path<span class="hl_char">.</span>Combine<span class="hl_char">(</span>Path<span class="hl_char">.</span>GetDirectoryName<span class="hl_char">(</span>tasking<span class="hl_char">.</span>SegmentFile<span class="hl_char">)</span>&nbsp;<span class="hl_char">?</span><span class="hl_char">?</span>&nbsp;<span class="hl_quote">&quot;.&quot;</span><span class="hl_char">,</span>&nbsp;segmentName<span class="hl_char">)</span>&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_quote">&quot;.images&quot;</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function">Directory</span><span class="hl_char">.</span>CreateDirectory<span class="hl_char">(</span>workingDirectory<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;numPEs&nbsp;</span><span class="hl_char">=</span>&nbsp;tasking<span class="hl_char">.</span>Extractables<span class="hl_char">.</span>Length<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;</span><span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;i&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">; i &lt; numPEs; i++)</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;exe&nbsp;</span><span class="hl_char">=</span>&nbsp;tasking<span class="hl_char">.</span>Extractables<span class="hl_char">[</span>i<span class="hl_char">]</span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;Формируем&nbsp;имя&nbsp;образа&nbsp;по&nbsp;умолчанию<span class="hl_char">.</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exe</span><span class="hl_char">.</span>Name&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span><span class="hl_number">1</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;numPEs<span class="hl_char">)</span>&nbsp;<span class="hl_char">?</span>&nbsp;tasking<span class="hl_char">.</span>OutputName&nbsp;<span class="hl_char">:</span>&nbsp;string<span class="hl_char">.</span><span class="hl_function">Format</span><span class="hl_char">(</span><span class="hl_quote">&quot;{0}-{1}&quot;</span><span class="hl_char">,</span>&nbsp;segmentName<span class="hl_char">,</span>&nbsp;i<span class="hl_char">)</span>&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_quote">&quot;.dll&quot;</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;Получаем&nbsp;исполняемый&nbsp;образ&nbsp;как&nbsp;отдельный&nbsp;массив<span class="hl_char">.</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;assemblyBuffer&nbsp;</span><span class="hl_char">=</span>&nbsp;tasking<span class="hl_char">.</span>Buffer<span class="hl_char">.</span>Skip<span class="hl_char">(</span>exe<span class="hl_char">.</span><span class="hl_function">Offset</span><span class="hl_char">)</span><span class="hl_char">.</span>Take<span class="hl_char">(</span>exe<span class="hl_char">.</span>Length<span class="hl_char">)</span><span class="hl_char">.</span>ToArray<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;moduleType&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_quote">&quot;native image&quot;</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;Дальше&nbsp;пробуем&nbsp;загрузить&nbsp;образ&nbsp;как&nbsp;<span class="hl_char">.</span>NET<span class="hl_char">-</span>сборку<span class="hl_char">.</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function">try</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exe</span><span class="hl_char">.</span>Assembly&nbsp;<span class="hl_char">=</span>&nbsp;Assembly<span class="hl_char">.</span>ReflectionOnlyLoad<span class="hl_char">(</span>assemblyBuffer<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Если&nbsp;сборка&nbsp;загружена<span class="hl_char">,</span>&nbsp;получаем&nbsp;истинное&nbsp;имя<span class="hl_char">.</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exe</span><span class="hl_char">.</span>Name&nbsp;<span class="hl_char">=</span>&nbsp;exe<span class="hl_char">.</span>Assembly<span class="hl_char">.</span>ManifestModule<span class="hl_char">.</span>ScopeName<span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moduleType&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_quote">&quot;.NET module&quot;</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Стандартные&nbsp;сборки&nbsp;библиотеки&nbsp;<span class="hl_char">.</span>NET&nbsp;пропускаем<span class="hl_char">.</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>exe<span class="hl_char">.</span>Name<span class="hl_char">.</span>StartsWith<span class="hl_char">(</span><span class="hl_quote">&quot;System&quot;</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">|</span><span class="hl_char">|</span>&nbsp;exe<span class="hl_char">.</span>Name<span class="hl_char">.</span>StartsWith<span class="hl_char">(</span><span class="hl_quote">&quot;Microsoft&quot;</span><span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console</span><span class="hl_char">.</span>WriteLine<span class="hl_char">(</span><span class="hl_quote">&quot;\tSkipping FCL module '{0}' [offset: {1:X} length: {2}]&quot;</span><span class="hl_char">,</span>&nbsp;exe<span class="hl_char">.</span>Name<span class="hl_char">,</span>&nbsp;exe<span class="hl_char">.</span><span class="hl_function">Offset</span><span class="hl_char">,</span>&nbsp;exe<span class="hl_char">.</span>Length<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue</span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;Давим&nbsp;исключение&nbsp;при&nbsp;попытке&nbsp;загрузить&nbsp;не<span class="hl_char">-</span><span class="hl_char">.</span>NET&nbsp;сборку<span class="hl_char">.</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>catch</b></span>&nbsp;<span class="hl_char">(</span>BadImageFormatException<span class="hl_char">)</span>&nbsp;{}</li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console</span><span class="hl_char">.</span>WriteLine<span class="hl_char">(</span><span class="hl_quote">&quot;\tSaving '{0}' as {1} [offset: {2:X} length: {3}]&quot;</span><span class="hl_char">,</span>&nbsp;exe<span class="hl_char">.</span>Name<span class="hl_char">,</span>&nbsp;moduleType<span class="hl_char">,</span>&nbsp;exe<span class="hl_char">.</span><span class="hl_function">Offset</span><span class="hl_char">,</span>&nbsp;exe<span class="hl_char">.</span>Length<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;target&nbsp;</span><span class="hl_char">=</span>&nbsp;Path<span class="hl_char">.</span>Combine<span class="hl_char">(</span>workingDirectory<span class="hl_char">,</span>&nbsp;exe<span class="hl_char">.</span>Name<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;Записываем&nbsp;исполняемый&nbsp;образ&nbsp;в&nbsp;файл<span class="hl_char">.</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_char">/</span><span class="hl_char">/</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;</span><span class="hl_char">(</span>var&nbsp;writer&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;BinaryWriter<span class="hl_char">(</span>File<span class="hl_char">.</span>Open<span class="hl_char">(</span>target<span class="hl_char">,</span>&nbsp;FileMode<span class="hl_char">.</span>Create<span class="hl_char">,</span>&nbsp;FileAccess<span class="hl_char">.</span>Write<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer</span><span class="hl_char">.</span>Write<span class="hl_char">(</span>assemblyBuffer<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>        </ol>
    </div>
</div></div>
<br><br>И что же? Если сборка загрузилась в домен как управляемая, значит, мне доступно ее имя. Ура, с таким именем я ее и сохраняю, как видно из кода. Да, для каждого сегмента (файл с расширением .MEM) я создавал отдельную папку, и складывал туда найденные сборки. И вот, в одной из папок нашлись такие сборки:<br><br>I18N.dll<br>I18N.West.dll<br>Ionic.Zip.dll<br>mandroid-win.exe<br>Mono.Cecil.dll<br>Mono.Cecil.Mdb.dll<br>Mono.Data.Sqlite.dll<br>Mono.Data.Tds.dll<br>Mono.Posix.dll<br>Mono.Security.dll<br>Mono.Touch.Client.dll<br>Mono.Touch.Common.dll<br>Mono.Web.dll<br><br>То есть, сцкнх, вся президентская рать!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324543&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=11" class="addthx" data-post="324543"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]4kusNick[/b]','')">4kusNick</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1931.jpg" alt=""><br><span class=txtSm>Ранг: 748.2 <font color=magenta>(<b>! !</b>)</font>, 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.1'>Активность: 0.37<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1931">Участник</a><br><font color=blue>bytecode!</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 18:34 <br><script type="text/javascript">QU('4kusNick','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=4kusNick" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
Мандроид вроде тут разобрали уже: https://ssl.exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19810&amp;page=0<br><br>Или речь о разных вещах?
<br><br><font size="1"><i>-----<br>Флэш, ява, дотнет - на завтрак, обед и ужин. Unity3D на закуску.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324544&amp;user=1931&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=12" class="addthx" data-post="324544"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 18:41 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
<I>4kusNick пишет:<br><br>Мандроид вроде тут разобрали уже: https://ssl.exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19810&amp;page=0<br><br>Или речь о разных вещах?  </I><br><br>Об этом, да, но результата-то нет..<br><br>Ну уже скоро подхожу к концу.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324545&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=13" class="addthx" data-post="324545"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]nick8606[/b]','')">nick8606</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 34.1 (посетитель), 118thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.2'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=25204">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 18:50 <br><script type="text/javascript">QU('nick8606','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=nick8606" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
Эмм... Сдампить сборки можно было, допустим, MegaDumper&#039;ом от SnD...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324547&amp;user=25204&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=14" class="addthx" data-post="324547"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 19:09 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<I>nick8606 пишет:<br>Эмм... Сдампить сборки можно было, допустим, MegaDumper&#039;ом от SnD...  </I><br><br>Я не эксперт в неуправляемом коде уже давно. Даже плюсы начал забывать. Так что воспользовался тулом, который нашел.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324548&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=15" class="addthx" data-post="324548"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 19:37 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
Ну поехали дальше. Моё предположение было в том, что если mandroid.exe запускает mandroid-win.exe, то mandroid-win.exe использует такие же команды, что и mandroid-win.exe, и общается с ним так же, через stdin, stdout, stderr.<br><br>Надо сказать, что мое предположение подтвердилось. Я скопировал его в папку C:\Program Files (x86)\MSBuild\Xamarin\Android\, переименовал в mandroid-xamarin.exe, и положил свой прокси-проект, чтобы мониторить обмен командами. Получилось, при сборке, вот что:<br><br>10.05.2013 19:09:15	mandroid.exe is being called with command line: &quot;-d&quot;<br>10.05.2013 19:09:15	mandroid-xamarin.exe has started<br>10.05.2013 19:09:15	stdout: &#039;OK Ready&#039;<br>10.05.2013 19:09:15	stdin: &#039;edition&#039;<br>10.05.2013 19:09:15	stderr: &#039;monodroid: error XA9999: Invalid license.  Please reactivate Xamarin.Android&#039;<br>10.05.2013 19:09:15	stdout: &#039;OK Completed&#039;<br>10.05.2013 19:09:15	stdin: &#039;edition&#039;<br>10.05.2013 19:09:15	stderr: &#039;monodroid: error XA9999: Invalid license.  Please reactivate Xamarin.Android&#039;<br>10.05.2013 19:09:15	stdout: &#039;OK Completed&#039;<br><br>Вот сейчас я нахожусь на этом этапе. Для желающих поиграть со сборочками <noindex><a href="http://my.filechum.com/Jf0258nnPkhX8EF/mandroid-win.zip" rel="nofollow" target="_blank">вот они</a></noindex>.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324550&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=16" class="addthx" data-post="324550"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 19:46 &middot; Поправил: andrique <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
Дальнейшие действия. В mandroid-win.exe есть класс <b>Xamarin.Licensing.PlatformActivation</b>, который, видимо, все и делает. Для начала я намереваюсь внести в ассемблерный (IL) код изменения - все модификаторы доступа заменить на public! Ха ха!. Напишу прогу, добавлю ссылку на сборку mandroid-win.exe, и буду вызывать метода этого класса, смотреть что он делает, придется отлаживать ассемблерный код, ну ничего, разберусь. Превратить его в код на C# не получится, по указанным выше причинам <img src="img/smilies/s4.gif" alt="">.<br><br>Для студии есть приблуда, чтобы смотреть содержимое стека, и проч, проч. У меня она есть, но не помню как называется. Если кто вспомнит, напишите, а то у меня куча софта и искать заипёшьсё. Дальше - написать класс, эмулирующий Xamarin.Licensing.PlatformActivation, с заглушками вместо реального кода. Типа, активация прошла, все свои.<br><br>Вторая идея заключается в том, чтобы, используя методы Xamarin.Licensing.PlatformActivation, сгенерить правильную лицуху и Entitlements, чтобы даже честный мандроид считал чт все ОК, и работал, работал... То есть, сделать, по типу, кейген.<br><br>Приглашаю всех поучаствовать в этом мероприятии. Артифакты буду выкладывать, чтобы все могли поиграть. В конце концов, если не получится, то всегда есть патч - <noindex><a href="http://thepiratebay.sx/torrent/8401638/Xamarin_s_Mono_for_Android_iOS_v4.6.4_Windows_Patcher" rel="nofollow" target="_blank">здесь</a></noindex>. Он работает, но увы - только для одной своей версии. Для новых версий, я думаю, будут новые патчи, но хочется сделать основательно.<br><br>Итак, план - сделать кейген. Это будет достойный ответ на сволочную цену в две тысячи баков. ВПЕРЕД!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324551&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=17" class="addthx" data-post="324551"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]SaNX[/b]','')">SaNX</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 456.3 (мудрец), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.03'>Активность: 0.28<span style='color:red'>&searr;</span>0.02</span><br>Статус: <a href="action=userinfo&amp;user=2108">Участник</a><br><font color=blue>Android Reverser</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 21:32 <br><script type="text/javascript">QU('SaNX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SaNX" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
Выкладывай Mono.Security.dll, ставить все это говно не охото.
<br><br><font size="1"><i>-----<br>SaNX</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324555&amp;user=2108&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=18" class="addthx" data-post="324555"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 мая 2013 23:48 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
<I>SaNX пишет:<br>Выкладывай Mono.Security.dll, ставить все это говно не охото.  </I><br><br>Ну я же уже выложил, смотри текст выше &quot;Для желающих поиграть со сборочками&quot; и дальше сразу линк на архив!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324560&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=19" class="addthx" data-post="324560"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]SaNX[/b]','')">SaNX</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 456.3 (мудрец), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.03'>Активность: 0.28<span style='color:red'>&searr;</span>0.02</span><br>Статус: <a href="action=userinfo&amp;user=2108">Участник</a><br><font color=blue>Android Reverser</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 мая 2013 00:07 &middot; Поправил: SaNX <br><script type="text/javascript">QU('SaNX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SaNX" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
Ну, кейгена не выйдет, там RSA, паблик грузится из сертификата (ищи где-то в дистрибе) и проверяется подпись+хеши для <br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>public</b></span>&nbsp;static&nbsp;<span class="hl_function"><b>void</b></span>&nbsp;VerifyLicense<span class="hl_char">(</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;License&nbsp;license&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>null</b></span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>File<span class="hl_char">.</span>Exists<span class="hl_char">(</span>TrialPath<span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;license&nbsp;<span class="hl_char">=</span>&nbsp;LoadLicense<span class="hl_char">(</span>TrialPath<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">!</span>IsTrial<span class="hl_char">(</span>license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ProductId<span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object<span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;args&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;object<span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;{&nbsp;<span class="hl_quote">&quot;Xamarin.Android&quot;</span>&nbsp;}<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diagnostic<span class="hl_char">.</span>Error<span class="hl_char">(</span>0x233c<span class="hl_char">,</span>&nbsp;<span class="hl_quote">&quot;Invalid license. Please reactivate {0}.&quot;</span><span class="hl_char">,</span>&nbsp;args<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;level&nbsp;<span class="hl_char">=</span>&nbsp;LicenseType<span class="hl_char">.</span>Trial<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires&nbsp;<span class="hl_char">=</span>&nbsp;license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ExpirationDate<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>expires&nbsp;<span class="hl_char">&lt;</span>&nbsp;DateTime<span class="hl_char">.</span>Now<span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diagnostic<span class="hl_char">.</span>Error<span class="hl_char">(</span>0x2329<span class="hl_char">,</span>&nbsp;<span class="hl_quote">&quot;Trial period has expired.&quot;</span><span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;object<span class="hl_char">[</span><span class="hl_number">0</span><span class="hl_char">]</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>else</b></span>&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>File<span class="hl_char">.</span>Exists<span class="hl_char">(</span>LicensePath<span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;license&nbsp;<span class="hl_char">=</span>&nbsp;LoadLicense<span class="hl_char">(</span>LicensePath<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ProductId&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;ProductId<span class="hl_char">.</span><span class="hl_function">None</span><span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;level&nbsp;<span class="hl_char">=</span>&nbsp;LicenseType<span class="hl_char">.</span>Priority<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ProductVersion&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DateTime&nbsp;time&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;DateTime<span class="hl_char">(</span>0x7dd<span class="hl_char">,</span>&nbsp;<span class="hl_number">7</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">20</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ExpirationDate&nbsp;<span class="hl_char">&gt;</span>&nbsp;time<span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ExpirationDate&nbsp;<span class="hl_char">=</span>&nbsp;time<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>else</b></span>&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>IsTrial<span class="hl_char">(</span>license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ProductId<span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object<span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;objArray2&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;object<span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;{&nbsp;<span class="hl_quote">&quot;Xamarin.Android&quot;</span>&nbsp;}<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diagnostic<span class="hl_char">.</span>Error<span class="hl_char">(</span>0x233a<span class="hl_char">,</span>&nbsp;<span class="hl_quote">&quot;Invalid license. Please reactivate {0}.&quot;</span><span class="hl_char">,</span>&nbsp;objArray2<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">else</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;level&nbsp;<span class="hl_char">=</span>&nbsp;GetLicenseType<span class="hl_char">(</span>license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ProductId<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>level&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;LicenseType<span class="hl_char">.</span><span class="hl_function">None</span><span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object<span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;objArray3&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;object<span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;{&nbsp;<span class="hl_char">(</span><span class="hl_function">int</span><span class="hl_char">)</span>&nbsp;license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ProductId&nbsp;}<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diagnostic<span class="hl_char">.</span>Error<span class="hl_char">(</span>0x2332<span class="hl_char">,</span>&nbsp;<span class="hl_quote">&quot;License type could not be verified ({0}). Please contact support@xamarin.com&quot;</span><span class="hl_char">,</span>&nbsp;objArray3<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires&nbsp;<span class="hl_char">=</span>&nbsp;license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ExpirationDate<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>expires<span class="hl_char">.</span>Ticks&nbsp;<span class="hl_char">&lt;</span>&nbsp;BuildStamp<span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object<span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;objArray4&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;object<span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;{&nbsp;expires&nbsp;}<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diagnostic<span class="hl_char">.</span>Error<span class="hl_char">(</span>0x2328<span class="hl_char">,</span>&nbsp;<span class="hl_quote">&quot;This version was released after your subscription expired ({0}).&quot;</span><span class="hl_char">,</span>&nbsp;objArray4<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">else</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;level&nbsp;<span class="hl_char">=</span>&nbsp;LicenseType<span class="hl_char">.</span>Starter<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>StarterCutoffDate&nbsp;<span class="hl_char">&lt;</span>&nbsp;DateTime<span class="hl_char">.</span>UtcNow<span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diagnostic<span class="hl_char">.</span>Error<span class="hl_char">(</span>0x233b<span class="hl_char">,</span>&nbsp;<span class="hl_quote">&quot;Please contact support to receive an update. Thanks!&quot;</span><span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;object<span class="hl_char">[</span><span class="hl_number">0</span><span class="hl_char">]</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>license&nbsp;<span class="hl_char">!</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">null</span><span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;flag&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>false</b></span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;<span class="hl_function"><b>str</b></span>&nbsp;<span class="hl_char">=</span>&nbsp;WinNetworkInterfaces<span class="hl_char">.</span>B<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;<span class="hl_char">(</span>string&nbsp;str2&nbsp;<span class="hl_function"><b>in</b></span>&nbsp;WinNetworkInterfaces<span class="hl_char">.</span>A<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>CheckHashes<span class="hl_char">(</span>license<span class="hl_char">,</span>&nbsp;<span class="hl_function">str</span><span class="hl_char">,</span>&nbsp;str2<span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>true</b></span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>break</b></span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">!</span>flag<span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diagnostic<span class="hl_char">.</span>Error<span class="hl_char">(</span>0x233d<span class="hl_char">,</span>&nbsp;<span class="hl_quote">&quot;Invalid license. Please reactivate Xamarin.Android&quot;</span><span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;object<span class="hl_char">[</span><span class="hl_number">0</span><span class="hl_char">]</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>license<span class="hl_char">.</span>UserData<span class="hl_char">.</span>ProductVersion&nbsp;<span class="hl_char">&lt;</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diagnostic<span class="hl_char">.</span>Error<span class="hl_char">(</span>0x233f<span class="hl_char">,</span>&nbsp;<span class="hl_quote">&quot;Invalid license. Please reactivate Xamarin.Android&quot;</span><span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;object<span class="hl_char">[</span><span class="hl_number">0</span><span class="hl_char">]</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">}</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">internal&nbsp;static&nbsp;string&nbsp;B<span class="hl_char">(</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;num<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;UnsafeNativeMethods<span class="hl_char">.</span>GetVolumeInformation<span class="hl_char">(</span><span class="hl_quote">@&quot;C:&quot;</span><span class="hl_char">,</span>&nbsp;IntPtr<span class="hl_char">.</span>Zero<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>out</b></span>&nbsp;num<span class="hl_char">,</span>&nbsp;IntPtr<span class="hl_char">.</span>Zero<span class="hl_char">,</span>&nbsp;IntPtr<span class="hl_char">.</span>Zero<span class="hl_char">,</span>&nbsp;IntPtr<span class="hl_char">.</span>Zero<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;string<span class="hl_char">.</span><span class="hl_function">Format</span><span class="hl_char">(</span><span class="hl_quote">&quot;{0:x}&quot;</span><span class="hl_char">,</span>&nbsp;num<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">internal&nbsp;static&nbsp;string<span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;A<span class="hl_char">(</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;List<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span>&nbsp;networkInterfaces&nbsp;<span class="hl_char">=</span>&nbsp;GetNetworkInterfaces<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache0&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">null</span><span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache0&nbsp;<span class="hl_char">=</span>&nbsp;t&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;t<span class="hl_char">.</span>Description<span class="hl_char">.</span>IndexOf<span class="hl_char">(</span><span class="hl_quote">&quot;usb&quot;</span><span class="hl_char">,</span>&nbsp;StringComparison<span class="hl_char">.</span>OrdinalIgnoreCase<span class="hl_char">)</span>&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;List<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span>&nbsp;second&nbsp;<span class="hl_char">=</span>&nbsp;Extract<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span><span class="hl_char">(</span>networkInterfaces<span class="hl_char">,</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache0<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache1&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">null</span><span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache1&nbsp;<span class="hl_char">=</span>&nbsp;t&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;t<span class="hl_char">.</span>Description<span class="hl_char">.</span>IndexOf<span class="hl_char">(</span><span class="hl_quote">&quot;virtual&quot;</span><span class="hl_char">,</span>&nbsp;StringComparison<span class="hl_char">.</span>OrdinalIgnoreCase<span class="hl_char">)</span>&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;List<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span>&nbsp;list3&nbsp;<span class="hl_char">=</span>&nbsp;Extract<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span><span class="hl_char">(</span>networkInterfaces<span class="hl_char">,</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache1<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache2&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">null</span><span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache2&nbsp;<span class="hl_char">=</span>&nbsp;t&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;t<span class="hl_char">.</span>FriendlyName<span class="hl_char">.</span>IndexOf<span class="hl_char">(</span><span class="hl_quote">&quot;local&quot;</span><span class="hl_char">,</span>&nbsp;StringComparison<span class="hl_char">.</span>OrdinalIgnoreCase<span class="hl_char">)</span>&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;List<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span>&nbsp;first&nbsp;<span class="hl_char">=</span>&nbsp;Extract<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span><span class="hl_char">(</span>networkInterfaces<span class="hl_char">,</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache2<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache3&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">null</span><span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache3&nbsp;<span class="hl_char">=</span>&nbsp;t&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;t<span class="hl_char">.</span>FriendlyName<span class="hl_char">.</span>IndexOf<span class="hl_char">(</span><span class="hl_quote">&quot;wireless&quot;</span><span class="hl_char">,</span>&nbsp;StringComparison<span class="hl_char">.</span>OrdinalIgnoreCase<span class="hl_char">)</span>&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;List<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span>&nbsp;list5&nbsp;<span class="hl_char">=</span>&nbsp;Extract<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span><span class="hl_char">(</span>networkInterfaces<span class="hl_char">,</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache3<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache4&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">null</span><span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache4&nbsp;<span class="hl_char">=</span>&nbsp;t&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_char">(</span>t<span class="hl_char">.</span>Description<span class="hl_char">.</span>IndexOf<span class="hl_char">(</span><span class="hl_quote">&quot;bluetooth&quot;</span><span class="hl_char">,</span>&nbsp;StringComparison<span class="hl_char">.</span>OrdinalIgnoreCase<span class="hl_char">)</span>&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">|</span><span class="hl_char">|</span>&nbsp;<span class="hl_char">(</span>t<span class="hl_char">.</span>FriendlyName<span class="hl_char">.</span>IndexOf<span class="hl_char">(</span><span class="hl_quote">&quot;bluetooth&quot;</span><span class="hl_char">,</span>&nbsp;StringComparison<span class="hl_char">.</span>OrdinalIgnoreCase<span class="hl_char">)</span>&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;List<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span>&nbsp;list6&nbsp;<span class="hl_char">=</span>&nbsp;Extract<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span><span class="hl_char">(</span>networkInterfaces<span class="hl_char">,</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache4<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;List<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span>&nbsp;list7&nbsp;<span class="hl_char">=</span>&nbsp;networkInterfaces<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache5&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_function">null</span><span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache5&nbsp;<span class="hl_char">=</span>&nbsp;t&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;t<span class="hl_char">.</span>MacAddress<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;first<span class="hl_char">.</span>Concat<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span><span class="hl_char">(</span>list7<span class="hl_char">)</span><span class="hl_char">.</span>Concat<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span><span class="hl_char">(</span>list5<span class="hl_char">)</span><span class="hl_char">.</span>Concat<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span><span class="hl_char">(</span>list6<span class="hl_char">)</span><span class="hl_char">.</span>Concat<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span><span class="hl_char">(</span>second<span class="hl_char">)</span><span class="hl_char">.</span>Concat<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">&gt;</span><span class="hl_char">(</span>list3<span class="hl_char">)</span><span class="hl_char">.</span>Select<span class="hl_char">&lt;</span>WinNetworkInterfaceInfo<span class="hl_char">,</span>&nbsp;string<span class="hl_char">&gt;</span><span class="hl_char">(</span><span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>f__am<span class="hl_char">$</span>cache5<span class="hl_char">)</span><span class="hl_char">.</span>ToArray<span class="hl_char">&lt;</span>string<span class="hl_char">&gt;</span><span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">}</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;</li>        </ol>
    </div>
</div></div>
<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>public</b></span>&nbsp;class&nbsp;License</li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Fields</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<span class="hl_function"><b>const</b></span>&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;HASHES_LENGTH&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">60</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;UserData&nbsp;user_data<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Methods</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;License<span class="hl_char">(</span>UserData&nbsp;user<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;static&nbsp;License&nbsp;LoadFromBytes<span class="hl_char">(</span>Crypto&nbsp;crypto<span class="hl_char">,</span>&nbsp;<span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;bytes<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;static&nbsp;License&nbsp;LoadFromFile<span class="hl_char">(</span>Crypto&nbsp;crypto<span class="hl_char">,</span>&nbsp;string&nbsp;filename<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Properties</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;UserData&nbsp;UserData&nbsp;{&nbsp;get<span class="hl_comment">; }</span></li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>public</b></span>&nbsp;class&nbsp;UserData</li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Fields</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;string&nbsp;Field1<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;string&nbsp;Field2<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;<span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;H1<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;<span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;H2<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;<span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;H3<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Methods</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;UserData<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;UserData<span class="hl_char">(</span>UserData&nbsp;from<span class="hl_char">,</span>&nbsp;bool&nbsp;keep_extras<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;<span class="hl_function"><b>void</b></span>&nbsp;Deserialize<span class="hl_char">(</span><span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;bytes<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;static&nbsp;UserData&nbsp;FromBytes<span class="hl_char">(</span><span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;bytes<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;<span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;Serialize<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;static&nbsp;<span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;ToBytes<span class="hl_char">(</span>UserData&nbsp;user_data<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;override&nbsp;string&nbsp;ToString<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Properties</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;string&nbsp;ActivationCode&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;string&nbsp;Company&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;string&nbsp;DataFile&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;string&nbsp;Email&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;DateTime&nbsp;ExpirationDate&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;string&nbsp;Name&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;string&nbsp;Opaque&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;string&nbsp;Phone&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;ProductId&nbsp;ProductId&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;ProductVersion&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;string&nbsp;UpgradeCode&nbsp;{&nbsp;get<span class="hl_comment">; set; }</span></li><li class="hl_l0">}</li>        </ol>
    </div>
</div></div>
<br>Хотя, если подменить сертификат, можно генерить ключи <img src="img/smilies/s1.gif" alt=""><br><br>юзердата пошифровано  Rijndael.
<br><br><font size="1"><i>-----<br>SaNX</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324561&amp;user=2108&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=20" class="addthx" data-post="324561"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 мая 2013 01:00 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
Я пока рассказываю свой прогресс. Итак, я дизассемблировал mandroid-win.exe, получил код на IL. Теперь мне надо было сделать свою версию класса PlatformActivation.<br><br>Для этого я сделал отдельный проект, назвал его mandroid-win-emulation. И перетащил в него этот самый класс, и все остальное, что для него нужно. Соответственно все неймспейсы там были такие же, и результирующий код на IL можно было радостно вставлять в большой ассемблерный файл вместо изначального класса.<br><br>Вот, собсн, артефакты:<br><br><noindex><a href="http://my.filechum.com/QUr1EL01Ll92RbX/mandroid-win-emulation.zip" rel="nofollow" target="_blank">Проект mandroid-win-emulation</a></noindex>. Как сказано выше, его назначение - порождать взломанную версию класса PlatformActivation. После компиляции этот проект дизассемблируется ILDASM&#039;ом, после чего оттуда вынимается код и вставляется в большой код самого mandroid-win.exe. Последний компилится ILASM&#039;ом, после чего копируется в директорию MSBUILD. Я его копирую в файл mandroid-xamarin.exe, а вместо mandroid.exe, который в конечном счете и зовется, использую свою прокси-программу (см. выше). Таким образом, я вижу в файле лога, в который я все пишу, весь обмен - команды и ответы.<br><br>Все файлы для сборки ломаной версии оригинального mandroid-win.exe лежит <noindex><a href="http://my.filechum.com/G0QbP4oYUAyBdx9/mandroid-win-develop.zip" rel="nofollow" target="_blank">здесь</a></noindex>.<br><br>И вот что получается в результате: я выложил <noindex><a href="http://my.filechum.com/9Tut5AkMD6bF1O0/mandroid.exe.log" rel="nofollow" target="_blank">лог-файл</a></noindex>, который показывает обмен с манроидом. Как видно, сначала все идет хорошо, от отвечает, что активирован, и Entitlements он выдает правильные. Но! В конце концов, после последней команды &quot;create-package -v --nosign ...&quot; он не отвечает &quot;OK Completed&quot;, а где-то зависает <img src="img/smilies/s16.gif" alt=""><br><br>На этом на сегодня мой мозг отказывается работать... целый день сижу с этой херней. Тлять! Почти все сделано. Да, кстати, когда я запускаю мандроид-вин без прокси-программы, ничего не меняется <img src="img/smilies/s4.gif" alt=""> то есть дело не в ней.<br><br>Ребята, может кто глянет? Где-то что-то я упустил. Еще выкладываю проект mandroid-win, это версия, которая была получена рефлектором, и немного причесана, чтобы компилилась. Запускать ее я не советую, ничего хорошего не выйдет. Она просто для информации. Рекомендую посмотреть отличия класса PlatformActivation в моем эмуляторе и в ней. Вот <noindex><a href="http://my.filechum.com/nH5QvlkTL8bg6D5/mandroid-win-reflected.zip" rel="nofollow" target="_blank">этот проект</a></noindex>.<br><br>Ну, надеюсь на вас, коллеги. А нет - ну опять придется самому. Мне не привыкать <img src="img/smilies/s1.gif" alt=""> <img src="img/smilies/s2.gif" alt=""> <img src="img/smilies/s3.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324562&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=21" class="addthx" data-post="324562"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 мая 2013 01:37 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
Ура, тля!!! Разобрался в чем причина зависания!!! Мой mandroid-win.exe, переменованый в<br>mandroid-xamarin.exe, ПРОСТО, ТУПО! ЭЛЕМЕНТАРНО - ПААДААЕТ!!! ха ха ха ха<img src="img/smilies/s5.gif" alt=""> <img src="img/smilies/s5.gif" alt=""> <img src="img/smilies/s5.gif" alt=""><br><br>Я сотрю - бл, процесса-то нет! И процесс монитор показывает выход процесса, и в системном журнале написано, что приложение упало.<br><br>Теперь поставлю обработчик необработанных исключений, и найду причину!!!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324563&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=22" class="addthx" data-post="324563"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 мая 2013 02:07 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
Народ, произошло что-то странное!!!<br><br>Я добавил такой код:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppDomain</span><span class="hl_char">.</span>CurrentDomain<span class="hl_char">.</span>UnhandledException&nbsp;<span class="hl_char">+</span><span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;UnhandledExceptionEventHandler<span class="hl_char">(</span>CurrentDomain_UnhandledException<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>и такой:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;string&nbsp;GetFullExceptionMessage</span><span class="hl_char">(</span>Exception&nbsp;source<span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;message&nbsp;</span><span class="hl_char">=</span>&nbsp;string<span class="hl_char">.</span>Empty<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exception&nbsp;current&nbsp;</span><span class="hl_char">=</span>&nbsp;source<span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>null</b></span>&nbsp;<span class="hl_char">!</span><span class="hl_char">=</span>&nbsp;current<span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">!</span>string<span class="hl_char">.</span>IsNullOrEmpty<span class="hl_char">(</span>message<span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;</span><span class="hl_char">+</span><span class="hl_char">=</span>&nbsp;<span class="hl_quote">&quot;: &quot;</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;</span><span class="hl_char">+</span><span class="hl_char">=</span>&nbsp;current<span class="hl_char">.</span>Message<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;</span><span class="hl_char">=</span>&nbsp;current<span class="hl_char">.</span>InnerException<span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;message</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;string&nbsp;GetFullExceptionStack</span><span class="hl_char">(</span>Exception&nbsp;source<span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;message&nbsp;</span><span class="hl_char">=</span>&nbsp;string<span class="hl_char">.</span>Empty<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exception&nbsp;current&nbsp;</span><span class="hl_char">=</span>&nbsp;source<span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>null</b></span>&nbsp;<span class="hl_char">!</span><span class="hl_char">=</span>&nbsp;current<span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">!</span>string<span class="hl_char">.</span>IsNullOrEmpty<span class="hl_char">(</span>message<span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;</span><span class="hl_char">+</span><span class="hl_char">=</span>&nbsp;Environment<span class="hl_char">.</span>NewLine<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;</span><span class="hl_char">+</span><span class="hl_char">=</span>&nbsp;current<span class="hl_char">.</span>StackTrace<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;</span><span class="hl_char">=</span>&nbsp;current<span class="hl_char">.</span>InnerException<span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;message</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;<span class="hl_function"><b>void</b></span>&nbsp;CurrentDomain_UnhandledException<span class="hl_char">(</span>object&nbsp;sender<span class="hl_char">,</span>&nbsp;UnhandledExceptionEventArgs&nbsp;e<span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;</span><span class="hl_char">(</span>var&nbsp;writer&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;StreamWriter<span class="hl_char">(</span><span class="hl_quote">@&quot;C:\mandroid-win.exception.log&quot;</span><span class="hl_char">,</span>&nbsp;<span class="hl_function">false</span><span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer</span><span class="hl_char">.</span>WriteLine<span class="hl_char">(</span>GetFullExceptionMessage<span class="hl_char">(</span><span class="hl_char">(</span>Exception<span class="hl_char">)</span>e<span class="hl_char">.</span>ExceptionObject<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer</span><span class="hl_char">.</span>WriteLine<span class="hl_char">(</span>GetFullExceptionStack<span class="hl_char">(</span><span class="hl_char">(</span>Exception<span class="hl_char">)</span>e<span class="hl_char">.</span>ExceptionObject<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;</li>        </ol>
    </div>
</div></div>
<br><br>предполагалось, что  он сообщит об исключении, запишет то есть в лог, и упадет как обычно. Но нет! Он просто начал работать!! На команду create-package ответил ОК, построил и запустил прогу на эмуляторе. При этом никаких вопросов о лицензии!!!<br><br><b>УРА !! ПОЛУЧИЛОСЬ!! ПРАВДА ПОКА НЕ ЗНАЮ КАК!!!</b><br><br>Завтра разберусь!!! <br><br>Поздравьте меня, что ли!!!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324564&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=23" class="addthx" data-post="324564"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=2777" title="11-05-2013 17:31, ранг:427.9" target="_blank">daFix</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]4kusNick[/b]','')">4kusNick</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1931.jpg" alt=""><br><span class=txtSm>Ранг: 748.2 <font color=magenta>(<b>! !</b>)</font>, 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.1'>Активность: 0.37<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1931">Участник</a><br><font color=blue>bytecode!</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 мая 2013 12:17 &middot; Поправил: 4kusNick <br><script type="text/javascript">QU('4kusNick','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=4kusNick" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
Поздравляю! Всегда приятно видеть когда человек решается нырнуть в пучину неизведанного и сам во всем разбирается. Сразу молодость вспоминается <img src="img/smilies/s1.gif" alt=""><br><br><I><br>Гы гы... молодость?? А мне междупроч 45 лет какбэ</I><br>Ну да, моя же молодость вспоминается, а не ваша <img src="img/smilies/s6.gif" alt="">
<br><br><font size="1"><i>-----<br>Флэш, ява, дотнет - на завтрак, обед и ужин. Unity3D на закуску.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324565&amp;user=1931&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=24" class="addthx" data-post="324565"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 мая 2013 21:11 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#25');return false;">#25</a> </span><div align=left><br>
<I>4kusNick пишет:<br>Сразу молодость вспоминается   </I><br><br>Гы гы... молодость?? А мне междупроч 45 лет какбэ <img src="img/smilies/s5.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324579&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=25" class="addthx" data-post="324579"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2013 00:43 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#26');return false;">#26</a> </span><div align=left><br>
<I>4kusNick пишет:<br>Ну да, моя же молодость вспоминается, а не ваша  </I><br><br>Я имел ввиду, что чтобы &quot;нырнуть в пучину&quot; и разобраться, необязательно быть молодым (по возрасту). Я и в молодости такой был, и сейчас такой )))
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324590&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=26" class="addthx" data-post="324590"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2013 00:45 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#27');return false;">#27</a> </span><div align=left><br>
<I>andrique пишет:<br>Для студии есть приблуда, чтобы смотреть содержимое стека, и проч, проч. У меня она есть, но не помню как называется </I><br><br>Вспомнил! Эта хня наз. SOS.DLL, живет в папке фреймворка.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324591&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=27" class="addthx" data-post="324591"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2013 00:55 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#28');return false;">#28</a> </span><div align=left><br>
<I>SaNX пишет:<br>А не проще сделать поиск по сигнатурам и патчить, как патчили на хабре (ну или где там)? Я, когда заморочился, быстро нашел нужные места и пропатчил.  </I><br><br>Не пояснишь мысль? Чт ткъ &quot;поиск по сигнатурам&quot;? Ну то есть что такое поиск, понятно <img src="img/smilies/s5.gif" alt=""> <img src="img/smilies/s5.gif" alt=""> А по каким сигнатурам? То есть я совершенно не понял, что за процесс ты описал в этих трех словах?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324592&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=28" class="addthx" data-post="324592"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2013 01:21 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#29');return false;">#29</a> </span><div align=left><br>
<I>ELF_7719116 пишет:<br>Запасаемся попкорном.  </I><br><br>Ну чт, попкорн-то весь слопали? <img src="img/smilies/s3.gif" alt=""> <img src="img/smilies/s5.gif" alt=""><br><br>Хочется услышать единомышленников. Особенно на тему все-таки кейгена. Я так понимаю, что блоб лицензии на стороне клиента нигде не генерируется, и нет кода, чтобы этот алгоритм воспроизвести?<br><br>Спрашиваю потому, что сам еще не разбирался.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324593&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=29" class="addthx" data-post="324593"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="30" onfocus="this.blur()" href="JavaScript:di('[b]andrique[/b]','')">andrique</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.9 (гость), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.18'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=34788">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2013 01:48 <br><script type="text/javascript">QU('andrique','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=andrique" target="_blank">Личное сообщение</a> &middot;  <a href="#30" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=21734&amp;page=0#30');return false;">#30</a> </span><div align=left><br>
Так, коллеги. К вопросу о кейгене.<br><br>Рассмотрим следующий код:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;crypto&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;Crypto<span class="hl_char">(</span>Certificates<span class="hl_char">.</span>Server<span class="hl_char">,</span>&nbsp;Certificates<span class="hl_char">.</span>Client<span class="hl_char">,</span>&nbsp;<span class="hl_function">null</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;path&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_quote">@&quot;C:\home\dev\unlicense\xamarin\trunk\programdata\License\monoandroid.trial.licx&quot;</span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;tlic&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;<span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_number">791</span><span class="hl_char">]</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;</span><span class="hl_char">(</span>var&nbsp;rdr&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>new</b></span>&nbsp;BinaryReader<span class="hl_char">(</span>File<span class="hl_char">.</span>Open<span class="hl_char">(</span>path<span class="hl_char">,</span>&nbsp;FileMode<span class="hl_char">.</span>Open<span class="hl_char">,</span>&nbsp;FileAccess<span class="hl_char">.</span>Read<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rdr</span><span class="hl_char">.</span>Read<span class="hl_char">(</span>tlic<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">791</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;l&nbsp;</span><span class="hl_char">=</span>&nbsp;License<span class="hl_char">.</span>LoadFromBytes<span class="hl_char">(</span>crypto<span class="hl_char">,</span>&nbsp;tlic<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>Данный код выдает правильную лицензию, которая была мне и выдана Xamarin&#039;ом. Все это наводит на мысль, что раз у нас есть сертификаты - клиентский, и серверный, можно попробовать эту самую лицензию новую сделать и зашифровать и будет счастье.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324594&amp;user=34788&amp;forum_n=2&amp;topic=21734&amp;page=0&amp;anchor=30" class="addthx" data-post="324594"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=2&amp;topic=21734&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=2&amp;topic=21734&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/red.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=2&sortBy=0&page=0.html"><b>Крэки, обсуждения</b></a> <b class=bulletHead>&#8212;&#8250;</b> Исследование защиты Xamarin Mono/Android</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#31" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="2">
<input type="hidden" name="topic" value="21734">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=21734" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
