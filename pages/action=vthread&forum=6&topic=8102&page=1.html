<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Передача параметров функцией на асме - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Вопрос возник такой.. Есть ф-ия. Она возвращает результат (это число) допустим в EAX. При ошибке (я не имею ввиду битые указатели или прочие exeption - для этого есть SEH) ф-ия должна сообщить об этом нулем в регистре. Но в EAX">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=39467'>hgdagon</a>, <a target='_blank' href='?action=userinfo&amp;user=28016'>asfa</a> (+4 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Передача параметров функцией на асме</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=6&amp;topic=8102&amp;page=0.html">&lt;&lt;</a> .  <a href="action=vthread&amp;forum=6&amp;topic=8102&amp;page=0.html">1</a> . <b>2</b> .</b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 02:22 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#1');return false;">#1</a> </span><div align=left><br>
Вопрос возник такой.. Есть ф-ия. Она возвращает результат (это число) допустим в EAX. При ошибке (я не имею ввиду битые указатели или прочие exeption - для этого есть SEH) ф-ия должна сообщить об этом нулем в регистре. Но в EAX может быть 0 и без ошибки! Т.е. результат обработки может быть равен 00h. Как быть? Есть пока 2 решения:<br>1. В EAX результат, в другом регистре 0 или не 0 для контроля ошибки.<br>(Но вызов твкой ф-ии выглядит не красиво. Хотелось бы использовать только 1 регистр)<br>2. Результат помещается в память. В EAX указатель или 0 при ошибке.<br>(Результат помещается в память ф-ей, а программисту это может и не надо. Придется ему обратно из памяти в регистр пересылать. Оптимизацией не пахнет!).<br>Так вот. Можно ли использовать для контроля ошибок ФЛАГИ! Я сам в принципе не встречал таких ф-ий. Но тогда почему? Ведь команды ret и pop не влияют на состояние флагов!<br>Зато как красиво бы было:<br>&gt; call  fMyFunction<br>&gt; jnz   lError<br>&gt; результат в EAX<br>Заранее спасибо за помощь начинающему <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=125943&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=1" class="addthx" data-post="125943"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]drunk_master[/b]','')">drunk_master</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 29.2 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.4'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=9998">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 марта 2007 15:39 <br><script type="text/javascript">QU('drunk_master','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=drunk_master" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#2');return false;">#2</a> </span><div align=left><br>
там нафиг целых четыре регистра общего назначенич, а на return value<br>использовать только один = ну и что ето за опти...<br>...кстати есть fastcall, так что парамы не только в стеке передаются, <br>для процессора это самый оптимальный вариант= использовать регистры,<br>так же и вернуть можно не в одном регистре , а в стольки, в скольки <br>ТЕБЕ НАДО, ето веть АСМ...<br>...кстати можно не только флаги дергать, есть еще ХММ и ММХ...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126635&amp;user=9998&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=2" class="addthx" data-post="126635"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 марта 2007 23:26 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#3');return false;">#3</a> </span><div align=left><br>
<I>drunk_master пишет:<br>там нафиг целых четыре регистра общего назначенич </I><br>Никто не спорит. Но тогда придется регистры сохранять перед вызовом твоей ф-ии.<br><I>X_MEM пишет:<br>&gt; call fMyFunction <br>&gt; jnz lError <br>&gt; результат в EAX<br>Разве так оно не красивее?<br>[i]drunk_master пишет:<br>для процессора это самый оптимальный вариант= использовать регистры </I><br>А мы что и делаем! Используем РЕГИСТР флагов..
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126659&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=3" class="addthx" data-post="126659"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]tundra37[/b]','')">tundra37</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 310.8 (мудрец), 29thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.32'>Активность: 0.43<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4072">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 марта 2007 06:53 <br><script type="text/javascript">QU('tundra37','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tundra37" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#4');return false;">#4</a> </span><div align=left><br>
Действительно довольно общий стандарт - использование флага переполнения, т.к. на некоторых процах кроме аккумулятора других регистров нет. Для Интела расширенный стандарт - регистр EDX. ECX - это для циклов и EBX - регистр индексов...  Дельфи тот действительно сначала использует регистры и только потом память - горе-оптимизаторы. А юзеры мучатся  <img src="img/smilies/s10.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126716&amp;user=4072&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=4" class="addthx" data-post="126716"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]drunk_master[/b]','')">drunk_master</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 29.2 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.4'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=9998">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 марта 2007 03:27 <br><script type="text/javascript">QU('drunk_master','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=drunk_master" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#5');return false;">#5</a> </span><div align=left><br>
блин, Хэ_мэн, то ты заранее благодариш за помощь &quot;начинающеме&quot;, то чешешь как эксперт, я лет десять пишу только на асме, да и то растерялся, вобщем пиши как хочешь, а лучше, хотя бы раз, попробуй написать &quot;как все&quot; и рядом &quot;так как ты&quot; и сравни, и тогда вопрос почти отпадет на...<br>кстати, асм мощен до ох.. и ты можешь чудить как хо...<br>                                 благодарю за тему<br>                                 с уважением d_m
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126947&amp;user=9998&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=5" class="addthx" data-post="126947"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]-=The Bone=-[/b]','')">-=The Bone=-</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 5.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.35'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=10355">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 марта 2007 10:12 <br><script type="text/javascript">QU('-=The Bone=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=The Bone=-" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#6');return false;">#6</a> </span><div align=left><br>
<i class=x>To X_MEM</i><br><br>Попробуй еще в функцию передавать арес на переменную Result, в нее впихиваешь 0, если успех, и код ошибки, если ошибка (т.е. ERROR_OK=0 там, ERROR_INVALID_PARAMETER=1...). Так многие функции выньды делают
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126973&amp;user=10355&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=6" class="addthx" data-post="126973"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]S_T_A_S_[/b]','')">S_T_A_S_</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 163.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.87'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=251">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 марта 2007 11:29 <br><script type="text/javascript">QU('S_T_A_S_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=S_T_A_S_" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#7');return false;">#7</a> </span><div align=left><br>
<I>drunk_master пишет:<br>там нафиг целых четыре регистра общего назначенич, а на return value <br>использовать только один </I><br>На самом деле РОНов 8 штук (32х), а резльтат может возвращаться не только в eax:edx (с ключем /GL).<br><br><I>-=The Bone=- пишет:<br>Попробуй еще в функцию передавать арес на переменную Result, в нее впихиваешь 0, если успех [...]. Так многие функции выньды делают</I><br>Какие многие? Я навскидку вспомнил тока NdisXXX. Кстати, всегда было интересно, зачем так.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126979&amp;user=251&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=7" class="addthx" data-post="126979"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]drunk_master[/b]','')">drunk_master</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 29.2 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.4'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=9998">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 марта 2007 12:04 <br><script type="text/javascript">QU('drunk_master','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=drunk_master" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#8');return false;">#8</a> </span><div align=left><br>
[i]S_T_A_S_ пишет верно:<br>На самом деле РОНов 8 штук (32х), а резльтат может возвращаться не только в eax:edx (с ключем /GL).<br> ...регистров общего назначения 8, я немного некорректно выразился,<br>но при етом нерац использовать цепочечные si &amp; di a так же указатель стека и указатель БАЗЫ КАДРА стека для возврата результата или кода еррора, да хотя и так извратиться можно..<br>...я конечно имел ввиду ax,bx,cx,dx, их можно вовсю использовать и не греть лишний раз голову, кстати кто-то там назвал ебх регистром индекса, это неверно- это рег базы...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=127149&amp;user=9998&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=8" class="addthx" data-post="127149"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]-=The Bone=-[/b]','')">-=The Bone=-</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 5.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.35'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=10355">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 марта 2007 21:40 &middot; Поправил: -=The Bone=- <br><script type="text/javascript">QU('-=The Bone=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=The Bone=-" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#9');return false;">#9</a> </span><div align=left><br>
<I>To S_T_A_S_</I><br>WriteFile/ReadFile возвращают например кол-во считанных байт, эта... как ее... GetFileSize вообще хитро возвращает код ошибки. А затем, что в eax они могут вернуть 0 - ошибки и 0 - правильный результат, и в этом случае надо проверить возвращенное в переменной значение (где 0 - успех). Только мало кто в наши дни это делает(проверку).... <img src="img/smilies/s13.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=127258&amp;user=10355&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=9" class="addthx" data-post="127258"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]S_T_A_S_[/b]','')">S_T_A_S_</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 163.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.87'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=251">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 марта 2007 07:10 &middot; Поправил: S_T_A_S_ <br><script type="text/javascript">QU('S_T_A_S_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=S_T_A_S_" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#10');return false;">#10</a> </span><div align=left><br>
<I>drunk_master пишет:<br>нерац использовать цепочечные si &amp; di a так же указатель стека и указатель БАЗЫ КАДРА стека для возврата результата</I><br>Конечно нерационально юзать 16ти битные регистры в 32х битной винде <img src="img/smilies/s1.gif" alt=""> bp - это указатель базы тока в 16х режиме, в 32х стек можно адресовать через esp.<br><br><I>drunk_master пишет:<br>кто-то там назвал ебх регистром индекса, это неверно- это рег базы</I><br>В 32х битном режиме любой РОН может быть базой и (кроме esp) индексом.<br><br><I>-=The Bone=- пишет:<br>WriteFile/ReadFile возвращают например кол-во считанных байт</I><br>Это ведь не статус ошибки, который она возвращает в eax.<br><br><I>-=The Bone=- пишет:<br>GetFileSize вообще хитро возвращает код ошибки. </I><br>Доку почитай:<br>If the function fails [...] the return value is INVALID_FILE_SIZE
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=127303&amp;user=251&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=10" class="addthx" data-post="127303"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]-=The Bone=-[/b]','')">-=The Bone=-</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 5.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.35'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=10355">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 марта 2007 21:26 &middot; Поправил: -=The Bone=- <br><script type="text/javascript">QU('-=The Bone=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=The Bone=-" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#11');return false;">#11</a> </span><div align=left><br>
<I>S_T_A_S_ пишет:<br>-=The Bone=- пишет: <br>WriteFile/ReadFile возвращают например кол-во считанных байт <br>Это ведь не статус ошибки, который она возвращает в eax.</I><br><br>Какая разница, главное - принцип. Она могла бы возвращать кол-во прочитанных байт в eax, а статус ошибки - в памяти<br><br><br><I>Доку почитай: <br>If the function fails [...] the return value is INVALID_FILE_SIZE</I><br><br>If the function fails and <b>lpFileSizeHigh is NULL</b>, the return value <b>is 0xFFFFFFFF</b>. To get extended error information, call GetLastError. <br>If the function fails and <b>lpFileSizeHigh is non-NULL</b>, the return value <b>is 0xFFFFFFFF</b> and GetLastError will return a value other than NO_ERROR. (если ошибка, иначе NO_ERROR - размер файла = 4Гб - 1 байт<img src="img/smilies/s1.gif" alt=""> )
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=127440&amp;user=10355&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=11" class="addthx" data-post="127440"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]drunk_master[/b]','')">drunk_master</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 29.2 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.4'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=9998">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 марта 2007 14:46 <br><script type="text/javascript">QU('drunk_master','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=drunk_master" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#12');return false;">#12</a> </span><div align=left><br>
кажись х_мем забил давно на тему...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=127698&amp;user=9998&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=12" class="addthx" data-post="127698"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 марта 2007 19:04 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#13');return false;">#13</a> </span><div align=left><br>
<I>-=The Bone=- пишет:<br>кажись х_мем забил давно на тему... </I><br>вопрос конечно уже решился, но это не значит, что я &quot;забил&quot; на тему
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=127731&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=13" class="addthx" data-post="127731"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]-=The Bone=-[/b]','')">-=The Bone=-</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 5.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.35'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=10355">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 марта 2007 21:10 <br><script type="text/javascript">QU('-=The Bone=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=The Bone=-" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#14');return false;">#14</a> </span><div align=left><br>
<I>to X_MEM</I><br>Так закрой её, что флуд не разводился (жаль, нету тут тегов [offtopic] [/offtopic])
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=127745&amp;user=10355&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=14" class="addthx" data-post="127745"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]S_T_A_S_[/b]','')">S_T_A_S_</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 163.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.87'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=251">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 марта 2007 12:38 <br><script type="text/javascript">QU('S_T_A_S_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=S_T_A_S_" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=1#15');return false;">#15</a> </span><div align=left><br>
If the function fails and lpFileSizeHigh is NULL, the return value is 0xFFFFFFFF. To get extended error information, call GetLastError. <br>If the function fails and lpFileSizeHigh is non-NULL, the return value is 0xFFFFFFFF and GetLastError will return a value other than NO_ERROR<br><br>Тождественно следующему:<br>If the function fails<br>{<br>  the return value is 0xFFFFFFFF.<br><br>  If lpFileSizeHigh is NULL, To get extended error information, call GetLastError.<br>  If is non-NULL, GetLastError will return a value other than NO_ERROR.<br>}<br><br><I>-=The Bone=- пишет:<br>флуд не разводился </I><br>ИМХО у тебя проблемы с логикой. Из этих слов следует, что он разводится сам собой. Однако, очевидно, что его кто-то создаёт. ;)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=127808&amp;user=251&amp;forum_n=6&amp;topic=8102&amp;page=1&amp;anchor=15" class="addthx" data-post="127808"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=6&amp;topic=8102&amp;page=0.html">&lt;&lt;</a> .  <a href="action=vthread&amp;forum=6&amp;topic=8102&amp;page=0.html">1</a> . <b>2</b> .</b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Передача параметров функцией на асме</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=8102" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
