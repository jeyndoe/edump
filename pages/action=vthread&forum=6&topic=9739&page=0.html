<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Протокол передачи (Асинхронные сокеты + динамический буфер) - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Вообщем облазил я все, много чего прочитал и все фигня полная))) Да вот так! ... Сейчас у меня просто есть желание сделать хороший , многопоточный , с расширяемым буфером , хорошим парсингом , и возможностью отладки ПРОТОКОЛ">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=55995'>tyns777</a> (+5 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Протокол передачи (Асинхронные сокеты + динамический буфер)</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]mak[/b]','')">mak</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3520.jpg" alt=""><br><span class=txtSm>Ранг: 673.3 <font color=magenta>(<b>! !</b>)</font>, 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.48'>Активность: 0.4<span style='color:red'>&searr;</span>0.31</span><br>Статус: <a href="action=userinfo&amp;user=3520">Участник</a><br><font color=blue>CyberMonk</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 августа 2007 22:45 <br><script type="text/javascript">QU('mak','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mak" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=9739.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Вообщем облазил я все, много чего прочитал и все фигня полная))) Да вот так! ... Сейчас у меня просто есть желание сделать хороший , многопоточный , с расширяемым буфером , хорошим парсингом , и возможностью отладки ПРОТОКОЛ передачи данных на асме через ТСП ИП... Вот хочу начать сейчас ...и конечно прошу вашу критику , помощь , рецензии и посылы ))) хахаха да .... нет это не смешно я на полном серьезе, прочитал просто про дзен програмирования и буду пробовать (тож шучу) .... Честно сказть у меня нет большого опыта програмирования такого рода задач, поэтому все кого это интересует помогут. Тем более что многие говорят в сети нет хорошей информации по Асинхронным сокетам на Асме , Вы скажите проще сделать на Си , но Си я не знаю ( да да да Буду Учить но позже , извеняйте! ) , и надо на асмеа не на Си ! .... Так что такие дела Уважаемые Пупсы ..<br><br>Вообщем <br>вот, постепенно я буду выкладывать участки кода и то что хотелось бы там сделать <br><code>SOCKETCONN STRUCT<br>	hSock								SOCKET (0)<br>	sockRemoteAddr			sockaddr_in &lt;&gt;<br>	clientName						db CLIENT_NAME_SIZE dup (0)<br>	sockID							BYTE (0)<br>	sockState							BYTE (0)<br>	nextSocketConn				DWORD (0) ; LPSOCKETCONN<br>SOCKETCONN ENDS<br><br>;	achIOBuf						db RECVBUF_SIZE dup (0)<br><br>LPSOCKETCONN 			TYPEDEF PTR SOCKETCONN<br>SOCKETCONN_SIZE		equ SIZEOF SOCKETCONN<br><br>SENDPACKET STRUCT<br>	lpSockConn					LPSOCKETCONN (0)<br>	lpSendBuffer					DWORD (0)<br>	bufferSize						DWORD (0)<br>	bytesSent						DWORD (0)<br>	nextSendPacket				DWORD (0) ; LPSENDPACKET<br>SENDPACKET ENDS<br><br>LPSENDPACKET				TYPEDEF PTR SENDPACKET<br>SENDPACKET_SIZE		equ SIZEOF SENDPACKET<br>;MAX_SENDPACKETS	equ 32</code><br><br><br>Если сервер будет иметь много соединений ..хотя лучше ограничить их до скажем 12. Далее как я понимаю нужно как то обозначить наш пакет. Вот структура выше! ... <br>Как обращаться с ними я честно пока не знаю . Допустим я сформировал пакет на серваке и отправил его!!!<br><br>Но он большой!!! И пришел частями ...значит мне надо собирать все в динамически расширямый буфер, далее проверять есть ли целый пакет , если да , то Парсить его и далее  ... Как сделать это лучше я пока не знаю .... Я за сегодня написал фиговенький Парсер строки )))))))) <br>Да вот так ))) Короче там много чего не так ... хотябы в методе парсинга ...во как ... Я выложу это все во вложенном файле ...там будет уже собранный вариант. Вот .... вообщем жду коментов и советов .........<br><br>Уважаемые Гугломаны )))))) не послыайте на х.... гуглю ))) там уже был , сидел 2 месяца ... <br><br><img src="img/attach.gif" alt=""> <a href="./files/2255_24.08.2007_CRACKLAB.rU.tgz">2255_24.08.2007_CRACKLAB.rU.tgz</a> - parser.zip
<br><br><font size="1"><i>-----<br>RE In Progress [!] Coding Hazard [!] Stay Clear of this Cube</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=154038&amp;user=3520&amp;forum_n=6&amp;topic=9739.html&amp;page=0&amp;anchor=1" class="addthx" data-post="154038"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 августа 2007 01:16 &middot; Поправил: s0larian <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=9739.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Чувак, ты уже подобный вопрос задавал... я тебе в общем подсказал, и предложил выкладывать исходник на С или С++. IMHO такую вещь писать на асме - себя не уважать. Потратишь больше времяни на отладку простейших структур, управление памятью и парсинг чем на сами сокеты.<br><br>По поводу модели - вот тебе пример простого сервера который принемает, скажем, что-то типа SQL запростов, построенного на одном worker thread-e:<br>- socket()<br>- bind()<br>- listen()<br><br>for (;;)<br>- select()<br><br>- для каждого нового соединения accept(), и добавляешь в список. Назад в select(). <br>- для каждого recv() парсишь свой пакет, если есть весь пакет, то отправляешь назад результат. Назад в select(). <br>- для каждого события PostMessage() в главный поток со строчкой лога. (client connected, rx: blah, tx: blah)<br><br>Пакетная структура (например):<br>select &lt;column&gt; from &lt;table&gt; ;<br><br>Парсинг: накапливаешь данные пока не увидишь метку &quot;;&quot;. Потом разбираешь каманду на части (regex) и посылаешь ответ.<br><br>Память: у каждого соединения свой буфер в несколько кило. Этого достаточно для нескольких сотен  команд. Если не влазит, то closesocket() т.к. это явно не твой протокол.<br><br>Что ещё... думаю начинаюцему &quot;насильнику&quot; тут довольно много писанины... Просто скачай пример и дорабарывай его. Такого на гугле немеряно <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=154060&amp;user=1737&amp;forum_n=6&amp;topic=9739.html&amp;page=0&amp;anchor=2" class="addthx" data-post="154060"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]El_Diablo[/b]','')">El_Diablo</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 59.9 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.17'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=11468">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 августа 2007 01:36 &middot; Поправил: El_Diablo <br><script type="text/javascript">QU('El_Diablo','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=El_Diablo" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=9739.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
Да уж парсинг на асме это жесть =<br>Не хватает тех же регэкспов <br>хотя думаю эта статья че-нить да прояснит <br>http://wasm.ru/article.php?article=comregexp http://wasm.ru/article.php?article=comregexp <br>З.Ы.я бы для начала реализовал бы какой-нить пакет,который хотябы как-то писан и инфа есть (например протокол мейл агента),а потом бы уже свой начала делать
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=154067&amp;user=11468&amp;forum_n=6&amp;topic=9739.html&amp;page=0&amp;anchor=3" class="addthx" data-post="154067"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]mak[/b]','')">mak</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3520.jpg" alt=""><br><span class=txtSm>Ранг: 673.3 <font color=magenta>(<b>! !</b>)</font>, 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.48'>Активность: 0.4<span style='color:red'>&searr;</span>0.31</span><br>Статус: <a href="action=userinfo&amp;user=3520">Участник</a><br><font color=blue>CyberMonk</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 августа 2007 22:07 <br><script type="text/javascript">QU('mak','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mak" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=9739.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
=) Я теперь не спрашиваю , а тут буду все писать что да как делаю ..вот . Даа я немного того , чтоб писать на асме это , но вот так мне хочется ))) Спасибо за отклик...знаю что не легко но !!!! надо! <br><br>String Parser<br><br><code>.386<br>.model flat, stdcall<br>option casemap: none<br><br>include \masm32\include\windows.inc<br>include \masm32\include\user32.inc<br>include \masm32\include\kernel32.inc<br>include \masm32\include\masm32.inc<br><br>includelib \masm32\lib\user32.lib<br>includelib \masm32\lib\kernel32.lib<br>includelib \masm32\lib\masm32.lib<br><br>parser proto :dword<br>process_word proto :dword<br>command1 proto<br>command2 proto<br>command3 proto<br>command4 proto<br>command5 proto<br><br>table_item struct<br>	istring	dd	?	; address of string<br>	ilength	dd	?	; length of string<br>	ilabel		dd	?	; address of procedure<br>table_item ends<br><br>.data<br>	szc1		db &quot;command1&quot;,0	; first command<br>	szc2		db &quot;command2&quot;,0	; second command<br>	szc3		db &quot;command3&quot;,0	; third command<br>	szc4		db &quot;command4&quot;,0	; fourth command<br>	szc5		db &quot;command5&quot;,0	; fifth command<br><br>	; command/proc lookup table<br>	itable		table_item &lt; szc1, 8, command1 &gt;	; associate the first command with the command1 procedure<br>			table_item &lt; szc2, 8, command2 &gt;	; associate the second command with the command2 procedure<br>			table_item &lt; szc3, 8, command3 &gt;	; associate the third command with the command3 procedure<br>			table_item &lt; szc4, 8, command4 &gt;	; associate the fourth command with the command4 procedure<br>			table_item &lt; szc5, 8, command5 &gt;	; associate the fifth command with the command5 procedure<br>			table_item &lt; 0, 0, 0 &gt;		; blank terminator required by process_word<br><br>	; other strings used in application<br>	sztitle	db &quot;parser_test&quot;,0<br>	c1string	db &quot;Command 1&quot;,13,10,0<br>	c2string	db &quot;Command 2&quot;,13,10,0<br>	c3string	db &quot;Command 3&quot;,13,10,0<br>	c4string	db &quot;Command 4&quot;,13,10,0<br>	c5string	db &quot;Command 5&quot;,13,10,0<br><br>	prompt		db &quot;-&quot;,0<br>	command_line	db 2025 dup(0)<br><br>.data?<br>	dwlen		dd ?<br><br>.code<br>application proc<br>	call	[GetCommandLine]<br>	@@:	inc	eax<br>		cmp	byte ptr [eax], 0Dh<br>		je	@f<br>		cmp	byte ptr [eax], 00h<br>		je	@f<br>		cmp	byte ptr [eax], 0Ah<br>		je	@f<br>		cmp	byte ptr [eax], &#039; &#039;<br>		jne	@b<br>	inc	eax<br>	lea	edx, command_line<br>	push	edx<br>	push	eax<br>	push	edx<br>	call	[lstrcpy]<br>	call	[lstrlen]<br>	cmp	eax, 00h<br>	jne	@@parse_command_line<br><br>@@:	lea	edx, command_line<br>	lea	ebx, prompt<br>	push	2024<br>	push	edx<br>	push	ebx<br>	push	2025<br>	push	edx<br>	call	[RtlZeroMemory]<br>	call	[StdOut]<br>	call	[StdIn]<br><br>	lea	edx, command_line<br>	@@test_q:<br>	cmp	byte ptr [edx], &#039;q&#039;<br>	je	@@test_u<br>	cmp	byte ptr [edx], &#039;Q&#039;<br>	je	@@test_u<br>	jmp	@@parse_it<br><br>	@@test_u:<br>	cmp	byte ptr [edx+1],&#039;u&#039;<br>	je	@@test_i<br>	cmp	byte ptr [edx+1],&#039;U&#039;<br>	je	@@test_i<br>	jmp	@@parse_it<br><br>	@@test_i:<br>	cmp	byte ptr [edx+2],&#039;i&#039;<br>	je	@@test_t<br>	cmp	byte ptr [edx+2],&#039;I&#039;<br>	je	@@test_t<br>	jmp	@@parse_it<br><br>	@@test_t:<br>	cmp	byte ptr [edx+3],&#039;t&#039;<br>	je	@@finished<br>	cmp	byte ptr [edx+3],&#039;T&#039;<br>	je	@@finished<br><br>	@@parse_it:<br>	push	edx<br>	call	[parser]<br>	jmp	@b<br><br>	@@parse_command_line:<br>	lea	edx, command_line<br>	push	edx<br>	call	[parser]<br>	cmp	eax, 00h<br>	jne	@@finished<br>	jmp	@f<br>		lperr:<br>			BYTE	&quot;Parsing failed!&quot;,13,10,0<br>	@@:	push	lperr<br>		call	[StdOut]<br><br>@@finished:<br>	push	NULL<br>	call	[ExitProcess]<br>	xor	eax, eax<br>	ret<br>application endp<br><br>parser proc uses edi esi string:dword<br>	local	pcheap:DWORD<br>	local	lplast:DWORD<br>	local	szword:DWORD<br>	local	strlen:DWORD<br><br>	push	string<br>	call	[lstrlen]<br>	cmp	eax, 00h<br>	jne	@f<br>		xor	eax, eax<br>		ret<br>	@@:	mov	strlen, eax<br><br>	call	[GetProcessHeap]<br>	cmp	eax, 00h<br>	jne	@f<br>		xor	eax, eax<br>		ret<br>	@@:	mov	pcheap, eax<br><br>	push	strlen<br>	push	HEAP_ZERO_MEMORY<br>	push	pcheap<br>	call	[HeapAlloc]<br>	cmp	eax, 00h<br>	jne	@f<br>		xor	eax, eax<br>		ret<br>	@@:	mov	szword, eax<br><br>	mov	edi, szword<br>	mov	esi, string<br>	mov	ecx, strlen<br>	mov	lplast, edi<br><br>	@@continue:<br>	cmp	ecx, 00h<br>	je	@@end_of_string<br>	mov	al, byte ptr [esi]<br>	cmp	al, 0Dh<br>	je	@@end_of_string<br>	cmp	al, 0Ah<br>	je	@@end_of_string<br>	cmp	al, 3Bh<br>	je	@@end_of_string<br>	cmp	al, 00h<br>	je	@@end_of_string<br>	cmp	al, 20h<br>	je	@@end_of_word<br>	cmp	al, 09h<br>	je	@@end_of_word<br><br>	@@add_char:<br>	mov	byte ptr [edi], al<br>	dec	ecx<br>	inc	esi<br>	inc	edi<br>	xor	eax, eax<br>	jmp	@@continue<br><br>	@@end_of_word:<br>	mov	byte ptr [edi], 00h<br>	push	lplast<br>	call	[process_word]<br>	dec	ecx<br>	inc	esi<br>	inc	edi<br>	xor	eax, eax<br>	mov	lplast, edi<br>	jmp	@@continue<br><br>	@@end_of_string:<br>	mov	byte ptr [edi], 00h<br>	push	lplast<br>	call	[process_word]<br><br>	push	szword<br>	push	NULL<br>	push	pcheap<br>	call	[HeapFree]<br>	cmp	eax, 00h<br>	jne	@f<br>		xor	eax, eax<br>		ret<br>	@@:	mov	eax, 1<br>	ret<br>parser endp<br><br>process_word proc uses esi edi szword:dword<br>	local	wrdlen:DWORD<br><br>	pushad<br><br>	push	szword<br>	call	[lstrlen]<br>	cmp	eax, 00h<br>	jne	@f<br>		xor	eax, eax<br>		ret<br>	@@:	mov	wrdlen, eax<br><br>	lea	ebx, itable<br>	assume	ebx:ptr table_item<br><br>	@@continue:<br>	mov	eax, [ebx].ilength<br>	cmp	eax, 00h<br>	je	@@unknown_word<br><br>	cmp	wrdlen, eax<br>	jne	@@do_next<br><br>		mov	esi, [ebx].istring<br>		mov	edi, szword<br>		mov	ecx, wrdlen<br><br>		@@:	mov	al, byte ptr [esi]<br>			cmp	al, byte ptr [edi]<br>			jne	@@do_next<br>			cmp	ecx, 00h<br>			je	@f<br>			inc	esi<br>			inc	edi<br>			dec	ecx<br>			jmp	@b<br>		@@:	call	[ebx].ilabel<br><br>		assume ebx:nothing<br>		popad<br><br>		mov	eax, 1<br>		ret<br><br>	@@do_next:<br>	add	ebx, 04h<br>	jmp	@@continue<br><br>	@@unknown_word:<br><br>	assume	ebx:nothing<br>	popad<br><br>	mov	eax, 1<br>	ret<br>process_word endp<br><br>command1 proc<br>	lea	ebx, c1string<br>	push	ebx<br>	call	[StdOut]<br>	ret<br>command1 endp<br><br>command2 proc<br>	lea	ebx, c2string<br>	push	ebx<br>	call	[StdOut]<br>	ret<br>command2 endp<br><br>command3 proc<br>	lea	ebx, c3string<br>	push	ebx<br>	call	[StdOut]<br>	ret<br>command3 endp<br><br>command4 proc<br>	lea	ebx, c4string<br>	push	ebx<br>	call	[StdOut]<br>	ret<br>command4 endp<br><br>command5 proc<br>	lea	ebx, c5string<br>	push	ebx<br>	call	[StdOut]<br>	ret<br>command5 endp<br><br>end application</code>
<br><br><font size="1"><i>-----<br>RE In Progress [!] Coding Hazard [!] Stay Clear of this Cube</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=154208&amp;user=3520&amp;forum_n=6&amp;topic=9739.html&amp;page=0&amp;anchor=4" class="addthx" data-post="154208"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]El_Diablo[/b]','')">El_Diablo</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 59.9 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.17'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=11468">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 августа 2007 00:24 &middot; Поправил: El_Diablo <br><script type="text/javascript">QU('El_Diablo','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=El_Diablo" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=9739.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
А тут нет тега типа [code][/code] как в других форумах,а то такой листинг ...<br>По теме автор пиши еще <img src="img/smilies/s3.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=154218&amp;user=11468&amp;forum_n=6&amp;topic=9739.html&amp;page=0&amp;anchor=5" class="addthx" data-post="154218"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]mak[/b]','')">mak</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3520.jpg" alt=""><br><span class=txtSm>Ранг: 673.3 <font color=magenta>(<b>! !</b>)</font>, 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.48'>Активность: 0.4<span style='color:red'>&searr;</span>0.31</span><br>Статус: <a href="action=userinfo&amp;user=3520">Участник</a><br><font color=blue>CyberMonk</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 августа 2007 18:29 <br><script type="text/javascript">QU('mak','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mak" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=9739.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Вообщем допустим я заполнил структуру !!!  Отправил ее ! 2 отправил или 3 . Допустим парсером я разделил пакеты. Вот вопрос ....могу ли я обращаться к пакету как к структуре ? .... если да то как это делается ?
<br><br><font size="1"><i>-----<br>RE In Progress [!] Coding Hazard [!] Stay Clear of this Cube</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=154286&amp;user=3520&amp;forum_n=6&amp;topic=9739.html&amp;page=0&amp;anchor=6" class="addthx" data-post="154286"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 августа 2007 19:57 &middot; Поправил: s0larian <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=9739.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<I>mak пишет:<br>Вот вопрос ....могу ли я обращаться к пакету как к структуре ? .... если да то как это делается ? </I><br>можно, если у тебя всегда x86/little_endian машина <img src="img/smilies/s1.gif" alt=""> Делается в С через каст: <br><code><br>void process(char *buffer)<br>{<br>    Packet *packet = (Packet *)buffer;<br>}<br></code><br><br>только это не самый лучший вариант - зависит от упаковки (padding), машины (endian, x86, 64 bit). У меня в нескольких проектах был ASCII протокол - что б в лог можно было записать легко. Но, на самом деле, это не имеет значения. Протокол jabber вообще XML использует для обмена данными:<br><code><br>&lt;stream:stream<br>    xmlns=&#039;jabber:client&#039;<br>    xmlns:stream=&#039;http://etherx.jabber.org/streams&#039;<br>    to=&#039;example.com&#039;<br>    version=&#039;1.0&#039;&gt;<br></code>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=154415&amp;user=1737&amp;forum_n=6&amp;topic=9739.html&amp;page=0&amp;anchor=7" class="addthx" data-post="154415"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]mak[/b]','')">mak</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3520.jpg" alt=""><br><span class=txtSm>Ранг: 673.3 <font color=magenta>(<b>! !</b>)</font>, 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.48'>Активность: 0.4<span style='color:red'>&searr;</span>0.31</span><br>Статус: <a href="action=userinfo&amp;user=3520">Участник</a><br><font color=blue>CyberMonk</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 28 августа 2007 19:55 <br><script type="text/javascript">QU('mak','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mak" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=9739.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
короче я еще ковыряюсь ...постепенно строю вот что еще нарыл ... в приложении<br><br>описание <br><br>Маленький и удобный(если минут 10 посидеть и разобраться) сетевой движок, НЕ компонент(чтобы можно было делать приложения не используя формы и VCL). Асинхронные сокеты, простое создание пакетов и возможность создания статических пакетов(тогда пакет минимум весит 1 байт). На сервере создан список клиентов с дополнительными полями(data : Pointer и т.д.). <br>В самых ответственных местах коментрирована каждая строчка. Полностью на api, правда пока только TCP, но скоро поставлю чтобы было переключение между TCP и UPD, хотя мне UPD очень не нравится<img src="img/smilies/s9.gif" alt="">. Обязательно скажите что не так сделал и что надо было бы добавить, а то уже не знаю что ещё можно вставить. <br><br><img src="img/attach.gif" alt=""> <a href="./files/efc6_28.08.2007_CRACKLAB.rU.tgz">efc6_28.08.2007_CRACKLAB.rU.tgz</a> - xsockets.rar
<br><br><font size="1"><i>-----<br>RE In Progress [!] Coding Hazard [!] Stay Clear of this Cube</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=154550&amp;user=3520&amp;forum_n=6&amp;topic=9739.html&amp;page=0&amp;anchor=8" class="addthx" data-post="154550"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]mak[/b]','')">mak</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3520.jpg" alt=""><br><span class=txtSm>Ранг: 673.3 <font color=magenta>(<b>! !</b>)</font>, 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.48'>Активность: 0.4<span style='color:red'>&searr;</span>0.31</span><br>Статус: <a href="action=userinfo&amp;user=3520">Участник</a><br><font color=blue>CyberMonk</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 22 сентября 2007 18:31 <br><script type="text/javascript">QU('mak','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mak" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=9739.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
Я опять вернулся ... )))))) нарыл исходников , примеров и короче всеравно Жопа. Я сделал под себя пакетный протокол передачи данных ...  вообщем так ...все работает просто Супер !!!!!! Парсер я взял свой старый с прошлой темы..и он у меня не глючит...как в прошлой программе ... но есть опять большое НО. Я посылаю команды серверу и все чики пики , все кроме посыла большого количества информации!!! <br>То есть я сформировал свой пакет с данными всеми параметрами .....к примеру в папке 100 файлов ...значит чтобы их перечислить у меня сенд будет вызван 100 раз , посыл моего пакета, пакет ограничен 1024 + 24 максимальный размер ...вообщем при вставке в листвью вставляется только 6 -7 папок ...другими словами где то чето не то . Я поставил месадж боксы на все сенды и ресивы при ошибках и нулях ...и попробывал еще раз отправить 100 папок в листвью ...пришло 6 ...но не один месадж боес не сработал , значит ошибки в сенде и ресиве нету ...когда я ставлю таймаут или месадж бокс перед вставкой все ок приходит и вставляется. У меня есть другой пример ...в этом примере нет протокола и посыл инфы идет простыми ресив и сенд ....все так же ...но почему то там вставка в листВью проходит всегда супер!!! Все вставляется . Посмотрите ПЛЗ у кого есть желание ... я отправлю в личку файлы <br><br>а ниже это то что я нарыл <br><br>NRPacket         STRUCT<br>  nrHeader       db         &quot;NRP-&quot;<br>  nrFCode        dd         ?<br>  nrPacketSeqNR  dd         ?<br>  nrPacketInSeq  dd         ?<br>  nrLenData      dd         ?<br>;  nrDataCRC32    dd         ?                  ; CRC32 IS NOT IMPLEMENTED AT THIS POINT<br>  nrPointData    dd         ?<br>  nrTail         dd         ?<br>NRPacket         ENDS<br><code> ProcessIncoming   PROC<br><br>                  .IF isHandshake==TRUE<br><br>                      INVOKE  ioctlsocket, remoteDESCRIPTOR, FIONREAD, ADDR availableData<br>                      .IF eax==NULL<br>                          INVOKE  GlobalAlloc, GHND, availableData<br>                          mov     hMemory, eax<br>                          INVOKE  GlobalLock, eax<br>                          mov     offsetBuffer, eax<br>                <br>                          INVOKE  recv, remoteDESCRIPTOR, offsetBuffer, availableData, 0<br>                          <br>                          INVOKE  StrCmp, ADDR clientID, offsetBuffer, cIDLEN<br>                          .IF eax==TRUE<br>                              mov     isReliable, TRUE<br>                              mov     isHandshake, FALSE<br><br>                              INVOKE  send, remoteDESCRIPTOR, ADDR serverID, sIDLEN, 0<br>                              .IF eax==0 || eax==SOCKET_ERROR<br>                                  mov     eax, FALSE<br>                              .ELSE<br>                                   mov     eax, TRUE<br>                              .ENDIF<br>  	<br>                              .IF eax==FALSE<br>                                  INVOKE  ShutdownSocket, socketDESCRIPTOR                                    <br>                                  INVOKE  OpenSocket<br>                                  .IF eax==0<br>                                      mov     fConn, FALSE<br>                                  .ELSE<br>                                       mov     socketDESCRIPTOR, eax<br>                                       INVOKE  WSAAsyncSelect, socketDESCRIPTOR, hwnd2, WM_SOCKET, FD_ACCEPT + FD_READ + FD_CLOSE<br>                                       INVOKE  bind, socketDESCRIPTOR, ADDR sin, 16<br>                                       INVOKE  listen, socketDESCRIPTOR, 20<br>                                       mov     fConn, TRUE<br>                                  .ENDIF                                                <br>                              .ENDIF<br><br>                           .ELSE<br>                                INVOKE  ShutdownSocket, socketDESCRIPTOR<br>                                INVOKE  OpenSocket<br>                                .IF eax==0<br>                                    mov     fConn, FALSE<br>                                .ELSE<br>                                     mov     socketDESCRIPTOR, eax<br>                                     INVOKE  WSAAsyncSelect, socketDESCRIPTOR, hwnd2, WM_SOCKET, FD_ACCEPT + FD_READ + FD_CLOSE<br>                                     INVOKE  bind, socketDESCRIPTOR, ADDR sin, sizeof sin<br>                                     INVOKE  listen, socketDESCRIPTOR, 20<br>                                     mov     fConn, TRUE<br>                                .ENDIF                                                <br><br>                            mov     isHandshake, FALSE<br>                            mov     receiveLOCK, FALSE<br>                           .ENDIF<br><br>                           INVOKE  GlobalUnlock, offsetBuffer<br>                           INVOKE  GlobalFree, hMemory<br>                           ret<br>                      .ENDIF                  <br>                  .ENDIF<br><br>                  .IF isReliable==TRUE<br>                  <br>                      INVOKE  ioctlsocket, remoteDESCRIPTOR, FIONREAD, ADDR availableData<br>                      .IF eax==NULL<br>                          .IF availableData&lt;=1048<br>                              INVOKE  recv, remoteDESCRIPTOR, ADDR packetBUFFER, availableData, 0<br>                              ;invoke MessageBox,NULL,ADDR packetBUFFER,ADDR AppName,MB_OK<br>                          .ELSE<br>                               INVOKE  recv, remoteDESCRIPTOR, ADDR packetBUFFER, 1048, 0                           <br>                          .ENDIF<br><br>                          ; controllo header<br> ;invoke MessageBox,NULL,ADDR packetHEAD,ADDR AppName,MB_OK<br> ;invoke MessageBox,NULL,ADDR packetBUFFER,ADDR AppName,MB_OK<br>                          INVOKE  StrCmp, ADDR packetHEAD, ADDR packetBUFFER, 4<br>                       <br>                          .IF eax==TRUE<br><br>                              ; get function code<br>                               <br>                              mov     esi, OFFSET packetBUFFER<br>                              add     esi, 4<br>                              lodsd   <br><br>                              push    eax<br><br>                              .IF receiveLOCK==FALSE<br>                            <br>                                  mov     reqOperation, eax<br><br>                                  mov     currentPacket, 0<br>                               <br>                                  ; get total packets number &amp; alloc buffer<br><br>                                  mov     esi, OFFSET packetBUFFER<br>                                  add     esi, 12<br>                                  lodsd<br><br>                                  mov     totalPackets, eax<br>                                  shl     eax, 10<br><br>                                  INVOKE  GlobalAlloc, GHND, eax<br>                                  mov     hMemory, eax<br>                                  INVOKE  GlobalLock, eax<br>                                  mov     offsetBuffer, eax<br>                                  mov     receiveLOCK, TRUE<br>                              .ENDIF<br>                              pop     eax<br><br>                              .IF eax==reqOperation<br>                                  inc     currentPacket<br><br>                                  ; get data length &amp; copy data into buffer<br><br>                                  mov     esi, OFFSET packetBUFFER<br>                                  add     esi, 16<br>                                  lodsd<br>                                  mov     ebx, currentPacket<br>                                  dec     ebx<br>                                  shl     ebx, 10<br>                                  mov     edi, offsetBuffer<br>                                  add     edi, ebx<br>                                  mov     ecx, eax<br>                                  rep     movsb<br>                                                                                                      <br>                                  mov     eax, currentPacket<br>                                  .IF eax==totalPackets  <br>                                      <br>                                      ; processo funzioni, dealloco buffers, receiveLOCK==FALSE<br><br>                                     .IF reqOperation==00000000h<br>                                        INVOKE  проц.<br><br>                                     .ELSEIF reqOperation==00000001h<br>                                                                             <br>                                     .ENDIF<br><br>                                     ; dealloco buffers<br><br>                                     INVOKE  GlobalUnlock, offsetBuffer<br>                                     INVOKE  GlobalFree, hMemory<br><br>                                     mov    receiveLOCK, FALSE<br><br>                                  .ENDIF          <br>                              .ENDIF <br>                          .ENDIF<br>                      .ENDIF<br>                  .ENDIF   <br><br>                  INVOKE  ClearBuffer, ADDR packetBUFFER, 1024+24<br><br>                  ret<br>ProcessIncoming   ENDP </code>
<br><br><font size="1"><i>-----<br>RE In Progress [!] Coding Hazard [!] Stay Clear of this Cube</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=158822&amp;user=3520&amp;forum_n=6&amp;topic=9739.html&amp;page=0&amp;anchor=9" class="addthx" data-post="158822"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]mak[/b]','')">mak</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3520.jpg" alt=""><br><span class=txtSm>Ранг: 673.3 <font color=magenta>(<b>! !</b>)</font>, 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.48'>Активность: 0.4<span style='color:red'>&searr;</span>0.31</span><br>Статус: <a href="action=userinfo&amp;user=3520">Участник</a><br><font color=blue>CyberMonk</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 22 сентября 2007 20:05 <br><script type="text/javascript">QU('mak','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mak" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=9739.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Короче я нашел ошибку ...все чики пики. Спасибки !!!!!!! Тааак терь не раслоблятся .... готов протокол обмена. Смысл таков я посылаю пакет потом жду ответа что весь положительно пришел если да шлю дальше .. и так в цикле . Однопоточное приложение на асинхронных сокетах . Хочется многопоточное ..но тут сразу вопрос возникает ....могу ли я отправлять в потоками и получать потоками ...но при этом будет не более скажем 7 потоков и каждый поток ждет положительного ответа о доставке ....Как вы думаете это нагрузит сеть ??????? Если да то есть ли вероятность что 2 пакета пришли полностью и 3 половино только и он короче ждет до отправки ...что делать тогда ???? <img src="img/smilies/s6.gif" alt="">
<br><br><font size="1"><i>-----<br>RE In Progress [!] Coding Hazard [!] Stay Clear of this Cube</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=158849&amp;user=3520&amp;forum_n=6&amp;topic=9739.html&amp;page=0&amp;anchor=10" class="addthx" data-post="158849"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Протокол передачи (Асинхронные сокеты + динамический буфер)</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#11" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="6">
<input type="hidden" name="topic" value="9739">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=9739" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
