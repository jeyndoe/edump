<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Про Debug API - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Всем привет! Заломал я прожкуу запротекченную армой и теперь делаю патчик-лодырь для нее. И вот такая коллизия: Мой лодырь садится на прогу как отладчик (CreateProcess, lpProgName, ... DEBUG_PROCESS ....) и все идет нормально до">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=132'>YDS</a>, <a target='_blank' href='?action=userinfo&amp;user=41701'>_MBK_</a>, <a target='_blank' href='?action=userinfo&amp;user=44014'>user99</a> (+8 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/green.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=1&sortBy=0&page=0.html"><b>Основной форум</b></a> <b class=bulletHead>&#8212;&#8250;</b> Про Debug API</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]TOG[/b]','')">TOG</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/2440.jpg" alt=""><br><span class=txtSm>Ранг: 84.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.89'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2440">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 13:52 <br><script type="text/javascript">QU('TOG','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=TOG" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Всем привет!
<br>
<br>Заломал я прожкуу запротекченную армой и теперь делаю патчик-лодырь для нее.
<br>И вот такая коллизия:
<br>Мой лодырь садится на прогу как отладчик (CreateProcess, lpProgName, ... DEBUG_PROCESS ....)
<br>и все идет нормально до тех пор пока арма сама не выполняет DebugActiveProcess, тут облом-то и
<br>настает - EAX=0 , ну и дальше зависалово.
<br>
<br>Внимание вопрос: Могут ли два разных процесса(мой и армовский) отлаживать третий процесс
<br>одновременно, используя при этом Debug API. Или права на отладку есть только у моего процесса,
<br>а армовский бреется ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43560&amp;user=2440&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=1" class="addthx" data-post="43560"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Step[/b]','')">Step</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 64.6 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.78'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 14:09 &middot; Поправил: Step <br><script type="text/javascript">QU('Step','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Step" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
1) Два отладчика на один процесс это перебор. Представь себе: что ОС должна в таком случае делать?
<br>2) Лоадер и отладчик это не синоним. У лоадера в основном задача не вести отладку, а исправлять байты.
<br>3) Прочитай инфу по лоадерах. На форуме есть много ссылок.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43561&amp;user=2702&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=2" class="addthx" data-post="43561"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]TOG[/b]','')">TOG</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/2440.jpg" alt=""><br><span class=txtSm>Ранг: 84.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.89'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2440">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 14:14 <br><script type="text/javascript">QU('TOG','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=TOG" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
2Step
<br>По пункту 1:  Это есть принципиальное ограничение Das Windows ????
<br>                      Я в msdn ни слова не встретил о таком ограничении.
<br>
<br>По пункту 2:  Чтобы добраться до места которое нужно отпатчить, нужно сперва дотрейситься
<br>                       до нужного места, для этого и юзаю debug api
<br>
<br>Пункт 3:     ну за 1,5 года перебрал архив, вроде такого не видал
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43562&amp;user=2440&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=3" class="addthx" data-post="43562"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Jupiter[/b]','')">Jupiter</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1379.png" alt=""><br><span class=txtSm>Ранг: 605.2 (<b>!</b>), 341thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.38'>Активность: 0.47<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1379">Модератор</a><br><font color=blue>Research &amp; Development</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 14:15 <br><script type="text/javascript">QU('Jupiter','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Jupiter" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
1. Для каждого процесса отладчик один:
<br>  1 - твой отладчик, отлаживающий загрузчик армы
<br>  и 2 - загрузчик армы, отлаживающий собсно прогу
<br>2. step: для армы лоадер, использующий DebugAPI для восстановления байт - и есть отладчик, так что почитаю инфу и сам
<br><br><font size="1"><i>-----<br>EnJoy!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=43563&amp;user=1379&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=4" class="addthx" data-post="43563"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]Step[/b]','')">Step</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 64.6 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.78'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 14:21 &middot; Поправил: Step <br><script type="text/javascript">QU('Step','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Step" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<b>Jupiter</b>, <b>TOG</b>
<br>Сначала выясним какой процесс отлаживать. Главный или отладчик ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43564&amp;user=2702&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=5" class="addthx" data-post="43564"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]TOG[/b]','')">TOG</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/2440.jpg" alt=""><br><span class=txtSm>Ранг: 84.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.89'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2440">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 14:22 <br><script type="text/javascript">QU('TOG','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=TOG" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
2Jupiter 
<br>Дело в том, что я делаю CreateProcess( ...... DEBUG_PROCESS....)  ,а не  DEBUG_ONLY_THIS_PROCESS
<br>тоесть я получаю отладочные события как от  1:&quot;загрузчика армы&quot;,  так и  2:&quot;проги жертвы&quot;.
<br>
<br>вот и получается , что на прогу жертву пытаются сесть 2 отладчика !!! Такое возможно ???
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43565&amp;user=2440&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=6" class="addthx" data-post="43565"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]Step[/b]','')">Step</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 64.6 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.78'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 14:28 <br><script type="text/javascript">QU('Step','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Step" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<b>TOG</b>
<br>Ещё раз. Два отладчика не сядут на прогу. В адр.пространстве процеса, есть недокумент.структура, а там поле - контекст отладчика. Так что даже при большом желании два отладчика юзер-режима на прогу не сядут !
<br>Если уж тебя несёт на крайности, то теоретически можно ковырнуть загрузчик армы, а на практике - садо-мазо.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43567&amp;user=2702&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=7" class="addthx" data-post="43567"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]Jupiter[/b]','')">Jupiter</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1379.png" alt=""><br><span class=txtSm>Ранг: 605.2 (<b>!</b>), 341thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.38'>Активность: 0.47<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1379">Модератор</a><br><font color=blue>Research &amp; Development</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 14:29 <br><script type="text/javascript">QU('Jupiter','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Jupiter" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
Patcher-Loader -&gt;
<br>   ArmaLoader -&gt;
<br>     MainApp
<br>
<br>т.о. образом тебе изначально до MainApp не дотянуться, т.к. на момент запуска ArmaLoader, MainApp ещё не активен/запущен
<br>выход
<br>  - ловить момент ContinueDebugEvent самого ArmaLoader и патчить MainApp
<br>  - либо проерять через ReadProcessMemory какой-либо флаг в ArmaLoader
<br>  - ...
<br>
<br>
<br>рекомендую почитать ARTeam Tutorials http://intechhosting.com/~access/ARTeam/ar/cracking/tuts.html  на тему Cracking with Loaders
<br><br><font size="1"><i>-----<br>EnJoy!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=43568&amp;user=1379&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=8" class="addthx" data-post="43568"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]4kusNick[/b]','')">4kusNick</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1931.jpg" alt=""><br><span class=txtSm>Ранг: 748.2 <font color=magenta>(<b>! !</b>)</font>, 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.1'>Активность: 0.37<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1931">Участник</a><br><font color=blue>bytecode!</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 14:34 <br><script type="text/javascript">QU('4kusNick','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=4kusNick" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<b>TOG</b>
<br>Я запускал два отладчика на один процесс, после чего винда загружала проц на 100 процентов и начинала тормозить... Вероятно, это из-за того, что ядро перегружается сообшениями от обоих отладчиков об отлаживаемом процессе и не в состоянии в реальном времени контролировать сообщения сразу от двух отладчиков, хотя, может, это только у меня винда лагает <img src="img/smilies/s1.gif" alt="">
<br><br><font size="1"><i>-----<br>Флэш, ява, дотнет - на завтрак, обед и ужин. Unity3D на закуску.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=43569&amp;user=1931&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=9" class="addthx" data-post="43569"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]TOG[/b]','')">TOG</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/2440.jpg" alt=""><br><span class=txtSm>Ранг: 84.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.89'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2440">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 14:36 <br><script type="text/javascript">QU('TOG','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=TOG" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
2Jupiter
<br>Если я стану отлаживать только &quot;лоадер армы&quot; юзая флаг DEBUG_ONLY_THIS_PROCESS,
<br>я потом ну никак не смогу пропатчить MainApp, даже имея его hProcess и hThread, у меня
<br>просто прав на этот процесс не будет.
<br>
<br>2Step.  Ну если так ..... пойду видимо драйвер делать <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43570&amp;user=2440&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=10" class="addthx" data-post="43570"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Step[/b]','')">Step</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 64.6 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.78'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 14:45 &middot; Поправил: Step <br><script type="text/javascript">QU('Step','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Step" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<I>4kusNick пишет:
<br>Я запускал два отладчика на один процесс, после чего винда загружала проц на 100 процентов и начинала тормозить...  </I>
<br>Жаль что ты не поинтересовался кому csrss.exe LPC сообщения высылает ;) (благодаря этому и работает отладчик)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43573&amp;user=2702&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=11" class="addthx" data-post="43573"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]TOG[/b]','')">TOG</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/2440.jpg" alt=""><br><span class=txtSm>Ранг: 84.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.89'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2440">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 22:37 <br><script type="text/javascript">QU('TOG','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=TOG" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
Дык, народ !
<br>А как делать-то ?   Делать ring0 трейсер что-ли ?  Куда копать подскажите !!!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43644&amp;user=2440&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=12" class="addthx" data-post="43644"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]Jupiter[/b]','')">Jupiter</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1379.png" alt=""><br><span class=txtSm>Ранг: 605.2 (<b>!</b>), 341thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.38'>Активность: 0.47<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1379">Модератор</a><br><font color=blue>Research &amp; Development</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 ноября 2005 23:33 <br><script type="text/javascript">QU('Jupiter','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Jupiter" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
инлайн патч
<br>см. tuts4you http://tuts4you.com/tutorials/Unpacking/index.php
<br><br><font size="1"><i>-----<br>EnJoy!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=43655&amp;user=1379&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=13" class="addthx" data-post="43655"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]TOG[/b]','')">TOG</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/2440.jpg" alt=""><br><span class=txtSm>Ранг: 84.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.89'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2440">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 ноября 2005 00:18 <br><script type="text/javascript">QU('TOG','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=TOG" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
Спасибо Jupiter
<br>Действительно инлайн патч.
<br>А так хотелось лодыря сделать, чтобы не возиться с CRC
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43666&amp;user=2440&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=14" class="addthx" data-post="43666"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]TOG[/b]','')">TOG</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/2440.jpg" alt=""><br><span class=txtSm>Ранг: 84.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.89'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2440">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 ноября 2005 00:22 <br><script type="text/javascript">QU('TOG','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=TOG" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
Да, кстати, 
<br>а если лодырь будет ring0 - то получится ???
<br>По идее должно...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43668&amp;user=2440&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=15" class="addthx" data-post="43668"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]Jupiter[/b]','')">Jupiter</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1379.png" alt=""><br><span class=txtSm>Ранг: 605.2 (<b>!</b>), 341thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.38'>Активность: 0.47<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1379">Модератор</a><br><font color=blue>Research &amp; Development</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 ноября 2005 11:07 <br><script type="text/javascript">QU('Jupiter','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Jupiter" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
<I>TOG пишет:
<br>Да, кстати, а если лодырь будет ring0 - то получится ??? </I>
<br>не вижу связи между Ring0 и &quot;получится&quot;
<br>всё зависит от навыков
<br>но для Ring0 потребуется драйвер (для WinNT/2k/XP), так что BSODы по началу тебе обеспечены.
<br>не морочь себе голову - делай инлайн патч
<br><br><font size="1"><i>-----<br>EnJoy!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=43714&amp;user=1379&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=16" class="addthx" data-post="43714"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]TOG[/b]','')">TOG</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/2440.jpg" alt=""><br><span class=txtSm>Ранг: 84.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.89'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2440">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 ноября 2005 13:04 <br><script type="text/javascript">QU('TOG','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=TOG" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
Инлайн это конечно хорошо, а если бы небыло этих туторов ?! Для создания инлайна пришлось
<br>бы разбираться еще и с CRC.
<br>Мне кажется, что лодырь-отладчик нулевого кольца есть перспективное решение проблемы.
<br>Он подойдет для патча ЛЮБЫХ защит.
<br>Можно ставить железные бряки на ЛЮБОЙ процесс, патчить опять-же ЛЮБОЙ процесс.
<br>Этож просто красота - не нужно париться с обходом CRC, которая от версии к версии будет
<br>все более извращенной. 
<br>Бряк,.... узнали адрес второго процесса,......бряк....., узнали адрес аллоченной памяти,..... бряк,..... патч !
<br>Надо попробовать <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43719&amp;user=2440&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=17" class="addthx" data-post="43719"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]Jupiter[/b]','')">Jupiter</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1379.png" alt=""><br><span class=txtSm>Ранг: 605.2 (<b>!</b>), 341thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.38'>Активность: 0.47<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1379">Модератор</a><br><font color=blue>Research &amp; Development</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 ноября 2005 13:12 <br><script type="text/javascript">QU('Jupiter','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Jupiter" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
что мешает ставить hardware break point в ring3 с помощью того же DebugAPI?
<br>бряк, установленный в ring0 по своей функиональности не отличается от ring3
<br>если вспомнишь tElock, он убирал hardware bp, устанавливаемые SoftIce, так что hwbp - не панацея
<br>ExeCryptor также убирает их
<br>короче, для нормального фукнционала тебе так или иначе потребуется грамотный драйвер (см. статьи Ms Rem), либо предварительное исследование кода программы, что уже не универсально
<br><br><font size="1"><i>-----<br>EnJoy!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=43721&amp;user=1379&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=18" class="addthx" data-post="43721"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]TOG[/b]','')">TOG</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/2440.jpg" alt=""><br><span class=txtSm>Ранг: 84.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.89'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2440">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 ноября 2005 14:07 <br><script type="text/javascript">QU('TOG','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=TOG" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
Дык, Jupiter.
<br>Железный бряк то надо в контексте нужного процесса ставить, а не глобально.
<br>Ну и соответственно из ring3 мне не доступны какие угодно процессы, а только порожденные
<br>моим процессом. Так ведь ?  Вот я и не смогу поставить железный бряк на второй процесс армы.
<br>Или я что-то путаю ?
<br>А чтобы мои железные бряки не слетали, я так понимаю юзается 13-й бит Dr7. Если он установлен
<br>то при ЛЮБОМ обращении к отладочным регистрам возникает исключение, которое будет
<br>мной получено, ну и можно принять контрмеры.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=43728&amp;user=2440&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=19" class="addthx" data-post="43728"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]Jupiter[/b]','')">Jupiter</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1379.png" alt=""><br><span class=txtSm>Ранг: 605.2 (<b>!</b>), 341thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.38'>Активность: 0.47<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1379">Модератор</a><br><font color=blue>Research &amp; Development</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 ноября 2005 15:50 <br><script type="text/javascript">QU('Jupiter','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Jupiter" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3332.html&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
см. также Anti Anti Hardware Breakpoint plugin [ollydbg] http://reverseengineering.online.fr/spip/article.php3?id_article=53
<br><br><font size="1"><i>-----<br>EnJoy!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=43738&amp;user=1379&amp;forum_n=1&amp;topic=3332.html&amp;page=0&amp;anchor=20" class="addthx" data-post="43738"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/green.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=1&sortBy=0&page=0.html"><b>Основной форум</b></a> <b class=bulletHead>&#8212;&#8250;</b> Про Debug API</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=3332" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
