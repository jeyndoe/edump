<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Работа сообщений в ОС Widows - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Доброго времени суток. Как то когда начинал изучать основы Reverse Enginering возник вопросик, на который не могу ответить до сих пор. Решил создать тему. Вопрос такой - как известно в ОС Windows в каждой оконной проге имеется">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=55930'>bedop66938</a>, <a target='_blank' href='?action=userinfo&amp;user=28512'>-Sanchez-</a>, <a target='_blank' href='?action=userinfo&amp;user=55980'>barsik</a>, <a target='_blank' href='?action=userinfo&amp;user=50833'>vasilevradislav</a>, <a target='_blank' href='?action=userinfo&amp;user=40607'>vsv1</a> (+6 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/red.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=2&sortBy=0&page=0.html"><b>Крэки, обсуждения</b></a> <b class=bulletHead>&#8212;&#8250;</b> Работа сообщений в ОС Widows</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=2&amp;topic=10861&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=2&amp;topic=10861&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 декабря 2007 16:32 &middot; Поправил: smex <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Доброго времени суток.<br>Как то когда начинал изучать основы Reverse Enginering возник вопросик, на который не могу ответить до сих пор. Решил создать тему. Вопрос такой - как известно в ОС Windows в каждой оконной проге имеется цикл обработки сообщений (GetMessage,TranslateMessage) куда по идее должны поступать все сообщения к проге и транслироваться нужным контролам этой проги. И все бы хорошо но провел эксперимент с виндовым блокнотом - окну самого Блокнота не поступают сообщения нажатия кнопки, тогда как полю Memo в этом блокноте поступает сообщение Wm_keydown,wm_keyup,wm_char. Может кто поможет пояснить это особенность ОС, ато нигде не могу найти ответа. Заранее благодарен любому ответу или ссылке по данной теме.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174734&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=1" class="addthx" data-post="174734"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Lumen[/b]','')">Lumen</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/2305.gif" alt=""><br><span class=txtSm>Ранг: 111.1 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.94'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2305">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 декабря 2007 16:38 <br><script type="text/javascript">QU('Lumen','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Lumen" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Там вроде не Memo а Edit.
<br><br><font size="1"><i>-----<br>The truth is out of there...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=174735&amp;user=2305&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=2" class="addthx" data-post="174735"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 декабря 2007 16:43 <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
Ну разницы нет, думаю смысл вопроса ясен... Просто этот небольшой нюанс работы ОС недает мне покоя. Вот линукс к примеру - все понятно как работае, и почему нет сообщений (там типа прерывания, что кстати немало экономит процессорное время), а мелкие как всегда че нить придумают, сделают криво и впридачу никакой нормальной документации. MSDN по поводу моего вопроса молчит.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174736&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=3" class="addthx" data-post="174736"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 декабря 2007 16:52 <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
У меня есть одно предположение. Возможно я перехватывал сообщения именно основному окну блокнота. А есть еще очередь сообщений приложения, куда по идее должны поступать все до единого сообщения. Но как его увидеть?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174738&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=4" class="addthx" data-post="174738"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]HiEndsoft[/b]','')">HiEndsoft</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 237.0 (наставник), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.74'>Активность: 0.13<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=13651">Участник</a><br><font color=blue>sysenter</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 декабря 2007 17:04 &middot; Поправил: HiEndsoft <br><script type="text/javascript">QU('HiEndsoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HiEndsoft" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
Любому дочернему окну или контролу можно присвоить свой доп. обработчик сообщений в процессе работы (ф-ция SetWindowLong с GWL_WNDPROC) и при создании окна(GWL_HINSTANCE). Причем будет обрабатываться обработчик/и родительского окна/окон и твоего контрола.
<br><br><font size="1"><i>-----<br>продавец резиновых утёнков</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=174739&amp;user=13651&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=5" class="addthx" data-post="174739"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 декабря 2007 17:32 <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Да в том то и дело что не много не это спрашиваю, я не пишу прогу, я пытаюсь их реверсить и хочу понять как работает ОС...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174745&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=6" class="addthx" data-post="174745"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]S_T_A_S_[/b]','')">S_T_A_S_</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 163.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.87'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=251">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 декабря 2007 17:38 <br><script type="text/javascript">QU('S_T_A_S_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=S_T_A_S_" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Читай Рихтера, там целая глава.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174747&amp;user=251&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=7" class="addthx" data-post="174747"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 декабря 2007 18:00 <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
Да читал я его уже, когда пытался выяснить почему окну не приходят сообщения WM_GETEXT и WM_SETTEXT. Выяснил. А на свой вопрос ответа не нашел. Тут больше подходит чтение книг про внутреннее устройство Windows. Но сейчас специально прочитаю главу Рихтера еще раз.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174749&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=8" class="addthx" data-post="174749"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 декабря 2007 19:22 <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
Возможно попробую перефразировать фопрос. Как послать окну сообщения клавиш Esc и таких подобных. Пробовал в Spy++ перехватывать сообщения а потом формировал и посылал окну такие же сообщения, однако мои сообщения не работали.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174757&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=9" class="addthx" data-post="174757"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]Vitek[/b]','')">Vitek</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 52.2 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.03'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5441">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 декабря 2007 20:14 <br><script type="text/javascript">QU('Vitek','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vitek" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<I>smex пишет:<br>Как послать окну сообщения клавиш Esc и таких подобных. </I><br><br>keybd_event не пробовал вызывать ??
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174759&amp;user=5441&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=10" class="addthx" data-post="174759"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]sss[/b]','')">sss</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.83'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6443">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 декабря 2007 05:20 &middot; Поправил: sss <br><script type="text/javascript">QU('sss','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=sss" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<b>smex</b> каждый контрол это окно. <br>1. Определись какому окну тебе необходимо послать сообщение ? Главное окно блокнота и окно EDIT не одно и то же. Каждое имеет свой обработчик. При этом выборка <b>всех</b> сообщений производится в одном месте, так называемом главном цикле выборки сообщений, вызовом GetMessage -&gt; TranslateMessage -&gt; DispatchMessage.<br><br>2. Прочитай какие сообщения воспримет контрол.  Например, как работает сообщение EM_REPLACESEL.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174793&amp;user=6443&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=11" class="addthx" data-post="174793"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 декабря 2007 06:58 <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
ладно объясню еще конкретнее чего хочу. имеется он лайн игра и хочу написать бота, который будет играть за меня, игра должна работать в фоне и не отвлекать меня от других полезных дел, поэту keybd_event не подходит, а нужно как то посылать нажатия клавиш F1,F2 и тд. Ну что, кто сталкивался с подобным?<br><br>PS: как я предполагаю, нужно послать сообщение не конкретному контролу, а в цикл выборки сообщений приложения...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174800&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=12" class="addthx" data-post="174800"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]sss[/b]','')">sss</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.83'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6443">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 декабря 2007 10:14 &middot; Поправил: sss <br><script type="text/javascript">QU('sss','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=sss" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
<I>smex пишет:<br>PS: как я предполагаю, нужно послать сообщение не конкретному контролу, а в цикл выборки сообщений приложения... </I><br><br>Фокус ввода может иметь только один контрол, а логика обработки может быть разной. Например обработчик проверяет, находится ли его контрол в фокусе и если нет отбрасывает сообщение. Главный цикл получает код сообщения и хэндл окна, которому оно предназначено. Далее вызывается обработчик окна которому послано сообщение. Если окна нет, то и обработки не будет. Сложно судить об структуре приложения которое ты описываешь. У тебя есть хэндл главного окна этого приложения ? <br>И вообще, может быть пример приведешь как ты вызываешь например PostMessage(...)?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174811&amp;user=6443&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=13" class="addthx" data-post="174811"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 декабря 2007 14:38 <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
пока к практике не перешел, рассматриваю вопрос теоретически. эксперименты по посылке сообщений провожу при помощи программы WindowsScanner. Так вот. Открывается окно игры в котором два поля ввода, но поля ввода не обычные - они не выделяются программой spy++, тоесть наверняка созданы например средствами DirectX. Необходимо ввести логин и пароль. Я главному окну послылаю сообщений WM_Char логин и пароль вводится отлично. Но когда посылаю главному окну сообщение WM_Char с кодом символа 13(энтер) не происходит ничего(да и чего тока непробовал - и WM_keydown и тд). Пробовал шпионить за главным окном, и посылать такие же сообщения, но ничего не происходит. Еще одно предположение - может эта игра имеет внутреннюю защиту от ботов, тогда чувствую придется эмулировать нажатие клавиш уже на ядерном уровне, что явно куда сложнее средств обычных API. <br>PS: Но самое интересное, что если отослать сообщение WM_keydown с кодом 13 простому едиту любой проги, то все равно не происходит эмуляции нажатия в этом едите клавиши Enter...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174851&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=14" class="addthx" data-post="174851"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]Grom_[/b]','')">Grom_</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 29.8 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.12'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=11787">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 декабря 2007 14:53 <br><script type="text/javascript">QU('Grom_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Grom_" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<I>smex пишет:<br>PS: Но самое интересное, что если отослать сообщение WM_keydown с кодом 13 простому едиту любой проги, то все равно не происходит эмуляции нажатия в этом едите клавиши Enter... </I><br>а в этих &quot;любых&quot; прогах Ентер обрабатывается ?<img src="img/smilies/s3.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174856&amp;user=11787&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=15" class="addthx" data-post="174856"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]Grom_[/b]','')">Grom_</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 29.8 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.12'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=11787">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 декабря 2007 14:56 &middot; Поправил: Grom_ <br><script type="text/javascript">QU('Grom_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Grom_" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
а конкретно по теме , может те нуно сначало Фокус установить на нужном Контролле <img src="img/smilies/s3.gif" alt=""><br>ЗЫ ты когда посылаешь искуственно символы , курсор(коретка) сдвигается ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174857&amp;user=11787&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=16" class="addthx" data-post="174857"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 декабря 2007 20:00 <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
Да, такие символы нормально обрабатываются, например вводится отлично пароль. Но послать ентер не удается. А фокус ввода на тот едит установить невозможно, он создан игрой, походу с помощью DirectX, чего только не пробовал...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174910&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=17" class="addthx" data-post="174910"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 декабря 2007 21:12 <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
<b>smex</b>, тебе надо послать движене мыши, потом click и потом ввод текста. Потом опять движение и click на enter/OK/login. Сделай так что б твоя прога читала script и потом колбась скрипт - это и есть простой бот.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174915&amp;user=1737&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=18" class="addthx" data-post="174915"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 декабря 2007 21:53 <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
Ну да насчет мыши конечно же хорошо, но главная задумка как не отвелкать меня от работы. То есть эмулировать мышь можно, но сэмулировать надо как то, чтобы это сообщение получила только оконная процедура игры, а винда оставалась в неведении. То есть SendMessage и тп не катят. Собственно еще раз вопрос - как послать сообщение в саму оконную процедуру окна минуя винду. Тут думаю нужны глубокие знания внутреннего устройства винды, поэтому и решил спросить у вас, так как никто не знает внутренности винды, как реверсеры. Да оно и понятно, исходников то нет.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174924&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=19" class="addthx" data-post="174924"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]sss[/b]','')">sss</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.83'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6443">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2007 07:44 <br><script type="text/javascript">QU('sss','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=sss" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
<b>smex</b> посылай вначале именно <b>WM_KEYDOWN </b> с виртуальным кодом VK_RETURN, а затем WM_KEYUP. И наверное все получиться.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174979&amp;user=6443&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=20" class="addthx" data-post="174979"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]sss[/b]','')">sss</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.83'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6443">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2007 08:03 <br><script type="text/javascript">QU('sss','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=sss" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
<I>smex пишет:<br>Собственно еще раз вопрос - как послать сообщение в саму оконную процедуру окна минуя винду.  </I><br><br>Как такое возможно ? Минуя систему послать событие в системную очередь? Не используя ее (очереди) средств синхронизации получим deadlock или еще чего нехорошего...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174983&amp;user=6443&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=21" class="addthx" data-post="174983"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2007 09:12 <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
<b>smex</b>, ты не понял, эмулировать надо не &quot;устройство мышь&quot; а всего лишь её эффект для проги. То есть, посылать сообщения окну/контролю через API.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174990&amp;user=1737&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=22" class="addthx" data-post="174990"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]ValdikSS[/b]','')">ValdikSS</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 72.4 (постоянный), 33thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.15'>Активность: 0.05<span style='color:red'>&searr;</span>0.03</span><br>Статус: <a href="action=userinfo&amp;user=4827">Участник</a><br><font color=blue></font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2007 10:07 <br><script type="text/javascript">QU('ValdikSS','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ValdikSS" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
<b>smex</b><br>как послать сообщение в саму оконную процедуру окна минуя винду<br>сначала найди хэндл, потом шли этому хэндлу.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=174997&amp;user=4827&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=23" class="addthx" data-post="174997"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]Bitfry[/b]','')">Bitfry</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 495.3 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.8'>Активность: 0.3<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=410">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2007 11:09 <br><script type="text/javascript">QU('Bitfry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Bitfry" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
<I>smex пишет:<br>Да, такие символы нормально обрабатываются, например вводится отлично пароль. Но послать ентер не удается.</I><br><br>Если цикл сообщений чуть сложнее чем &quot;Get -&gt;Translate -&gt; Dispatch&quot;, то, возможно, код VK_RETURN вообще не доходит до Dispatch. Первым делом глянь, есть ли в этом цикле сообщений вызов IsDialogMessage.<br><br>ЗЫ Тут несколько раз было жесткое слова &quot;ВСЕ&quot;, так вот, хочу заметить, не все сообщения попадают в очередь. Некоторые система шлёт окну напрямую.
<br><br><font size="1"><i>-----<br>Всем привет, я вернулся</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=175002&amp;user=410&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=24" class="addthx" data-post="175002"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]sss[/b]','')">sss</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.83'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6443">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2007 12:43 <br><script type="text/javascript">QU('sss','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=sss" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#25');return false;">#25</a> </span><div align=left><br>
<b>Bitfry</b> в контексте какого потока можно послать сообщение напрямую ? В смысле, в каком потоке будет произведена обработка сообщения?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=175007&amp;user=6443&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=25" class="addthx" data-post="175007"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]Bitfry[/b]','')">Bitfry</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 495.3 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.8'>Активность: 0.3<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=410">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2007 14:03 <br><script type="text/javascript">QU('Bitfry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Bitfry" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#26');return false;">#26</a> </span><div align=left><br>
<I>sss пишет:<br>Bitfry в контексте какого потока можно послать сообщение напрямую ? В смысле, в каком потоке будет произведена обработка сообщения? </I><br>Тут я ляпу дал.<br><br><I>Bitfry пишет:<br>ЗЫ Тут несколько раз было жесткое слова &quot;ВСЕ&quot;, так вот, хочу заметить, не все сообщения попадают в очередь. Некоторые система шлёт окну напрямую. </I><br>Беру эти слова обратно <img src="img/smilies/s15.gif" alt="">
<br><br><font size="1"><i>-----<br>Всем привет, я вернулся</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=175019&amp;user=410&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=26" class="addthx" data-post="175019"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]Alex_Nik[/b]','')">Alex_Nik</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.1 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.55'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=14743">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2007 19:44 &middot; Поправил: Alex_Nik <br><script type="text/javascript">QU('Alex_Nik','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Alex_Nik" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#27');return false;">#27</a> </span><div align=left><br>
<I>smex пишет:<br>отослать сообщение WM_keydown с кодом 13 простому едиту любой проги, то все равно не происходит эмуляции нажатия в этом едите клавиши Enter </I><br>SCAN коды клавиатуры и ASC коды не одно и тоже<br>попробуй invoke keybd_event,1CH,1CH,0,0	    ;ENTER<br><br>Дос-овские окна это понимают, у меня.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=175040&amp;user=14743&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=27" class="addthx" data-post="175040"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2007 22:15 &middot; Поправил: smex <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#28');return false;">#28</a> </span><div align=left><br>
Всем спасибо за активные попытки помощи <img src="img/smilies/s1.gif" alt=""><br><br><b>Alex_Nik</b><br>как я уже писал прога должна работать в фоне, не отвлекая меня от работы, а в случае с keybd_event окно игры постоянно будет получать фокус, что выводит, работать практически невозможно...<br><br><b>Bitfry</b><br>Насчет твого проедложения обязательно посмотрю, может и вправду необычный цикл обработки сообщений<br><br><b>s0larian</b><br>а вот эмулировать мышь это само то, это ж надо, правду говорят, что всё гениальное просто...есть свои нюансы, но думаю они решаемы<br><br>Ну а теперь самое интересное. Мне, да и всем думаю это будет интересное, собственно чего не могу понять уже пол года:<br>Итак - лог сообщений от Spy++ окну игры от нажатия клавиши Enter<br>&lt;00022&gt; 01020614 P WM_KEYDOWN nVirtKey:VK_RETURN cRepeat:1 ScanCode:1C fExtended:1 fAltDown:0 fRepeat:0 fUp:0<br>&lt;00023&gt; 01020614 P WM_CHAR chCharCode:&#039;000D&#039; (13) cRepeat:1 ScanCode:1C fExtended:1 fAltDown:0 fRepeat:0 fUp:0<br>&lt;00024&gt; 01020614 P WM_KEYUP nVirtKey:VK_RETURN cRepeat:1 ScanCode:1C fExtended:1 fAltDown:0 fRepeat:1 fUp:1<br>Все хорошо, так и должно быть. Но почему посылая этому же окну (с тем же хэндлом) этих же сообщений не происходит никаких действий. Хотя бы теоретически как такое возможно, ведь я фактически для проги нажал Enter. Одно из двух - прога перехватывает API и недает в себя вводить данные(но почему текст вводится?) либо винда работает непонятно как... Кому не лень попробуйте найти в какой нибудь проге Edit реагирующий на Enter и нажать его программно. Всё щас заплачу ))))). Кому интересно присоединяйтесь - может вместе поймем этот момент работы ОС. А ввобще чувствую надо брать в руки SoftIce и хорошую книгу для изучения внутренностей винды...что не так то просто как кажется
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=175045&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=28" class="addthx" data-post="175045"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 декабря 2007 01:22 <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#29');return false;">#29</a> </span><div align=left><br>
<b>smex</b>, с enter особенная тема. Просто пошли WM_CLICK кнопке и усё.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=175061&amp;user=1737&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=29" class="addthx" data-post="175061"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="30" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 декабря 2007 02:48 <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#30" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=10861&amp;page=0#30');return false;">#30</a> </span><div align=left><br>
Ну с этим то разобрался, прогу то думаю сделаю. Просто я так не люблю делать что то, не поняв как оно работает. И тут уже вопрос не в проге, а в чести). Вот и сейчас меня терзают сомнения, как возможно что эмулирую точно такие же сообщения, как поймал шпионом, а оно не пашет. Что то здест нечисто.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=175072&amp;user=12605&amp;forum_n=2&amp;topic=10861&amp;page=0&amp;anchor=30" class="addthx" data-post="175072"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=2&amp;topic=10861&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=2&amp;topic=10861&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/red.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=2&sortBy=0&page=0.html"><b>Крэки, обсуждения</b></a> <b class=bulletHead>&#8212;&#8250;</b> Работа сообщений в ОС Widows</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#31" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="2">
<input type="hidden" name="topic" value="10861">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=10861" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
