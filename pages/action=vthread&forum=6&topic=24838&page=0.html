<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Библиотека импорта из DEF-файла - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Дело в следующем. Пытаюсь перелинковать msvcrt.lib. Порядок действий был таков: выковырял из оригинальной либы объектники, и состряпал из выхлопа DumpBin DEF-файл, на основе которого собрал свою либу и скомпоновал её с выдранными">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=40382'>jinoweb</a> (+6 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Библиотека импорта из DEF-файла</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=6&amp;topic=24838&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=6&amp;topic=24838&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 12:49 &middot; Поправил: FalseMaster <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Дело в следующем. Пытаюсь перелинковать msvcrt.lib. Порядок действий был таков: выковырял из оригинальной либы объектники, и состряпал из выхлопа DumpBin DEF-файл, на основе которого собрал свою либу и скомпоновал её с выдранными объектниками. Процесс проходит без ошибок и ворнингов, при подключении созданной либы к проекту (DLL) тоже всё нормуль, но трабла в том, что в секцию импорта DLL&#039;ки попадает имя _CxxThrowException@8, тогда как msvcrt.dll экспортирует _CxxThrowException. Вот <noindex><a href="http://erfaren.narod.ru/Asm/Erfaren002.htm" rel="nofollow" target="_blank">тут</a></noindex> описан аналогичный &quot;эксперимент&quot;. Добавляя в DEF-файл строки:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">_CxxThrowException</li><li class="hl_l1">__CxxThrowException@8&nbsp;<span class="hl_char">=</span>&nbsp;_CxxThrowException</li>        </ol>
    </div>
</div></div>
 аффтар якобы получает годную либу. Так вот, это всё х**ня. Линкер игнорит алиасы и пихает в LIB-файл оба имени, а при сборке DLL естественно выбирает то, которое сгенерил компилер, т.е. stdcall-ное. Между тем в оригинальной мелкомягкой либе присутствует только ОДНО определение – __CxxThrowException@8 (с префиксом &quot;__imp_&quot; и без оного) и при этом каким-то загадочным образом в импорте DLL оказывается _CxxThrowException. Собственно вопрос: как это делается?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=377984&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=1" class="addthx" data-post="377984"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]jinoweb[/b]','')">jinoweb</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.2 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.35'>Активность: 0.03<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=40382">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 13:36 <br><script type="text/javascript">QU('jinoweb','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=jinoweb" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Попробуй вместо тех двух строк написать:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">_CxxThrowException&nbsp;<span class="hl_char">=</span>&nbsp;__CxxThrowException@8</li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=377985&amp;user=40382&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=2" class="addthx" data-post="377985"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 14:02 <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<b>jinoweb</b><br><br>Да я уж все возможные комбинации перебрал, иначе стал бы тему создавать. На текст после &quot;=&quot; линкер попросту кладёт. Предложенный тобой вариант приводит к &quot;unresolved external symbol __CxxThrowException@8&quot; при сборке DLL, потому как в либе оседает только _CxxThrowException.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=377986&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=3" class="addthx" data-post="377986"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Vamit[/b]','')">Vamit</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/20406.jpg" alt=""><br><span class=txtSm>Ранг: 331.1 (мудрец), 561thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.3'>Активность: 0.19<span style='color:red'>&searr;</span>0.06</span><br>Статус: <a href="action=userinfo&amp;user=20406">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 14:27 &middot; Поправил: Vamit <br><script type="text/javascript">QU('Vamit','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vamit" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
Я делал вот так и проблем не было:<br>def
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>LIBRARY</b></span>&nbsp;&nbsp;<span class="hl_quote">&quot;mspdb140&quot;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">EXPORTS</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SigForPbCb</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PDBExportValidateInterface</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PDBOpenEx2W</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">?</span>open@NameMap@@SAHPAUPDB@@HPAPAU1@@Z</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">?</span>FOpen@MREngine@@SGHPAPAU1@PAUMreToPdb@@HH@Z</li>        </ol>
    </div>
</div></div>
<br>.h
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;</li><li class="hl_l1">#pragma&nbsp;once</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">#ifdef&nbsp;MSPDB140_EXPORTS</li><li class="hl_l0">#define&nbsp;MSPDB140_API&nbsp;__declspec<span class="hl_char">(</span>dllexport<span class="hl_char">)</span></li><li class="hl_l1">#else</li><li class="hl_l0">#define&nbsp;MSPDB140_API&nbsp;__declspec<span class="hl_char">(</span>dllimport<span class="hl_char">)</span></li><li class="hl_l1">#endif</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">MSPDB140_API&nbsp;<span class="hl_function"><b>DWORD</b></span>&nbsp;SigForPbCb<span class="hl_char">(</span><span class="hl_function">char</span><span class="hl_char">*</span>&nbsp;pStr<span class="hl_char">,</span>&nbsp;size_t&nbsp;nSize<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>DWORD</b></span>&nbsp;crc<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">extern&nbsp;<span class="hl_quote">&quot;C&quot;</span>&nbsp;MSPDB140_API&nbsp;BOOL&nbsp;_cdecl&nbsp;PDBExportValidateInterface<span class="hl_char">(</span><span class="hl_function"><b>DWORD</b></span>&nbsp;intv<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">extern&nbsp;<span class="hl_quote">&quot;C&quot;</span>&nbsp;MSPDB140_API&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;_cdecl&nbsp;PDBOpenEx2W<span class="hl_char">(</span><span class="hl_function"><b>const</b></span>&nbsp;wchar_t<span class="hl_char">*</span>&nbsp;wszPDB<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>const</b></span>&nbsp;<span class="hl_function">char</span><span class="hl_char">*</span>&nbsp;szMode<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;cbPage<span class="hl_char">,</span>&nbsp;<span class="hl_function">int</span><span class="hl_char">*</span>&nbsp;pec<span class="hl_char">,</span>&nbsp;wchar_t<span class="hl_char">*</span>&nbsp;wszError<span class="hl_char">,</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>DWORD</b></span>&nbsp;cchErrMax<span class="hl_char">,</span>&nbsp;struct&nbsp;PDB<span class="hl_char">*</span><span class="hl_char">*</span>&nbsp;pppdb<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br>Всё зависит от calling convention, если правильно задать, то не нужно никаких алиасов<br><br><b>Добавлено спустя 37 минут</b><br>Имена в .lib<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">__imp_<span class="hl_char">?</span>SigForPbCb@@YAKPADIK@Z</li><li class="hl_l1">__imp__PDBExportValidateInterface</li>        </ol>
    </div>
</div></div>
<br>а в .dll как и в .def
<br><br><font size="1"><i>-----<br>Everything is relative...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=377987&amp;user=20406&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=4" class="addthx" data-post="377987"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 15:06 <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<b>Vamit</b><br>&gt;Я делал вот так и проблем не было:<br>Ну так с cdecl и ++нутым манглингом у меня тоже проблем нет, беда только с stdcall.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=377988&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=5" class="addthx" data-post="377988"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]Vamit[/b]','')">Vamit</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/20406.jpg" alt=""><br><span class=txtSm>Ранг: 331.1 (мудрец), 561thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.3'>Активность: 0.19<span style='color:red'>&searr;</span>0.06</span><br>Статус: <a href="action=userinfo&amp;user=20406">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 15:20 &middot; Поправил: Vamit <br><script type="text/javascript">QU('Vamit','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vamit" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Да какая разница, всё должно нормально конвертироваться:<br>в деф _CxxThrowException<br>в либ __CxxThrowException@8<br>значит декларация должна быть<br> extern &quot;C&quot; бла бла не помню что возвращает __stdcall CxxThrowException(бла бла);
<br><br><font size="1"><i>-----<br>Everything is relative...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=377990&amp;user=20406&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=6" class="addthx" data-post="377990"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 15:36 <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<b>Vamit</b><br>&gt;в деф _CxxThrowException<br>&gt;в либ __CxxThrowException@8<br>ВОТ. В этом-то и корень злополучия. Я не знаю способа получить _CxxThrowException@8 в LIB, объявив _CxxThrowException в DEF.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=377991&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=7" class="addthx" data-post="377991"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]Vamit[/b]','')">Vamit</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/20406.jpg" alt=""><br><span class=txtSm>Ранг: 331.1 (мудрец), 561thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.3'>Активность: 0.19<span style='color:red'>&searr;</span>0.06</span><br>Статус: <a href="action=userinfo&amp;user=20406">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 16:34 &middot; Поправил: Vamit <br><script type="text/javascript">QU('Vamit','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vamit" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
def к lib почти отношения не имеет (для lib он может только задать алиасы), def для dll задает импортируемое имя при линковке оной.<br>А имя в lib создает компилятор из декларации. Ты lib как получаешь?<br><I>FalseMaster пишет:<br>Я не знаю способа получить _CxxThrowException@8 в LIB </I><br>Дак это имя там и есть.<br><I>FalseMaster пишет:<br>что в секцию импорта DLL&#039;ки попадает имя _CxxThrowException@8 </I><br>А попадает оно откуда? Конечно же из либ. Def подключают при линковке dll, a не lib.
<br><br><font size="1"><i>-----<br>Everything is relative...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=377993&amp;user=20406&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=8" class="addthx" data-post="377993"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]mysterio[/b]','')">mysterio</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1803.gif" alt=""><br><span class=txtSm>Ранг: 307.9 (мудрец), 196thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.17'>Активность: 0.18<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1803">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 16:43 &middot; Поправил: mysterio <br><script type="text/javascript">QU('mysterio','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mysterio" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
мысли в слух: А если так ?<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">__CxxThrowException@8&nbsp;<span class="hl_function"><b>proc</b></span>&nbsp;<span class="hl_function">near</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;__imp___CxxThrowException</li><li class="hl_l0">__CxxThrowException@8&nbsp;<span class="hl_function">endp</span></li>        </ol>
    </div>
</div></div>
<br>или<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>LIBRARY</b></span>&nbsp;<span class="hl_quote">&quot;blabla.dll&quot;</span></li><li class="hl_l1">EXPORTS</li><li class="hl_l0">__CxxThrowException@8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@здесь_номер_функции_в_blabla<span class="hl_char">.</span>dll</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">и&nbsp;с&nbsp;подчеркиваниями&nbsp;поиграться&nbsp;<span class="hl_char">-</span>&nbsp;одно&nbsp;или&nbsp;оба&nbsp;не&nbsp;нужны<span class="hl_char">:</span></li><li class="hl_l1">_CxxThrowException@8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@здесь_номер_функции_в_blabla<span class="hl_char">.</span>dll</li><li class="hl_l0">CxxThrowException@8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@здесь_номер_функции_в_blabla<span class="hl_char">.</span>dll</li>        </ol>
    </div>
</div></div>
<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">_CxxThrowException@8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@578</li>        </ol>
    </div>
</div></div>
<br>где 578 - номер твоей функции в &quot;blabla.dll&quot;<br><br><I>Смысл? Когда я пишу в DEF:<br>EXPORTS<br>__CxxThrowException@8</I><br>Смысл в том что при такой записи твой экспорт &quot;указывает&quot; в никуда - &quot;<I>потому как в msvcrt.dll такой функции нет</I>&quot;!<br><br>и возможно имеет смысл записать это все так (учитывая подчеркивания и вариации имени конечно - на вкус и цвет):<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">__CxxThrowException&nbsp;@1551&nbsp;<span class="hl_comment">; 060Fh   // если LIBRARY = COREDLL.dll</span></li><li class="hl_l1">__CxxThrowException&nbsp;@73&nbsp;<span class="hl_comment">; 0049h  // если LIBRARY = msvcrt.dll</span></li>        </ol>
    </div>
</div></div><br><br><font size="1"><i>-----<br>Don_t hate the cracker - hate the code.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=377994&amp;user=1803&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=9" class="addthx" data-post="377994"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 17:01 &middot; Поправил: FalseMaster <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<b>Vamit</b><br><br>&gt;def к lib почти отношения не имеет<br>Вообще-то DEF-файл – это самый оптимальный (по части писанины) способ создания LIB.<br>&gt;Ты lib как получаешь?<br>Lib.exe /DEF:deffile.def /OUT:libname.lib<br>&gt;Дак это имя там и есть.<br>Да, есть. И в оригинальном файле от MS и в моём, только при включении моего творения в проект, собранная DLL&#039;ка импортирует _CxxThrowException@8 вместо _CxxThrowException.<br>&gt;А попадает оно откуда? Конечно же из либ.<br>Только у меня LIB кривая получается. А почему, ума не приложу.<br><br><b>mysterio</b><br><br>&gt;мысли в слух: А если так ?<br>&gt;или<br>Смысл? Когда я пишу в DEF:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">EXPORTS</li><li class="hl_l1">__CxxThrowException@8</li>        </ol>
    </div>
</div></div>
, в дальнейшем линкер при сборке целевой DLL видит __CxxThrowException@8 и не ругается, но бинарь выходит нерабочий, потому как в msvcrt.dll такой функции нет.<br><br>&gt;и с подчеркиваниями поиграться - одно или оба не нужны<br>Одно нужно (недекорированное имя функции – _CxxThrowException), второе добавляет линкер.<br><br>&gt;и возможно имеет смысл записать это все так<br>Не понял, в чём прикол? Ну объявил я дважды имя, которое компоновщику не всралось – он-то ищет __CxxThrowException@8 и не находит.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=377995&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=10" class="addthx" data-post="377995"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Vamit[/b]','')">Vamit</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/20406.jpg" alt=""><br><span class=txtSm>Ранг: 331.1 (мудрец), 561thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.3'>Активность: 0.19<span style='color:red'>&searr;</span>0.06</span><br>Статус: <a href="action=userinfo&amp;user=20406">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 17:31 &middot; Поправил: Vamit <br><script type="text/javascript">QU('Vamit','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vamit" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
Давай сначала, при линковке dll создаются 2 файла lib и dll (остальные побоку), либ нужна для статического подключения длл в свой проект, а длл ну понятно для чего. либ может быть вообще пустой и содержать только декларации (этого достаточно чтобы проект понял что ему нужно импортировать). длл же содержит весь код obj файлов. Имена в obj файле и lib одинаковые, а в dll могут отличаться в пределах декорации или вообще отсутствовать (экспорт по ординалу). либ может содержать сколь угодно алиасов имен (в длл же только одно экспортиремое имя на единицу трансляции), проект берет любой из алиасов в либе попадающий под свою декларацию.<br>Поэтому чтоб всё состыковать нужно знать что хочешь, т.к. можно оставить в dll _CxxThrowException@8 и задекларировать её в проекте под это определение или линковать длл сразу с нужным именем.<br>Теперь как ты получаешь длл? Или длл ты используешь оригинальную?<br><I>FalseMaster пишет:<br>Только у меня LIB кривая получается. </I><br>У тебя не либ кривая, а длл кривая.<br><br><b>Добавлено спустя 8 минут</b><br>А вообще-то цель всего этого какая?
<br><br><font size="1"><i>-----<br>Everything is relative...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=377996&amp;user=20406&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=11" class="addthx" data-post="377996"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 17:45 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<I>FalseMaster пишет:<br>а, есть. И в оригинальном файле от MS и в моём, только при включении моего творения в проект, собранная DLL&#039;ка импортирует _CxxThrowException@8 вместо _CxxThrowException. </I><br>А если crt-шный код выкинуть вообще?? В смысле точку входа на свою поменять и запретить cpp-исключения в опциях. Или это уже сделано было??!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=377997&amp;user=26651&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=12" class="addthx" data-post="377997"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 18:10 <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
<b>Vamit</b><br><br>&gt;Давай сначала, при линковке dll создаются 2 файла lib и dll<br>Давай. Но ты почему-то начал с конца. А с начала будет так. При генерации LIB создаются 2 файла: собственно LIB и EXP, который удаляется за ненадобностью. LIB же объединяется с ранее выдранными объектниками. Затем сие детище подрубается к проекту DLL вместо оригинальной msvcrt.lib и получается вышеописанная жопа.<br><br>&gt;проект берет любой из алиасов в либе попадающий под свою декларацию.<br>Так он и берёт _CxxThrowException@8, но и импортирует в декорированном виде из-за кривизны LIB.<br><br>&gt;задекларировать её в проекте под это определение<br>Нельзя ничего задекларировать. Эта функция из сишного рантайма и имеет тип вызова stdcall (выход по ret 8).<br><br>&gt;Теперь как ты получаешь длл?<br>Компилирую из овердохуа сурса, а вот слинковать не получается.<br><br>&gt;У тебя не либ кривая, а длл кривая.<br>DLL никак не может быть кривой, ибо с родной MS&#039;овоской msvcrt.lib собирается на ура и с импортом всё в порядке.<br><br>&gt;А вообще-то цель всего этого какая?<br>Забабахать &quot;полноприводную&quot; (со всеми импортами из msvcrt.dll) msvcrt.lib и собрать проект (чужой).<br><br><b>ELF_7719116</b><br><br>&gt;А если crt-шный код выкинуть вообще?<br>Невозможно. Проект состоит из нескольких DLL и EXE, и все они плотно завязаны на CRT (задействовано множество API&#039;шек).
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=377998&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=13" class="addthx" data-post="377998"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]Vamit[/b]','')">Vamit</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/20406.jpg" alt=""><br><span class=txtSm>Ранг: 331.1 (мудрец), 561thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.3'>Активность: 0.19<span style='color:red'>&searr;</span>0.06</span><br>Статус: <a href="action=userinfo&amp;user=20406">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 18:28 &middot; Поправил: Vamit <br><script type="text/javascript">QU('Vamit','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vamit" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
<I>Забабахать &quot;полноприводную&quot; (со всеми импортами из msvcrt.dll) msvcrt.lib и собрать проект (чужой). </I><br>Нихрена не понял, проект после компиляции какую длл будет использовать? Слинкованную тобой, оригинальную или вообще без оной - статическая линковка. А создание либ это не цель, это прослойка)<br> <br><I>DLL никак не может быть кривой, ибо с родной MS&#039;овоской msvcrt.lib собирается на ура и с импортом всё в порядке. </I><br>Опять не в ту сторону пошел, понятно что оригинальные либ и длл стыкуются, или тут либ оригинальная а длл твоя. Но чуть выше отвечаешь на вопрос как слинковать длл - <I>а вот слинковать не получается </I>, значит своей длл ты не получил.<br><br><b>Добавлено спустя 4 минуты</b><br>ЗЫ: И ник у тебя под стать написанному, надо было назваться <b>TrueMaster</b>, тогда бы всё получилось <img src="img/smilies/s5.gif" alt=""> Шутка конечно.
<br><br><font size="1"><i>-----<br>Everything is relative...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=377999&amp;user=20406&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=14" class="addthx" data-post="377999"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 18:45 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<I>FalseMaster пишет:<br>Невозможно. Проект состоит из нескольких DLL и EXE, и все они плотно завязаны на CRT (задействовано множество API&#039;шек). </I><br>А если все функи сделать как static linked, и выкинуть оригинальную msvcrt. Просто, я тож не совсем понял как и <b>Vamit</b>, если Ваша dll это враппер, который пихается между оригинальной <b>msvcrt - exe&#039;шник</b>, а-ля &quot;мостик&quot;, зачем обязательно вязать всё жестко вязать через LIB &amp; MAP &amp; crt, а просто взять и сделать обычный враппер или хуки.<br>В конце концов, можно и таблицу импорта самому поправить :/
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=378001&amp;user=26651&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=15" class="addthx" data-post="378001"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 18:59 &middot; Поправил: FalseMaster <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
<b>Vamit</b><br><br>&gt;проект после компиляции какую длл будет использовать?<br>Виндовую, ту что в &quot;System32&quot; проживает.<br><br>&gt;А создание либ это не цель, это прослойка<br>Так-то да, но необходимая, поэтому можно сказать, часть цели. Да и в будущем бы пригодилась.<br><br>&gt;или тут либ оригинальная а длл твоя<br>Наоборот же. Я перелинковываю библиотеку импорта, т.к. она неполноценная. Но оно, сцуко, сопротивляетсо.<br><br>&gt;значит своей длл ты не получил.<br>Той, что является частью проекта, само собой не получил (с валидным импортом), т.к. не могу создать LIB, такой же как у MS. Тут определённо есть какая-то тайна.<br><br>&gt;надо было назваться TrueMaster<br>Ну, теперь уж поздно пить Боржоми <img src="img/smilies/s1.gif" alt=""><br><br><b>ELF_7719116</b><br><br>&gt;А если все функи сделать как static linked<br>Тогда всё заработает, но это не мой метод, я всегда использую динамичесое связывание.<br><br>&gt;если Ваша dll это враппер, который пихается между оригинальной msvcrt<br>Моя DLL – это часть большого проекта. Между ней и msvcrt.dll никаких прослоек нет, просто у меня не получается импортировать функцию из msvcrt.dll, потому что по неясным причинам создаётся корявый LIB-файл.<br><br>&gt;В конце концов, можно и таблицу импорта самому поправить<br>Хм, а это вариант. Костыль конечно, но если не найду решения, то придётся видимо пойти этим путём.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=378002&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=16" class="addthx" data-post="378002"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 338.5 (мудрец), 349thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 19:16 &middot; Поправил: difexacaw <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
Рантайм пытаются обычно выпилить, а не использовать. Это делает приложение не стабильным и вообще не рабочим из за отсутствия этих десятков пустых ртл, которые ничего не делают в системе. Быть может вы не правильно понимаете задачу ?<br><br>При запуске апп с кучей этого дерьма в импорте выводится загрузочный фейл. Иногда есчо нужно это говно регистрировать regsvr. Это хорошо что оно не запускается.<br><br>Так как такое апп никуда не годится, скорее всего оно вредоносно.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=378003&amp;user=40990&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=17" class="addthx" data-post="378003"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 19:46 &middot; Поправил: FalseMaster <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
<b>difexacaw</b><br><br>&gt;Рантайм пытаются обычно выпилить, а не использовать.<br>Проект не мой. Он опенсорсный, скачанный c GitHub&#039;а. Написан так, как написан, я ничего с этим поделать не могу, хочу лишь его скомпилить (внеся некоторые поправки).<br><br>&gt;Иногда есчо нужно это говно регистрировать regsvr.<br>Отвязка от реестра для меня давно уже не представляет сложности. Инжектим DLL&#039;ку, сплайсим NtCreateKey, вызываем DllRegisterServer и всего делов.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=378004&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=18" class="addthx" data-post="378004"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 338.5 (мудрец), 349thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 19:52 &middot; Поправил: difexacaw <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
<b>FalseMaster</b><br><br>&gt; Инжектим DLL&#039;ку, сплайсим NtCreateKey, вызываем DllRegisterServer и всего делов. <br><br>И получаем результат блокировку системой/проактивкой/анализером со всеми вытекающими последствиями(залив на ав сканер и ваше апп уже на апп). Но конечно если вы это апп запускаете у себя на машине в дебаг моде, то конечно же это не проблема. Как и весь этот паганый ртл-импорт, ставить 20 гб студию что бы ваши окна запустить..
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=378005&amp;user=40990&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=19" class="addthx" data-post="378005"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]Vamit[/b]','')">Vamit</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/20406.jpg" alt=""><br><span class=txtSm>Ранг: 331.1 (мудрец), 561thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.3'>Активность: 0.19<span style='color:red'>&searr;</span>0.06</span><br>Статус: <a href="action=userinfo&amp;user=20406">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 19:56 <br><script type="text/javascript">QU('Vamit','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vamit" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
<I>FalseMaster пишет:<br>Виндовую, ту что в &quot;System32&quot; проживает. </I><br>Тогда вообще непонятно, зачем вам нужна самопальная либа, больше чем есть в экспорте оригинальной длл всё равно через неё не достать, а оригинальный .lib файл есть - вот и используйте его.<br>Самопальные либы нужны только в одном случае, если нужно к своему приложению прицепить чужую длл, для которой отсутствует либ файл.<br>Что-то вы тут темните и не  раскрываете цель.
<br><br><font size="1"><i>-----<br>Everything is relative...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=378006&amp;user=20406&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=20" class="addthx" data-post="378006"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 20:28 &middot; Поправил: FalseMaster <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
<b>difexacaw</b><br><br>&gt;И получаем результат блокировку системой/проактивкой/анализером<br>У меня ничего такого не наблюдается… ну бывает авер изредка ругнётся на инжектируемый бинарь (пара прецедентов на пару сотен ущученных прог). Но я его включаю только при выходе в и-нет, а в это время как правило софт массированно не юзаю.<br><br>&gt;ставить 20 гб студию что бы ваши окна запустить..<br>Не знаю, что ты там себе напридумывал… У меня VC весит всего 60 метров вкупе с рантаймом сразу от нескольких версий – по нынешним меркам это совсем немного.<br><br><b>Vamit</b><br><br>&gt;больше чем есть в экспорте оригинальной длл всё равно через неё не достать<br>Так в том-то и дело, что msvcrt.lib предоставляет не весь экспорт соответствующего бинарника. Я потому и затеял это всё.<br><br>&gt;Что-то вы тут темните и не раскрываете цель.<br>Мля, я могу выложить LIB и DLL msvcrt, сам сравнишь. Да и на своей машине можешь глянуть: к примеру _resetstkoflw в LIB-файле отсутствует, и она не единственная.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=378008&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=21" class="addthx" data-post="378008"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]Vamit[/b]','')">Vamit</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/20406.jpg" alt=""><br><span class=txtSm>Ранг: 331.1 (мудрец), 561thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.3'>Активность: 0.19<span style='color:red'>&searr;</span>0.06</span><br>Статус: <a href="action=userinfo&amp;user=20406">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 21:11 <br><script type="text/javascript">QU('Vamit','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vamit" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
<I>FalseMaster пишет:<br> msvcrt.lib предоставляет не весь экспорт соответствующего бинарника </I><br>Тогда сделай только враппер на недостающие функции, создаешь .h файл с декларациями, .cpp с пустыми телами фунок, .def с экспортом имен из оригинальной dll, компилишь либу, подключаешь в проект, ссылаешься на оригинальную длл и усё.
<br><br><font size="1"><i>-----<br>Everything is relative...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=378009&amp;user=20406&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=22" class="addthx" data-post="378009"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 августа 2017 21:28 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
В DEF-файле аргменты не описаны.<br>А ччч@8 это имнно описание аргументов. Два двойных слова.<br>Поэтому с помощью DEF-файла тут ничего не получится, надо мантулить &quot;фиктивную&quot; DLL.<br><br><I>Vamit пишет:<br>Что-то вы тут темните и не раскрываете цель. <br></I><br>Хочет сделать враппер, что тут такого<br><br>Это нормально. В смысле хотеть.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=378010&amp;user=35473&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=23" class="addthx" data-post="378010"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 338.5 (мудрец), 349thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 августа 2017 20:15 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
<b>FalseMaster</b><br><br>Я когда ксед линковал, то заколхозил его сишный импорт. Забил пустые стабы. Иначе пришлось бы руками фиксить компилятор и его модуля. И по дефолту там тоже крэп линкуется, который киляется через /nodefaultlib.<br><br>Процесс компиляции закрытый и это всё цепочка извратов с не своими модулями. Это врядле можно ровным способом решить. Или собирать целый исходный проект или фиксить вручную конечный бинарь.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=378019&amp;user=40990&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=24" class="addthx" data-post="378019"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 августа 2017 13:40 &middot; Поправил: FalseMaster <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#25');return false;">#25</a> </span><div align=left><br>
Итак, раз уж народ дёрнул, было бы дурным тоном не отчитаться. В общем, когда я ломал голову над сабжем, из глубин моей дырявой памяти всплыло некое смутное воспоминание. Полез я в дистриб VC и да, оно было там – сурсы рантайма. Заглянул в образец DEF-файла; все три наших барана (_CxxThrowException, __CxxLongjmpUnwind, _seh_longjmp_unwind) объявлены без &quot;собаки&quot; и размера аргументов. Чудеса да и только (в теле либы-то они заманглены). Думал я думал и не придумал ничего лучше, чем подцепить объектник с алиасами к своей кастомной либе. Свершилось! DLL&#039;ка из проекта собралась с валидным импортом. Что в итоге: <strike>гланды удалены через задницу</strike> текущая задача кое-как решена, но вопрос остался открытым.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=378033&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=25" class="addthx" data-post="378033"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]Vamit[/b]','')">Vamit</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/20406.jpg" alt=""><br><span class=txtSm>Ранг: 331.1 (мудрец), 561thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.3'>Активность: 0.19<span style='color:red'>&searr;</span>0.06</span><br>Статус: <a href="action=userinfo&amp;user=20406">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 августа 2017 15:38 <br><script type="text/javascript">QU('Vamit','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vamit" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#26');return false;">#26</a> </span><div align=left><br>
<I> текущая задача кое-как решена, но вопрос остался открытым. </I><br>Я тебе дал решение, которое 100% рабочее и не раз уже применялось на практике.
<br><br><font size="1"><i>-----<br>Everything is relative...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=378034&amp;user=20406&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=26" class="addthx" data-post="378034"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 августа 2017 21:24 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#27');return false;">#27</a> </span><div align=left><br>
<I>FalseMaster пишет:<br>DLL&#039;ка из проекта собралась с валидным импортом <br></I><br>О чём и писалось выше. Приходится делать объявления в asm-файле (PROTO).<br><br><b>Vamit</b>, кстати, писал о том же самом.<br><i class=x><br></i>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=378039&amp;user=35473&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=27" class="addthx" data-post="378039"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]FalseMaster[/b]','')">FalseMaster</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.9 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.74'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26640">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 августа 2017 06:15 <br><script type="text/javascript">QU('FalseMaster','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=FalseMaster" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#28');return false;">#28</a> </span><div align=left><br>
<b>Vamit</b><br><br>&gt;Я тебе дал решение, которое 100% рабочее<br>Возможно, хотя есть сомнения, т.к. я пробовал оформлять экспорт через директиву /EXPORT (а компиль сишный именно это и делает, преобразуя __declspec(dllexport) в опцию линкера) – результат был такой же как и через DEF-файл, т.е. никакой. В любом случае, моё-то чем хуже? Сработало ведь.<br><br><b>dosprog</b><br><br>&gt;Приходится делать объявления в asm-файле<br>А вот кренделям из мелкософта не приходится. И мне бы хотелось знать их секрет.<br><br>&gt;Vamit, кстати, писал о том же самом.<br>Не совсем.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=378047&amp;user=26640&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=28" class="addthx" data-post="378047"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 января 2018 13:10 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#29');return false;">#29</a> </span><div align=left><br>
<I>FalseMaster пишет:<br>А вот кренделям из мелкософта не приходится. И мне бы хотелось знать их секрет.<br> </I><br>Так у них не фиктивные LIB&#039;ы,  а реальные, от линковки реальных библиотек. Ото и весь секрет.<br>Те PROTO нужны для получения нормального &quot;фиктивного&quot; LIB-файла.<br>В реальных, у микрософтовцев, тоже всё так же само.<br><i class=x><br></i>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=381596&amp;user=35473&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=29" class="addthx" data-post="381596"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="30" onfocus="this.blur()" href="JavaScript:di('[b]BlackCode[/b]','')">BlackCode</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/33766.png" alt=""><br><span class=txtSm>Ранг: 71.5 (постоянный), 95thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.48'>Активность: 0.1<span style='color:green'>&nearr;</span>0.38</span><br>Статус: <a href="action=userinfo&amp;user=33766">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 января 2018 19:46 &middot; Поправил: BlackCode <br><script type="text/javascript">QU('BlackCode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=BlackCode" target="_blank">Личное сообщение</a> &middot;  <a href="#30" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=24838&amp;page=0#30');return false;">#30</a> </span><div align=left><br>
С подобным я сталкивался когда компилил статическую sqlite3.lib для своего проекта.<br>Так вот запарился я с тем, что собираю статику и в импорт попадает вместо msvcrt.dll - msvcrt120.dll<br>Т.е. совместимость вниз ровно до msvcrt120.<br>Плюс ко всему студия лепила .СRT секцию в которой ничего не было.<br>С матами решил проблему скомпилив статику sqlite3 в VC6 под ХР..<br>Все <img src="img/smilies/s1.gif" alt=""> За то у меня щас есть адекватная sqlite3.lib, которую могу ликовать к любому проекту.. правда только х86<br><br>P.S. Подобная трабла не только с либами. К примеру, если я в свой проект воткну сейчас функу из msvcrt, так<br>МАСМ втыкает msvcrt120. Как с этим бороться хз по сей день <img src="img/smilies/s4.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=381599&amp;user=33766&amp;forum_n=6&amp;topic=24838&amp;page=0&amp;anchor=30" class="addthx" data-post="381599"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=6&amp;topic=24838&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=6&amp;topic=24838&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Библиотека импорта из DEF-файла</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#31" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="6">
<input type="hidden" name="topic" value="24838">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=24838" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
