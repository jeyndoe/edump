<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>вопросы по shell. - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Привет всем. Суть проблемы в следующем. Идет сессия, по предмету &quot;Операционные системы.&quot;, подвисает последняя контрольная. И вроде ничего мудреного, но что то недопру никак. Суть задания - создать скрипт в среде">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=1533'>rmn</a>, <a target='_blank' href='?action=userinfo&amp;user=28016'>asfa</a>, <a target='_blank' href='?action=userinfo&amp;user=55483'>surunnerr</a>, <a target='_blank' href='?action=userinfo&amp;user=28927'>Vicshann</a> (+4 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/mod.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=7&sortBy=0&page=0.html"><b>Оффтоп</b></a> <b class=bulletHead>&#8212;&#8250;</b> вопросы по shell.</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]Small_S[/b]','')">Small_S</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 72.7 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.49'>Активность: 0.08<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=9147">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 31 марта 2008 06:44 &middot; Поправил: Small_S <br><script type="text/javascript">QU('Small_S','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Small_S" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=11610.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Привет всем. Суть проблемы в следующем. Идет сессия, по предмету &quot;Операционные системы.&quot;, подвисает <br>последняя контрольная. И вроде ничего мудреного, но что то недопру никак. Суть задания - создать <br>скрипт в среде эмулятора системы UNIX- Cygwin, который бы в заданном каталоге у всех txt файлов <br>создавал или менял(если она есть) первую строку файла на строку вводимую пользователем(желательно запуск с этими параметрами из командной строки). Пока упрощенный скрипт(последовательный ввод по приглашению) я создал только он почему то обрабатывает 2 файла и всё. Судя по пустому репорту обнаруженных файлов цикл отрабатывает полностью, а вот действия по вводу в каждый заголовок строки происходят не полностью(2раза).Скрипт имеет вид:<br><br>echo Введите путь к каталогу в котором будут меняться заголовки файлов.<br>read x; echo В каталоге обнаружены следующие файлы; find &#036;x -type f -a -name &#039;*.txt&#039; &gt; report.txt<br>echo &#036;( &lt; report.txt); echo Введите новый заголовок этих файлов.; read y<br>ostatok=5;<br>while [ -n &quot;&#036;ostatok&quot; ]<br>do<br>read imia ostatok &lt; report.txt<br>ostatok=&#036;(sed report.txt -e {&quot;1 d&quot;})<br>echo &#036;imia<br>echo &#036;y &gt; &#036;imia<br>echo &#036;ostatok &gt; report.txt<br>done<br> <br>Запускаю пока просто sh ren_contr(он без командных парам.).<br>Действия понятны, но всё равно поясню.<br><br>1 -приглашение ввести каталог<br>2 -конвейер --&gt;ввод пути каталога --&gt; вывод сообщения о списке обнаруженных файлов --&gt; сам поиск с записью репорт<br>3 -конвейер --&gt;выводим из репорта список на экран --&gt; приглашаем ввести заголовок --&gt; сам ввод заголовка<br>4 -переменная для цикла(не ноль)<br>5 -начало цикла<br>6 -вводим из репорта в imia- первое слово в ostatok- второе слово(на данном этапе оно пустое- окончание строки<br>так как путь с именем файла идёт как непрерывное слово и всё забирает переменная imia.<br>7 -присваиваем новое значение переменной ostatok после обрезки в sed-е первой строки.<br>8 -это просто для контроля выводим на экран<br>9 -наконец вносим заголовок на место в находящийся в переменной imia файл.<br>10 -а переменную ostatok c оставшимися файлами скидываем назад в репорт<br><br>Цикл крутиться пока в репорте не исчезнет последняя запись. Вроде всё логично и выполняется,но...<br><b>Может кто подскажет в чем дело, ну и другие варианты приветствуются,</b> я пробовал тоже через sed заголовок писать в файлы в строке 9, но видимо косячу с синтаксисом, что то не получается.<br><br>И ещё по ходу вопросы из которых главный нет ли отладчика под shell-ом чтобы посмотреть что происходит с переменными, методичка молчит, в гугле при описании скриптового языка не встречаю. Скрипты тоже искал в гугле, но на мою тему нет или не попалось. И вообще язык этот после асма и делфей, да даже после васика, смотрится как то убого, синтаксис-жесть. Текст и так может  быть выражен,и так,и эдак, и вот вот так. В чём кайф не въеду. И вот эти задания в наших контрольных с <br>работой с текстами ну так сочетаются с его возможностями( в sed поболее можно, но там ещё свой синтаксис сам чёрт ногу сломит пока их подружишь) просто вау. Если ещё учесть, что команды при выполнении скрипта можно брать только с двух методических пособий(а там кое чего нет), то картина станет полной.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=184888&amp;user=9147&amp;forum_n=7&amp;topic=11610.html&amp;page=0&amp;anchor=1" class="addthx" data-post="184888"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]tundra37[/b]','')">tundra37</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 310.8 (мудрец), 29thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.32'>Активность: 0.43<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4072">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 31 марта 2008 09:32 <br><script type="text/javascript">QU('tundra37','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tundra37" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=11610.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
1) команда  echo &#036;y &gt; &#036;imia   заменит все содержимое, а не только первую строку<br>2) конструкция  ostatok=&#036;(sed report.txt -e {&quot;1 d&quot;})    приводит  к  тому, что убираются<br>  все символы конца строки и при втором исполнении  в  report.txt   ничего не остается<br>3) для отладки можно использовать какой-то ключ при вызове  sh - будет выдаваться<br>    протокол выполнения , либо просто выдавать  на консоль содержимое переменных<br>    и файлов, чтобы убедится, что все работает  так как ты задумал. Именно так я и определил,<br>    что записывется в переменную ostatok.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=184895&amp;user=4072&amp;forum_n=7&amp;topic=11610.html&amp;page=0&amp;anchor=2" class="addthx" data-post="184895"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]Small_S[/b]','')">Small_S</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 72.7 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.49'>Активность: 0.08<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=9147">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 31 марта 2008 17:21 <br><script type="text/javascript">QU('Small_S','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Small_S" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=11610.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<b>tundra37</b> большое человеческое спс. А то я уже в затуп от перенапряжения вхожу, вот и не сообразил как бы переменную глянуть.<br><br>Однако теперь другой затык -сразу за структурой ostatok=&#036;(sed report.txt -e {&quot;1 d&quot;}) пытаюсь восстановить возврат каретки(или как больше нравиться концы строк), делаю так как увидел на одном сайте там пример<br><br>chrish@dhcp3 [345]&#036; echo -e &#039;hello\tthere&#039;   <br>hello   there<br>chrish@dhcp3 [346]&#036; echo -e &#039;hello\tthere&#039; | sed -e &#039;s/[[:space:]]/, /&#039;<br>hello, there<br><br>Моя конструкция которую принимает мой sed выглядит так:<br><br>sed report.txt -e &#039;s\[[:space:]]\[[:&#92;r:]]\g&#039;<br><br>Двойной слеш там для экранирования как у меня для седа в методичках пишут.<br>Млинн, спейс этот хренов sed махом меняет на всё что угодно только не на возврат каретки, с любым количеством скобок или с экранированием или без. Ему фиолетово,- команда <b>s</b>, которая исправно меняла всё чо хочешь сразу становится седу незнакомой(типа неизвестная операция &#039;s&#039;).<br>Уж каким раком, боком я это \r или \015 или \x00D или даже Enter(хрен их придурков-разработчиков этого чуда-юда знает) не ставил. Всё без толку.<img src="img/smilies/s10.gif" alt=""> <img src="img/smilies/s10.gif" alt=""> <img src="img/smilies/s10.gif" alt=""><br><br>Жена предлагает новопассит, но это не выход.<br><br><b>Кто нибудь знает как возврат каретки символом в херовом sed-е задаётся?<br>И ещё есть ли способ в shell-е как в делфях или нормальных скриптовых языках(типа олидбгскрипте) асм-вставки вставлять?</b><br><br>Я заранее прошу прощения за весьма агрессивный пост у модераторов, но просто уже колотит от мысли, что за два дня  хелоу ворлд не могу в пять шесть txt-шек написать программно.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=184936&amp;user=9147&amp;forum_n=7&amp;topic=11610.html&amp;page=0&amp;anchor=3" class="addthx" data-post="184936"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b][HEX][/b]','')">[HEX]</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/2365.gif" alt=""><br><span class=txtSm>Ранг: 467.7 (мудрец), 5thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.92'>Активность: 0.27<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2365">Участник</a><br><font color=blue>Иной :)</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 01 апреля 2008 18:19 &middot; Поправил: [HEX] <br><script type="text/javascript">QU('[HEX]','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=[HEX]" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=11610.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<b>Small_S</b><br>В цикл с подстановкой найденых файлов думаю сам засунешь.<br><code>#!/bin/sh<br>read y<br>sed -e &quot;1d&quot; &#036;1 &gt;&#036;1.tmp<br>newline=&quot;&#036;y&#92;<br>&quot;<br>echo &#036;newline &gt;&#036;1.new<br>cat &#036;1.tmp &gt;&gt;&#036;1.new<br>rm -f &#036;1.tmp</code><br><br>Не шикарный метод конечно, но всеже рабочий.
<br><br><font size="1"><i>-----<br>Computer Security Laboratory</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=185053&amp;user=2365&amp;forum_n=7&amp;topic=11610.html&amp;page=0&amp;anchor=4" class="addthx" data-post="185053"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]Small_S[/b]','')">Small_S</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 72.7 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.49'>Активность: 0.08<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=9147">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 01 апреля 2008 21:57 <br><script type="text/javascript">QU('Small_S','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Small_S" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=11610.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<b>[HEX]</b> спс. завтра буду пробовать, уже сил нет <img src="img/smilies/s14.gif" alt="">  &#036;1-это так понимаю то где у меня найденные файлы были(report.txt) после find-а.<br><br>Походу там с этой кареткой какой то цирк. Думал это sed из-за мудрёного синтаксиса-экранирования не всасывает, но вот попробовал tr [[:space:]]  [[:\r:]] &lt; &#036;ostatok так тоже нивкакую теперь уже шеловая команда tr пробел видит а возврат каретки нет и как в седе меняет пробел на что хочеш только не на каретку. Тоже и экранировать по всякому пробовал, и так, и эдак, всякие слешики, кавычечки, скобочки, метасимволы ему полный фиолет, не, мягко выразился,- ультрафиолет. Всё это чудо, слышал как то, на си писалось тем более непонятно чего оно \r не всасывает(этож вроде сишное обозначение изначально)<br><br>Не, помимо выполнения контрольной жутко интересно зачем так набаламутили с синтаксисом разработчики этож мешает кодингу. И команды тоже тяп ляп- она должна отрезать строку по указанному номеру, так строку режет и ещё удаляет каретку какого то(ну это хоть ленью можно обьяснить). А вот синтаксические изыски садо-мазо какое то. Или я в какойто запредельный, недоступный простым смертным кайф не въеду.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=185073&amp;user=9147&amp;forum_n=7&amp;topic=11610.html&amp;page=0&amp;anchor=5" class="addthx" data-post="185073"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]Small_S[/b]','')">Small_S</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 72.7 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.49'>Активность: 0.08<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=9147">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 апреля 2008 10:07 <br><script type="text/javascript">QU('Small_S','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Small_S" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=11610.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Привет всем. Наконец прикончил задание. Млин пришлось ещё пару дней убить. В скрипт пришлось вносить второй цикл чтобы справиться с багом по удалению возврата каретки. С тем, что дал <b>[HEX]</b> разобрался, но уточнив у препода не стал туда вносить и мучиться совмещать(так как это чтобы строки старые не терялись, а смещались в конец под новый заголовок). Вот скрипт с внесением пути каталога и добавляемого заголовка из командной строки. Запускается стандартно:<br>sh script2  &lt;каталог где будем менять&gt;    &lt;заголовок который вносим&gt;<br><br>Скрипт выглядит так(немного меняю для лучшего понимания):<br><br>echo Введённый путь к каталогу в котором будут переименовываться файлы.<br> x=&#036;1; echo &#036;x <br>echo В каталоге обнаружены следующие файлы<br>find &#036;x -type f -a -name &#039;*.txt&#039; &gt; report<br>echo &#036;( &lt; report )<br>echo Введённый новый заголовок этих файлов.; y=&#036;2; echo &#036;y; <br>ostatok=5<br>while [ -n &quot;&#036;ostatok&quot; ]<br>do<br>read imia ostatok &lt; report<br>echo &#036;ostatok; echo &#036;ostatok &gt; report2<br>ostatok=&#036;(sed report -e {&quot;1 d&quot;})<br>echo &#036;ostatok &gt; report<br>echo &#036;y &gt; &#036;imia<br>done<br>ostatok2=5; <br>while [ -n &quot;&#036;ostatok2&quot; ]<br>do<br>read imia2 ostatok2 &lt; report2<br>echo &#036;ostatok2<br>echo &#036;ostatok2 &gt; report2<br>echo &#036;y &gt; &#036;imia2<br>done<br><br>Итак построчно выполняются действия:<br>1.	Выводится надпись – сообщение о каталоге который ввели из командной строки.<br>2.	Конвейер присваивает переменной x значение строки каталога и выводит его на экран.<br>3.	Выводится надпись об списке обнаруженных файлов txt.<br>4.	Осуществляется поиск файлов txt  и помещение их списка в файл  report.<br>5.	Выводим список из файла report на экран.<br>6.	Выводится сообщение о введённом в командной строке заголовке, переменной y присваивается значение из командной строки, это значение выводится на экран.<br>7.	Переменная ostatok делается не равной нулю(на ней будет основан цикл).<br>8.	Сообщаем циклу условие на работу – работаем пока ostatok не ноль.<br>9.	Начало цикла.<br>10.	Читаем из файла репорт в imia –первое слово(там путь первого файла), а в ostatok всё остальное.<br>11.	Выводим значение остатка на экран(я оставил для наглядности эту отладочную информацию) . <br>Далее скидываем ostatok в report2 так как сед ведёт себя на следующей команде неадекватно и при <br>втором прогоне в переменной ostatok ничего не будет, а вся оставшаяся строка не имея символов возврата каретки уйдёт в imia.<br>12.	Присваиваем переменной ostatok значение из файла report вырезав оттуда первую строку(предварительно sed-ом).<br>13.	Скидываем новое содержимое из переменной ostatok назад в файл report.<br>14.	Пишем требуемый заголовок в файл(имя и путь которого в переменной imia).<br>15.	Коней цикла.<br>16.	Инициализируем переменную ostatok2(делаем её не равной нулю) для второго цикла. Он нужен для того чтобы обойти баг с удалением символа возврата каретки,- иначе заголовок будет снесён в два первых по алфавиту файла.<br>17.	Задаем условие работы второго цикла, он будет работать пока не равна нулю переменная ostatok2.<br>18.	Начало цикла.<br>19.	Вносим в переменную imia2 путь и имя файла в виде первого слова, а в переменную ostatok2 остальное из сохранённого ранее report2.<br>20.	Оставил отладочный вывод значения ostatok2 на экран.<br>21.	Пишем то, что осталось в ostatok2 назад в report2.<br>22.	Наконец записываем  по находящемуся в переменой imia2 адресу файл необходимый заголовок.<br>23.	конец второго цикла.<br><br>Но в этом скрипте есть еще серьезный недостаток,- из командной строки можно внести в заголовок только 1 слово на английском. Ниже первый вариант скрипта в режиме диалога с пользователем. Его запускаем без параметров типа так sh script1.<br><br>echo Введите путь к каталогу в котором будут переименовываться файлы.<br>read x; echo В каталоге обнаружены следующие файлы; find &#036;x -type f -a -name &#039;*.txt&#039; &gt; report<br>echo &#036;( &lt; report ); echo Введите новый заголовок этих файлов.; read y<br>ostatok=5;<br>while [ -n &quot;&#036;ostatok&quot; ]<br>do<br>read imia ostatok &lt; report; echo &#036;ostatok; echo &#036;ostatok &gt; report2; <br>ostatok=&#036;(sed report -e {&quot;1 d&quot;})<br>echo &#036;ostatok &gt; report<br>echo &#036;y &gt; &#036;imia<br>done; ostatok2=5; <br>while [ -n &quot;&#036;ostatok2&quot; ]<br>do<br>read imia2 ostatok2 &lt; report2; echo &#036;ostatok2; echo &#036;ostatok2 &gt; report2; <br>echo &#036;y &gt; &#036;imia2<br>done<br><br>В данном варианте можно вносить хоть предложение на русском или английском. Уф с этим предметом всё.<br>Всем спасибо, но закрывать топик не буду. Может ещё у кого вопросы возникнут  по shell и всем миром можно будет их решить.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=185376&amp;user=9147&amp;forum_n=7&amp;topic=11610.html&amp;page=0&amp;anchor=6" class="addthx" data-post="185376"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/mod.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=7&sortBy=0&page=0.html"><b>Оффтоп</b></a> <b class=bulletHead>&#8212;&#8250;</b> вопросы по shell.</span></td>
</tr></table>
</div>
<a name=newreply></a>
<center><h3>У вас должно быть 20 пунктов ранга, чтобы оставлять сообщения в  этом подфоруме, но у вас только 0</h3></center><script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=11610" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
