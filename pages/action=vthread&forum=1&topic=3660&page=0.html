<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Очень хитрая задачка... - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Столкнулся с хитрой задачей. Есть программа которая общается с контроллером через COM порт. Программа постоянно отправляет по 3 байта и получает ответ такой же длины. Например: отправили A B C, в ответ получили A (B-C) X. То есть">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=132'>YDS</a>, <a target='_blank' href='?action=userinfo&amp;user=41701'>_MBK_</a>, <a target='_blank' href='?action=userinfo&amp;user=44014'>user99</a> (+9 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/green.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=1&sortBy=0&page=0.html"><b>Основной форум</b></a> <b class=bulletHead>&#8212;&#8250;</b> Очень хитрая задачка...</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 06 января 2006 18:16 &middot; Поправил: ToBad <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Столкнулся с хитрой задачей. Есть программа которая общается с контроллером через COM порт. Программа постоянно отправляет по 3 байта и получает ответ такой же длины. Например: отправили A B C, в ответ получили A (B-C) X. То есть контроллер возвращает в качестве ответа первый присланный байт, затем разницу второго и третьего отправленного а в качестве последнего байт который зависит от всех трёх посланных контроллеру. По какой формуле его (третий байт ответа) можно вычислить и нужно узнать. Вариант с хранением всего массива не подходит так как нужно написать программу для контроллера. Хочу отметить, что каждая посылка не зависит ни от времени, ни от предыдущей посылки. Т.е. на каждое число, посланное программой контроллеру приходит однозначный ответ. Диапазон посылок 000000 - 17FFFF. Все ответы у меня есть. Вот лишь часть из них (указываю только третий ответный байт). Я понимаю, что задача может оказаться не решаемой, но хочется верить, что есть светлые умы в нашем отечестве.
<br>
<br><code>запрос - последний байт ответа с контроллера
<br>000000 - 0F	010000 - F1	020000 - 04	030000 - 07
<br>000001 - 62	010001 - 14	020001 - 07	030001 - 69
<br>000002 - C2	010002 - 12	020002 - 13	030002 - EE
<br>000003 - DC	010003 - 0B	020003 - 03	030003 - 00
<br>			
<br>000100 - 74	010100 - 0F	020100 - 0A	030100 - 09
<br>000101 - 0E	010101 - F0	020101 - 05	030101 - 06
<br>000102 - 61	010102 - 17	020102 - 04	030102 - 6A
<br>000103 - C3	010103 - 13	020103 - 12	030103 - EF
<br>			
<br>000200 - 07	010200 - 1D	020200 - 07	030200 - 03
<br>000201 - 75	010201 - 0E	020201 - 0B	030201 - 08
<br>000202 - 0D	010202 - F3	020202 - 06	030202 - 05
<br>000203 - 60	010203 - 16	020203 - 05	030203 - 6B
<br>			
<br>000300 - 1E	010300 - 26	020300 - 09	030300 - 10
<br>000301 - 06	010301 - 1C	020301 - 06	030301 - 02
<br>000302 - 76	010302 - 0D	020302 - 08	030302 - 0B
<br>000303 - 0C	010303 - F2	020303 - 07	030303 - 04
<br></code>
<br>
<br><code>Текст программы предществующий отправке 3-х байт.
<br>
<br>406BAC                 call    ds:rand
<br>406BB2                 cdq
<br>406BB3                 mov     ecx, 64h
<br>406BB8                 xor     esi, esi
<br>406BBA                 idiv    ecx
<br>406BBC                 lea     eax, [edx+edx*2]
<br>406BBF                 lea     edi, [eax+eax*4]
<br>406BC2                 shl     edi, 2
<br>406BC5 loc_406BC5:     lea     edx, [edi+esi]
<br>406BC8                 push    edx
<br>406BC9                 call    POSILKA
<br>406BCE                 add     esp, 4
<br>406BD1                 mov     MEGA5[esi], al
<br>406BD7                 inc     esi
<br>406BD8                 cmp     esi, 3Ch
<br>406BDB                 jl      short loc_406BC5
<br>
<br>Сама отправка:
<br>
<br>401230 POSILKA         proc near
<br>401230
<br>401230 Buffer          = byte ptr -8
<br>401230 var_6           = byte ptr -6
<br>401230 NumberOfBytesWritten= dword ptr  4
<br>401230
<br>401230                 mov     ax, word ptr [esp+NumberOfBytesWritten]
<br>401235                 sub     esp, 8
<br>401238                 mov     MEGA1, ax
<br>40123E                 call    ds:rand
<br>401244                 and     eax, 800000FFh
<br>401249                 jns     short loc_401252
<br>40124B                 dec     eax
<br>40124C                 or      eax, 0FFFFFF00h
<br>401251                 inc     eax
<br>401252 loc_401252:     mov     cx, MEGA1
<br>401259                 xor     edx, edx
<br>40125B                 mov     MEGA2, al
<br>401260                 add     cl, al
<br>401262                 mov     [esp+8+var_6], al
<br>401266                 mov     dl, ch
<br>401268                 lea     eax, [esp+8+NumberOfBytesWritten]
<br>40126C                 mov     [esp+1], cl
<br>401270                 push    0               ; lpOverlapped
<br>401272                 mov     [esp+0Ch+Buffer], dl
<br>401276                 mov     edx, COM_Object
<br>40127C                 push    eax             ; lpNumberOfBytesWritten
<br>40127D                 lea     ecx, [esp+10h+Buffer]
<br>401281                 push    3               ; nNumberOfBytesToWrite
<br>401283                 push    ecx             ; lpBuffer
<br>401284                 push    edx             ; hFile
<br>401285                 call    ds:WriteFile
<br>40128B                 cmp     MEGA1, 0FFFFh
<br>401294                 jz      short loc_4012B6
<br>401296                 push    esi
<br>401297                 mov     esi, ds:Sleep
<br>40129D loc_40129D:     push    0Ah             ; dwMilliseconds
<br>40129F                 call    esi ; Sleep
<br>4012A1                 cmp     MEGA1, 0FFFFh
<br>4012AA                 jnz     short loc_40129D
<br>4012AC                 mov     al, MEGA3
<br>4012B1                 pop     esi
<br>4012B2                 add     esp, 8
<br>4012B5                 retn
<br>4012B6 loc_4012B6:     mov     al, MEGA3
<br>4012BB                 add     esp, 8
<br>4012BE                 retn
<br>
<br>
<br>Чтение и проверка 3-х байт ответа от контроллера.
<br>
<br>
<br>4012E0 READ_COM        proc near
<br>4012E0
<br>4012E0 NumberOfBytesRead= dword ptr -1Ch
<br>4012E0 Buffer          = dword ptr -18h
<br>4012E0 Frequency       = LARGE_INTEGER ptr -10h
<br>4012E0 PerformanceCount= LARGE_INTEGER ptr -8
<br>4012E0
<br>4012E0                 sub     esp, 1Ch
<br>4012E3                 push    ebp
<br>4012E4                 push    esi
<br>4012E5                 lea     eax, [esp+24h+Frequency]
<br>4012E9                 push    edi
<br>4012EA                 push    eax             ; lpFrequency
<br>4012EB                 call    ds:QueryPerformanceFrequency
<br>4012F1                 push    0
<br>4012F3                 push    3E8h
<br>4012F8                 mov     ecx, dword ptr [esp+30h+Frequency+4]
<br>4012FC                 mov     edx, dword ptr [esp+30h+Frequency]
<br>401300                 push    ecx
<br>401301                 push    edx
<br>401302                 call    __alldiv
<br>401307                 push    offset PerformanceCount ; lpPerformanceCount
<br>40130C                 mov     dword ptr [esp+2Ch+Frequency], eax
<br>401310                 mov     dword ptr [esp+2Ch+Frequency+4], edx
<br>401314                 call    ds:QueryPerformanceCounter
<br>40131A                 mov     edi, ds:Sleep
<br>401320                 mov     ebp, ds:EscapeCommFunction
<br>401326                 mov     esi, ds:ReadFile
<br>40132C loc_40132C:     push    1               ; dwMilliseconds
<br>40132E                 call    edi ; Sleep
<br>401330                 mov     eax, dword_40CA88
<br>401335                 test    eax, eax
<br>401337                 jz      short loc_401385
<br>401339                 lea     eax, [esp+28h+PerformanceCount]
<br>40133D                 push    eax             ; lpPerformanceCount
<br>40133E                 call    ds:QueryPerformanceCounter
<br>401344                 mov     edx, dword ptr PerformanceCount
<br>40134A                 mov     eax, dword ptr unk_40CA7C
<br>40134F                 mov     ecx, dword ptr [esp+28h+PerformanceCount]
<br>401353                 push    0
<br>401355                 sub     ecx, edx
<br>401357                 mov     edx, dword ptr [esp+2Ch+PerformanceCount+4]
<br>40135B                 sbb     edx, eax
<br>40135D                 mov     eax, dword ptr [esp+2Ch+Frequency]
<br>401361                 push    eax
<br>401362                 push    edx
<br>401363                 push    ecx
<br>401364                 call    __alldiv
<br>401369                 cmp     eax, 1388h
<br>40136E                 jl      short loc_401385
<br>401370                 mov     ecx, HANDLE_COM2
<br>401376                 push    6               ; dwFunc
<br>401378                 push    ecx             ; hFile
<br>401379                 call    ebp ; EscapeCommFunction
<br>40137B                 mov     dword_40CA88, 0
<br>401385 loc_401385:     mov     ecx, COM_Object
<br>40138B                 lea     edx, [esp+28h+NumberOfBytesRead]
<br>40138F                 push    0               ; lpOverlapped
<br>401391                 push    edx             ; lpNumberOfBytesRead
<br>401392                 lea     eax, [esp+30h+Buffer]
<br>401396                 push    1               ; nNumberOfBytesToRead
<br>401398                 push    eax             ; lpBuffer
<br>401399                 push    ecx             ; hFile
<br>40139A                 call    esi ; ReadFile
<br>40139C                 test    eax, eax
<br>40139E                 jz      short loc_40132C
<br>4013A0                 mov     eax, [esp+28h+NumberOfBytesRead]
<br>4013A4                 test    eax, eax
<br>4013A6                 jz      short loc_40132C
<br>4013A8                 mov     al, byte ptr [esp+28h+Buffer]
<br>4013AC                 lea     edx, [esp+28h+NumberOfBytesRead]
<br>4013B0                 cmp     al, 20h
<br>4013B2                 push    0               ; lpOverlapped
<br>4013B4                 push    edx             ; lpNumberOfBytesRead
<br>4013B5                 jnb     short loc_401405
<br>4013B7                 mov     ecx, COM_Object
<br>4013BD                 lea     eax, [esp+30h+Buffer+1]
<br>4013C1                 push    2               ; nNumberOfBytesToRead
<br>4013C3                 push    eax             ; lpBuffer
<br>4013C4                 push    ecx             ; hFile
<br>4013C5                 call    esi ; ReadFile
<br>4013C7                 movzx   dx, byte ptr [esp+28h+Buffer]
<br>4013CD                 movzx   ax, byte ptr [esp+28h+Buffer+1]
<br>4013D3                 shl     edx, 8
<br>4013D6                 add     edx, eax
<br>4013D8                 cmp     dx, MEGA1
<br>4013DF                 jnz     loc_40132C
<br>4013E5                 mov     cl, MEGA2
<br>4013EB                 mov     al, byte ptr [esp+28h+Buffer+2]
<br>4013EF                 xor     cl, al
<br>4013F1                 mov     MEGA1, 0FFFFh
<br>4013FA                 mov     MEGA3, cl
<br>401400                 jmp     loc_40132C      ; lpNumberOfBytesRead
<br>401405 loc_401405:     mov     ecx, COM_Object
<br>40140B                 lea     eax, [esp+30h+Buffer]
<br>40140F                 push    1               ; nNumberOfBytesToRead
<br>401411                 push    eax             ; lpBuffer
<br>401412                 push    ecx             ; hFile
<br>401413                 call    esi ; ReadFile
<br>401415                 mov     al, MEGA4
<br>40141A                 test    al, al
<br>40141C                 jnz     loc_40132C
<br>401422                 mov     dl, byte ptr [esp+28h+Buffer]
<br>401426                 mov     MEGA4, dl
<br>40142C                 jmp     loc_40132C
<br>40142C READ_COM        endp</code>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49373&amp;user=702&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=1" class="addthx" data-post="49373"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Spiteful[/b]','')">Spiteful</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.1 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.92'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=154">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 06 января 2006 19:16 &middot; Поправил: Spiteful <br><script type="text/javascript">QU('Spiteful','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Spiteful" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
первое что пришло в голову, можно составить таблицу истинности для байта ответа и ,соответственно, получить 8 функций алгебры логики для вычисления этого самого байта. Но для этого надо знать все ответы.
<br>Ну и попытаться минимизировать эти функции...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49382&amp;user=154&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=2" class="addthx" data-post="49382"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 06 января 2006 21:10 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
Очень интересно ! Наверняка программы есть для построения таблиц истиности ? А где можно почитать подробней ? Все ответы я знаю. Их 1536000 байт. А что получится 8 формул по которым можно будет получать это число ? И не нужно хранить все 1536000 варианта ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49399&amp;user=702&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=3" class="addthx" data-post="49399"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Spiteful[/b]','')">Spiteful</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.1 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.92'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=154">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 06 января 2006 22:20 <br><script type="text/javascript">QU('Spiteful','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Spiteful" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
Почитать можно книжку какую-нибудь по логике http://www.williamspublishing.com/PDF/5-8459-0498-6/part.pdf  или дискретной математике http://www.megaupload.com/?d=GIQDNVFQ 
<br>про минимизацию функций вкратце почитать тут http://www.dvgups.ru/METDOC/GDTRAN/YAT/AT/TOAVTOM/A/21.htm  или тут http://www.dvgups.ru/METDOC/GDTRAN/YAT/AT/TOAVTOM/A/22.htm 
<br>программы то скорее всего есть и для таблиц истинности, и для минимизации ФАЛ, но у тебя задача больно специфическая, самому скорее всего придется покодить <img src="img/smilies/s1.gif" alt="">
<br>...может кто чего еще проще посоветует...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49412&amp;user=154&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=4" class="addthx" data-post="49412"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 06 января 2006 22:46 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<b>Spiteful</b> а ты смог бы это сделать - если бы захотел ?
<br>Книжку которая по двум последним ссылкам я уже скачал, вот только ума у меня не хватит это понять и воплотить в жизнь. Ну и до конца не уверен поможет ли это. Скинь мне на tobadko@mail.ru свой e-mail - охота пообщаться.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49417&amp;user=702&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=5" class="addthx" data-post="49417"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]dragon[/b]','')">dragon</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 40.0 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.93'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=91">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 06 января 2006 22:56 <br><script type="text/javascript">QU('dragon','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dragon" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<b>Spiteful</b>
<br>Получится 8 формул, каждая будет содержать 3*2^24 = 50331648 логические операции, ну допустим в лучшем случае минимизуруется 2/3(вряд ли), получится более 20 миллионов операций, а формул то 8, т.е. на хранение уйдёт больше 20 метров памяти.  Да и вычисляться будет каждый ответ чуть ли не четверть секунды на 4Ггц процессоре, так что этот способ ещё хуже чем просто хранить 2^24 = 16777216 ответов <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49420&amp;user=91&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=6" class="addthx" data-post="49420"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]Spiteful[/b]','')">Spiteful</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.1 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.92'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=154">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 06 января 2006 23:19 <br><script type="text/javascript">QU('Spiteful','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Spiteful" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<b>dragon</b>
<br>ну вообще да, грамотно организовать его и все будет шустро считаться
<br>я предложил альтернативный вариант(автору массив не нравится): хранить не ответ-запрос, а функции <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49423&amp;user=154&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=7" class="addthx" data-post="49423"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 06 января 2006 23:50 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<b>dragon</b>
<br>Ответов всего 1536000, так как точный диапазон от 000000 до 177000. Но и 1.5 мб хранить в микроконтроллере проблема. Файл с последовательными ответами rar-ом не жмётся. Хотя определённая визуальная цикличность в нём есть.
<br>
<br>А кто нибудь смотрел в исходники получения ответа ? Может там есть проверка какая либо ? Может я чего не доглядел ?
<br>
<br>И вообще всё это очень похоже на остаток от деления...
<br>
<br><b>Spiteful</b> 1.5 мб ! Какой же должен быть микроконтроллер ? И если хранить во флеше, то там вроде ограниченное число циклов чтения/записи, а обмен с устройством идёт постоянно.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49425&amp;user=702&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=8" class="addthx" data-post="49425"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]Spiteful[/b]','')">Spiteful</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.1 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.92'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=154">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2006 00:11 <br><script type="text/javascript">QU('Spiteful','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Spiteful" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
хм, микроконтроллер сам то должен  как-то высчитывать ответ, не будут же те, кто его разрабатывал, зашивать в него массив... должна быть всетки функция и не очень сложная, не 3*2^24 операций <img src="img/smilies/s1.gif" alt="">
<br><b>ToBad</b>
<br>А от этого микроконтроллера нужна функция получения только этого ответа ? Нельзя ли модифицировать эту программу, чтобы она замест COM порта читала скажем файл с массивом ответов?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49428&amp;user=154&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=9" class="addthx" data-post="49428"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2006 00:27 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Вообще я думаю формула очень проста. Например (A*B)/C и берём остаток от деления, или ещё проще. Но как это узнать ? Я уже писал, что второй байт - это разница третьего и второго байта посланного контроллеру. Думаю с третьим не должны были мутить что то сложное. В файле ответов прослеживается визуальная связь блоками по 32 байта. Выкладываю 30 кб от этого файла. Если глянуть например hiew или фаром в hex режиме, то справа где отображаются char значения можно заметить что постоянно мелькают две строчки заглавных русских букв (в дос кодировке), после них несколько строк с преобладанием псевдографики. Повторяются эти две строчки через одинаковый интервал. Но как это использовать ?
<br>
<br><b>Spiteful</b> это программно-аппаратный комплекс. Софт часто меняется. Назначение этого байтика неизвестно, но результат нужен именно в виде формулы. Запатчить софт можно было бы, но цель только копирование железяки, а софт трогать не разрешают.<br><br><img src="img/attach.gif" alt=""> <a href="./files/72c3_C30000.dat.zip">72c3_C30000.dat.zip</a>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49430&amp;user=702&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=10" class="addthx" data-post="49430"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]BlindChaos[/b]','')">BlindChaos</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 12.0 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.2'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1725">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2006 08:15 <br><script type="text/javascript">QU('BlindChaos','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=BlindChaos" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
Уважаемый, в &quot;контроллер&quot; передается не 3, а 2 байта. 3й байт случайный и используется протоколом:
<br>
<br>Посылка запроса:
<br>Вход: InputWord (16 бит)
<br>1. Сохранить InputWord
<br>2. Разбить InputWord на 2 байта, b0 и b1
<br>3. Сгенерировать случайный байт RandByte
<br>4. b0* = b0 + RandByte
<br>5. Послать в COM-порт байты:  |  b1 |    | b0* |    | RandByte |
<br>
<br>Прием ответа:
<br>1. Считать с контроллера 3 байта, r2, r1, r0
<br>2. Проверить байт r2 на &gt;20h (т.е. должен быть 0-1Fh)
<br>3. Объединить r2 и r1 как word, проверить на равенство сохраненному InputWord
<br>    Не равно - цикл.
<br>4. ResultByte = r0 XOR RandByte
<br>Выход: ResultByte.
<br>
<br>Таким образом, в устройство передается число 0-1FFFh и возвращается 1 байт. Скорее всего обычное чтение памяти, судя по входному множеству...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49459&amp;user=1725&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=11" class="addthx" data-post="49459"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2006 13:26 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=3660.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<b>BlindChaos</b> Огромное спасибо ! Вы абсолютно правы !!! Я всё проверил - действительно чтение памяти и все результаты диапазона 0000-16FF - совпадают. Результаты чтения более высоких адресов дают хаотичный ответ, но они и не нужны. Я бы был очень рад иметь Ваш электронный адрес для связи. Можете кинуть его мне на tobadko@mail.ru
<br>
<br>Ещё раз огромное спасибо всем, кто откликнулся на мою проблему и высказал свои очень важные для меня мысли.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=49476&amp;user=702&amp;forum_n=1&amp;topic=3660.html&amp;page=0&amp;anchor=12" class="addthx" data-post="49476"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/green.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=1&sortBy=0&page=0.html"><b>Основной форум</b></a> <b class=bulletHead>&#8212;&#8250;</b> Очень хитрая задачка...</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=3660" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
