<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>WinDbg -- как отладить краш в DLL - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Всем привет. Пришлось искать причину падения DLL. Из известной информации -- адрес, по которому загрузился мой модуль, и call stack с указанием конкретного адреса, по которому произошёл краш. Стоит отметить, что callstack,">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=6859'>cppasm</a>, <a target='_blank' href='?action=userinfo&amp;user=55995'>tyns777</a>, <a target='_blank' href='?action=userinfo&amp;user=55996'>dutyfree</a>, <a target='_blank' href='?action=userinfo&amp;user=28016'>asfa</a> (+6 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> WinDbg -- как отладить краш в DLL</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]b0r3d0m[/b]','')">b0r3d0m</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.7 (новичок), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.14'>Активность: 0.06<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=37421">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 октября 2016 16:19 <br><script type="text/javascript">QU('b0r3d0m','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=b0r3d0m" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Всем привет.<br><br>Пришлось искать причину падения DLL.<br>Из известной информации -- адрес, по которому загрузился мой модуль, и call stack с указанием конкретного адреса, по которому произошёл краш. Стоит отметить, что callstack, который у меня имеется, содержит лишь адреса функций, а не их названия. Собственно, чтобы замапить адреса к названиям, я и взялся за WinDbg.<br>Из доступных материалов -- сам PE-файл (.dll), соответствующий ему .pdb и сорцы.<br>Обращаю ваше внимание, что дамп-файла не имею.<br><br>В интернете наткнулся на <noindex><a href="http://stackoverflow.com/questions/274034/given-a-crash-offset-pdb-and-source-how-can-i-find-the-source-line" rel="nofollow" target="_blank">совет</a></noindex> использовать вот такую команду:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">WinDbg&nbsp;<span class="hl_char">-</span>z&nbsp;somebin<span class="hl_char">.</span>dll</li>        </ol>
    </div>
</div></div>
<br><br>Заглянул в <noindex><a href="https://msdn.microsoft.com/en-us/library/windows/hardware/ff561306(v=vs.85).aspx" rel="nofollow" target="_blank">online help</a></noindex> и чёт не догнал:<br><br>-z DumpFile<br>Specifies the name of a crash dump file to debug. If the path and file name contain spaces, this must be surrounded by quotation marks. It is possible to open several dump files at once by including multiple -z options, each followed by a different DumpFile value<br><br>Это почему это они -z используют, если в документации явно сказано, что данная опция предназначена для указания имени дамп-файла, а не бинарника?<br><br>Ну да ладно, попробовал -- получилось (что примечательно, в GUI пункта для отладки DLL я не нашёл).<br><br>WinDbg тут же доложил:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">ModLoad<span class="hl_char">:</span>&nbsp;<span class="hl_number">10000000</span>&nbsp;<span class="hl_number">100f0000</span>&nbsp;somebin<span class="hl_char">.</span>dll</li>        </ol>
    </div>
</div></div>
<br><br>Я так понимаю, 10000000 -- это адрес, по которому сам WinDbg загрузил переданный ему модуль, верно? Если так, то что тогда обозначает второй адрес?<br><br>Далее я посмотрел на адрес, по которому моя DLL была загружена host-процессом в момент падения. Им оказался 0x6F760000.<br><br>Далее я взглянул на адрес, по которому произошло падение, и увидел 0x6F7E9521.<br><br>0x6F7E9521 — 0x6F760000 = 0x89521<br><br>Таким образом, я получил адрес в моём бинарнике, по которому произошло падение, и который не привязан к адресу, по которому он загрузился (я ведь прав?).<br><br>Для получения имени функции, которая находится по этому адресу, я воспользовался следующей командой:<br><br>ln 10000000 + 89521<br><br>, т.е. к 10000000 (по которому, как я предполагаю, был загружен мой модуль WinDbg&#039;ом) прибавил только что вычисленный 0x89521.<br><br>Получил выхлоп в виде двух функций:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">main<span class="hl_char">.</span>cpp<span class="hl_char">(</span><span class="hl_number">379</span><span class="hl_char">)</span><span class="hl_char">+</span>0x1c</li><li class="hl_l1">SomeProject<span class="hl_char">!</span>Foo<span class="hl_char">:</span><span class="hl_char">:</span>Bar<span class="hl_char">+</span>0x19&nbsp;<span class="hl_char">|</span>&nbsp;<span class="hl_char">(</span><span class="hl_number">10089540</span><span class="hl_char">)</span>&nbsp;SomeProject<span class="hl_char">!</span>Foo<span class="hl_char">:</span><span class="hl_char">:</span>Baz</li>        </ol>
    </div>
</div></div>
<br><br>Насколько я понял, вторая из них -- это следующий за найденным символ. В <noindex><a href="https://msdn.microsoft.com/en-us/library/windows/hardware/ff552029(v=vs.85).aspx" rel="nofollow" target="_blank">официальной документации</a></noindex> этого сказано не было, но вот <noindex><a href="http://www.debuginfo.com/articles/easywindbg2.html" rel="nofollow" target="_blank">здесь</a></noindex> нашёл следующее:<br><br>&#039;ln&#039; will find the symbol, report its address, and in addition report the address and the name of the symbol that follows the specified one<br><br>Вот сейчас сижу, анализирую.<br><br>Вопрос -- всё ли правильно я делаю? Смущает много чего из-за отсутствия нормальной документации (по крайней мере, у меня debugger.chm, о котором говорится в мануалах, нигде не оказалось, а в онлайн-доках, как вы видите, много чего просто опускается).
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=368223&amp;user=37421&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=1" class="addthx" data-post="368223"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 337.5 (мудрец), 348thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 октября 2016 17:46 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Дамп в студию.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=368224&amp;user=40990&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=2" class="addthx" data-post="368224"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]b0r3d0m[/b]','')">b0r3d0m</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.7 (новичок), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.14'>Активность: 0.06<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=37421">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 октября 2016 18:02 <br><script type="text/javascript">QU('b0r3d0m','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=b0r3d0m" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<I>difexacaw пишет:<br>Дамп в студию.  </I><br>Какой дамп? Я же написал:<br>&gt; Обращаю ваше внимание, что дамп-файла не имею
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=368225&amp;user=37421&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=3" class="addthx" data-post="368225"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 337.5 (мудрец), 348thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 октября 2016 18:06 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<b>b0r3d0m</b><br><br>Инфу сюда всю давайте калстек модуль, всё что имеется.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=368226&amp;user=40990&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=4" class="addthx" data-post="368226"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]b0r3d0m[/b]','')">b0r3d0m</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.7 (новичок), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.14'>Активность: 0.06<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=37421">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 октября 2016 19:39 <br><script type="text/javascript">QU('b0r3d0m','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=b0r3d0m" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>difexacaw пишет:<br>Инфу сюда всю давайте калстек модуль, всё что имеется.  </I><br>А зачем? Тут просто два момента:<br>- Модуль я не могу предоставить в связи с соглашением<br>- Я не ищу готового решения проблемы (тем более, что причину краша, кажется, я уже нашёл), меня интересуют тонкости работы с WinDbg. Если быть более точным, то ответы на вопросы, обозначенные в первом сообщении. На них, как мне кажется, можно ответить и без дампов / callstack&#039;ов / конкретных модулей<br>Отвечайте лучше вопросом на вопрос, так и я больше пойму, и вам меньше за меня придётся работы делать <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=368227&amp;user=37421&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=5" class="addthx" data-post="368227"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 октября 2016 20:06 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<I>b0r3d0m пишет:<br>ModLoad: 10000000 100f0000 somebin.dll<br>Я так понимаю, 10000000 -- это адрес, по которому сам WinDbg загрузил переданный ему модуль, верно? Если так, то что тогда обозначает второй адрес? </I><br>Граница образа.<br><br><I>b0r3d0m пишет:<br>Обращаю ваше внимание, что дамп-файла не имею  </I><br>А жаль! Так бы .ecxr и в ответ что-нибудь вроде<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_registr">rax</span><span class="hl_char">=</span><span class="hl_number">0000000097303efb</span>&nbsp;<span class="hl_registr">rbx</span><span class="hl_char">=</span><span class="hl_number">000000005760eca0</span>&nbsp;<span class="hl_registr">rcx</span><span class="hl_char">=</span><span class="hl_number">000000005760eca0</span></li><li class="hl_l1"><span class="hl_registr">rdx</span><span class="hl_char">=</span><span class="hl_number">0000000000000080</span>&nbsp;<span class="hl_registr">rsi</span><span class="hl_char">=</span><span class="hl_number">000000000b424b10</span>&nbsp;<span class="hl_registr">rdi</span><span class="hl_char">=</span><span class="hl_number">000000005d5a51e0</span></li><li class="hl_l0">rip<span class="hl_char">=</span><span class="hl_number">00000000438b088e</span>&nbsp;<span class="hl_registr">rsp</span><span class="hl_char">=</span><span class="hl_number">000000005760eb98</span>&nbsp;<span class="hl_registr">rbp</span><span class="hl_char">=</span><span class="hl_number">0000000000000000</span></li><li class="hl_l1">&nbsp;r8<span class="hl_char">=</span><span class="hl_number">000000005760ecc0</span>&nbsp;&nbsp;r9<span class="hl_char">=</span><span class="hl_number">00000000450df850</span>&nbsp;r10<span class="hl_char">=</span><span class="hl_number">00000000450df850</span></li><li class="hl_l0">r11<span class="hl_char">=</span><span class="hl_number">00000000450df850</span>&nbsp;r12<span class="hl_char">=</span><span class="hl_number">0000000000000000</span>&nbsp;r13<span class="hl_char">=</span><span class="hl_number">0000000000000000</span></li><li class="hl_l1">r14<span class="hl_char">=</span><span class="hl_number">0000000000000000</span>&nbsp;r15<span class="hl_char">=</span><span class="hl_number">0000000000000000</span></li><li class="hl_l0">iopl<span class="hl_char">=</span><span class="hl_number">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nv&nbsp;up&nbsp;ei&nbsp;ng&nbsp;nz&nbsp;na&nbsp;pe&nbsp;nc</li><li class="hl_l1"><span class="hl_registr">cs</span><span class="hl_char">=</span><span class="hl_number">0033</span>&nbsp;&nbsp;<span class="hl_registr">ss</span><span class="hl_char">=</span><span class="hl_number">002b</span>&nbsp;&nbsp;<span class="hl_registr">ds</span><span class="hl_char">=</span><span class="hl_number">002b</span>&nbsp;&nbsp;<span class="hl_registr">es</span><span class="hl_char">=</span><span class="hl_number">002b</span>&nbsp;&nbsp;<span class="hl_registr">fs</span><span class="hl_char">=</span><span class="hl_number">0053</span>&nbsp;&nbsp;<span class="hl_registr">gs</span><span class="hl_char">=</span><span class="hl_number">002b</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;efl<span class="hl_char">=</span><span class="hl_number">00010282</span></li><li class="hl_l0">Unable&nbsp;to&nbsp;load&nbsp;image&nbsp;C<span class="hl_char">:</span><span class="hl_char">\</span>Path<span class="hl_char">\</span>module<span class="hl_char">.</span>DLL<span class="hl_char">,</span>&nbsp;Win32&nbsp;error&nbsp;0n2</li><li class="hl_l1"><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span>&nbsp;WARNING<span class="hl_char">:</span>&nbsp;Unable&nbsp;to&nbsp;verify&nbsp;timestamp&nbsp;for&nbsp;module<span class="hl_char">.</span>DLL</li><li class="hl_l0"><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span>&nbsp;ERROR<span class="hl_char">:</span>&nbsp;Module&nbsp;load&nbsp;completed&nbsp;but&nbsp;symbols&nbsp;could&nbsp;<span class="hl_function"><b>not</b></span>&nbsp;be&nbsp;loaded&nbsp;for&nbsp;module<span class="hl_char">.</span>DLL</li><li class="hl_l1">module<span class="hl_char">+</span>0x7088e<span class="hl_char">:</span></li><li class="hl_l0">00000000`438b088e&nbsp;<span class="hl_number">8500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>test</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">rax</span><span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr"><b>eax</b></span>&nbsp;<span class="hl_registr">ds</span><span class="hl_char">:</span>00000000`97303efb<span class="hl_char">=</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span></li>        </ol>
    </div>
</div></div><br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=368229&amp;user=24257&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=6" class="addthx" data-post="368229"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=37421" title="02-10-2016 17:15, ранг:7.9" target="_blank">b0r3d0m</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]b0r3d0m[/b]','')">b0r3d0m</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.7 (новичок), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.14'>Активность: 0.06<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=37421">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 октября 2016 20:10 <br><script type="text/javascript">QU('b0r3d0m','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=b0r3d0m" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<I>DenCoder пишет:<br>Граница образа </I><br>Это вы про второе значение, да? Про первое (10000000) правильно сказал тогда, получается?<br><br><I>DenCoder пишет:<br>А жаль! Так бы .ecxr и в ответ что-нибудь вроде </I><br>Да не спорю. Но что поделаешь, если на компьютере, где произошло падение, не была установлена автоматическая генерация дампов, а у себя краш воспроизвести не получается? Вот и мучаюсь без дополнительной инфы.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=368231&amp;user=37421&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=7" class="addthx" data-post="368231"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]-=AkaBOSS=-[/b]','')">-=AkaBOSS=-</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/26242.png" alt=""><br><span class=txtSm>Ранг: 150.3 (ветеран), 175thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.88'>Активность: 0.16<span style='color:red'>&searr;</span>0.07</span><br>Статус: <a href="action=userinfo&amp;user=26242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 октября 2016 23:54 <br><script type="text/javascript">QU('-=AkaBOSS=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=AkaBOSS=-" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<I>b0r3d0m пишет:<br>Это вы про второе значение, да? Про первое (10000000) правильно сказал тогда, получается? </I><br>не совсем. оба значения - это нижняя и верхняя границы образа<br>тоесть первое - текущий imagebase, а второе - imagebase+sizeofimage<br><br><I>b0r3d0m пишет:<br>я получил адрес в моём бинарнике, по которому произошло падение, и который не привязан к адресу, по которому он загрузился (я ведь прав?). </I><br>да. именно это и называется RVA<br><br><I>b0r3d0m пишет:<br>Вопрос -- всё ли правильно я делаю? </I><br>если дампа всё равно нет, какой смысл мучать WinDbg? в IDA дизасм намного приятнее в плане анализа.<br>А так как в ООП коде 80% крашей происходят из-за кривых указателей и неправильных размеров буфера,  реальная ошибка может находиться вообще в другом модуле, а не там где оно упало с исключением. Поэтому без стэка вызовов действительно будет нелегко.<br><br><I>b0r3d0m пишет:<br>у меня debugger.chm, о котором говорится в мануалах, нигде не оказалось </I><br>странно, у меня он в той же папке что и WinDbg.exe - <noindex><a href="http://rgho.st/private/7tW4dWRnR/621b1d3bc72b1ef59345103a3bc1b6a2" rel="nofollow" target="_blank">версия 6.11.1.404</a></noindex>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=368246&amp;user=26242&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=8" class="addthx" data-post="368246"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=37421" title="02-10-2016 22:33, ранг:7.9" target="_blank">b0r3d0m</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 337.5 (мудрец), 348thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 октября 2016 09:56 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
Как то был вопрос, крэшилась апликуха, как всегда не были встроены средства диагностики. Долго мы капались в той инфе, которая имелась, почему то бился хип; проблему решить так и не удалось. А смысл в том, что нужно на этапе разработки позаботиться об таких механизмах.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=368266&amp;user=40990&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=9" class="addthx" data-post="368266"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]b0r3d0m[/b]','')">b0r3d0m</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.7 (новичок), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.14'>Активность: 0.06<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=37421">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 октября 2016 15:31 <br><script type="text/javascript">QU('b0r3d0m','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=b0r3d0m" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<I>-=AkaBOSS=- пишет:<br>если дампа всё равно нет, какой смысл мучать WinDbg? в IDA дизасм намного приятнее в плане анализа </I><br>А зачем мне дизасм? Я лишь хочу callstack &quot;восстановить&quot; (имена функций получить хотя бы). У меня даже исходники есть, вопрос именно в месте краша и том, как в это место программа попала.<br><br><I>-=AkaBOSS=- пишет:<br>А так как в ООП коде 80% крашей происходят из-за кривых указателей и неправильных размеров буфера </I><br>А при чём здесь ООП?<br><br><I>-=AkaBOSS=- пишет:<br>странно, у меня он в той же папке что и WinDbg.exe </I><br>Да это я качал WinDbg без WDK, видимо, вот и получилось так.<br><br><I>difexacaw пишет:<br>А смысл в том, что нужно на этапе разработки позаботиться об таких механизмах </I><br>Не спорю, нужно. Но программа старая, и уже была отправлена заказчикам без подобных механизмов.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=368293&amp;user=37421&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=10" class="addthx" data-post="368293"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 октября 2016 15:51 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<I>b0r3d0m пишет:<br>Я лишь хочу callstack &quot;восстановить&quot; </I><br>Без как минимум дампа стека это не сделать!<br><br>Кроме сорцов и места ошибки у Вас ничего больше нет - составляйте тесты, тестите, имититируйте ошибочную ситуацию, в отладчике смотрите, что получается.
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=368294&amp;user=24257&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=11" class="addthx" data-post="368294"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]b0r3d0m[/b]','')">b0r3d0m</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.7 (новичок), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.14'>Активность: 0.06<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=37421">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 октября 2016 16:46 <br><script type="text/javascript">QU('b0r3d0m','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=b0r3d0m" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<I>DenCoder пишет:<br>Без как минимум дампа стека это не сделать! </I><br>Что вы подразумеваете под &quot;дампом стека&quot;? В самом начале темы я, например, сказал:<br><br>&gt; Из известной информации -- адрес, по которому загрузился мой модуль, и <b>call stack с указанием конкретного адреса, по которому произошёл краш</b>. Стоит отметить, что callstack, который у меня имеется, содержит лишь адреса функций, а не их названия. Собственно, чтобы замапить адреса к названиям, я и взялся за WinDbg.<br><br>.pdb есть, осталось дело за малым -- связать адреса, указанные в &quot;неполноценном&quot; callstack&#039;е, и имена функций, указанные в .pdb-файле.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=368296&amp;user=37421&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=12" class="addthx" data-post="368296"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 октября 2016 19:13 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
Спустя 10 постов и позабыл уже, что у Вас есть...<br><br>Дампом, вообще говоря, может быть как вся память процесса, так и отдельный регион. Дамп стека - Ваш call stack. На стеке, кроме адресов возврата также могут быть и аргументы, если вызов функций по cdecl/stdcall, а также локальные переменные функций. Какие локальные переменные где у Вас - это только сопоставлять сорцы дизасму кода.<br><br>Главного Вы не сообщили - какая ошибка у Вас? 0xC0000005 ? На чтение или запись? И по какому адресу обращение к памяти? Адрес обращения либо через аргументы передаётся, либо высчитывается где-то на локальных переменных.<br><br><b>Добавлено спустя 10 минут</b><br>Ну понятно - callstack восстановите, с аргументами. Дальше прогоните функцию за функцией поочерёдно с указанными в стеке аргументами, проследите, где неверна логика... если не учавствуют глобальные переменные, в структурах/классах поля-указатели на массивы или объекты структур/классов...
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=368299&amp;user=24257&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=13" class="addthx" data-post="368299"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=37421" title="03-10-2016 19:44, ранг:8.3" target="_blank">b0r3d0m</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]b0r3d0m[/b]','')">b0r3d0m</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.7 (новичок), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.14'>Активность: 0.06<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=37421">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 октября 2016 22:44 <br><script type="text/javascript">QU('b0r3d0m','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=b0r3d0m" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
<I>DenCoder пишет:<br>Главного Вы не сообщили - какая ошибка у Вас? 0xC0000005 ? </I><br>Да, Access Violation.<br><br>Падает в ntdll, но сама проблема, конечно же, кроется где-то в пользовательском коде.<br><br>&gt; Unhandled exception at 0x77E61037 (ntdll.dll)<br><br><I>DenCoder пишет:<br>На чтение или запись? </I><br>На чтение -- &quot;Access violation reading location 0x00000044&quot;.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=368306&amp;user=37421&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=14" class="addthx" data-post="368306"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 октября 2016 00:03 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
Если используется пара операторов new/delete или функций malloc/free для выделения/удаления памяти:<br>Приложение хранит &quot;вокруг&quot; выделенного региона памяти (того, который выделяется оператором new в си) служебные данные - самыми важными будут размер и указатель на свободный регион в куче. Если затереть эту информацию, дальнейшие попытки выделить новый регион или удалить этот и могут приводить к ошибкам внутри ntdll.dll.
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=368308&amp;user=24257&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=15" class="addthx" data-post="368308"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 337.5 (мудрец), 348thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 октября 2016 05:54 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24355.html&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
Получается суть задачи это сдампить символы, тогда есть для этого различные тулзы и сурцы.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=368451&amp;user=40990&amp;forum_n=5&amp;topic=24355.html&amp;page=0&amp;anchor=16" class="addthx" data-post="368451"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> WinDbg -- как отладить краш в DLL</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#17" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="5">
<input type="hidden" name="topic" value="24355">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=24355" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
