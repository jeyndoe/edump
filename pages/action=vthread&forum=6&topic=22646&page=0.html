<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Патчинг ехе - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Здравствуйте! Появилась необходимость отредактировать некий ехе файл, тобиш открыть его, найти необходимую мне строку ( в программе она используется в чистом виде в функции MessageBox ) и заменить эту строку на свою. Делаю я это">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=31361'>zds</a> (+5 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Патчинг ехе</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]DarkSmile[/b]','')">DarkSmile</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 1.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.34'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=36989">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 марта 2014 13:49 <br><script type="text/javascript">QU('DarkSmile','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DarkSmile" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Здравствуйте! Появилась необходимость отредактировать некий ехе файл, тобиш открыть его, найти необходимую мне строку ( в программе она используется в чистом виде в функции MessageBox ) и заменить эту строку на свою. Делаю я это так:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">var&nbsp;BCount<span class="hl_char">,</span>&nbsp;Address<span class="hl_char">,</span>&nbsp;PAddress<span class="hl_char">:</span>&nbsp;Integer<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;i<span class="hl_char">:</span>&nbsp;Integer<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;Success<span class="hl_char">:</span>&nbsp;Boolean<span class="hl_comment">;</span></li><li class="hl_l1">begin</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;i&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;Address&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;PAddress&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;B&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;AsciiToBin<span class="hl_char">(</span>Edit1<span class="hl_char">.</span>Text<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;FileStrm&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;TFileStream<span class="hl_char">.</span>Create<span class="hl_char">(</span>MFileName<span class="hl_char">,</span>fmOpenReadWrite<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;<span class="hl_function">try</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_function"><b>true</b></span>&nbsp;do&nbsp;begin</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BCount<span class="hl_char">:</span><span class="hl_char">=</span>FileStrm<span class="hl_char">.</span>Read<span class="hl_char">(</span>Buffer<span class="hl_char">,</span><span class="hl_number">66532</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Address&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;Address<span class="hl_char">+</span>BCount<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PAddress&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;PAddress<span class="hl_char">+</span>BCount<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;QSearch<span class="hl_char">(</span>Buffer<span class="hl_char">,</span>&nbsp;B<span class="hl_char">)</span>&nbsp;<span class="hl_char">=</span>&nbsp;Length<span class="hl_char">(</span>B<span class="hl_char">)</span><span class="hl_char">-</span><span class="hl_number">1</span>&nbsp;then&nbsp;begin</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Address&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;Address<span class="hl_char">-</span><span class="hl_char">(</span>BCount<span class="hl_char">-</span>i<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileStrm<span class="hl_char">.</span>Seek<span class="hl_char">(</span>Address<span class="hl_char">,</span>soBeginning<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileStrm<span class="hl_char">.</span>Write<span class="hl_char">(</span>Pointer<span class="hl_char">(</span>B2<span class="hl_char">)</span><span class="hl_char">,</span>Length<span class="hl_char">(</span>B2<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileStrm<span class="hl_char">.</span>Seek<span class="hl_char">(</span>PAddress<span class="hl_char">,</span>soBeginning<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Success&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>True</b></span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>end</b></span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;BCount&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span>&nbsp;then</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>Break</b></span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>end</b></span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;finally</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileStrm<span class="hl_char">.</span>Free<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;Success&nbsp;then&nbsp;begin</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBox<span class="hl_char">(</span>Handle<span class="hl_char">,</span><span class="hl_quote">'Пропатчил ага!'</span><span class="hl_char">,</span><span class="hl_quote">''</span><span class="hl_char">,</span>MB_ICONINFORMATION<span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>end</b></span>&nbsp;<span class="hl_function">else</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBox<span class="hl_char">(</span>Handle<span class="hl_char">,</span><span class="hl_quote">'Ошибка патча!'</span><span class="hl_char">,</span><span class="hl_quote">'Ошибка'</span><span class="hl_char">,</span>MB_ICONERROR<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>end</b></span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>Заменяет все безупречно, проблема не в этом, а в том что заменять можно строкой не длиньше оригинальной, если сделать длиньше то она перейдет уже на следующий параметр функции MessageBox. Думал я думал что же с этим можно сделать, придумал разделять файл на 2 части и собирать в 1, тобиш копируем память от начала файла до конечного байта того чем мы заменили, дальше копируем от конечного байта оригинальной строки и сохраняем в конце концов, ну что то в этом роде:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">StringStream&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;TMemoryStream<span class="hl_char">.</span>Create<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringStream<span class="hl_char">.</span>SetSize<span class="hl_char">(</span>Length<span class="hl_char">(</span>B2<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringStream<span class="hl_char">.</span>Position&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringStream<span class="hl_char">.</span>Write<span class="hl_char">(</span>Pointer<span class="hl_char">(</span>B2<span class="hl_char">)</span><span class="hl_char">,</span>Length<span class="hl_char">(</span>B2<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringStream<span class="hl_char">.</span>Position&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileStrm<span class="hl_char">.</span>Position&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NewFile<span class="hl_char">.</span>CopyFrom<span class="hl_char">(</span>FileStrm<span class="hl_char">,</span>Address<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NewFile<span class="hl_char">.</span>CopyFrom<span class="hl_char">(</span>StringStream<span class="hl_char">,</span>Length<span class="hl_char">(</span>B2<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileStrm<span class="hl_char">.</span>Position&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;Address<span class="hl_char">+</span>Length<span class="hl_char">(</span>B<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileStrm<span class="hl_char">.</span>Seek<span class="hl_char">(</span>Address<span class="hl_char">+</span>Length<span class="hl_char">(</span>B<span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;soFromBeginning<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NewFile<span class="hl_char">.</span>CopyFrom<span class="hl_char">(</span>FileStrm<span class="hl_char">,</span>FileStrm<span class="hl_char">.</span>Size<span class="hl_char">-</span>FileStrm<span class="hl_char">.</span>Position<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>Вроде бы все замечательно, но в результате чего получаемый файл не запускается. Понял что так изменить память не получится и на этом мои идеи закончились . <br><br>Подскажите пожалуйста что можно с этим сделать, может можно как то создать переменную, в нее записать строку и MessageBox-у втюхать ее?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=339239&amp;user=36989&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=1" class="addthx" data-post="339239"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Runtime_err0r[/b]','')">Runtime_err0r</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/129.gif" alt=""><br><span class=txtSm>Ранг: 60.7 (постоянный), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.92'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=129">Участник</a><br><font color=blue>KpTeaM</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 марта 2014 14:45 &middot; Поправил: Runtime_err0r <br><script type="text/javascript">QU('Runtime_err0r','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Runtime_err0r" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
А строка не в ресурсах хранится? Может, проще редактором ресурсов воспользоваться?<br>А так - находишь свободное место в файле, пишешь туда свой текст и передаешь смещение в качестве параметра функции MessageBox <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=339241&amp;user=129&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=2" class="addthx" data-post="339241"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]DarkSmile[/b]','')">DarkSmile</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 1.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.34'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=36989">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 марта 2014 15:00 <br><script type="text/javascript">QU('DarkSmile','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DarkSmile" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
Да он есть в ресурсах в секции CODE. Ага так, нашел свободное место в файле, записал туда строку, но как передать параметр MessageBox что бы он не считал его за строку?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=339242&amp;user=36989&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=3" class="addthx" data-post="339242"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]kid[/b]','')">kid</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 42.2 (посетитель), 42thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.46'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=27711">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 марта 2014 15:16 &middot; Поправил: kid <br><script type="text/javascript">QU('kid','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=kid" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<I>DarkSmile пишет:<br>но как передать параметр MessageBox что бы он не считал его за строку? <br> </I><br>взорвало мозг<br><br><noindex><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505(v=vs.85).aspx" rel="nofollow" target="_blank">--&gt; MSDN:MessageBox function &lt;--</a></noindex><br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>int</b></span>&nbsp;WINAPI&nbsp;MessageBox<span class="hl_char">(</span></li><li class="hl_l1">&nbsp;&nbsp;_In_opt_&nbsp;&nbsp;HWND&nbsp;hWnd<span class="hl_char">,</span></li><li class="hl_l0">&nbsp;&nbsp;_In_opt_&nbsp;&nbsp;LPCTSTR&nbsp;lpText<span class="hl_char">,</span></li><li class="hl_l1">&nbsp;&nbsp;_In_opt_&nbsp;&nbsp;LPCTSTR&nbsp;lpCaption<span class="hl_char">,</span></li><li class="hl_l0">&nbsp;&nbsp;_In_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;uType</li><li class="hl_l1"><span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>Вы передаете указатель , а что будет находиться по данному указателю - решать вам
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=339243&amp;user=27711&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=4" class="addthx" data-post="339243"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]DarkSmile[/b]','')">DarkSmile</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 1.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.34'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=36989">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 марта 2014 16:02 <br><script type="text/javascript">QU('DarkSmile','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DarkSmile" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
Дак указатель то куда передавать???
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=339246&amp;user=36989&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=5" class="addthx" data-post="339246"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]Archer[/b]','')">Archer</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/1556.jpg" alt=""><br><span class=txtSm>Ранг: 2014.5 <b><u>(!!!!)</u></b>, 1278thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.27'>Активность: 1.34<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1556">Модератор</a><br><font color=blue>retired</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 марта 2014 16:05 <br><script type="text/javascript">QU('Archer','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Archer" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Почитал бы ты основы, мсдн, как функции на асме вызываются, как параметры передаются.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=339247&amp;user=1556&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=6" class="addthx" data-post="339247"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]kid[/b]','')">kid</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 42.2 (посетитель), 42thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.46'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=27711">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 марта 2014 16:21 <br><script type="text/javascript">QU('kid','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=kid" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<I>DarkSmile пишет:<br>Дак указатель то куда передавать???  </I><br><br>код вызова будет таким (или почти таким)<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>push</b></span>&nbsp;0x40&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>MB_ICONINFORMATION&nbsp;flag</li><li class="hl_l1"><span class="hl_function"><b>push</b></span>&nbsp;0x00123456&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span><span class="hl_function"><b>offset</b></span>&nbsp;caprion&nbsp;text</li><li class="hl_l0"><span class="hl_function"><b>push</b></span>&nbsp;0x00654321&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span><span class="hl_function"><b>offset</b></span>&nbsp;message&nbsp;text&nbsp;&nbsp;<span class="hl_char">-</span>&nbsp;тут&nbsp;вам&nbsp;надо&nbsp;заменить&nbsp;указатель&nbsp;на&nbsp;свой&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>push</b></span>&nbsp;0x00&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>hwnd</li><li class="hl_l0"><span class="hl_function"><b>call</b></span>&nbsp;MessageBox</li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=339248&amp;user=27711&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=7" class="addthx" data-post="339248"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=36989" title="10-03-2014 12:47, ранг:1.0" target="_blank">DarkSmile</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]senyuki[/b]','')">senyuki</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.28'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=37098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 марта 2014 12:06 <br><script type="text/javascript">QU('senyuki','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=senyuki" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
Привет!<br>Решил не создавать новую тему, так как название этой идеально подходит.<br>У меня вопрос чуть посложнее. Вот такой:<br><br>&lt;&lt;Я модифицирую одну старую игру начала 90х, и в общем-то основная цель уже выполнена, но я перфекционист и захотел изменить начальное интро таким образом, чтобы в нем отразить все изменения в программе, которые были сделаны с ее создания. Изначально там есть строка о том, что она &quot;Programmed in 1992 on AT .286 12MHz&quot;, я хотел добавить строку &quot;Cracked in 1993 on some old junk&quot; и &quot;Unpassworded in 2014 on PB DOTS 1.5GHz&quot;, а также явно указать имя начального разработчика, взломщика и себя.<br>Так вот, первая строка уже содержится в секции данных в файле. Я нашел очевидно неиспользуемую функцию вывода еще нескольких строк с именами разработчиков, которая почему-то в игре нигде не используется. Изменил функцию интро, добавив в нее прыжок на неиспользуемую, там изменил смещения на строки и прыжок на первую функцию. В самом конце файла, там, где, в общем-то, на первый взгляд одни данные, добавил новые строки. Изменил заголовок: Pages in file: B2, Bytes on last page: 1A0 -&gt; Pages in file: B3, Bytes on last page: 0 соответственно новому размеру. Смещения на новые строки я вычислил теоретически верно: выяснил базу, отняв от адреса одной из старых строк в файле смещение, по которому к ней обращались и отняв эту базу от адреса новой строки. Все инструкции работают, но вместо строк рисуются непечатные блоки, то есть очевидно что программа не видит новых строк. Вопрос: чего я не учел?&gt;&gt;
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=340115&amp;user=37098&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=8" class="addthx" data-post="340115"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]dant3[/b]','')">dant3</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 33.9 (посетитель), 22thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.53'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=33622">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 марта 2014 12:37 <br><script type="text/javascript">QU('dant3','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dant3" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<I>senyuki пишет:<br>чего я не учел? </I><br>наверное то, что нужно бинарник прикладывать к сообщению
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=340116&amp;user=33622&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=9" class="addthx" data-post="340116"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]senyuki[/b]','')">senyuki</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.28'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=37098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 марта 2014 12:53 <br><script type="text/javascript">QU('senyuki','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=senyuki" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Sou ka. Это верно.<br><br>Функция, рисующая интро, начинается по адресу 2808. Новые строки в конце файла.<br><br><img src="img/attach.gif" alt=""> <a href="./files/fc03_30.03.2014_EXELAB.rU.tgz">fc03_30.03.2014_EXELAB.rU.tgz</a> - prel.exe
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=340117&amp;user=37098&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=10" class="addthx" data-post="340117"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]ajax[/b]','')">ajax</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/8830.gif" alt=""><br><span class=txtSm>Ранг: 337.6 (мудрец), 224thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.53'>Активность: 0.21<span style='color:red'>&searr;</span>0.1</span><br>Статус: <a href="action=userinfo&amp;user=8830">Участник</a><br><font color=blue>born to be evil</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 марта 2014 16:34 &middot; Поправил: ajax <br><script type="text/javascript">QU('ajax','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ajax" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<b>senyuki</b><br>это MZ-файл <noindex><a href="https://ru.wikipedia.org/wiki/Exe" rel="nofollow" target="_blank">--&gt; Link &lt;--</a></noindex>, есть сегменты и оффсеты<br><I>Pages in file: B2, Bytes on last page: 1A0 -&gt; Pages in file: B3, Bytes on last page: 0</I><br>как пример корректного размера:<br>Bytes on last page: 01A0<br>Pages in file: 0015<br>14*512t+1a0 = 10656 (размер файла)<br><br>и там оверлей щас &quot;нарисовался&quot; из-за корявого исправления<br><I>два - 0А03</I><br>похоже на сегмент данных, вроде как он всегда в коде с релоками. без оффсета в файле, где и что правилось - я хз, как угадать <img src="img/smilies/s1.gif" alt="">
<br><br><font size="1"><i>-----<br>От многой мудрости много скорби, и умножающий знание умножает печаль</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=340119&amp;user=8830&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=11" class="addthx" data-post="340119"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]senyuki[/b]','')">senyuki</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.28'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=37098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 марта 2014 16:40 &middot; Поправил: senyuki <br><script type="text/javascript">QU('senyuki','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=senyuki" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<strike>Эм, ну так я и правил из<br>Pages in file: B2, Bytes on last page: 000001A0<br>в<br>Pages in file: B3, Bytes on last page: 00000000<br><br>Разве что мискликнул случайно?</strike><br>&quot;надо нулями добивать, или еще что.&quot;<br>А... в этом плане.<br><br><strike>Знаю, что .ЕХЕ, знаю, что сегменты, но с таблицей релокации так и не разобрался пока за этот день, пока пытаюсь понять ее практическую суть. Она везде упоминается, но нигде толково не ясно наглядно. Теоретически что-то везде сказано, перебазирование сегментов и смещений, бла-бла-бла, все такое, но как это действует реально - неясно. Вот у меня в программе несколько раз в ds заносится А03. Это значение несколько раз содержится в таблице настройки, четырехбайтный формат. Два байта - какие-то величины, два - 0А03. Глубинный смысл этого я ухватить никак не могу, как ни пытаюсь. Медитация не помогает.</strike><br>Все, с таблицей вроде суть ухватил<br><br><strike>Короче в сторону чего мне снова копать? Дело в таблице настройки?</strike><br><br>Что-то странное, редактирую заголовок, и при нажатии F3 на поле Bytes on last page автоматически изменяется поле Pages in file с В3 на В2... Проверил физ. размер файла... посчитал на калькуляторе... ты гляди... и правда В2, а не В3. Неужели где-то раньше я накосячил с размером... Исправил - оверлей убрался. Но строки по прежнему не рисуются (и судя чисто по поведению, что блоки рисуются как бы на протяжении пары секунд, то явно программа пытается их рисовать откуда-то из code segment c непечатными символами, которых нет в используемом шрифте, до первого 00, который встречается далеко не скоро... однако почему? ведь буквально за несколько инструкций до того берутся имеющиеся строки, ds не меняется... придется медитировать дальше)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=340120&amp;user=37098&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=12" class="addthx" data-post="340120"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]senyuki[/b]','')">senyuki</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.28'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=37098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 апреля 2014 00:25 <br><script type="text/javascript">QU('senyuki','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=senyuki" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
Мда... выяснилось, что просто в конце файла, после сегмента данных шел еще крохотный сегмент кода, какой-то странный... И новые строки я пытался лепить в его конец. Размазал их по пустотам сегмента данных - все работает.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=340209&amp;user=37098&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=13" class="addthx" data-post="340209"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]VodoleY[/b]','')">VodoleY</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 488.1 (мудрец), 272thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.01'>Активность: 0.35<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=17319">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 апреля 2014 05:50 <br><script type="text/javascript">QU('VodoleY','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VodoleY" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
<I>senyuki пишет:<br>после сегмента данных шел еще крохотный сегмент кода, какой-то странный... </I><br>бро<img src="img/smilies/s1.gif" alt=""> а не вирусня ли это? <img src="img/smilies/s1.gif" alt="">
<br><br><font size="1"><i>-----<br>Наша работа во тьме, Мы делаем, что умеем. Мы отдаем, что имеем, Наша работа во тьме....</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=340211&amp;user=17319&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=14" class="addthx" data-post="340211"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]senyuki[/b]','')">senyuki</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.28'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=37098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 апреля 2014 02:41 &middot; Поправил: senyuki <br><script type="text/javascript">QU('senyuki','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=senyuki" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22646.html&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
Я тоже так думал, но скорее это остатки какой-то хитрой защиты господина Змиро. В cracktro от 93 года Гибриды жаловались на хитроболтовость защиты конкретно этой игры. Конечно, по тем временам...<br>Вообще хитро как-то, по крайней мере, пока что это выходит за пределы ясного понимания.<br>http://cs540106.vk.me/c616125/v616125788/8fdc/yMKf8MBj2NY.jpg<br><br>Скопировал этот блок в отдельный файл. Вот его заголовок:<br>http://cs540106.vk.me/c616125/v616125788/8fcc/QOD-Ivj-hkg.jpg<br><br>Для сравнения заголовок основного:<br>http://cs540106.vk.me/c616125/v616125788/8fd4/r6Z-R1T42PI.jpg<br><br>В этом блоке встречаются искаженные строки из основного файла.<br>http://cs540106.vk.me/c616125/v616125788/8fe4/VTBT_K8366Y.jpg<br><br>BEGINN - BEGINNER, EXP - EXPERT, COD - CODE, [[ - [[[[, служебная строка... Даже то, что выглядит как ONT, это, похоже, остаток от ENTER.<br>Проверил дамп - ничем не запакован, хоть и все указывает на то...<br><br>Соль в том, что если каким-либо образом нарушить целостность этого блока или вовсе убрать его - в некоторых ситуациях игра вместо того, чтобы выдать экран Game over или выйти в главное меню - выдает <i class=x>Uknown error. Reboot requested</i> и Dosbox на этом вылетает. Собственно, думаю, что это Dosbox и выдает.<br>Мыслей пока нет, в чем же тут суть, буду пока думать<img src="img/smilies/s8.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=340250&amp;user=37098&amp;forum_n=6&amp;topic=22646.html&amp;page=0&amp;anchor=15" class="addthx" data-post="340250"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Патчинг ехе</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#16" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="6">
<input type="hidden" name="topic" value="22646">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=22646" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
