<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Вопрос по реверсированию форматов файлов - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Здравствуйте я новичок, поэтому много ещё не знаю, и возможно не в той теме разместил сообщение. Собственно у меня вопрос: Есть в общем одна игра, она состоит из 1 ехе и 1 dat файла. Мне уже удалось написать распаковщик для dat">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=40607'>vsv1</a>, <a target='_blank' href='?action=userinfo&amp;user=42610'>r0lka</a>, <a target='_blank' href='?action=userinfo&amp;user=28512'>-Sanchez-</a>, <a target='_blank' href='?action=userinfo&amp;user=55550'>testrev1337</a>, <a target='_blank' href='?action=userinfo&amp;user=19256'>johnniewalker</a> (+3 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/red.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=2&sortBy=0&page=0.html"><b>Крэки, обсуждения</b></a> <b class=bulletHead>&#8212;&#8250;</b> Вопрос по реверсированию форматов файлов</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]predtech[/b]','')">predtech</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.5 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.41'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=24281">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 февраля 2010 15:59 <br><script type="text/javascript">QU('predtech','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=predtech" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Здравствуйте я новичок, поэтому много ещё не знаю, и возможно не в той теме разместил сообщение. Собственно у меня вопрос:<br>Есть в общем одна игра, она состоит из 1 ехе и 1 dat файла. Мне уже удалось написать распаковщик для dat архива в нём содержаться:  TEXT.US(весь игровой текст), IM000000-0000035.PCM и Y01-100.ANM. Поиски в интернете помогли определить что файлы с расширением PCM содержат в себе звук а файла с расширением ANM содержат в себе анимацию(последовательность кадров как например в gif файле). Собственно теперь вопрос подскажите как отслеживать работу программы что бы в последствии можно было написать конвертер АNM -&gt;GIF(либо последовательность BMP)-&gt;ANM.  Извините, что вышло сумбурно. Просто информации по реверсированию форматов файлов практически не существует, а те крупицы, что есть очень сложны, в понимании.<br>P.S. На filext.com/file-extension/ANM	<br>DeluxPaint (Animation) – The identifying characters used for this association are - Hex: 4C 50 46 20 00 01 , ASCII: LPF. В моём случае заголовок файла состоит из 19 нулевых байт затем идёт один байт в некоторых файлах он одинаковый в некоторых разный, скорей всего это указатель количества кадров в файле. (Найти идентификатор LPF не удалось)<br>Jazz Jackrabbit 2 (Title Sets Images) by Epic Games, Inc. Тоже маловероятно, потому что игра которую я разбираю японского происхождения, скорей всего там свой формат используется.<br>Dragon UnPACKer и подобного рода распаковщики не находят ничего.<br>p.p.s. Ссылку на игру я не разместил т.к. маловероятно кто возьмётся за такой гимор, на сколько мне известно зарубежные товарищи потратили несколько месяцев на то чтобы реверсировать этот формат,  правда от другой версии игры,  которая не совместима с моей, я пытался с ними связаться, но безуспешно. Я не прошу готового решения, просто объясните по возможности, в какую строну мне копать <img src="img/smilies/s1.gif" alt=""> , или где ещё можно найти информацию на эту тему.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251409&amp;user=24281&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=1" class="addthx" data-post="251409"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]nevertime[/b]','')">nevertime</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 38.1 (посетитель), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.98'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=21735">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 февраля 2010 16:02 <br><script type="text/javascript">QU('nevertime','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=nevertime" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
А в чем цель копания? <img src="img/smilies/s11.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251412&amp;user=21735&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=2" class="addthx" data-post="251412"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]predtech[/b]','')">predtech</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.5 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.41'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=24281">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 февраля 2010 16:04 <br><script type="text/javascript">QU('predtech','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=predtech" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
Написать конвертер АNM -&gt;GIF(либо последовательность BMP)-&gt;ANM а для этого видимо надо понять как программа работает над этим форматом.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251413&amp;user=24281&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=3" class="addthx" data-post="251413"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]BoRoV[/b]','')">BoRoV</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/15500.jpg" alt=""><br><span class=txtSm>Ранг: 533.6 (<b>!</b>), 232thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.41'>Активность: 0.45<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=15500">Uploader</a><br><font color=blue>retired</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 февраля 2010 16:17 <br><script type="text/javascript">QU('BoRoV','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=BoRoV" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<I>predtech пишет:<br>P.S. На filext.com/file-extension/ANM	DeluxPaint (Animation) – The identifying characters used for this association are - Hex: 4C 50 46 20 00 01 , ASCII: LPF. В моём случае заголовок файла состоит из 19 нулевых байт </I><br>ну, то что он имеет такое расширение - это не значит что это такой же тип...<br><br>общая схема реверса - это тебе нужно найти место в програме где читается этот файл, а после должно идти считывание с него определеных структур/блоков, вот это тебе и нужно найти...<br>для этого тебе нужно уметь пользоватся отладчиком, ну или как некоторые любят исспользовать IDA для анализа )
<br><br><font size="1"><i>-----<br>Лучше быть одиноким, но свободным © $me</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251419&amp;user=15500&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=4" class="addthx" data-post="251419"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]OKOB[/b]','')">OKOB</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6801.png" alt=""><br><span class=txtSm>Ранг: 527.7 (<b>!</b>), 381thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.78'>Активность: 0.16<span style='color:red'>&searr;</span>0.09</span><br>Статус: <a href="action=userinfo&amp;user=6801">Участник</a><br><font color=blue><font color=red>Победитель турнира 2010</font></font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 февраля 2010 16:33 &middot; Поправил: OKOB <br><script type="text/javascript">QU('OKOB','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=OKOB" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<noindex><a href="http://www.file-extensions.org/search/?searchstring=anm" rel="nofollow" target="_blank">http://www.file-extensions.org/search/?searchstring=anm</a></noindex><br><noindex><a href="http://www.wotsit.org/list.asp?search=anm&amp;button=GO%21" rel="nofollow" target="_blank">http://www .wotsit.org/list.asp?search=anm&amp;button=GO%21</a></noindex>
<br><br><font size="1"><i>-----<br>127.0.0.1, sweet 127.0.0.1</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251421&amp;user=6801&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=5" class="addthx" data-post="251421"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b][wl][/b]','')">[wl]</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/2760.jpg" alt=""><br><span class=txtSm>Ранг: 196.6 (ветеран), 11thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.76'>Активность: 0.07<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=2760">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 февраля 2010 04:42 <br><script type="text/javascript">QU('[wl]','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=[wl]" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
если это японская новелла, то вполне вероятно, что она использует какой-то известный движок, для которого существуют тулзы по переводу.<br>Так что советую всё-таки озвучить ссылку на игрушку, чтобы разговор стал более предметным
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251526&amp;user=2760&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=6" class="addthx" data-post="251526"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]predtech[/b]','')">predtech</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.5 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.41'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=24281">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 февраля 2010 18:34 <br><script type="text/javascript">QU('predtech','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=predtech" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Спасибо всем кто ответил. Да это была визуальная новелла серии Viper. В общем, я пришёл к выводу, что разбор формата ANM  не нужен т.к. в принципе графики там для редактирования мало. Пришлось помучаться с форматом скрипта, но пара часов в HEX  редакторе помогла разобраться.  У меня сейчас возник другой вопрос. Решил попробовать разобрать игру Kara no Shoujo vndb.org/v810 , с целью перевода её в будущем, когда выйдет английский перевод. Графика нормально распаковывается и запаковывается  программой AnimED, а вот файлом скрипта тяжелее,  это тоже DAT файл с заоголовком PACKDAT как и все остальные архивы в игре :<br>00000000   50 41 43 4B 44 41 54 2E  01 04 00 00 01 04 00 00   PACKDAT.........<br>00000016   69 39 35 5F 30 31 2E 74  78 00 00 00 00 00 00 00   i95_01.tx.......<br>00000032   00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00   ................<br>00000048   40 C0 00 00 00 00 00 20  62 00 00 00 62 00            @А..... b...b.<br><br>50 41 43 4B 44 41 54   -Это заголовок (первые 7 байт)<br>2E  01 04  - это не пойму, что, возможно смещение<br>01 04 – Количество файлов в архиве<br>i95_01.tx – Название файла.<br>Остальное я пока не разобрал, т.к. в скрипте содержаться только иероглифы а ни WinHex   ни Hex Workshop не отображают иероглифы, даже если выбрать юникод и нужный шрифт, поэтому  я не могу ни одного байта модифицировать в скрипте, ведь могу случайно модифицировать какие-нибудь управляющие байты. И не знаю, как теперь извлечь текст нормально, AnimED извлекает не читабельный скрипт (файл точно не зашифрован т.к. программа ExtractData извлекает практически нормальный скрипт, но после упаковки его, игра перестаёт запускаться)<br>Ещё интересует вопрос:<br>Какими API функциями производится чтение файла и его содержимого я знаю только такие (CreateFile, CreateFileMapping, OpenFile).<br>P.S. Извиняюсь за сумбурное изложение своих мыслей.<br>Если кому-то интересно вот прилагаю файл script.dat www.mediafire.com/?ynhkhnjoe04<br>Саму игру я нашёл только на torrents.ru . На сколько мне известно люди, которые переводят игру на английский разобрались с этой проблемой, но мне пока что хочется своими силами разобраться, иначе опыта не наберусь никогда.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251568&amp;user=24281&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=7" class="addthx" data-post="251568"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]theCollision[/b]','')">theCollision</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 271.5 (наставник), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.24'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4439">Участник</a><br><font color=blue>Packer Reseacher</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 11:08 <br><script type="text/javascript">QU('theCollision','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=theCollision" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
&gt;&gt;Ещё интересует вопрос:<br>Какими API функциями производится чтение файла и его содержимого я знаю только такие (CreateFile, CreateFileMapping, OpenFile).<br>1) пишешь в браузере google.com<br>2) пишешь Msdn read file<br>3) получаешь одну из строк &quot;VPF::Файл не читается с помощью ReadFile - Форум программистов&quot;<br>4) так ты узнал, что файл можно читать спомощью ф-ции ReadFile<br>5) вводишь msdn readfile<br>6) Читаешь по-буржуйски описалово как тебе юзать эту ф-цию
<br><br><font size="1"><i>-----<br>My love is very cool girl.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251709&amp;user=4439&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=8" class="addthx" data-post="251709"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]HiEndsoft[/b]','')">HiEndsoft</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 237.0 (наставник), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.74'>Активность: 0.13<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=13651">Участник</a><br><font color=blue>sysenter</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 11:16 &middot; Поправил: HiEndsoft <br><script type="text/javascript">QU('HiEndsoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HiEndsoft" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
работа с файлом сводится к (натив):<br>NtCreateFile - NtReadFile - NtWriteFile - NtDeviceIoControlFile и иже с ними.<br>если же API: можно даже использовать DeviceIoControl с IoControlCode с префикса FSCTL_ (raw mode)
<br><br><font size="1"><i>-----<br>продавец резиновых утёнков</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251710&amp;user=13651&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=9" class="addthx" data-post="251710"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]tundra37[/b]','')">tundra37</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 310.8 (мудрец), 29thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.32'>Активность: 0.43<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4072">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 13:10 <br><script type="text/javascript">QU('tundra37','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tundra37" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<I>theCollision пишет:<br>Читаешь по-буржуйски описалово как тебе юзать эту ф-цию </I><br><br> Можно и на родном и переведено не на &quot;коленке&quot;.<br>social.msdn.microsoft.com/Search/ru-RU/?Refinement=15&amp;Query=readfile
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251716&amp;user=4072&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=10" class="addthx" data-post="251716"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Rustem[/b]','')">Rustem</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 74.1 (постоянный), 34thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.41'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1301">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 15:04 <br><script type="text/javascript">QU('Rustem','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Rustem" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<b>HiEndsoft</b> <br>боюсь так углублятся ТС рановато<br><br><b>predtech</b><br>Как в свое время я реверсил:<br>Береш апи шпиона (я юзал свой API Logger), оставляешь в нем для логирования только функции CreateFileA/W, ReadFile, CloseHandle<br>запускаешь в нем игру, появится лог.<br><br>смотришь, где в параметре имя твой файла с ресурсами, и адрес откуда идет вызов. Потом грузишь ехе в ида и изучаешь<br>можно сразу бряк в оле на CreateFile, но левых вызовов будет много<br><br>Тут есть подводные камни, вызов CreateFile будет идти, скорее всего из библиотечной функции, поэтому надо подняться &quot;выше&quot; и выйти в материнскую функцию, это можно сделать в той же оле, потом реверсишь сам код
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251722&amp;user=1301&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=11" class="addthx" data-post="251722"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 221thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 февраля 2010 02:59 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=15797.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
SetFilePointer нужно добавить для апи шпиона. Ибо часто проги читают несколько раз из одного файла по разным смещениям. Это побочный эффект многоклассовой структуры кода...
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251772&amp;user=24257&amp;forum_n=2&amp;topic=15797.html&amp;page=0&amp;anchor=12" class="addthx" data-post="251772"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/red.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=2&sortBy=0&page=0.html"><b>Крэки, обсуждения</b></a> <b class=bulletHead>&#8212;&#8250;</b> Вопрос по реверсированию форматов файлов</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#13" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="2">
<input type="hidden" name="topic" value="15797">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=15797" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
