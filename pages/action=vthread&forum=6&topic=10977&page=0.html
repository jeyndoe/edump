<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Вопрос по маппингу EXE-файлов - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Здравствуйте! Есть пара вопросов по работе с памятью и о памяти. Они, кончено, к крэкингу имеют весьма посредственное отношение, но надеюсь, вы все же поможете разобраться  Дж. Рихтер &quot;Создание эффективных WIN32-приложений с">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=55995'>tyns777</a> (+5 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Вопрос по маппингу EXE-файлов</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=6&amp;topic=10977&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=6&amp;topic=10977&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]alex78rus[/b]','')">alex78rus</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.52'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=14838">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 00:42 &middot; Поправил: alex78rus <br><script type="text/javascript">QU('alex78rus','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=alex78rus" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Здравствуйте!<br>Есть пара вопросов по работе с памятью и о памяти. Они, кончено, к крэкингу имеют весьма посредственное отношение, но надеюсь, вы все же поможете разобраться <img src="img/smilies/s1.gif" alt=""><br><br>Дж. Рихтер &quot;Создание эффективных WIN32-приложений с учетом специфики 64-разрядной версии Windows&quot; цитата:<code><br>При запуске загрузчик операционной системы выполняет следующие операции: <br>1.Загрузчик операционной системы создает виртуальное адресное пространство для нового процесса и проецирует на него исполняемый модуль. <br>2. &lt;...&gt; </code><br><br>Интересует следующее:<br><code> ...создает виртуальное адресное пространство для нового процесса и проецирует на него исполняемый модуль.</code><br><br>Я как понимаю...<br>Предположим у нас машина с ОЗУ 512 Мб. 512 Мб свободно.<br>Запускаем somefile.exe размером 10 Мб.<br>Создается процесс. У него виртуальная память 4 Гб. Вся свободная.<br>В ней выделяется 10 Мб адресного пространства под код и данные того же размера.<br><br>Вопрос: сколько ОЗУ памяти будет свободно после запуска? 502 Мб и файл somefile.exe будет переписан непосредственно в ОЗУ? <br>Или 512, а 10 Мб с винчестера(содержащие exe-файл) будут использоваться как будто они в ОЗУ памяти?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176662&amp;user=14838&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=1" class="addthx" data-post="176662"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Hexxx[/b]','')">Hexxx</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 481.4 (мудрец), 109thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.37'>Активность: 0.18<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=10168">Участник</a><br><font color=blue>Тот самый :)</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 01:26 <br><script type="text/javascript">QU('Hexxx','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Hexxx" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
<I>alex78rus пишет:<br>Вопрос: сколько ОЗУ памяти будет свободно после запуска? 502 Мб и файл somefile.exe будет переписан непосредственно в ОЗУ? </I><br>Хз. Как винда решит. У нее же есть возможность свопить RAM. Т.е. часть exe может попасть в RAM, а другая часть в swap-файл.
<br><br><font size="1"><i>-----<br>Реверсивная инженерия - написание кода идентичного натуральному</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=176666&amp;user=10168&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=2" class="addthx" data-post="176666"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]MACKLIA[/b]','')">MACKLIA</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/5822.gif" alt=""><br><span class=txtSm>Ранг: 279.1 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.96'>Активность: 0.16<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5822">Участник</a><br><font color=blue>wizard</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 01:51 &middot; Поправил: MACKLIA <br><script type="text/javascript">QU('MACKLIA','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=MACKLIA" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<I>Hexxx пишет:<br>Хз. Как винда решит. У нее же есть возможность свопить RAM. Т.е. часть exe может попасть в RAM, а другая часть в swap-файл </I><br><br><br>Файл подкачки служит &quot;продолжением&quot; оперативной памяти.  Если одновременно запустить несколько приложений, занимающих большой объем оперативной памяти, то может получиться так, что физического объема установленной оперативки не хватает для всех программ. Тогда Windows переносит данные неактивных программ из оперативной памяти в виртуальную. При обратном переходе  данные из файла подкачки переносятся в оперативку.
<br><br><font size="1"><i>-----<br>Что один человек сделал , другой всегда сломать может...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=176667&amp;user=5822&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=3" class="addthx" data-post="176667"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]alex78rus[/b]','')">alex78rus</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.52'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=14838">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 02:07 &middot; Поправил: alex78rus <br><script type="text/javascript">QU('alex78rus','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=alex78rus" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
окей. тада конкретезирую вопрос.<br><br>я так понимаю программа может запустится по одному из трех сценариев:<br>1. Непосредственно из ОЗУ.<br>2. Из файла подкачки(возможно, что это будет не конкретно он, а проекция файла) - с помощью механизма проекции на виртуальную память.<br>3. Часть - в ОЗУ, часть в страничном файле.<br><br>(...это так или я ошибаюсь?)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176669&amp;user=14838&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=4" class="addthx" data-post="176669"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]0xy[/b]','')">0xy</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 218.5 (наставник), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.37'>Активность: 0.09<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3910">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 02:28 &middot; Поправил: 0xy <br><script type="text/javascript">QU('0xy','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=0xy" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>Hexxx пишет:<br>Хз. Как винда решит. У нее же есть возможность свопить RAM. Т.е. часть exe может попасть в RAM, а другая часть в swap-файл. </I><br>+1<br><br><b>alex78rus</b><br>Есть проги, отслеживающие потребление различных ресурсов в real-time. К примеру, Norton System Doctor из пакета NU.<br><img src="http://i80.front.ru/CL/nsd.png" border="0" align="" alt=""><br><br>PM=<b>Physical</b> Memory=RAM<br>SFU=Swap File<br>Как видно, в приведенном примере винда полностью сидит в RAM и не юзает своп.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176670&amp;user=3910&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=5" class="addthx" data-post="176670"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]alex78rus[/b]','')">alex78rus</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.52'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=14838">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 03:00 &middot; Поправил: alex78rus <br><script type="text/javascript">QU('alex78rus','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=alex78rus" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
2 0xy<br>У мя сча стоит TuneUp Memory Optimizer (из TuneUp Utilities) - там тож есть возможно просматривать состояние ОЗУ/свап-файла в реал-тайме(хотя это не основная задача данного приложения). Мне важна не загруженность ресурсов моей системы, а количество ресурсов потребляемых отдельной программой. Norton System Doctor, как я понял, такого анализа не дает...<br><br>И все же мне так никто и не дал ответа на вопрос: <br><b>как подготавливается к запуску загрузчиком ехе-файл?</b><br>    1. целиком он загружается в ОЗУ? или постепенно представлениями? <br>    2. можно ли запустить программу если она проецируется(MapViewofFile) в память с винчестера? (т.е.<br>    находится в свапе)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176671&amp;user=14838&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=6" class="addthx" data-post="176671"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]Evol[/b]','')">Evol</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 55.7 (постоянный), 6thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.06'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12078">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 03:18 &middot; Поправил: Evol <br><script type="text/javascript">QU('Evol','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Evol" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
тоже раньше заинтересовал даный вопрос, т.к. был у меня файл установки (setup.exe, inno setup) на полтора гига. если запускал его, установка так и не начиналась (озу у меня гиг). наверное винда его старалась целиком в оперативу засунуть и потом пустить, но памяти не хватало и она его сразу же пихала у свап, что и тормозило процес загрузки (хотя по моему setup.exe както сама должна была бы определить, стоит ли ей целиком грузиться или нет).<br>но если переделать установку и сделать отдельно загрузчик устанвки setup.exe (~ полмега) и отдельно архивы (setup-x.bin) то установка идет нормально.<br>но как мне кажеться винду можно настроить так, чтоб например целый полторагиговый файл не закидывался в озу целиком, а по мере необходимости. етим наверное и занимаються сторонние утилиты (у меня стоит O&amp;O CC).<br><br>может кто-то сможет пролить свет на ето дело? <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176672&amp;user=12078&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=7" class="addthx" data-post="176672"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 05:44 <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<I>alex78rus пишет:<br>1. целиком он загружается в ОЗУ? или постепенно представлениями?  </I><br>Все секции которые должны быть в памяти (по атрибутам) будут загружены и память под них будет выделена. Часть уйдёт в swap но это дело memory manager-а, более высокие подсистемы об этом не знают - и плевать. Архетиктура специально аостроена таким образом.<br><br><I>alex78rus пишет:<br>2. можно ли запустить программу если она проецируется(MapViewofFile) в память с винчестера? </I><br>Выше я уже ответил. Если какх-то страниц виртуального пространства нету в реальной памяти то происходит исключение и memory manger их подгружает с диска.<br><br><I>Evol пишет:<br>тоже раньше заинтересовал даный вопрос, т.к. был у меня файл установки (setup.exe, inno setup) на полтора гига. если запускал его, установка так и не начиналась (озу у меня гиг)............ </I><br>Несмотря на то что файл на гиг, одна (или более) секции это данные и они могут не грузиться в память. То есть, для них не указан vitual address. Такие данные прога будет читать с диска.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176675&amp;user=1737&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=8" class="addthx" data-post="176675"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]S_T_A_S_[/b]','')">S_T_A_S_</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 163.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.87'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=251">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 06:39 &middot; Поправил: S_T_A_S_ <br><script type="text/javascript">QU('S_T_A_S_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=S_T_A_S_" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
По дизайну ОС, программа может запуститься только по одному сценарию - из exe файла на диске создайтся объект ОС &quot;секция&quot; (в терминах Win32 - Memory Mapped File; см. &quot;проецирует ... исполняемый модуль&quot;). На этом этапе чтение файла с диска не происходит. Данные будут считаны (в выделенную прозрачно для пользователя физ. память)  при попытке чтения из адресов куда отмаплена секция. При нехватке физической памяти такие данные не сохраняются в своп, а просто отбрасываются, при необходимости читаются опять из оригинала. Это очень важный момент, поэтому не стоит паковать исполняемые файлы. Если данные образа модифицируются то ОС вынуждена сохранять их в файл подкачки. На эту тему была статья f0dder (на русском ищи &quot;перевод&quot; Касперски, что-то о вреде упаковки). <br><br><I>Hexxx пишет:<br>Хз. Как винда решит. </I><br>Это не совсем так. См. Process Working Set &amp; VirtualLock<br><br><I>Evol пишет:<br> был у меня файл установки (setup.exe, inno setup) на полтора гига. если запускал его, установка так и не начиналась (озу у меня гиг). наверное винда его старалась целиком в оперативу засунуть и потом пустить, но памяти не хватало</I><br>А что писала винда? Не хватает _виртуальной_ памяти? <img src="img/smilies/s1.gif" alt=""><br><br><I>s0larian пишет:<br>Несмотря на то что файл на гиг, одна (или более) секции это данные и они могут не грузиться в память. То есть, для них не указан vitual address. Такие данные прога будет читать с диска.</I><br>С оверлеем не перепутал?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176680&amp;user=251&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=9" class="addthx" data-post="176680"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]Ice-T[/b]','')">Ice-T</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/12329.jpg" alt=""><br><span class=txtSm>Ранг: 126.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.01'>Активность: 0.14<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12329">Участник</a><br><font color=blue>#CCh</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 07:54 &middot; Поправил: Ice-T <br><script type="text/javascript">QU('Ice-T','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice-T" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Вопрос очень интересный, сам до конца не разобрался в нём.. Вот если ПЕ отобразился в оперативку, а под скажем последние 2 секции не хватила места, то ОС сбрасывает их в своп. Допустим ПЕ начинаецо с адреса (линейного в оперативке) 0xXXXXXXXX и места хватило только для его куска размером в 0x60000000. Образ ntdll.dll и kernel32.dll нопремер уйдут в своп? А при вызове апей код будет читацо с диска и исполянцо или все же страница спроецируецо куда-то в оперативку? Ведь насколько я понял, когда например создаём мапенг MapViewOfFile, то файл сам по себе становицо свопом, но образ занимает реальное место в оперативке при этом, а какой-то механизм ОС записывает все изменения из отображенного образа на диск.. %))<br><br>з.ы. дайте ченить почитать внятное по сабжу <img src="img/smilies/s1.gif" alt="">
<br><br><font size="1"><i>-----<br>invoke OpenFire</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=176686&amp;user=12329&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=10" class="addthx" data-post="176686"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]S_T_A_S_[/b]','')">S_T_A_S_</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 163.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.87'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=251">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 08:41 &middot; Поправил: S_T_A_S_ <br><script type="text/javascript">QU('S_T_A_S_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=S_T_A_S_" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<I>Ice-T пишет:<br>Вот если ПЕ отобразился в оперативку, а под скажем последние 2 секции не хватила места, то ОС сбрасывает их в своп.</I><br>Прочитай внимательно выше. При отображении физпамять не выделяется. Выделяется только при доступе - то есть возможно, что некоторые страницы вообще никогда не будут считаны с дистка. Если при доступе к &quot;последним 2м секциям&quot; не окажется свободных страниц, то менеджер памяти освободит (возможно выгрузит) страницы к которым не быдо доступа долше других. Про работу MMF должно быть у того же Рихтера.<br><br><I>Ice-T пишет:<br>места хватило только для его куска размером в 0x60000000</I><br>Если нет непрерывного свободного места по ImageBase (и образ нерелоцируем) то секция не будет создана и PE image не будет загружен.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176689&amp;user=251&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=11" class="addthx" data-post="176689"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]sss[/b]','')">sss</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.83'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6443">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 10:04 <br><script type="text/javascript">QU('sss','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=sss" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<I>S_T_A_S_ пишет:<br>Если нет непрерывного свободного места по ImageBase </I><br><br>При создании процесса подготавливается его собственное виртуальное адресное пространство. Поэтому разумный адрес ImageBase всегда будет доступен. Вот в случае dll это может быть не так. Мне кажется, что загрузка процесса скорее станет невозможна в случае полного израсходования хэндлов GDI, или входов PTE, или будет достигнут конец верхней границы в swap файле и его расширение невозможно.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176692&amp;user=6443&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=12" class="addthx" data-post="176692"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]Ice-T[/b]','')">Ice-T</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/12329.jpg" alt=""><br><span class=txtSm>Ранг: 126.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.01'>Активность: 0.14<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12329">Участник</a><br><font color=blue>#CCh</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 10:13 &middot; Поправил: Ice-T <br><script type="text/javascript">QU('Ice-T','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice-T" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
Кароче нихера не понятно. Не поверю, что при отображении не выделяецо ни байта физ. памяти.
<br><br><font size="1"><i>-----<br>invoke OpenFire</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=176696&amp;user=12329&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=13" class="addthx" data-post="176696"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]Ice-T[/b]','')">Ice-T</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/12329.jpg" alt=""><br><span class=txtSm>Ранг: 126.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.01'>Активность: 0.14<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12329">Участник</a><br><font color=blue>#CCh</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 10:24 <br><script type="text/javascript">QU('Ice-T','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice-T" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
Хотя пожалуй ты прав. При отображении память не выделяется, а при доступе по адресу в мапе генерируется исключение, а в обработчике происходит подгрузка в кэш страницы с диска и потом отображение в АП процесса....
<br><br><font size="1"><i>-----<br>invoke OpenFire</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=176698&amp;user=12329&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=14" class="addthx" data-post="176698"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]alex78rus[/b]','')">alex78rus</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.52'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=14838">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 11:36 &middot; Поправил: alex78rus <br><script type="text/javascript">QU('alex78rus','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=alex78rus" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<i class=x><b>S_T_A_S_ пишет:<br>Evol пишет: <br>был у меня файл установки (setup.exe, inno setup) на полтора гига. если запускал его, установка так и не начиналась (озу у меня гиг). наверное винда его старалась целиком в оперативу засунуть и потом пустить, но памяти не хватало <br>А что писала винда? Не хватает _виртуальной_ памяти?</b></i><br><br>в 32-разрядной Windows виртуальная память 4 Гб, из которой под пользовательские приложения выделяется 2 Гб.<br><br><i class=x><b>s0larian пишет:<br>Все секции которые должны быть в памяти (по атрибутам) будут загружены и память под них будет выделена. Часть уйдёт в swap но это дело memory manager-а, более высокие подсистемы об этом не знают - и плевать. Архетиктура специально построена таким образом.Если какх-то страниц виртуального пространства нету в реальной памяти то происходит исключение и memory manger их подгружает с диска.</b></i><br><br>пока это самое толковое, что написано тут по сабжу <img src="img/smilies/s1.gif" alt=""> по-моему, примерно понятно, спасибо!<br><br>Вот тока что обязательно подгружеатся в память первым? &quot;Порция&quot; кода определенного размера? Или определенная функция целиком?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176704&amp;user=14838&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=15" class="addthx" data-post="176704"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]Evol[/b]','')">Evol</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 55.7 (постоянный), 6thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.06'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12078">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 12:26 &middot; Поправил: Evol <br><script type="text/javascript">QU('Evol','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Evol" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
<I>S_T_A_S_ пишет:<br>А что писала винда? Не хватает _виртуальной_ памяти? <img src="img/smilies/s1.gif" alt=""></I><br>если бы) файл подкачки у меня на 1,5 гига (только что пробовал и при 512 мег, еффект тот самый - запуск через 3-5 мин). когда запускаю setup.exe то он не залолняеться. на вкладке &quot;Быстродействие&quot; в диспетчере задач в групе &quot;Физическая память&quot; можно наблюдать как значения &quot;Доступно&quot; и &quot;Системный кэш&quot; постоянно увеличиваються (причем &quot;Доступно&quot; то увеличивается то уменьшается). запуск происходит когда значения &gt;700000.<br>файл подкачки остаеться не тронут и занимает гдето в районе 247 мег (а вот сейчас при запущеной опере он 406 мб, а значения &quot;доступно&quot; 559024 и &quot;сис. кэш&quot; 517412 и постоянно колеблятся).<br><br>ну мне вроде стало понятно с секциями, но все же, как я говорил раньше, не мойму почему если файл setup.exe большой он запускається дольше чем если малого размера, ведь секции, которые должны быть загружены в память одинаковые (или ето не так?).
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176707&amp;user=12078&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=16" class="addthx" data-post="176707"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]HoBleen[/b]','')">HoBleen</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/5110.jpg" alt=""><br><span class=txtSm>Ранг: 240.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.09'>Активность: 0.19<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5110">Участник</a><br><font color=blue>Author of ACKiller </font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 12:44 <br><script type="text/javascript">QU('HoBleen','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HoBleen" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
<I>Evol пишет:<br>был у меня файл установки (setup.exe, inno setup) на полтора гига </I><br>Уверен, что львиная доля файла - это оверлей. Инсталлеры походу хранят все необходимые данные для установки именно там.<br><br><I>S_T_A_S_ пишет:<br>По дизайну ОС, программа может запуститься только по одному сценарию - из exe файла на диске создайтся объект ОС &quot;секция&quot; (в терминах Win32 - Memory Mapped File; см. &quot;проецирует ... исполняемый модуль&quot;). На этом этапе чтение файла с диска не происходит. Данные будут считаны (в выделенную прозрачно для пользователя физ. память) при попытке чтения из адресов куда отмаплена секция. При нехватке физической памяти такие данные не сохраняются в своп, а просто отбрасываются, при необходимости читаются опять из оригинала. Это очень важный момент, поэтому не стоит паковать исполняемые файлы. </I><br>+1<br>Именно на этом и устроена защита ПЕПа раздутием секции - если программа запускается без помощи отладчика, то этот &quot;галл&quot; вообще не присутствует в оперативной памяти. Если же мы юзаем отладчик и заставляем систему реально создавать эти страницы, то как раз начинаются лаги из-за нехватки памяти.<br><br><I>s0larian пишет:<br>Несмотря на то что файл на гиг, одна (или более) секции это данные и они могут не грузиться в память. То есть, для них не указан vitual address. Такие данные прога будет читать с диска. </I><br>Не проецируется только та часть файла, которая не захватывается SizeOfHeaders и каждой из секций.<br><br><I>sss пишет:<br>Поэтому разумный адрес ImageBase всегда будет доступен. </I><br>Не совсем - непосредственно до маппинга основного модуля грузится модуль ntdll, который занимает свое место в адресном пространстве процесса.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176710&amp;user=5110&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=17" class="addthx" data-post="176710"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]sss[/b]','')">sss</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.83'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6443">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 12:46 &middot; Поправил: sss <br><script type="text/javascript">QU('sss','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=sss" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
<I>alex78rus пишет:<br>Вот тока что обязательно подгружеатся в память первым? &quot;Порция&quot; кода определенного размера? </I><br><br>Весь код! Сам ведь выделил: &quot;Все секции которые должны быть в памяти (по атрибутам) будут загружены и память под них будет выделена&quot;. Надо добавить &quot;будут загружены в виртуальную память&quot;. А вот размером скользящего окна физической памяти будет управлять VMM. <br>Получить значения этого параметра - GetProcessWorkingSetSizeEx(). Надоело писать, вырежу прямо из MSDN:<br><br>The &quot;working set&quot; of a process is the set of memory pages currently visible to the process in physical RAM memory. These pages are resident and available for an application to use without triggering a page fault. The minimum and maximum working set sizes affect the virtual memory paging behavior of a process.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176711&amp;user=6443&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=18" class="addthx" data-post="176711"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]sss[/b]','')">sss</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.83'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6443">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 12:51 <br><script type="text/javascript">QU('sss','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=sss" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
<I>HoBleen пишет:<br>Не совсем - непосредственно до маппинга основного модуля грузится модуль ntdll, который занимает свое место в адресном пространстве процесса. </I><br><br>Я долго думал выделить жирным слово разумный или нет...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176712&amp;user=6443&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=19" class="addthx" data-post="176712"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]HoBleen[/b]','')">HoBleen</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/5110.jpg" alt=""><br><span class=txtSm>Ранг: 240.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.09'>Активность: 0.19<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5110">Участник</a><br><font color=blue>Author of ACKiller </font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 12:54 &middot; Поправил: HoBleen <br><script type="text/javascript">QU('HoBleen','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HoBleen" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
<I>alex78rus пишет:<br>Вот тока что обязательно подгружеатся в память первым? </I><br>ИМХО по логике:<br>1)Хидер<br>2)Таблица импорта<br>3)Таблица релоков<br>4)Тлс табличка<br>5)Страница кода с ЕР<br><br><b>Evol</b><br>А что за инсталлер такой странный?) Можешь скопипастить таблицу секций?<br><br><I>sss пишет:<br>Я долго думал выделить жирным слово разумный или нет... </I><br><img src="img/smilies/s1.gif" alt=""> Я думал ты имеешь ввиду нижние 2 гигабайта...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176713&amp;user=5110&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=20" class="addthx" data-post="176713"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]Evol[/b]','')">Evol</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 55.7 (постоянный), 6thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.06'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12078">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 15:50 &middot; Поправил: Evol <br><script type="text/javascript">QU('Evol','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Evol" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
<I>HoBleen пишет:<br>А что за инсталлер такой странный?) Можешь скопипастить таблицу секций? </I><br>та думал, что стандартный Inno Setup, т.к. разпаковывается innounp. правда почемуто нету свойств файла (таких как в нормальных inno setup установках). при выборе файла в PE Editor (LordPE) выдает ошибку: &quot;Couldn&#039;t map file ! Maybe there&#039;s not enough memory available !&quot;. скопировал из ольки (грузилось 5 мин гдето)) Memory Map (то что относится к установке). еще можно глянуть в exescope))<br>еще попробую сам инсталятор собрать и потестить. может ето в нем проблема <img src="img/smilies/s1.gif" alt=""><br><br><img src="img/attach.gif" alt=""> <a href="./files/829e_09.01.2008_CRACKLAB.rU.tgz">829e_09.01.2008_CRACKLAB.rU.tgz</a> - pack.zip<br><br>попробовал собрать большой инсталятор сам - получается тоже самое: нету значка и свойств файла (от чего бы ето). если создать инсталятор с отдельным setup.exe и архивами то запускаеться нормально. видимо ето у меня что-то с системой <img src="img/smilies/s6.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176717&amp;user=12078&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=21" class="addthx" data-post="176717"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]HiEndsoft[/b]','')">HiEndsoft</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 237.0 (наставник), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.74'>Активность: 0.13<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=13651">Участник</a><br><font color=blue>sysenter</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 20:01 <br><script type="text/javascript">QU('HiEndsoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HiEndsoft" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
<I>alex78rus пишет: 2. можно ли запустить программу если она проецируется(MapViewofFile) в память с винчестера? (т.е. находится в свапе) </I>  можно, если спроецировано с флагом PAGE_EXECUTE...что само собой говорит о том что файл проецируется не &quot;на винчестер&quot;<img src="img/smilies/s1.gif" alt="">
<br><br><font size="1"><i>-----<br>продавец резиновых утёнков</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=176731&amp;user=13651&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=22" class="addthx" data-post="176731"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 21:32 <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
<I>S_T_A_S_ пишет:<br>s0larian пишет:<br>Несмотря на то что файл на гиг, одна (или более) секции это данные и они могут не грузиться в память. То есть, для них не указан vitual address. Такие данные прога будет читать с диска.<br>С оверлеем не перепутал? </I><br>Ээээ, приврал я тут. В виндах адресное пространство процесса состоит из секций файла, явно импортированных dlls, и, ессно, виндовских dll-ок. <br><br>В ELF структуре debug инфа живёт в секции, которая не является частью адресного пространства и не имеет виртуального адреса. Но, это никого не парит, т.к. не в эту тему <img src="img/smilies/s2.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176740&amp;user=1737&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=23" class="addthx" data-post="176740"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]RET[/b]','')">RET</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.1 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.52'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=14854">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 января 2008 22:34 &middot; Поправил: RET <br><script type="text/javascript">QU('RET','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=RET" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
<I>HoBleen пишет:<br>Не совсем - непосредственно до маппинга основного модуля грузится модуль ntdll, который занимает свое место в адресном пространстве процесса. </I>-не факт. В первой структуре загрузчика PEB_LDR_DATA-&gt;InLoadOrderModuleList.Flink сначала идет указатель на структуру описывающую процесс, только затем ntdll, и далее по порядку на загруженные модули процесса. Таким образом сначала проецируется исполняемый модуль, а только затем все остальное. Рихтер как всегда прав.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176746&amp;user=14854&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=24" class="addthx" data-post="176746"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]S_T_A_S_[/b]','')">S_T_A_S_</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 163.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.87'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=251">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 января 2008 04:03 &middot; Поправил: S_T_A_S_ <br><script type="text/javascript">QU('S_T_A_S_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=S_T_A_S_" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#25');return false;">#25</a> </span><div align=left><br>
<I>sss пишет:<br>загрузка процесса скорее станет невозможна в случае полного израсходования хэндлов GDI </I><br>Не пробовал, да и сложно при этом запустить процесс - у эксплорера сносит крышу <img src="img/smilies/s1.gif" alt=""> Но сталкивался с тем что 200Mb exe не запускался на 2К со старым СП.<br><br><I>alex78rus пишет:<br>в 32-разрядной Windows виртуальная память 4 Гб, из которой под пользовательские приложения выделяется 2 Гб. </I><br>Ну это максимальный. А размер свопа какой? ;) Он нужен что бы выгрузить (чужие) модифицированные страницы при нехватке физических страниц для текущего процесса.<br><br><I>Evol пишет:<br>файл подкачки остаеться не тронут и занимает гдето в районе 247 мег</I><br>Минимальный и максимальный размер задаются и могут быть одинаковыми.<br><br><I>HoBleen пишет:<br>Уверен, что львиная доля файла - это оверлей.</I><br>Похоже что так, поэтому и пауза при его чтении.<br><br>PS вот нашел оригинал стотьи f0dder.reteam.org/packandstuff.htm
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176762&amp;user=251&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=25" class="addthx" data-post="176762"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]RET[/b]','')">RET</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.1 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.52'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=14854">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 января 2008 11:34 <br><script type="text/javascript">QU('RET','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=RET" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#26');return false;">#26</a> </span><div align=left><br>
К предыдущему посту: пример отображающий по-порядку кто за кем был загружен призагрузке программы загрузчиком винды:<br><br><img src="img/attach.gif" alt=""> <a href="./files/3016_10.01.2008_CRACKLAB.rU.tgz">3016_10.01.2008_CRACKLAB.rU.tgz</a> - Loader_order.exe
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176802&amp;user=14854&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=26" class="addthx" data-post="176802"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]Evol[/b]','')">Evol</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 55.7 (постоянный), 6thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.06'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12078">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 января 2008 13:38 &middot; Поправил: Evol <br><script type="text/javascript">QU('Evol','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Evol" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#27');return false;">#27</a> </span><div align=left><br>
<I>S_T_A_S_ пишет:<br>Минимальный и максимальный размер задаются и могут быть одинаковыми. </I><br>причем тут ето? у меня и мин. и макс. размер равны 1536 мег, и ето означает только то что таким он останеться на <b>диске</b>.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176815&amp;user=12078&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=27" class="addthx" data-post="176815"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]vitokop[/b]','')">vitokop</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 17.6 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.58'>Активность: 0.01=0.01</span><br>Статус: <a href="action=userinfo&amp;user=8405">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 января 2008 15:52 <br><script type="text/javascript">QU('vitokop','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=vitokop" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#28');return false;">#28</a> </span><div align=left><br>
Обычно большие инсталяторы хранят свой большие данные как Extra Данные, т.е. они не прописаны<br>как маппируемая секция, а как привязка к хвосту файла, WINDOWS на них не обращает внимания.<br>Загрузчик смотрит только маппируемые секции, идущие подряд.<br>Вообще при загрузке Windows (с NT) проверяет (видел в дебрях кода) размер маппируемых секций,<br>т.к. они идут одна за одной, на предмет размера порядка 472 МБайта.<br>Для провеерки делал файлы больше 512 МБайт (естественно, маппируемые секции).<br>На доступных мне ОС и SP загрузчик &quot;тихо&quot; умирал.<br>Иногда даже без посмертной инфы.<br>Работа ОС продолжала быть нормальной.<br>Т.е. прога игнорировалась.<br>Т.е. эта цифра близка к РЕАЛЬНО РАСЧИТЫВАЕМОЙ и используемой виртуальной памяти с учетом ОЗУ.<br>Виртуальная память &gt;= 1,5  размера ОЗУ
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176828&amp;user=8405&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=28" class="addthx" data-post="176828"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]HiEndsoft[/b]','')">HiEndsoft</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 237.0 (наставник), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.74'>Активность: 0.13<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=13651">Участник</a><br><font color=blue>sysenter</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 января 2008 15:55 <br><script type="text/javascript">QU('HiEndsoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HiEndsoft" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#29');return false;">#29</a> </span><div align=left><br>
Система всегда сама увеличивает файл подкачки, чего бы вы не задавали. Размер свопа ограничивется только размером диска. Если своп вообще запретить, система создаст его при нехватке оперативки в корне диска, где установлена винда. Если ты задаешь размер свопа то он создается именно в таком размере сектора, которые пока не используются забивается нулями.
<br><br><font size="1"><i>-----<br>продавец резиновых утёнков</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=176829&amp;user=13651&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=29" class="addthx" data-post="176829"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="30" onfocus="this.blur()" href="JavaScript:di('[b]vitokop[/b]','')">vitokop</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 17.6 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.58'>Активность: 0.01=0.01</span><br>Статус: <a href="action=userinfo&amp;user=8405">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 января 2008 16:17 <br><script type="text/javascript">QU('vitokop','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=vitokop" target="_blank">Личное сообщение</a> &middot;  <a href="#30" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=10977&amp;page=0#30');return false;">#30</a> </span><div align=left><br>
HiEndsoft<br><br>Cистема мелкомягких содержит слишком много казусов, не опыысываемых логикой.<br>Например, загрузчик ОС проверят расстояние до NTHEADERs по &#036;3C DOSHEADER.<br>И оно не может быть больше 256 Мбайт(???).<br>Т.е. следуя логике мелкомягких РЕ-файл МОЖЕТ содержать примерно 256 МБайт<br>между DOS и NT хидерами!!!<br>Вопрос, будет ли маппироваться вся эта область????<br>Обычно весь DOS + NT Headers укладываются в пределы 4 - 8 Кбайт.<br>Как будет маппироваться (и будет ли) весь NTHRADERS с табличками???<br>Вопрос: будет ли работать так постоенный РЕ-файл<br>Ответ - будет!<br>И ОС наплевать на всю инфу до  NT Headers !!!<br>Для него &quot;настоящий&quot; РЕ файл на диске начнётся с NTHeaders , ну а дальше уже по<br>неписанным правилам мелкомягких.<br>Что делает система с виртуальной памятью В ДЕЙСТВИТЕЛЬНОСТИ при раскрутке нового<br>процесса, я не нашёл нигде.<br>Но мы сами можем во всю использовать виртуальную память в своих программах,<br>выделяя её (все функции Virtual...) после старта своей программы.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=176833&amp;user=8405&amp;forum_n=6&amp;topic=10977&amp;page=0&amp;anchor=30" class="addthx" data-post="176833"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=6&amp;topic=10977&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=6&amp;topic=10977&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Вопрос по маппингу EXE-файлов</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#31" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="6">
<input type="hidden" name="topic" value="10977">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=10977" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
