<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Помогите с лодырем - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Занимаюсь прогой с защитой Sentinel SuperPro чтобы уйти от эмуляторов скопировал дамп ключа непосредственно в dll и перенаправил чтение в функции RNBOsproRead из этого дампа. сохранил все изменения через Ольку. Все работает">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=42860'>igorcauret</a>, <a target='_blank' href='?action=userinfo&amp;user=8605'>Rio</a> (+6 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Помогите с лодырем</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]zds[/b]','')">zds</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 57.0 (постоянный), 10thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.42'>Активность: 0.05<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=31361">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 ноября 2014 00:41 <br><script type="text/javascript">QU('zds','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=zds" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Занимаюсь прогой с защитой Sentinel SuperPro<br>чтобы уйти от эмуляторов скопировал дамп ключа непосредственно в dll и перенаправил чтение в функции RNBOsproRead из этого дампа. сохранил все изменения через Ольку. Все работает прекрасно.<br>Но появилась нужда сделать лоадер для этого дела. Взял заранее рабочий проект лоадера (который прекрасно работал с предыдущими програми), но здесь появилась первая загвоздка - просто WriteProcessMemory не прокатывает, т.к. память защищена. Добавил VirtualProtectEx - все заработало.<br>вот кусок непосредственно записи:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">VirtualProtectEx<span class="hl_char">(</span>pi<span class="hl_char">.</span>hProcess<span class="hl_char">,</span>Pointer<span class="hl_char">(</span>textadr<span class="hl_char">+</span><span class="hl_char">$</span><span class="hl_number">4e60</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span><span class="hl_number">22</span><span class="hl_char">,</span>&nbsp;PAGE_READWRITE<span class="hl_char">,</span>&nbsp;y<span class="hl_char">)</span><span class="hl_comment">; // y=32</span></li><li class="hl_l1">WriteProcessMemory<span class="hl_char">(</span>pi<span class="hl_char">.</span>hProcess<span class="hl_char">,</span>&nbsp;Pointer<span class="hl_char">(</span>textadr<span class="hl_char">+</span><span class="hl_char">$</span><span class="hl_number">4e60</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;@NText1<span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span><span class="hl_number">22</span><span class="hl_char">,</span>&nbsp;bytesread<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">VirtualProtectEx<span class="hl_char">(</span>pi<span class="hl_char">.</span>hProcess<span class="hl_char">,</span>Pointer<span class="hl_char">(</span>textadr<span class="hl_char">+</span><span class="hl_char">$</span><span class="hl_number">4e60</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span><span class="hl_number">22</span><span class="hl_char">,</span>&nbsp;y<span class="hl_char">,</span>&nbsp;nil<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br>Но после этого програма падает.<br>Смотрел через Ольку - изменения применяются правильно. Но при первом же обращении к этой dll на первой же команде (функция вообще не подвергалась изменению) Олька выдает &quot;access violation when executing...&quot;, а затем прога аварийно завершается &quot;terminated C0000005&quot;.<br>Память меняю в секциях rdata и text<br>Подскажите пожалуйста в чем может быть мой косяк?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=348697&amp;user=31361&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=1" class="addthx" data-post="348697"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Apocalypse[/b]','')">Apocalypse</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/26065.png" alt=""><br><span class=txtSm>Ранг: 88.2 (постоянный), 111thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.94'>Активность: 0.07<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=26065">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 ноября 2014 00:57 &middot; Поправил: Apocalypse <br><script type="text/javascript">QU('Apocalypse','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Apocalypse" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
WriteProcessMemory сам по себе вызывает ZwProtectVirtualMemory, т.ч врятли нужно VirtualProtectEx<br><br>Ну и:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">VirtualProtectEx<span class="hl_char">(</span>pi<span class="hl_char">.</span>hProcess<span class="hl_char">,</span>Pointer<span class="hl_char">(</span>textadr<span class="hl_char">+</span><span class="hl_char">$</span><span class="hl_number">4e60</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span><span class="hl_number">22</span><span class="hl_char">,</span>&nbsp;PAGE_READWRITE<span class="hl_char">,</span>&nbsp;@y<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=348698&amp;user=26065&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=2" class="addthx" data-post="348698"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=31361" title="14-11-2014 21:52, ранг:9.1" target="_blank">zds</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]UniSoft[/b]','')">UniSoft</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/1288.png" alt=""><br><span class=txtSm>Ранг: 52.0 (постоянный), 146thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.41'>Активность: 0.03<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=1288">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 ноября 2014 00:58 <br><script type="text/javascript">QU('UniSoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UniSoft" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<b>zds</b><I>zds пишет:<br>Подскажите пожалуйста в чем может быть мой косяк?  </I><br>сразу скажу, что с Delphi я не дружу, но по логике вот тут
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">VirtualProtectEx<span class="hl_char">(</span>pi<span class="hl_char">.</span>hProcess<span class="hl_char">,</span>Pointer<span class="hl_char">(</span>textadr<span class="hl_char">+</span><span class="hl_char">$</span><span class="hl_number">4e60</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span><span class="hl_number">22</span><span class="hl_char">,</span>&nbsp;PAGE_READWRITE<span class="hl_char">,</span>&nbsp;y<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br>по моему должно быть
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">VirtualProtectEx<span class="hl_char">(</span>pi<span class="hl_char">.</span>hProcess<span class="hl_char">,</span>Pointer<span class="hl_char">(</span>textadr<span class="hl_char">+</span><span class="hl_char">$</span><span class="hl_number">4e60</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span><span class="hl_number">22</span><span class="hl_char">,</span>&nbsp;PAGE_READWRITE<span class="hl_char">,</span>&nbsp;@y<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br>пятый аргумент функции является указателем на DWORD, который получит текущее значение флагов защиты, а в вашем случае получается, что вы туда передаете содержимое y, а оно скорее всего неверное.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=348699&amp;user=1288&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=3" class="addthx" data-post="348699"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=31361" title="14-11-2014 21:52, ранг:9.1" target="_blank">zds</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Hellspawn[/b]','')">Hellspawn</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/72.gif" alt=""><br><span class=txtSm>Ранг: 990.2 <font color=red>(<b>! ! !</b>)</font>, 380thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.95'>Активность: 0.68<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=72">Модератор</a><br><font color=blue>Author of DiE</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 ноября 2014 01:07 <br><script type="text/javascript">QU('Hellspawn','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Hellspawn" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
права обратно не возвращаются на память:<br><br>VirtualProtectEx(pi.hProcess,Pointer(textadr+&#036;4e60), &#036;22, y, <b>y</b>);<br><br><b>lpflOldProtect [out]</b><br>A pointer to a variable that receives the previous access protection of the first page in the specified region of pages. If this parameter is <b>NULL</b> or does not point to a valid variable, the function fails.
<br><br><font size="1"><i>-----<br>[nice coder and reverser]</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=348700&amp;user=72&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=4" class="addthx" data-post="348700"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=31361" title="14-11-2014 21:52, ранг:9.1" target="_blank">zds</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]zds[/b]','')">zds</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 57.0 (постоянный), 10thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.42'>Активность: 0.05<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=31361">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 ноября 2014 01:56 &middot; Поправил: zds <br><script type="text/javascript">QU('zds','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=zds" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
Всем спасибо. То что надо.<br>В очередной раз трачу целый день из-за невнимательности и одного знака.<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">VirtualProtectEx<span class="hl_char">(</span>pi<span class="hl_char">.</span>hProcess<span class="hl_char">,</span>Pointer<span class="hl_char">(</span>textadr<span class="hl_char">+</span><span class="hl_char">$</span><span class="hl_number">4e60</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span><span class="hl_number">22</span><span class="hl_char">,</span>&nbsp;PAGE_READWRITE<span class="hl_char">,</span>&nbsp;@y<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">WriteProcessMemory<span class="hl_char">(</span>pi<span class="hl_char">.</span>hProcess<span class="hl_char">,</span>&nbsp;Pointer<span class="hl_char">(</span>textadr<span class="hl_char">+</span><span class="hl_char">$</span><span class="hl_number">4e60</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;@NText1<span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span><span class="hl_number">22</span><span class="hl_char">,</span>&nbsp;bytesread<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">VirtualProtectEx<span class="hl_char">(</span>pi<span class="hl_char">.</span>hProcess<span class="hl_char">,</span>Pointer<span class="hl_char">(</span>textadr<span class="hl_char">+</span><span class="hl_char">$</span><span class="hl_number">4e60</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span><span class="hl_number">22</span><span class="hl_char">,</span>&nbsp;y<span class="hl_char">,</span>&nbsp;@y<span class="hl_char">)</span></li>        </ol>
    </div>
</div></div>
<br><br><b>Apocalypse</b>, просто WriteProcessMemory с предыдущими прогами все работало. Здесь чтение проходит, а запись выдает ошибку 998 кажется. VirtualProtectEx решает проблему.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=348702&amp;user=31361&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=5" class="addthx" data-post="348702"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]Archer[/b]','')">Archer</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/1556.jpg" alt=""><br><span class=txtSm>Ранг: 2014.5 <b><u>(!!!!)</u></b>, 1278thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.27'>Активность: 1.34<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1556">Модератор</a><br><font color=blue>retired</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 ноября 2014 10:35 <br><script type="text/javascript">QU('Archer','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Archer" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Стоит отметить, что хреново ставить PAGE_READWRITE для секции кода. Если код после смены прав, но до возвращения прав на место, начнёт исполняться на этой странице, оно свалится на DEP. Execute добавь.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=348703&amp;user=1556&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=6" class="addthx" data-post="348703"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=1883" title="15-11-2014 09:18, ранг:143.6" target="_blank">Kindly</a>, <a href="action=userinfo&user=31361" title="16-11-2014 06:16, ранг:9.1" target="_blank">zds</a>, <a href="action=userinfo&user=1288" title="16-11-2014 18:57, ранг:16.9" target="_blank">UniSoft</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 391thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 ноября 2014 10:01 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Господа, доброго времени суток.<br><br>Тоже касаемо лоадеров, чтоб не плодить темы, задам вопрос тут.<br>ТС, прошу прощения за оффтоп.<br><br>Я понимаю, что это не форум программистов, но может быть кто-то натолкнёт на мысль.<br><br>Проблема (если так можно сказать) с консольными приложениями.<br><b>Смысл таков</b>:<br><br><b>Консольное приложение (первое, лоадер) запускает (с помощью CreateProcess)  другое консольное приложение (второе, хм,&quot;поцеент&quot;).</b><br>Оба скомпилированы как консольные.<br><br>Первое (лоадер) работает нормально, ввод_с_клавиатуры и вывод_на_экран без вопросов.<br>Зато второе работает (более/менее работает, но меня такое не устраивает) - только если процесс для него создаётся с флагом <b>CREATE_NEW_CONSOLE</b>.<br>При этом да, создаётся новая консоль и там у второго приложения нормально работает ввод/вывод. По завершении второго приложения эта его новая консоль автоматически закрывается.<br>Если же процесс для второго приложения создаётся с флагом <b>DETACHED_PROCESS</b> (т.е. оно может само выделять для себя консоль), тогда никакой новой консоли не создаётся (это второе приложение запрашивает консоль, получает 0 - типа, у него уже есть консоль, родительская) <b>и никакой ввод/вывод у второго приложения не работает</b>. Система ошибок не выдаёт, второе приложение просто отрабатывает втихую и завершается.<br>То же самое происходит, если не задавать вообще никаких &quot;консольных флагов&quot; при создании процесса для второго приложения.<br><b>Мне же нужно, чтобы второе приложение работало (ввод/вывод) с первой, родительской консолью</b>. Поскольку созданная новая клиентская консоль (второго приложения) тут же по завершении второго приложения закрывается и даже не даёт прочесть, что там вывела эта вторая программа, например, сообщения об ошибках, если они были. Это не годится.<br><br>Вот такая проблема.<br>Причём если второе приложение GUIёвое, то вообще не возникает никаких вопросов. <br> <br>Вопросы только к запускаемому (второму) приложению <b>консольного</b> типа. - Оно не хочет работать с родительской консолью как положено.<br>Заморачиваться не нужно, как-нибудь выкручусь, но может кто-то сталкивался с такой фичей и сможет натолкнуть на решение...<br><i class=x><br></i>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=348723&amp;user=35473&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=7" class="addthx" data-post="348723"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]Archer[/b]','')">Archer</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/1556.jpg" alt=""><br><span class=txtSm>Ранг: 2014.5 <b><u>(!!!!)</u></b>, 1278thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.27'>Активность: 1.34<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1556">Модератор</a><br><font color=blue>retired</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 ноября 2014 10:33 <br><script type="text/javascript">QU('Archer','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Archer" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<b>dosprog</b><br>Когда 2 процесса делят консоль, особо кошерной работы ожидать и не стоит. <I>By default, a console process inherits its parent&#039;s console, and there is no guarantee that input is received by the process for which it was intended.</I><br>Так что либо сваргань ему отдельную консоль, либо поиграйся с хендлами hStdInput/hStdOutput/hStdError в STARTUPINFO.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=348727&amp;user=1556&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=8" class="addthx" data-post="348727"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=35473" title="16-11-2014 07:02, ранг:74.5" target="_blank">dosprog</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 391thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 ноября 2014 10:57 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<b>Archer</b>,<br>жаль.<br><br>Что ж, я экспериментально пришёл к тому же мнению, что там лажа полная. <br>Попробую воспользоваться советом о STARTUPINFO. В смысле, передать туда хэндлы, полученные родителем для своей консоли.<br><br><b>--добавлено--</b><br>Попробовал. Разницы при всех вариантах не заметил. Такое впечатление, что те поля в STARTUPINFO вообще не учитываются. <br>Жаль.<br>Остаётся использовать только отдельную консоль и мириться с её закрытием по окончании работы второй программы. Паршиво, что и перенаправление в файл работает только для лоадера, от клиента никаких следов в том файле не остаётся. Даже если для него создаётся отдельная консоль. Если не создаётся - то же самое.<br><br>[flame mode on]<br>..а эти говнюки делают блин трёхменые &quot;рабочие столы&quot;, вместо того, чтобы сопли подобрать в системе..<br>[flame mode off]<br><i class=x><br></i>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=348728&amp;user=35473&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=9" class="addthx" data-post="348728"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]Archer[/b]','')">Archer</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/1556.jpg" alt=""><br><span class=txtSm>Ранг: 2014.5 <b><u>(!!!!)</u></b>, 1278thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.27'>Активность: 1.34<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1556">Модератор</a><br><font color=blue>retired</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 ноября 2014 12:23 <br><script type="text/javascript">QU('Archer','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Archer" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<I>dosprog пишет:<br>Такое впечатление, что те поля в STARTUPINFO вообще не учитываются</I><br>А точно всё правильно сделал-то? Не забыл флаг STARTF_USESTDHANDLES+<I>the handles must be inheritable and the function&#039;s bInheritHandles parameter must be set to TRUE</I>? Ибо эти вещи для редиректа консоли в пайп или ещё куда юзаются прилично где и вполне работают.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=348733&amp;user=1556&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=10" class="addthx" data-post="348733"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 391thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 ноября 2014 12:29 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=23215.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
Спасибо, проверю.<br><br>Собственно, редирект  в файл это как выход годится только наполовину. Хотя, может, это и ))б<b>О</b>льшая половина. <br><br><br><b>--добавлено--</b><br>Проверил. Реакция на включение fInheritHandles  имеется. На экране всё как и прежде, а при перенавлении вывода в файл на выходе пустой файл (нулевой длины). То-есть, уже и от лоадера сообщения туда не попали.<br><br>Вот код.<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;STARTF_USESTDHANDLES</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sinf<span class="hl_char">.</span>dwFlags<span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>stdin_handle</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sinf<span class="hl_char">.</span>hSin<span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>stdout_handle</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sinf<span class="hl_char">.</span>hSou<span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>stderr_handle</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sinf<span class="hl_char">.</span>hErr<span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>xor</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>CREATE_SUSPENDED</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>CREATE_NEW_CONSOLE&nbsp;&nbsp;</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;o&nbsp;hProcess&nbsp;&nbsp;&nbsp;<span class="hl_comment">; lpProcessInformation</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;o&nbsp;sinf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; lpStartupInfo</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0</span>&nbsp;&nbsp;&nbsp;<span class="hl_comment">; lpCurrentDirectory</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0</span>&nbsp;&nbsp;&nbsp;<span class="hl_comment">; lpEnvironment</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>EAX</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; dwCreationFlags</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; bInheritHandles</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0</span>&nbsp;&nbsp;&nbsp;<span class="hl_comment">; lpThreadAttributes</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0</span>&nbsp;&nbsp;&nbsp;<span class="hl_comment">; lpProcessAttributes</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;pArguments&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; lpCommandLine</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;o&nbsp;proсess_full_path&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; lpApplicationName</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;CreateProcessA</li>        </ol>
    </div>
</div></div>
<br><br>Просто новый процесс (вообще постороний файл) будет получать эти хэндлы не извлекая из STARTUPINFO (после вызова  GetStartupInfo() ), а запрашивая новые, и нужно ещё проверить, даст ли ему система те, что переданы родителем. Даже если и даст те же, .. в общем, вопросы. <br><br>Покручу ещё так и эдак все варианты..<br><i class=x><br></i>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=348734&amp;user=35473&amp;forum_n=5&amp;topic=23215.html&amp;page=0&amp;anchor=11" class="addthx" data-post="348734"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Помогите с лодырем</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#12" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="5">
<input type="hidden" name="topic" value="23215">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=23215" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
