<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>ARCHANGEL&#039;s blog - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Добрый день, уважаемые форумчане. Ни для кого не секрет, что решил я с недавних пор пойти учиться программированию. Поэтому стали меня интересовать практические аспекты кодинга, иногда весьма далёкие от вопросов реверсинга.">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b> (+5 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/blog.png" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=12&sortBy=0&page=0.html"><b>Дневники и блоги</b></a> <b class=bulletHead>&#8212;&#8250;</b> ARCHANGEL&#039;s blog</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=3.html">&lt;&lt;</a> .  <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=0.html">1</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=2.html">3</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=3.html">4</a> . <b>5</b> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=5.html">6</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=6.html">7</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=7.html">8</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=8.html">9</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=9.html">10</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=5.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 13 июля 2012 18:28 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#1');return false;">#1</a> </span><div align=left><br>
Добрый день, уважаемые форумчане. Ни для кого не секрет, что решил я с недавних пор пойти учиться программированию. Поэтому стали меня интересовать практические аспекты кодинга, иногда весьма далёкие от вопросов реверсинга. Поэтому чтоб не засорять форум, решил создать этот блог. Стоит сказать, что вопросы, которые планируется тут разбирать, не такие уж и бесполезные. Они часто могут возникать при написании тех же кейгенов или тулз для реверсинга, так что, надеюсь, каждый сможет найти здесь что-нибудь интересное. Как некоторые уже догадались, вопросы Common Controls, простым числам, и сегодняшний вопрос по OpenGL как раз из серии учебных. Теперь о самом вопросе.<br><br>На днях выполнял задание про отрисовку простых фигур: треугольника, квадрата и т.д. Решено было выполнять рисование средствами OpenGL. Литературы по этому делу много, поэтому я разобрался, что и как. Т.е. в литературе советовали использовать бибилиотеку glut.dll, которая сама не относится к стандартному OpenGL, но её применение, как я понял, упрощает использование OpenGL в своих проектах.  Далее я решил создать базовый класс для отрисовки треугольника, а от него создать производные классы для отрисовки других геометрических фигур. Но на практике получилась вот такая сложность. Дело в том, что glut, по сути, инкапсулирует функции Windows и OpenGL, что упрощает операции с ними. Но от базовых вещей же никуда не деться. Т.е. если процедура обработки оконных сообщений (CALLBACK WindowProc) должна присутствовать, то в классе она должна быть статической. Так и здесь: <br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">glutDisplayFunc<span class="hl_char">(</span>Draw<span class="hl_char">)</span><span class="hl_comment">; //где Draw - колбэк, а значит не может быть простым методом класса</span></li>        </ol>
    </div>
</div></div>
<br><br>Но вот проблема - мне нужно передать внутрь Draw несколько параметров. Являясь статическим методом, Draw не имеет указателя this, а значит не видит обычных полей. Статические поля он видит, но при попытке в конструкторе присвоить значения этим полям появляется ошибка линковки. Понятное дело, что по-хорошему, можно обойтись совсем без классов, но это превратит код в кашу - большое количество глобальных переменных, почти одинаковые функции со схожим функционалом принесут путаницу раньше, чем будут отрисованы несколько фигур. Кто посоветует, как быть в такой ситуации и как решить проблему со статическими функциями-членами?
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=308681&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=1" class="addthx" data-post="308681"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]reversecode[/b]','')">reversecode</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/15381.gif" alt=""><br><span class=txtSm>Ранг: 1053.6 <b><u>(!!!!)</u></b>, 1078thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.43'>Активность: 1.06<span style='color:red'>&searr;</span>0.81</span><br>Статус: <a href="action=userinfo&amp;user=15381">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2012 12:05 &middot; Поправил: reversecode <br><script type="text/javascript">QU('reversecode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=reversecode" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#2');return false;">#2</a> </span><div align=left><br>
ну сисер можно попатчить что бы он считал что он постоянно под вмварей а не детектил ее<br>и нормально работал<br><br><I>ARCHANGEL пишет:<br>Я, правда, не знаю, почему вы не хотите, чтоб Свин узнал инфу про старфорс.  </I><br>пусть узнает)) ему никто не мешает, ихняя команда реверсеров заявила что за два месяца они сломают старфос. приэтом если посчитать сколько они с ним уже маются, прошло уже почти пол года а воз и ныне там (с)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=316271&amp;user=15381&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=2" class="addthx" data-post="316271"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2012 12:21 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#3');return false;">#3</a> </span><div align=left><br>
<b>reversecode</b><br>сисер варю не детектит, там без vmware tools какая-то проблема с выводом в видеобуфер. Варю детектит старфорс.<br><br><i class=x> ихняя команда реверсеров заявила что за два месяца они сломают старфос</i><br>Это да, за это я люблю тот блог. <img src="img/smilies/s5.gif" alt="">
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316273&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=3" class="addthx" data-post="316273"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]reversecode[/b]','')">reversecode</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/15381.gif" alt=""><br><span class=txtSm>Ранг: 1053.6 <b><u>(!!!!)</u></b>, 1078thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.43'>Активность: 1.06<span style='color:red'>&searr;</span>0.81</span><br>Статус: <a href="action=userinfo&amp;user=15381">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2012 12:31 <br><script type="text/javascript">QU('reversecode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=reversecode" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#4');return false;">#4</a> </span><div align=left><br>
следи за мыслью,<br>в сисере есть проверки реальная или виртуальная машина,<br>если вирутальная то какая, и по этим детектам потом сисер правильно настраивает вывод через видеобуфер,<br>когда ты в вмваре отключаешь детект версии,<br>то в сисере нужно пропатчить проверку системы, что бы сисер считал что он уже задетектил вмварю,<br>и выводить видеобуфер как он выводит при детекте вмвари
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=316274&amp;user=15381&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=4" class="addthx" data-post="316274"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 декабря 2012 13:01 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#5');return false;">#5</a> </span><div align=left><br>
<b>reversecode</b><br>А, вот теперь понял, да, видел в сисере строку Host machine is vmware! Или как-то так. Нужно будет поискать в иде, может, где найдётся, и посмотреть, что там да как.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316277&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=5" class="addthx" data-post="316277"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 29 декабря 2012 11:32 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#6');return false;">#6</a> </span><div align=left><br>
Продолжаю дальнейшее повествование по вытаскиванию рук из задницы и попытке реверсинга старфорса. В общем, не считаю нескольких нелепых попыток заставить сисер работать на варе, про которые даже и рассказать нечего, решил я пока оставить сисер и взять IDA Pro. Как отладчик я его раньше почти не использовал (ну так, пару раз на поиграться). Прочитал статью вот <noindex><a href="http://cyberview.files.wordpress.com/2010/09/gdb_vmware_winkernel.pdf" rel="nofollow" target="_blank">--&gt; Эту &lt;--</a></noindex>, ну, всё, вроде понятно. Начал повторять. И тут началось самое интересное. Вначале стояла у меня на компе варя версии 6.5. На ней после пары попыток поставить бряк варя вылетала с ошибкой, причём так, что на основной машине отключались клава и мышь, и приходилось давить reset. Попробовал на варе 8. Там коннект удаётся сделать через три раза на четвёртый. Поставил 9 версию. На ней, вроде, коннектится. Ладно, но если сконнектились, то ставлю бряк на дровину старфорса - и бряк не срабатывает. Решил провести тестовую установку бряка. Запустил на виртуалной системе RkU, через него определил адрес NtClose, поставил в иде бряк на этот адрес, надавил F9 - бряки стали срабатывать. Поставил бряк таким же методом на NtDeviceIoControlFile. Срабатывает. Решил поставить бряк с условием типа Dword(ebp-0x21) == 0x910024C0. Как вы догадались, 0x910024C0 - это IoControlCode, который упакованное приложение шлёт драйверу. И ничего. Что за нах?!
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316475&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=6" class="addthx" data-post="316475"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 декабря 2012 23:46 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#7');return false;">#7</a> </span><div align=left><br>
Так что-то отладка на вм не ладится. Поэтому принял я мудрое решение - забить на это дело. Пойду вон, делом займусь, а то всё старфорс, старфорс... Пусть Свин долбается.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316566&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=7" class="addthx" data-post="316566"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 января 2013 12:37 &middot; Поправил: ARCHANGEL <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#8');return false;">#8</a> </span><div align=left><br>
Странно, попытался сейчас установить Debugging tools for windows - падает с какой-то ошибкой типа 7100.0.0 не является допустимым для короткого имени или как-то так. Уже установленный WinDbg перестал запускаться, новый инсталлер с офф.сайта тоже с ошибкой падает. У кого-то, случайно, не завалялся работающий инсталлер, или ссылка на него? Нужен такой, после которого не только виндбг запустится, но и установятся все переменные окружения, т.е. <noindex><a href="http://rxwen.blogspot.com/2010/04/standalone-windbg-v6120002633.html" rel="nofollow" target="_blank">--&gt; Это &lt;--</a></noindex> не подойдёт.<br><br><b>Да, я тоже гуглил</b><br>[img]http://saveimg.ru/show-image.php?id=c41c68fe9a8fb305e5a8e41413e6185a[/img]<br><br><b>reversecode</b><br>То же самое, всё, как на картинке выше, не работает.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316645&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=8" class="addthx" data-post="316645"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]reversecode[/b]','')">reversecode</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/15381.gif" alt=""><br><span class=txtSm>Ранг: 1053.6 <b><u>(!!!!)</u></b>, 1078thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.43'>Активность: 1.06<span style='color:red'>&searr;</span>0.81</span><br>Статус: <a href="action=userinfo&amp;user=15381">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 января 2013 16:26 <br><script type="text/javascript">QU('reversecode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=reversecode" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#9');return false;">#9</a> </span><div align=left><br>
ну по ссылкам в гугле их полно<br>http://msdl.microsoft.com/download/symbols/debuggers/dbg_x86_6.11.1.404.msi<br>старенький
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=316655&amp;user=15381&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=9" class="addthx" data-post="316655"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 января 2013 16:57 &middot; Поправил: ARCHANGEL <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#10');return false;">#10</a> </span><div align=left><br>
Вот появилась возможность разобраться с дизассемблерным движком Олли, скачать который можно с официального сайта по <noindex><a href="http://www.ollydbg.de/disasm.zip" rel="nofollow" target="_blank">--&gt; ЭТОЙ &lt;--</a></noindex> ссылке. Скачать-то можно, а вот как собрать в студии? Сейчас я попробую ответить на этот вопрос. Для примера буду использовать студию 2010. Итак, я предполагаю, что сейчас вы это добро скачали, разархивировали, и пытаетесь собрать. Действовать будем в два этапа. <b>Этап первый</b> - сборка статической (*.lib) библиотеки. <b>Этап второй</b> - сборка тестового приложения. <br><br><b>Сборка статической библиотеки.</b><br>1. Создаём в студии пустой проект. Это у нас <b>Файл -&gt; Создать -&gt; Проект</b>. В установленных шаблонах разворачиваем узел для Visual C++, в списке справа выбираем <b>Консольное приложение Win32</b>. Даём проекту имя, например, LibOlly. Создаём папку для решения (ну, мне нравится, когда для отдельного решения отдельная папка). Жмём Ок.<br>2. Потом один раз жмём <b>Далее</b>, а там больше и жать-то нечего. Потом нас спросят, какой тип приложения нас интересует. Мы хотим создать <b>Статическую библиотеку</b>, этот вариант и отмечаем. Снимаем галку с предварительно скомпилированного заголовка и жмём <b>готово</b>.<br>3. Теперь возвращаемся к файлам нашего архива. Нас пока интересуют 4 файла, которые нужно скопировать в папку проекта. Подчеркну, что именно проекта, а не всего решения. Это файлы:<br><b>disasm.h</b><br><b>asmserv.c</b><br><b>assembl.c</b><br><b>disasm.c</b><br>4. Теперь файлы с расширением .с переименовываем в файлы с расширением .срр. Это нам понадобится для того, чтоб студия компилила содержимое этих файлов с декорированием имён в стиле с++.<br>5. Давим alt+Shift+A (добавить существующий файл к проекту) и добавляем наши файлы в заголовочные файлы (<b>disasm.h</b>), а остальные три - в файлы исходного кода.<br>6. В самом проекте сборку переключаем с <b>Debug</b> на <b>Release</b>. Далее идём в свойства проекта - Alt+F7, последовательно разворачиваем узлы <b>Свойства конфигурации -&gt; С/С++ -&gt; Создание кода</b>, меняем опцию <b>Библиотека времени выполнения</b> на <b>Многопоточная /MT</b>. Т.к. нам не нужна привязка к рантайму С++, и не нужна отладочная версия, то это - самый нормальный вариант. Учтите, что ели вы планируете использовать эту библиотеку в проектах, настройки которых будут отличаться от текущих настроек проекта нашей библиотеки, то её придётся пересобрать с другими настройками, т.е., возможно, вам понадобится несколько таких .lib файлов.<br>7. Теперь в трёх наших (уже) .cpp файлах имеется непонятный инклуд: <b>#include &lt;dir.h&gt;</b>. Его надо просто закомментировать, т.к. такого файла у нас нет. Или удалить вовсе эту строчку. Давайте сделаем одно из двух на ваше усмотрение.<br>8. Далее есть интересная директива препроцессора:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">#if&nbsp;<span class="hl_char">(</span><span class="hl_function">char</span><span class="hl_char">)</span>0xFF<span class="hl_char">!</span><span class="hl_char">=</span><span class="hl_number">255</span></li><li class="hl_l1">#error&nbsp;Please&nbsp;set&nbsp;default&nbsp;<span class="hl_function"><b>char</b></span>&nbsp;type&nbsp;to&nbsp;unsigned</li><li class="hl_l0">#endif</li>        </ol>
    </div>
</div></div>
<br>Она располагается в <b>disasm.h</b>. Её тоже нужно удалить или закомментить.<br>9. Последний штрих нужно провести для работоспособности вот этой строки:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">floating<span class="hl_char">*</span><span class="hl_char">=</span>pow10l<span class="hl_char">(</span>decimal<span class="hl_char">*</span>base<span class="hl_char">)</span><span class="hl_comment">; };</span></li>        </ol>
    </div>
</div></div>
<br>С помощью гугла можем найти, что <noindex><a href="http://www.c-cpp.ru/content/pow10-pow10l" rel="nofollow" target="_blank">--&gt; Функция pow10l &lt;--</a></noindex> из себя представляет. Как видите, реализовать её совсем не трудно. Возьмём и реализуем. <br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">long&nbsp;<span class="hl_function"><b>double</b></span>&nbsp;pow10l&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;n<span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;pow<span class="hl_char">(</span><span class="hl_number">10</span><span class="hl_char">.</span><span class="hl_number">0</span><span class="hl_char">,</span>n<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<br>Естественно, реализацию нужно добавить либо перед вызовом, либо предварительно объявить.<br>9. И вот, с кучей варнингов, но мы получили заветный .lib.<br><br><b>Сборка тестового приложения</b><br>У нас с вами сейчас уже есть готовый .lib файл. Самое время прикрутить его к какому-нибудь приложению и поюзать. Создаем тестовый консольный проект, в котором мы попытаемся сделать рабочим пример кода из <b>main.c</b>. Этот файл, если вы не заметили, также идёт в скачанном нами с официального сайта архиве. Что ж, прекрсано. <br>1. Создаём пустой проект консольного приложения, потом (по способу, описанному выше) добавляем файл <b>disasm.h</b>. И создаём файл с исходным кодом, пока этот файл пустой, как вы понимаете.<br>2. Открываем наш <b>main.c</b>, например, в блокноте, давим Ctrl+A (выделить всё <img src="img/smilies/s1.gif" alt=""> ), потом копируем выделенное и вставляем в пустой файл, который я, для примера, назвал <b>Code.cpp</b>. Причина такого переливания из пустого в порожнее указывалась выше.<br>3. Далее вспомним про наш <b>LibOlly.lib</b>, вспомнив, скопируем его в папку тестового проекта. Кстати, я не упоминаю, полагая, что это само собой разумеется, но файл <b>disasm.h</b> тоже нужно скопировать в папку проекта, а не указывать студии файл, лежащий в папке другого проекта. Этим мы добиваемся переносимости проектов, т.е. мы сможем легко скопировать всю папку даже на другой компьютер, и там это добро тоже будет собираться.<br>4. В самом начале файла <b>Code.cpp</b> я добавил включаемые файлы, точь в точь такие же, как и у .с файлов, которые пошли для сборки .lib файла. Это выглядит примерно так:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">#include&nbsp;<span class="hl_quote">&quot;disasm.h&quot;</span></li><li class="hl_l1">#include&nbsp;<span class="hl_char">&lt;</span>windows<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l0">#include&nbsp;<span class="hl_char">&lt;</span>stdio<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l1">#include&nbsp;<span class="hl_char">&lt;</span>string<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l0">#include&nbsp;<span class="hl_char">&lt;</span>ctype<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l1">#include&nbsp;<span class="hl_char">&lt;</span>math<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l0">#include&nbsp;<span class="hl_char">&lt;</span><span class="hl_function">float</span><span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">#pragma&nbsp;<span class="hl_function"><b>comment</b></span>&nbsp;<span class="hl_char">(</span>lib<span class="hl_char">,</span><span class="hl_quote">&quot;LibOlly.lib&quot;</span><span class="hl_char">)</span></li>        </ol>
    </div>
</div></div>
<br>Здесь я так приинклудил сам <b>disasm.h</b>, и добавил библиотеку в проект строкой <b>#pragma comment (lib,&quot;LibOlly.lib&quot;)</b>. Возможно, на этом моменте следует остановиться отдельно, а, может, и нет, но помните, что если вы просто скопировали файл в папку проекта, это ещё не значит, что он добавился в проект или решение, его ещё нужно будет явно указать обозревателю решений.<br>5. Настройки проекта тоже нужно подправить, чтоб они были одинаковыми с настройками проекта библиотеки. Помните, всякие там Многопоточная /MT и т.д. <br>6. И последний штрих. Идём в конец <b>disasm.h</b> и видим там такие строки:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ideal<span class="hl_comment">;                // Force IDEAL decoding mode</span></li><li class="hl_l1">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lowercase<span class="hl_comment">;            // Force lowercase display</span></li><li class="hl_l0">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabarguments<span class="hl_comment">;         // Tab between mnemonic and arguments</span></li><li class="hl_l1">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extraspace<span class="hl_comment">;           // Extra space between arguments</span></li><li class="hl_l0">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;putdefseg<span class="hl_comment">;            // Display default segments in listing</span></li><li class="hl_l1">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showmemsize<span class="hl_comment">;          // Always show memory size</span></li><li class="hl_l0">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shownear<span class="hl_comment">;             // Show NEAR modifiers</span></li><li class="hl_l1">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shortstringcmds<span class="hl_comment">;      // Use short form of string commands</span></li><li class="hl_l0">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sizesens<span class="hl_comment">;             // How to decode size-sensitive mnemonics</span></li><li class="hl_l1">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symbolic<span class="hl_comment">;             // Show symbolic addresses in disasm</span></li><li class="hl_l0">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;farcalls<span class="hl_comment">;             // Accept far calls, returns &amp; addresses</span></li><li class="hl_l1">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decodevxd<span class="hl_comment">;            // Decode VxD calls (Win95/98)</span></li><li class="hl_l0">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;privileged<span class="hl_comment">;           // Accept privileged commands</span></li><li class="hl_l1">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iocommand<span class="hl_comment">;            // Accept I/O commands</span></li><li class="hl_l0">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;badshift<span class="hl_comment">;             // Accept shift out of range 1..31</span></li><li class="hl_l1">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extraprefix<span class="hl_comment">;          // Accept superfluous prefixes</span></li><li class="hl_l0">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lockedbus<span class="hl_comment">;            // Accept LOCK prefixes</span></li><li class="hl_l1">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stackalign<span class="hl_comment">;           // Accept unaligned stack operations</span></li><li class="hl_l0">unique&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iswindowsnt<span class="hl_comment">;          // When checking for dangers, assume NT</span></li>        </ol>
    </div>
</div></div>
<br>Удаляем перед ними ключевое слово <b>unique</b>, он же задефайненый extern. Т.е. в каждой строке должно получиться что-то типа <b>int  ideal;  </b>. <br><br>Ну вот и всё, наслаждаемся рабочим сэмплом.<br><br>Результат всего этого действа можно взять <noindex><a href="http://narod.ru/disk/65055256001.6aab1ca53da76efd66c9c4c5bcd7cec4/OllyDisAsm.rar.html" rel="nofollow" target="_blank">--&gt; Здесь &lt;--</a></noindex><br><br>Ах да, для совместимости со стандартной библиотекой шаблонов закомментируйте этот кусок:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">/</span>#ifndef&nbsp;MAINPROG</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>#define&nbsp;unique&nbsp;extern</li><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">/</span>#else</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>#define&nbsp;unique</li><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">/</span>#endif</li>        </ol>
    </div>
</div></div><br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316659&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=10" class="addthx" data-post="316659"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2013 21:09 &middot; Поправил: ARCHANGEL <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#11');return false;">#11</a> </span><div align=left><br>
Браузил инет и увидел он-лайн тетрис. Поигрался немного. Увидел, что сбоку предлагают &quot;скачать полную версию&quot;. Ну так, ёлы-палы, чё ж не скачать-то? Ну скачал инсталлер. Установил, а она мне... ну, вы сами понимаете что. Что любопытно, так это то, что инсталлятор принадлежал <noindex><a href="http://absolutist.ru/" rel="nofollow" target="_blank">--&gt; ЭТИМ &lt;--</a></noindex> товарищам. Полазил по сайту, почитал инфу о ребятах <noindex><a href="http://absolutist.ru/about/" rel="nofollow" target="_blank">--&gt; здесь &lt;--</a></noindex>. Так это ж целый клон алавара на территории Файны Украйны разместился. Вот, вроде, и трудятся люди, и программисты что-то пишут, и дизайнеры рисуют, а у меня стойкое чувство, что меня хотят обмануть. Ну не могу я заплатить за тетрис, алго которого разве что на заборе не написан. В который я ещё в первом классе играл на <noindex><a href="http://img0.liveinternet.ru./images/attach/c/0/34/914/34914669_tetris.jpg" rel="nofollow" target="_blank">--&gt; Такой игрухе &lt;--</a></noindex>.<br><br>Ладно, взяли в руки RDG Packer detector, он паказал, что это - арма. Причём 8.6 версии. Я вообще-то не спец по арме, ну, когда-то в далёком 2007 смотрел пару видеотуторов по распаковке от <b>ZooMiK&#039;a</b>. Знаете, что любопытно, так это то, что почти ничего не поменялось. Взял <b>Armadillo Find Protected v 2.0</b>, закинул туда бинарь. Из опции есть Debug-Blocker. Посмотрел ещё одно видео <noindex><a href="http://tpodt.net16.net/tutorials/unpacking3.htm" rel="nofollow" target="_blank">--&gt; by mr.exodia &lt;--</a></noindex>, ну, почти то, что нужно, только мне ещё детачь надо было выполнить. Это, к счастью, просто - галку поставил в Find Protected и всё. Закинул ещё раз туда ехе-файл, приаттачил отладчик к указанному процессу, перешёл на указанный адрес, заменил там два байта. Потом всё, как на видео - запатчил функу, генерирующую переходники, нашёл ОЕР, снял дамп (только дампил через Pe Tools), прикрутил импорт. mr.exodia в своём видео получил пример, в котором нет разделителей импорта из-за двойного слоя упаковки, мне ж в ImpRec пришлось ещё надавить <b>Show Invalid -&gt; Cut Thunks</b>. Всё, добавил импорт и запатчил полученный дамп через <b>Armadillo Reducer 1.7.1 RC2</b>. Работает. Архив с тулзами по арме, инсталлятором и анпакнутым файлом выкладываю <noindex><a href="http://narod.ru/disk/65220725001.844c5c7b8e6c78cf850817896e3da810/Tetris.rar.html" rel="nofollow" target="_blank">--&gt; Сюда &lt;--</a></noindex>. Если кому интересно - качайте, пользуйтесь. Никаких секретных тулз в архиве нет - только упомянутые выше, это просто для того, чтоб вы не искали их сами в гугле, если у вас их до сих пор нет.<br><br>А ребятам из абсолютиста могу пожелать творческих успехов. Какой-то личной неприязни у меня к ним нет.  Но не надо уж так явно показывать, как они заколачивают бабло на старшем поколении пользователей. Ведь согласитесь, никто из современной молодёжи покапуть эти игрухи не станет - все будут искать кряк. Купить их могут лишь люди старшего возраста, наши с вами родители, дяди, тёти, бабушки, дедушки и т.д. А ведь зарабатывать на этих людях даже как-то неприлично.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316930&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=11" class="addthx" data-post="316930"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]matrix[/b]','')">matrix</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 13.0 (новичок), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.37'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=24474">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 11:50 <br><script type="text/javascript">QU('matrix','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=matrix" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#12');return false;">#12</a> </span><div align=left><br>
<b>ARCHANGEL</b><br>а загенить слабо?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=316947&amp;user=24474&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=12" class="addthx" data-post="316947"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 14:30 &middot; Поправил: ARCHANGEL <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#13');return false;">#13</a> </span><div align=left><br>
<b>matrix</b><br>Хм, не знаю, не пробовал. Но возникает вполне логичный вопрос - зачем? Это ж тогда придётся арму за собой таскать на ехе-файле.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316959&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=13" class="addthx" data-post="316959"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]matrix[/b]','')">matrix</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 13.0 (новичок), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.37'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=24474">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 19:10 <br><script type="text/javascript">QU('matrix','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=matrix" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#14');return false;">#14</a> </span><div align=left><br>
вроде бы ранг мудрец странно слышать от вас такой вопрос - зачем<img src="img/smilies/s15.gif" alt=""><br>ну во первых это красиво<br>во вторых это скилл<br>в третьих <I>ARCHANGEL пишет:<br> Это ж тогда придётся арму за собой таскать на ехе-файле.  </I><br>ваш файл весит больше, вы забыли упаковать упиксом, <br>это сути не меняет первые два пункта как мне кажется перекрывают все остальное<br>я бы и сам пробрутил только нету куды
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=316980&amp;user=24474&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=14" class="addthx" data-post="316980"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 23:57 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#15');return false;">#15</a> </span><div align=left><br>
<b>matrix</b><br>Не охота возиться мне, хотя инфа по кейгеннингу есть в топике про арму. Ленивый я стал.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316998&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=15" class="addthx" data-post="316998"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]matrix[/b]','')">matrix</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 13.0 (новичок), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.37'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=24474">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 января 2013 20:14 <br><script type="text/javascript">QU('matrix','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=matrix" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#16');return false;">#16</a> </span><div align=left><br>
Ну дак празднеки же<img src="img/smilies/s6.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=317122&amp;user=24474&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=16" class="addthx" data-post="317122"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 22 января 2013 21:42 &middot; Поправил: ARCHANGEL <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#17');return false;">#17</a> </span><div align=left><br>
Возник у меня в связи с продолжением моего горемычного обучения вопрос по исключениям в стиле С++. То есть про конструкцию типа try{}catch{}. Как мне известно, исключения в стиле с (__try{}__except(){}) могут перехватывать любые исключения, плюс из обработчика через макросы мне доступна инфа о возникшем исключении (EXCEPTION_RECORD). Здесь же, как я понял, я могу перехватить исключение только известного мне типа и сгенерированное моей прогой (ехе или библиотекой). Если внутри try-блока я тупо поделю на нуль или обращусь к нулевому указателю, то иксепшен такой отлавливаться не будет. Даже через catch(...). Блин, ну это ж фигня. А если у меня есть левый бинарь (dll), из которой я вызываю экспортируемую функцию, и эта функа иногда может делать что-то, что приводит к исключению, то средствами с++ это никак не обработать? Гуглил на эту тему - ничего так и не сгуглилось. Куча инфы про иксепшены, классы иксепшенов, полиморфизм в иксепшенах и т.д., но ведь, имхо, это самый основной функционал обработчика исключений, и его нет. Может, кто знает способ, как всё-таки заставить это работать?
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=317693&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=17" class="addthx" data-post="317693"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]Archer[/b]','')">Archer</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/1556.jpg" alt=""><br><span class=txtSm>Ранг: 2014.5 <b><u>(!!!!)</u></b>, 1278thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.27'>Активность: 1.34<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1556">Модератор</a><br><font color=blue>retired</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 22 января 2013 22:23 <br><script type="text/javascript">QU('Archer','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Archer" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#18');return false;">#18</a> </span><div align=left><br>
А что тебе, собственно, мешает сишные исключения воткнуть?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=317699&amp;user=1556&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=18" class="addthx" data-post="317699"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]hors[/b]','')">hors</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/31056.jpg" alt=""><br><span class=txtSm>Ранг: 136.0 (ветеран), 360thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.53'>Активность: 0.27<span style='color:red'>&searr;</span>0.14</span><br>Статус: <a href="action=userinfo&amp;user=31056">Участник</a><br><font color=blue>Qt Developer</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 22 января 2013 23:03 <br><script type="text/javascript">QU('hors','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=hors" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#19');return false;">#19</a> </span><div align=left><br>
<I>ARCHANGEL пишет:<br>Как мне известно, исключения в стиле с (__try{}__except(){}) могут перехватывать любые исключения </I><br><br>Нет, не все. Точнее все, но в пользовательском режиме. В режиме ядра(драйверах)  некоторые исключения таким образом не обработать.<br><br><br><I>ARCHANGEL пишет:<br>Здесь же, как я понял, я могу перехватить исключение только известного мне типа и сгенерированное моей прогой (ехе или библиотекой). Если внутри try-блока я тупо поделю на нуль или обращусь к нулевому указателю, то иксепшен такой отлавливаться не будет. Даже через catch(...). Блин, ну это ж фигня. </I><br><br>С++ от Microsoft? Тогда нужно использовать опцию /EHa компилятора. Тогда catch(...) будет ловить и деление на нуль.
<br><br><font size="1"><i>-----<br>http://ntinfo.biz</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=317712&amp;user=31056&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=19" class="addthx" data-post="317712"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=6336" title="22-01-2013 20:21, ранг:474.1" target="_blank">ARCHANGEL</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 22 января 2013 23:57 &middot; Поправил: ARCHANGEL <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#20');return false;">#20</a> </span><div align=left><br>
<b>Archer</b><br>Да, собственно, в большинстве случаев ничего. Но в некоторых случаях этого сделать нельзя. Предположим, я создаю объект, далее в сишном блоке __try вызываю какие-то его методы, или просто код, даже не относящийся к обекту, а в блоке ___except(EXCEPTION_EXECUTE_HANDLER){... return 0;} делаю, то из-за невозможности вызвать деструкутор компилятор такой файл собирать откажется. Также такое может происходить из-за невозможности вызова деструкторов для объектов, которые мой объект агрегирует. Я уж не помню всех деталей, но, если мне память всё-таки не изменяет, то и просто ___except нельзя в таких случаях использовать, независимо от того, return там внутри или просто любой код. <br><br><b>hors пишет:</b><br><i class=x>В режиме ядра(драйверах) некоторые исключения таким образом не обработать</i><br><br>Ну, давайте говорить на чистоту - там их никаким SEH-фреймом не обработать. И это уже не проблема компилятора от Microsoft или ограничения языка - это ограничение операционной системы и механизма SEH как такового. Тут же другая ситуация - CxxThrowException является заглушкой над RaiseException, которая, вызываясь, генерирует вполне себе обрабатываемое исключение, из ядра это приводит нас на KiUserExceptionDispatcher, откуда модификация контекста кидает нас на код с++ обработчика, который ищет наш обработчик и вызывает его (блок catch). Внутри этого блока вполне может быть доступна и EXCEPTION_RECORD, и CONTEXT, но они почему-то недоступны, т.к. вызов макросов типа <noindex><a href="http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms679357(v=vs.85).aspx" rel="nofollow" target="_blank">--&gt; GetExceptionInformation &lt;--</a></noindex> возможен, как говориться в первоисточнике:<br><br><i class=x>This function can be called only from within the filter expression of an exception handler.</i><br><br>И из catch его не вызвать. <br><br><i class=x>Тогда нужно использовать опцию /EHa компилятора.</i><br>Попробую, отпишусь о результатах.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=317715&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=20" class="addthx" data-post="317715"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 января 2013 00:20 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#21');return false;">#21</a> </span><div align=left><br>
Ну, вроде как появилась ясность. До этого гуглили-гуглил, и ничего путного. Сейчас же с ключевым словом <b>/EHa</b> от <b>hors</b> дело пошло бодро и хорошо. Во-первых, узнал, что включить эту опцию можно так:<br><br><i class=x>Configuration Properties -&gt;C/C++ -&gt;Code Generation -&gt;Enable C++ Exceptions for the file</i><br><br>И catch(...) будет ещё и обычные исключения обрабатывать. С получением инфы об исключении всё хитрее. Но <noindex><a href="http://msdn.microsoft.com/en-us/library/5z4bw5h5(v=vs.80).aspx" rel="nofollow" target="_blank">--&gt; Здесь &lt;--</a></noindex> есть пример, как надо получать инфу о нём в обработчиках catch. В принципе, продублирую ключевой кусок:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>int</b></span>&nbsp;main<span class="hl_char">(</span>&nbsp;<span class="hl_function"><b>void</b></span>&nbsp;<span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">try</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_set_se_translator<span class="hl_char">(</span>&nbsp;trans_func&nbsp;<span class="hl_char">)</span><span class="hl_comment">; // 1. установили SEH-обработчик</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SEFunc<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">catch</span><span class="hl_char">(</span>&nbsp;SE_Exception&nbsp;e&nbsp;<span class="hl_char">)</span>&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;<span class="hl_number">4</span><span class="hl_char">.</span>&nbsp;Обрабатываем&nbsp;с<span class="hl_char">+</span><span class="hl_char">+</span>&nbsp;исключение</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf<span class="hl_char">(</span>&nbsp;<span class="hl_quote">&quot;Caught a __try exception with SE_Exception.\n&quot;</span>&nbsp;<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">}</li><li class="hl_l0"><span class="hl_function"><b>void</b></span>&nbsp;SEFunc<span class="hl_char">(</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;__try</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;x<span class="hl_char">,</span>&nbsp;y<span class="hl_char">=</span><span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">5</span>&nbsp;<span class="hl_char">/</span>&nbsp;y<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;__finally</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf<span class="hl_char">(</span>&nbsp;<span class="hl_quote">&quot;In finally\n&quot;</span>&nbsp;<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">}</li><li class="hl_l0"><span class="hl_function"><b>void</b></span>&nbsp;trans_func<span class="hl_char">(</span>&nbsp;unsigned&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;u<span class="hl_char">,</span>&nbsp;EXCEPTION_POINTERS<span class="hl_char">*</span>&nbsp;pExp&nbsp;<span class="hl_char">)</span>&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span><span class="hl_number">2</span><span class="hl_char">.</span>&nbsp;Попали&nbsp;в&nbsp;обработчик&nbsp;при&nbsp;генерации&nbsp;исключения</li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;printf<span class="hl_char">(</span>&nbsp;<span class="hl_quote">&quot;In trans_func.\n&quot;</span>&nbsp;<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;SE_Exception<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">; //3. Генерим иксепшен в стиле с++</span></li><li class="hl_l0">}</li>        </ol>
    </div>
</div></div><br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=317717&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=21" class="addthx" data-post="317717"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]F_a_u_s_t[/b]','')">F_a_u_s_t</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 16.12'>Активность: 0.25<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 января 2013 16:02 <br><script type="text/javascript">QU('F_a_u_s_t','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=F_a_u_s_t" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#22');return false;">#22</a> </span><div align=left><br>
<b>ARCHANGEL</b><br><i class=x>__try, __finally</i><br>За это надо бить, потому что учите не плюсы, а cl.exe.<br>C++11 - 15 Exception handling все что касается плюсовых исключений.<br><noindex><a href="http://ru.cppreference.com/w/cpp/error" rel="nofollow" target="_blank">error</a></noindex>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=317750&amp;user=6&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=22" class="addthx" data-post="317750"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 января 2013 16:31 &middot; Поправил: ARCHANGEL <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#23');return false;">#23</a> </span><div align=left><br>
<b>F_a_u_s_t</b><br>Интересно. Я ж так понимаю, что 11 версия стандарта поддерживается 2012 студией?
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=317756&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=23" class="addthx" data-post="317756"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]F_a_u_s_t[/b]','')">F_a_u_s_t</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 16.12'>Активность: 0.25<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 января 2013 16:39 <br><script type="text/javascript">QU('F_a_u_s_t','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=F_a_u_s_t" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#24');return false;">#24</a> </span><div align=left><br>
<b>ARCHANGEL</b><br>Полностью не один компилятор не поддерживает, наиболее близок к стандарту GCC и Clang, черточки __try означают &quot;специфика&quot; ( компилятора-платформы ), ключ &quot;педантичность&quot; в GCC скажет что код прибит гвоздями к платформе.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=317758&amp;user=6&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=24" class="addthx" data-post="317758"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=6336" title="23-01-2013 13:24, ранг:474.3" target="_blank">ARCHANGEL</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 февраля 2013 12:50 &middot; Поправил: ARCHANGEL <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#25');return false;">#25</a> </span><div align=left><br>
Вот читал тему про игру и <noindex><a href="https://ssl.exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20640" rel="nofollow" target="_blank">--&gt; широкоформатные мониторы &lt;--</a></noindex>. Сложилось такое впечатление:<br><br><img src="http://saveimg.ru/pictures/02-02-13/732410f7ae8f38659517d5e746124273.jpg" border="0" align="" alt=""><br><br>Только не надо обижаться, но мне кажется, что, всё-таки, есть дела и поважнее игр и мониторов.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=318250&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=25" class="addthx" data-post="318250"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]F_a_u_s_t[/b]','')">F_a_u_s_t</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 0.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 16.12'>Активность: 0.25<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 февраля 2013 13:37 <br><script type="text/javascript">QU('F_a_u_s_t','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=F_a_u_s_t" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#26');return false;">#26</a> </span><div align=left><br>
<I>ARCHANGEL пишет:<br>есть дела и поважнее игр и мониторов.  </I><br>С играми согласен, пусть свиновод играется, а вот выбор монитор это серьезно, что бы удобно было.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=318251&amp;user=6&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=26" class="addthx" data-post="318251"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 февраля 2013 23:28 &middot; Поправил: ARCHANGEL <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#27');return false;">#27</a> </span><div align=left><br>
Опять очередная задачка. Хрен его знает, по каким ключевым словам такое можно сгуглить, поэтому излагаю, как могу, а если кто знает, где искать и как это грамотно называется - пишите. В общем, есть задача пройтись из третьего кольца по _PEB_LDR_DATA другого процесса. Хэндлы с нужными правами доступа для процесса и его первичного потока имеются. Если мне нужно сделать это в адресном пространстве текущего (своего) процесса, то для этого я запилил следующий код:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">try{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NtInfo&nbsp;<span class="hl_char">=</span>&nbsp;FindAddressOfInfo<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DWORD</b></span>&nbsp;status&nbsp;<span class="hl_char">=</span>&nbsp;NtInfo<span class="hl_char">(</span>ThreadHandle<span class="hl_char">,</span>ThreadBasicInformation<span class="hl_char">,</span><span class="hl_char">&amp;</span>Info<span class="hl_char">,</span><span class="hl_function">sizeof</span><span class="hl_char">(</span>Info<span class="hl_char">)</span><span class="hl_char">,</span><span class="hl_char">&amp;</span>stub<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>status&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;STATUS_SUCCESS<span class="hl_char">)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_PEB_LDR_DATA<span class="hl_char">*</span>&nbsp;LDR&nbsp;<span class="hl_char">=</span>&nbsp;Info<span class="hl_char">.</span>TebBaseAddress&nbsp;<span class="hl_char">-</span><span class="hl_char">&gt;</span>ProcessEnvironmentBlock&nbsp;<span class="hl_char">-</span><span class="hl_char">&gt;</span>Ldr<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_LIST_ENTRY&nbsp;Lst&nbsp;<span class="hl_char">=</span>&nbsp;LDR&nbsp;<span class="hl_char">-</span><span class="hl_char">&gt;</span>InLoadOrderModuleList<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_LDR_DATA_TABLE_ENTRY<span class="hl_char">*</span>&nbsp;First&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>_LDR_DATA_TABLE_ENTRY<span class="hl_char">*</span><span class="hl_char">)</span>&nbsp;Lst<span class="hl_char">.</span>Flink<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last&nbsp;<span class="hl_char">=</span>&nbsp;First<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do{</li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wchar_t</span><span class="hl_char">*</span>&nbsp;temp&nbsp;<span class="hl_char">=</span>&nbsp;Last&nbsp;<span class="hl_char">-</span><span class="hl_char">&gt;</span>FullDllName<span class="hl_char">.</span>Buffer<span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">!</span>temp<span class="hl_char">)</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function"><b>break</b></span><span class="hl_comment">;</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_function">std</span><span class="hl_char">:</span><span class="hl_char">:</span>wcout&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&lt;</span>&nbsp;temp&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&lt;</span>&nbsp;<span class="hl_function">std</span><span class="hl_char">:</span><span class="hl_char">:</span>endl<span class="hl_comment">;</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last&nbsp;</span><span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>_LDR_DATA_TABLE_ENTRY<span class="hl_char">*</span><span class="hl_char">)</span>&nbsp;Last&nbsp;<span class="hl_char">-</span><span class="hl_char">&gt;</span>InLoadOrderLinks<span class="hl_char">.</span>Flink<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}while&nbsp;<span class="hl_char">(</span>First&nbsp;<span class="hl_char">!</span><span class="hl_char">=</span>&nbsp;Last&nbsp;<span class="hl_char">&amp;</span><span class="hl_char">&amp;</span>&nbsp;Last<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<br><br>Для другого процесса мне нужно сделать контейнер, умеющий работать с обощёнными алгоритмами STL. Т.е. реализовать поддержку двунаправленных итераторов (как в списке, т.к. изначально у нас есть LIST_ENTRY), перегрузить для них операции инкремента, декремента и т.д. Ну, короче, всё как по стандарту. Итератор, конечно же, должен указывать на структуру _LDR_DATA_TABLE_ENTRY. Логично, что его разыменование должно приводить к копированию полей этой структуры в адресное пространство моего процесса. Т.е., как вы понимаете, если я всё сделаю правильно, код выше не изменится. Но благодаря дополнительным полям класса сможет работать и с другими процессами тоже. <br><br>Для обеспечения такого функционала мне понадобятся своего рода умные указатели типа PVOID. Такие указатели должны уметь становиться типизированными, т.е. к ним я должен иметь возможность применять операцию преобразования типа с последующим разыменовыванием. Давайте поясню на примере. Допустим, я вызвал ZwQueryInformationThread и получил адрес TEB в памяти другого процесса. Но сразу вот так взять и использовать конструкцию такого вида: <b>Info.TebBaseAddress -&gt;ProcessEnvironmentBlock</b> я не могу, т.к. будет получен доступ к памяти моего процесса, а не того, другого. Мне нужно к значению адреса прибавить смещение, по которому находится адрес ProcessEnvironmentBlock в TEB&#039;e, потом через ReadProcessMemory считать значение, которое расположено по этому адресу, и сохранить его в моём процессе. И вот вопрос - как же создать такой указатель? Или какие алтернативные подходы тут можно использовать?
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=318759&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=27" class="addthx" data-post="318759"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]hors[/b]','')">hors</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/31056.jpg" alt=""><br><span class=txtSm>Ранг: 136.0 (ветеран), 360thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.53'>Активность: 0.27<span style='color:red'>&searr;</span>0.14</span><br>Статус: <a href="action=userinfo&amp;user=31056">Участник</a><br><font color=blue>Qt Developer</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 февраля 2013 04:47 &middot; Поправил: hors <br><script type="text/javascript">QU('hors','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=hors" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#28');return false;">#28</a> </span><div align=left><br>
<I>ARCHANGEL пишет:<br>Для другого процесса мне нужно сделать контейнер, умеющий работать с обощёнными алгоритмами STL. Т.е. реализовать поддержку двунаправленных итераторов (как в списке, т.к. изначально у нас есть LIST_ENTRY), перегрузить для них операции инкремента, декремента и т.д. Ну, короче, всё как по стандарту. Итератор, конечно же, должен указывать на структуру _LDR_DATA_TABLE_ENTRY. Логично, что его разыменование должно приводить к копированию полей этой структуры в адресное пространство моего процесса. Т.е., как вы понимаете, если я всё сделаю правильно, код выше не изменится. Но благодаря дополнительным полям класса сможет работать и с другими процессами тоже.  </I><br><br>А нужно ли все так усложнять? Может лучше просто последовательно читать целиком структуры из другого процесса, а потом  разбирать их поля без перегрузки операторов?<br><br>В своей программе <noindex><a href="http://wasm.ru/forum/viewtopic.php?id=45991" rel="nofollow" target="_blank">XNTSV</a></noindex> я кстати так и делаю.
<br><br><font size="1"><i>-----<br>http://ntinfo.biz</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=318788&amp;user=31056&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=28" class="addthx" data-post="318788"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 февраля 2013 14:32 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#29');return false;">#29</a> </span><div align=left><br>
<b>hors</b><br>Если я правильно понял, вы предлагает пройтись полностью по всей структуре TEB, потом по PEB, потом по всем _LDR_DATA_TABLE_ENTRY, потом покопировать содержимое всех указателей _LDR_DATA_TABLE_ENTRY (чтоб, например, тот же FullDllName.Buffer был не просто адресом, а имел правильное содержимое), т.е. сделать как бы, копию той структуры, что в другом процессе, но только в моём. А дальше её разбирать. Возможно, это - хорошая идея, если структура нужна вся целиком. Но мне нужны будут лишь отдельные её элементы, в общем случае, мне даже не требуется полностью её обходить (имеется ввиду весь список _LDR_DATA_TABLE_ENTRY). Поэтому такие действия будут избыточными.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=318809&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=29" class="addthx" data-post="318809"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="30" onfocus="this.blur()" href="JavaScript:di('[b]hors[/b]','')">hors</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/31056.jpg" alt=""><br><span class=txtSm>Ранг: 136.0 (ветеран), 360thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.53'>Активность: 0.27<span style='color:red'>&searr;</span>0.14</span><br>Статус: <a href="action=userinfo&amp;user=31056">Участник</a><br><font color=blue>Qt Developer</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 февраля 2013 16:50 <br><script type="text/javascript">QU('hors','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=hors" target="_blank">Личное сообщение</a> &middot;  <a href="#30" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#30');return false;">#30</a> </span><div align=left><br>
<I>ARCHANGEL пишет:<br>Но мне нужны будут лишь отдельные её элементы, в общем случае, мне даже не требуется полностью её обходить (имеется ввиду весь список _LDR_DATA_TABLE_ENTRY). </I><br><br>Если нужны только отдельные элементы(полагаю что только документированные), то почему бы тогда не воспользоваться официальными API, которые читаю информацию из _LDR_DATA_TABLE_ENTRY? Например та же функция CreateToolhelp32Snapshot.
<br><br><font size="1"><i>-----<br>http://ntinfo.biz</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=318828&amp;user=31056&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=30" class="addthx" data-post="318828"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="31" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 февраля 2013 17:02 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#31" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=12&amp;topic=20147&amp;page=4#31');return false;">#31</a> </span><div align=left><br>
<b>hors</b><br>Есть один ньюанс, та же CreateToolhelp32Snapshot не будет работать, если процесс создан в режиме Suspended, но список загруженных модулей есть и в таком процессе тоже.<br><br>Для чего вообще это делается. Есть одно приложение, в которое мне надо заинжектить библиотеку путём создания внутри такого приложение потока посредством CreateRemoteThread. А чтоб знать, с какого адреса этот поток должен стартануть, я должен знать, по какому адресу загружена kernel32.dll. На ХР эти адреса одинаковы для всех процессов, и я могу узнать этот адрес для своего процесса. Для другого он будет таким же. А вот дальше появляется ASLR, и тут всё несколько интереснее. А так я для такого процесса узнаю, где у него будет kernel32.dll, и скорректирую адресок для CreateRemoteThread. Вот как-то так.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=318833&amp;user=6336&amp;forum_n=12&amp;topic=20147&amp;page=4&amp;anchor=31" class="addthx" data-post="318833"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=3.html">&lt;&lt;</a> .  <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=0.html">1</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=2.html">3</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=3.html">4</a> . <b>5</b> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=5.html">6</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=6.html">7</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=7.html">8</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=8.html">9</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=9.html">10</a> . <a href="action=vthread&amp;forum=12&amp;topic=20147&amp;page=5.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/blog.png" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=12&sortBy=0&page=0.html"><b>Дневники и блоги</b></a> <b class=bulletHead>&#8212;&#8250;</b> ARCHANGEL&#039;s blog</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#32" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="12">
<input type="hidden" name="topic" value="20147">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=20147" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
