<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>самый быстрый memcpy - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Протестируйте на предмет самой быстрой реализации memcpy -бэнчмэк В нем содержится множество различных реализаций memcpy начиная от SSE заканчивая простым циклом. Заодно это отличный способ оценить скорость работы с памятью на">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=55995'>tyns777</a>, <a target='_blank' href='?action=userinfo&amp;user=31361'>zds</a>, <a target='_blank' href='?action=userinfo&amp;user=55802'>JustLife</a> (+4 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> самый быстрый memcpy</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=6&amp;topic=15816&amp;page=0.html">&lt;&lt;</a> .  <a href="action=vthread&amp;forum=6&amp;topic=15816&amp;page=0.html">1</a> . <b>2</b> .</b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]Vol4ok[/b]','')">Vol4ok</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 47.1 (посетитель), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.61'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=18950">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 февраля 2010 19:08 &middot; Поправил: Vol4ok <br><script type="text/javascript">QU('Vol4ok','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vol4ok" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#1');return false;">#1</a> </span><div align=left><br>
Протестируйте на предмет самой быстрой реализации memcpy -<noindex><a href="http://dl.dropbox.com/u/159112/Dropbox/memcpy_test/mem_test.exe" rel="nofollow" target="_blank">бэнчмэк</a></noindex><br><br>В нем содержится множество различных реализаций memcpy начиная от SSE заканчивая простым циклом. Заодно это отличный способ оценить скорость работы с памятью на компе.<br><br>Результаты кидайте сюда, вместе с процом на котором тестировали.<br><br>Мои результаты для Core2Duo 2.26<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">buffer&nbsp;size&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">16777216</span>&nbsp;Bytes</li><li class="hl_l1">number&nbsp;of&nbsp;copy&nbsp;operation&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">16</span></li><li class="hl_l0">preparing<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l1">start<span class="hl_char">!</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;MMX&nbsp;реализация&nbsp;на&nbsp;асме&nbsp;с&nbsp;<span class="hl_function">prefetch</span></li><li class="hl_l0">mmx_memcpy_asm<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">114444</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">007153</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2237</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;MMX&nbsp;реализация&nbsp;на&nbsp;intrinsic&nbsp;инструкциях&nbsp;c&nbsp;<span class="hl_function">prefetch</span></li><li class="hl_l0">mmx_memcpy<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">115609</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">007226</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2214</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;очень&nbsp;хитрая&nbsp;на&nbsp;MMX&nbsp;под&nbsp;AMD&nbsp;c&nbsp;<span class="hl_function">prefetch</span></li><li class="hl_l0">memcpy_huge<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">111493</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">006968</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2296</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>реализация&nbsp;на&nbsp;SSE</li><li class="hl_l0">sse_memcpy_asm<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">177681</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">011105</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1441</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>реализация&nbsp;на&nbsp;SSE&nbsp;c&nbsp;<span class="hl_function">prefetch</span></li><li class="hl_l0">sse_memcpy_asm2<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">143008</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">008938</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1790</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>реализация&nbsp;на&nbsp;SSE&nbsp;на&nbsp;intrinsic&nbsp;инструкциях</li><li class="hl_l0">sse_memcpy<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">183768</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">011486</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1393</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>реализация&nbsp;на&nbsp;SSE&nbsp;на&nbsp;intrinsic&nbsp;инструкциях&nbsp;без&nbsp;выравнивания</li><li class="hl_l0">sse_memcpy_u<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">189657</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">011854</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1350</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>цикл&nbsp;<span class="hl_function"><b>rep</b></span>&nbsp;<span class="hl_function">movsd</span></li><li class="hl_l0"><span class="hl_function">movsd</span><span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">181586</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">011349</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1410</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>ntdll&nbsp;RtlCopyMemory</li><li class="hl_l0">RtlCopyMemory<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">200333</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">012521</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1278</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>crt&nbsp;memcpy_s</li><li class="hl_l0">memcpy_s<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">207848</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">012990</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1232</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>цикл&nbsp;for&nbsp;c&nbsp;копированием&nbsp;по&nbsp;<span class="hl_number">4B</span></li><li class="hl_l0">for&nbsp;<span class="hl_function"><b>loop</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">dword</span><span class="hl_char">)</span><span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">204562</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">012785</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1251</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>цикл&nbsp;<span class="hl_function"><b>while</b></span>&nbsp;c&nbsp;копированием&nbsp;по&nbsp;<span class="hl_number">4B</span></li><li class="hl_l0"><span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_function"><b>loop</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">dword</span><span class="hl_char">)</span><span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">197684</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">012355</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1295</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>цикл&nbsp;<span class="hl_function"><b>while</b></span>&nbsp;c&nbsp;копированием&nbsp;по&nbsp;<span class="hl_number">1B</span></li><li class="hl_l0">for&nbsp;<span class="hl_function"><b>loop</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">byte</span><span class="hl_char">)</span><span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">276843</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">017303</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">925</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;</li>        </ol>
    </div>
</div></div>
<br>ЗЫ: если есть еще идеи для реализации быстрой memcpy, то кидайте сюда, если это будет актуально то включу в бэнчмэк.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251668&amp;user=18950&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=1" class="addthx" data-post="251668"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]cppasm[/b]','')">cppasm</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 251.3 (наставник), 81thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.77'>Активность: 0.14<span style='color:red'>&searr;</span>0.11</span><br>Статус: <a href="action=userinfo&amp;user=6859">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 14:56 <br><script type="text/javascript">QU('cppasm','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=cppasm" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#2');return false;">#2</a> </span><div align=left><br>
<I>Vol4ok пишет:<br>второй тест измеряет время при помощи rdtsc - что менее точно чем QueryPerfomanceCounter </I><br>С каких соображений? Одно на втором базируется.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251720&amp;user=6859&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=2" class="addthx" data-post="251720"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]ntldr[/b]','')">ntldr</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 369.8 (мудрец), 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.89'>Активность: 0.39<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 15:04 <br><script type="text/javascript">QU('ntldr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ntldr" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#3');return false;">#3</a> </span><div align=left><br>
<I>cppasm пишет:<br>С каких соображений? </I><br>Частота процессора может изменяться по ходу его работы. rdtsc следует использовать если мы хотим получить число тактов, а время надо мерять через QueryPerfomanceCounter, или на худой конец GetTickCount
<br><br><font size="1"><i>-----<br>PGP key <noindex><a href="https://diskcryptor.net/storage/new_key.asc" rel="nofollow" target="_blank">&lt0x1B6A24550F33E44A&gt</a></noindex></i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251721&amp;user=12867&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=3" class="addthx" data-post="251721"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]huckfuck[/b]','')">huckfuck</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 49.6 (посетитель), 9thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.76'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6947">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 15:20 <br><script type="text/javascript">QU('huckfuck','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=huckfuck" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#4');return false;">#4</a> </span><div align=left><br>
<img src="http://s001.radikal.ru/i195/1002/b1/a4d018e0106d.jpg" border="0" align="" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251723&amp;user=6947&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=4" class="addthx" data-post="251723"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]Vol4ok[/b]','')">Vol4ok</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 47.1 (посетитель), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.61'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=18950">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 15:25 &middot; Поправил: Vol4ok <br><script type="text/javascript">QU('Vol4ok','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vol4ok" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#5');return false;">#5</a> </span><div align=left><br>
<I>cppasm пишет:<br>С каких соображений? Одно на втором базируется. </I><br>К тому что сказал ntldr могу добавить, что rdtsc - плох на мультипроцессорных системах, так как число тактов отличается на разных процессорах, непонятно, учитывал ли автор этой программы это обстоятельство. <br>QueryPerfomanceCounter к rdtsc никакого отношения не имеет - он работает на основе системного таймера, встроенного в материнскую плату, который генерирует прерывания, через определенный интервал (на современных компах &lt; 1 нс).
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251724&amp;user=18950&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=5" class="addthx" data-post="251724"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]HiEndsoft[/b]','')">HiEndsoft</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 237.0 (наставник), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.74'>Активность: 0.13<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=13651">Участник</a><br><font color=blue>sysenter</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 16:54 <br><script type="text/javascript">QU('HiEndsoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HiEndsoft" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#6');return false;">#6</a> </span><div align=left><br>
По поводу таймеров советую прочитать:www.insidepro.com/kk/030/030r.shtml
<br><br><font size="1"><i>-----<br>продавец резиновых утёнков</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251727&amp;user=13651&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=6" class="addthx" data-post="251727"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]SLV[/b]','')">SLV</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 309.8 (мудрец), 21thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.69'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=663">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 17:09 <br><script type="text/javascript">QU('SLV','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SLV" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#7');return false;">#7</a> </span><div align=left><br>
Можно попробовать вызвать SetThreadIdealProcessor для получения более достоверных результатов с rdtsc.
<br><br><font size="1"><i>-----<br>Shalom ebanats!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251729&amp;user=663&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=7" class="addthx" data-post="251729"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]ntldr[/b]','')">ntldr</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 369.8 (мудрец), 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.89'>Активность: 0.39<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 17:31 <br><script type="text/javascript">QU('ntldr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ntldr" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#8');return false;">#8</a> </span><div align=left><br>
software.intel.com/en-us/articles/measure-code-sections-using-the-enhanced-timer/
<br><br><font size="1"><i>-----<br>PGP key <noindex><a href="https://diskcryptor.net/storage/new_key.asc" rel="nofollow" target="_blank">&lt0x1B6A24550F33E44A&gt</a></noindex></i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251730&amp;user=12867&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=8" class="addthx" data-post="251730"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]tomac[/b]','')">tomac</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 65.3 (постоянный), 10thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.82'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6470">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 19:16 <br><script type="text/javascript">QU('tomac','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tomac" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#9');return false;">#9</a> </span><div align=left><br>
Core2Duo E8500@3.7Ghz<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">buffer&nbsp;size&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">16777216</span>&nbsp;Bytes</li><li class="hl_l1">number&nbsp;of&nbsp;copy&nbsp;operation&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">16</span></li><li class="hl_l0">preparing<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l1">start<span class="hl_char">!</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">mmx_memcpy_asm<span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">070954</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">004435</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">3608</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">mmx_memcpy<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">070385</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">004399</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">3637</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">memcpy_huge<span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">071167</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">004448</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">3597</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">sse_memcpy_asm<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">105238</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">006577</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2433</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">sse_memcpy_asm2<span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">082380</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">005149</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">3108</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">sse_memcpy<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">105768</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">006611</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2420</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">sse_memcpy_u<span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">112650</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">007041</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2273</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function">movsd</span><span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">102461</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">006404</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2499</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">RtlCopyMemory<span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">102289</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">006393</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2503</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">memcpy_s<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">104459</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">006529</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2451</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">for&nbsp;<span class="hl_function"><b>loop</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">dword</span><span class="hl_char">)</span><span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">108781</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">006799</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2353</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_function"><b>loop</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">dword</span><span class="hl_char">)</span><span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">109561</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">006848</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2337</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">for&nbsp;<span class="hl_function"><b>loop</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">byte</span><span class="hl_char">)</span><span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">154765</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">009673</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1654</span>&nbsp;mb<span class="hl_char">/</span>s</li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251737&amp;user=6470&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=9" class="addthx" data-post="251737"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]__[/b]','')">__</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 115.1 (ветеран), 3thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.73'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=7172">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 20:45 <br><script type="text/javascript">QU('__','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=__" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#10');return false;">#10</a> </span><div align=left><br>
<I>s0l пишет:<br>Со второго теста: </I><br><I>Rustem пишет:<br>со второго </I><br><br>а мужики то не знают (с) что MessageBox по Ctrl-C копируется в буфер : )
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251740&amp;user=7172&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=10" class="addthx" data-post="251740"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]__[/b]','')">__</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 115.1 (ветеран), 3thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.73'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=7172">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 20:47 <br><script type="text/javascript">QU('__','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=__" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#11');return false;">#11</a> </span><div align=left><br>
какие-то читерские у вас процы, что получается у некоторых movsd быстрее =)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251741&amp;user=7172&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=11" class="addthx" data-post="251741"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]HiEndsoft[/b]','')">HiEndsoft</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 237.0 (наставник), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.74'>Активность: 0.13<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=13651">Участник</a><br><font color=blue>sysenter</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 21:00 <br><script type="text/javascript">QU('HiEndsoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HiEndsoft" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#12');return false;">#12</a> </span><div align=left><br>
<I>SLV пишет:<br>Можно попробовать вызвать SetThreadIdealProcessor для получения более достоверных результатов с rdtsc. </I><br>_____<br><I>ntldr пишет:<br>software.intel.com/en-us/articles/measure-code-sections-using-the-enhanced-timer/ </I><br>- там как раз и юзается SetAffinityMask
<br><br><font size="1"><i>-----<br>продавец резиновых утёнков</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251743&amp;user=13651&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=12" class="addthx" data-post="251743"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]kioresk[/b]','')">kioresk</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/10650.gif" alt=""><br><span class=txtSm>Ранг: 154.2 (ветеран), 66thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.31'>Активность: 0.08<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=10650">Участник</a><br><font color=blue>REVENGE Crew</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 16 февраля 2010 21:51 &middot; Поправил: kioresk <br><script type="text/javascript">QU('kioresk','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=kioresk" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#13');return false;">#13</a> </span><div align=left><br>
Core i7 960 3.2 GHz<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">buffer&nbsp;size&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">16777216</span>&nbsp;Bytes</li><li class="hl_l1">number&nbsp;of&nbsp;copy&nbsp;operation&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">16</span></li><li class="hl_l0">preparing<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l1">start<span class="hl_char">!</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">mmx_memcpy_asm<span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">052446</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">003278</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">4881</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">mmx_memcpy<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">053444</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">003340</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">4790</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">memcpy_huge<span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">053611</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">003351</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">4775</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">sse_memcpy_asm<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">075181</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">004699</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">3405</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">sse_memcpy_asm2<span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">051074</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">003192</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">5012</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">sse_memcpy<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">075208</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">004701</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">3404</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">sse_memcpy_u<span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">075351</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">004709</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">3397</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function">movsd</span><span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">063070</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">003942</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">4059</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">RtlCopyMemory<span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">063159</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">003947</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">4053</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">memcpy_s<span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">075127</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">004695</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">3408</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">for&nbsp;<span class="hl_function"><b>loop</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">dword</span><span class="hl_char">)</span><span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">093235</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">005827</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2746</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_function"><b>loop</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">dword</span><span class="hl_char">)</span><span class="hl_char">:</span></li><li class="hl_l1">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">093701</span>&nbsp;s</li><li class="hl_l0">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">005856</span>&nbsp;s</li><li class="hl_l1">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">2732</span>&nbsp;mb<span class="hl_char">/</span>s</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">for&nbsp;<span class="hl_function"><b>loop</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">byte</span><span class="hl_char">)</span><span class="hl_char">:</span></li><li class="hl_l0">ttl<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">166334</span>&nbsp;s</li><li class="hl_l1">avr<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">010396</span>&nbsp;s</li><li class="hl_l0">spd<span class="hl_char">:</span>&nbsp;<span class="hl_number">1539</span>&nbsp;mb<span class="hl_char">/</span>s</li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251750&amp;user=10650&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=13" class="addthx" data-post="251750"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]Vol4ok[/b]','')">Vol4ok</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 47.1 (посетитель), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.61'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=18950">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 февраля 2010 21:57 <br><script type="text/javascript">QU('Vol4ok','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vol4ok" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#14');return false;">#14</a> </span><div align=left><br>
Итак подведу итоги. Просуммировав все представленные результаты получилась следующий статистика<br><br><img src="http://dl.dropbox.com/u/159112/Dropbox/Screen%20shot%202010-02-18%20at%2020.07.38.png" border="0" align="" alt=""><br><br>Лично для себя я сделал следующие выводы (исходя из удобства использования их в своих проектах)<br><br>- самая удобная в использовании функа - movsd (и ее ntdll аналог RtlCopyMemory), плюсы в следующем<br>+ наличие соответствующей интринсик инструкции в компиляторе от МС<br>+ кросплатформенность (код с movsd будет работать как на х86 так и на х64, без дополнительных изощрений)<br>+ хорошие показатели скорости, при своей невероятной простоте.<br>Ее можно использовать в проектах где скорость не является целью.<br><br>Если же цель именно скорость то тут 2 фаворита реализация на MMX и SSE, как видно в большинстве случаев MMX работал быстрее, на самом деле я немного поэксперементировав, получил более быструю реализацию, которая сравнима с показателями MMX и даже превышает ее в ряде случаев (все желающий могут дополнительно это протестить в <noindex><a href="http://dl.dropbox.com/u/159112/Dropbox/memcpy_test/mem_test2.exe" rel="nofollow" target="_blank">-этом</a></noindex> бэнчмэке).<br>Но к сожалению они не так удобны в использовании как movsd, и не обладают кросплатформеностью, и требуют дополнительных изощрений с выравниванием. <br>Реализация на MMX - может быть написана на интринсик инструкциях компилятора, но к сожалению не может работать под х64 системой. SSE реализация (в том виде который дает максимальные результаты) - не может быть написана интринсик - и неизбежно использование ассемблера в чистом виде. В моем случае использовался инлайн асм, но он не актуален для х64 бита систем, так что придется иметь дополнительный гимор и подшивать асм файлики для каждой платформы к проекту (в данном случае я подразумеваю использования мелкософтного компилятора). Однако те кто пользуются компилятором intel - думаю что SSE реализация на интринсик возможна, таким образом можно безболезнено вставлять эту реализацию в свои проекты не боясь проблем с компиляцией под разные платформы.<br><br>Вот мои реализации обеих процедур (буфера должны быть выравнены по 64Б)<br><br>MMX<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>void</b></span>&nbsp;mmx_memcpy<span class="hl_char">(</span><span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span>dst<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span>src<span class="hl_char">,</span>&nbsp;size_t&nbsp;len<span class="hl_char">)</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">{</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__m64&nbsp;t1<span class="hl_char">,</span>&nbsp;t2<span class="hl_char">,</span>&nbsp;t3<span class="hl_char">,</span>&nbsp;t4<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__m64&nbsp;t5<span class="hl_char">,</span>&nbsp;t6<span class="hl_char">,</span>&nbsp;t7<span class="hl_char">,</span>&nbsp;t8<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_char">(</span>len&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">64</span><span class="hl_char">)</span>&nbsp;{</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_mm_prefetch<span class="hl_char">(</span><span class="hl_char">(</span><span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>src&nbsp;<span class="hl_char">+</span>&nbsp;0x40<span class="hl_char">)</span><span class="hl_char">,</span>_MM_HINT_NTA<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">*</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>src&nbsp;<span class="hl_char">+</span>&nbsp;&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t2&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">*</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>src&nbsp;<span class="hl_char">+</span>&nbsp;&nbsp;<span class="hl_number">8</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t3&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">*</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>src&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">16</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t4&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">*</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>src&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">24</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t5&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">*</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>src&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">32</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t6&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">*</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>src&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">40</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t7&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">*</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>src&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">48</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t8&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">*</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>src&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">56</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_mm_stream_pi<span class="hl_char">(</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>dst&nbsp;<span class="hl_char">+</span>&nbsp;&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;t1<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_mm_stream_pi<span class="hl_char">(</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>dst&nbsp;<span class="hl_char">+</span>&nbsp;&nbsp;<span class="hl_number">8</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;t2<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_mm_stream_pi<span class="hl_char">(</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>dst&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">16</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;t3<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_mm_stream_pi<span class="hl_char">(</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>dst&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">24</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;t4<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_mm_stream_pi<span class="hl_char">(</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>dst&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">32</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;t5<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_mm_stream_pi<span class="hl_char">(</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>dst&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">40</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;t6<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_mm_stream_pi<span class="hl_char">(</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>dst&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">48</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;t7<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_mm_stream_pi<span class="hl_char">(</span><span class="hl_char">(</span>__m64&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">(</span>dst&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">56</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;t8<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;src&nbsp;<span class="hl_char">+</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">64</span><span class="hl_comment">; dst += 64; len -= 64;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_mm_empty<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">}</li>        </ol>
    </div>
</div></div>
<br><br>SSE (более крутая версия, а не та чтобы в первом тесте)<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>void</b></span>&nbsp;sse_memcpy_asm2<span class="hl_char">(</span><span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span>dst<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span>src<span class="hl_char">,</span>&nbsp;size_t&nbsp;len<span class="hl_char">)</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">{</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__asm{</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">[</span>len<span class="hl_char">]</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">edx</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">[</span>dst<span class="hl_char">]</span>&nbsp;&nbsp;&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">[</span>src<span class="hl_char">]</span>&nbsp;&nbsp;&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>align</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">16</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">cpy<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>prefetchnta</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span><span class="hl_registr">eax</span><span class="hl_char">+</span>0x80<span class="hl_char">]</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>movdqa</b></span>&nbsp;xmm0<span class="hl_char">,</span>xmmword&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">eax</span><span class="hl_char">]</span>&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>movdqa</b></span>&nbsp;xmm1<span class="hl_char">,</span>xmmword&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">eax</span><span class="hl_char">+</span><span class="hl_number">10h</span><span class="hl_char">]</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>movdqa</b></span>&nbsp;xmm2<span class="hl_char">,</span>xmmword&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">eax</span><span class="hl_char">+</span><span class="hl_number">20h</span><span class="hl_char">]</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>movdqa</b></span>&nbsp;xmm3<span class="hl_char">,</span>xmmword&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">eax</span><span class="hl_char">+</span><span class="hl_number">30h</span><span class="hl_char">]</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>movntps</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmmword&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">edx</span><span class="hl_char">]</span><span class="hl_char">,</span>xmm0&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>movntps</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmmword&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">edx</span><span class="hl_char">+</span><span class="hl_number">10h</span><span class="hl_char">]</span><span class="hl_char">,</span>xmm1</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>movntps</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmmword&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">edx</span><span class="hl_char">+</span><span class="hl_number">20h</span><span class="hl_char">]</span><span class="hl_char">,</span>xmm2</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>movntps</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmmword&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">edx</span><span class="hl_char">+</span><span class="hl_number">30h</span><span class="hl_char">]</span><span class="hl_char">,</span>xmm3</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>add</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">edx</span><span class="hl_char">,</span>0x40</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>add</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>0x40</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>sub</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span>0x40</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jnz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpy</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<br><br>Напоследок хотесь бы сказать немного &quot;хорошего&quot; о мелкософте который очередной раз лажанулся.<br>Во первых это CRT. Дело в том что CRT реализация - использует SSE, но как видено в большинстве случаев movsd работает быстрее - и поэтому CRT реализация является неэффективной, и соответственно бесполезной. Какой смысл было выпендриваться SSE интрукциями, если они не дает оправданных результатов? Если бы они написали код который я представил выше - было бы куда круче. Также хочу отметить говеную реализацию интринсик инструкций, дело в том, что для того чтобы написать реализацию SSE на интринсик - не хватает всего одной интринсик инструкции - movntps (которая вцелом имеется но не в том виде котором нужно). Мало таго, &quot;порадовала&quot; их идиоцкая оптимизация - если откомпилять код на интринсик инструкциях - то они будут не в том порядке как в оригинале, нафига спрашивается переставлять? этот эффект можно наблюдать на суммарных результатах, как видно MMX реализация на асме в итоге выиграла, только потому что мелкософт влез со совей &quot;оптимизацией&quot; в интринсик реализацию, а код по совей сути идентичный.<br><br>ЗЫ: спс ntldr за помощь в написании реализаций.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251899&amp;user=18950&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=14" class="addthx" data-post="251899"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]spinz[/b]','')">spinz</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 50.0 (постоянный), 31thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.72'>Активность: 0.09<span style='color:green'>&nearr;</span>0.1</span><br>Статус: <a href="action=userinfo&amp;user=22831">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 14:21 <br><script type="text/javascript">QU('spinz','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=spinz" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#15');return false;">#15</a> </span><div align=left><br>
<I>ntldr пишет:<br>Частота процессора может изменяться по ходу его работы. rdtsc следует использовать если мы хотим получить число тактов, а время надо мерять через QueryPerfomanceCounter, или на худой конец GetTickCount  </I><br>Ну и ахинея. В данном случае производительность надо мерять именно в тактах. Время здесь при чем?<br>Если один код выполнится за 1000 тактов, а другой за 1100 - однозначно время выполнения первого кода будет меньше. Нет никаких причин думать, что при выполнении второго кода частота по каким то причинам будет выше и следовательно время выполнения меньше.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251965&amp;user=22831&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=15" class="addthx" data-post="251965"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]ntldr[/b]','')">ntldr</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 369.8 (мудрец), 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.89'>Активность: 0.39<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 14:49 <br><script type="text/javascript">QU('ntldr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ntldr" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#16');return false;">#16</a> </span><div align=left><br>
Уважаемый <b>spinz</b>, меряйте производительность своего кода хоть в слонах и попугаях, но не учите нас жить. Да будет вам известно, что производительность копирования данных в памяти зависит не только от процессора, но и, как не странно, от скорости работы памяти, в следствии чего эффективность пакетного чтения удобнее считать в мегабайтах в секунду, а не непонятно как скачущих тактах процессора. К тому же, если речь заходит об измерении скорости работы параллельных алгоритмов, то растактовка становиться бесполезной чуть менее, чем полностью.<br><br><I>spinz пишет:<br>ет никаких причин думать, что при выполнении второго кода частота по каким то причинам будет выше и следовательно время выполнения меньше. </I><br>Поздравляю, вы с громким плеском сели в лужу. Гуглите что такое Intel Turbo Boost, и не учите жить людей, занимающихся оптимизацией побольше вас.
<br><br><font size="1"><i>-----<br>PGP key <noindex><a href="https://diskcryptor.net/storage/new_key.asc" rel="nofollow" target="_blank">&lt0x1B6A24550F33E44A&gt</a></noindex></i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251969&amp;user=12867&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=16" class="addthx" data-post="251969"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]spinz[/b]','')">spinz</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 50.0 (постоянный), 31thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.72'>Активность: 0.09<span style='color:green'>&nearr;</span>0.1</span><br>Статус: <a href="action=userinfo&amp;user=22831">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 15:14 <br><script type="text/javascript">QU('spinz','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=spinz" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#17');return false;">#17</a> </span><div align=left><br>
<I>ntldr пишет:<br>Уважаемый spinz, меряйте производительность своего кода хоть в слонах и попугаях, но не учите нас жить. Да будет вам известно, что производительность копирования данных в памяти зависит не только от процессора, но и, как не странно, от скорости работы памяти, в следствии чего эффективность пакетного чтения удобнее считать в мегабайтах в секунду, а не непонятно как скачущих тактах процессора. К тому же, если речь заходит об измерении скорости работы параллельных алгоритмов, то растактовка становиться бесполезной чуть менее, чем полностью. </I><br>Послушайте не надо подменять предмет дискусии. Невзирая на скорость памяти - если первый код закончит работу через 1000 тактов, а второй через 1100 - значит первый код закончит свое выполнение раньше. Посему rdtsc здесь самый точный способ замера производительности.<br><br><I>ntldr пишет:<br>Поздравляю, вы с громким плеском сели в лужу. Гуглите что такое Intel Turbo Boost, и не учите жить людей, занимающихся оптимизацией побольше вас.  </I><br>Про турбобуст я знаю не хуже вашего. Попробуйте мне объяснить - почему код1 и код2, выполняющиеся на одном ядре при прочих равных условиях, будут выполняться (хотя бы теоретически) при разных тактовых частотах?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251974&amp;user=22831&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=17" class="addthx" data-post="251974"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]ntldr[/b]','')">ntldr</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 369.8 (мудрец), 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.89'>Активность: 0.39<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 15:49 <br><script type="text/javascript">QU('ntldr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ntldr" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#18');return false;">#18</a> </span><div align=left><br>
<I>spinz пишет:<br>Невзирая на скорость памяти - если первый код закончит работу через 1000 тактов, а второй через 1100 - значит первый код закончит свое выполнение раньше. </I><br>Нет, не так, потому что частота процессора может меняться, нас же интересует абсолютное время. Представьте себе, что у нас быстрый проц, но медленная память, тогда чем выше частота процессора, тем больше тактов он ждет доставки данных из памяти, а значит код исполняется больше тактов, чем при меньшей частоте. Частота меняется, а значит мы меряем хрен знает что, и запросто может оказаться, что код исполняющийся больше тактов, на самом деле быстрее.<br><br><br><I>spinz пишет:<br>Попробуйте мне объяснить - почему код1 и код2, выполняющиеся на одном ядре при прочих равных условиях, будут выполняться (хотя бы теоретически) при разных тактовых частотах? </I><br>Вот вам краткий список причин:<br><br>1 - Мы работаем в многозадачной ОС, а значит работа турбобуста зависит от нагруженности других ядер чужим кодом. Другие ядра нагружены - частота нашего ядра снижается.<br>2 - Есть такая штука, как гипертрединг, т.е. одно ядро может исполнять 2 потока одновременно. Представьте себе, что в то время, пока наш поток ждет доставки данных из памяти, другой поток исполняется на том же ядре, и турбобуст повышает его частоту.<br>3 - Процессор может уменьшать свою частоту при перегреве (тротлинг). На скорости работы с памятью это может не сказаться. Влияет даже в однозадачной среде.<br>4 - Процессор может засыпать на короткое время при низкой нагрузке, соответственно такты не считаются, пока идет ожидание получения данных. Особенно актуально для ноутбучных процессоров и влияет на растактовку даже в однозадачной среде.
<br><br><font size="1"><i>-----<br>PGP key <noindex><a href="https://diskcryptor.net/storage/new_key.asc" rel="nofollow" target="_blank">&lt0x1B6A24550F33E44A&gt</a></noindex></i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251978&amp;user=12867&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=18" class="addthx" data-post="251978"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]spinz[/b]','')">spinz</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 50.0 (постоянный), 31thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.72'>Активность: 0.09<span style='color:green'>&nearr;</span>0.1</span><br>Статус: <a href="action=userinfo&amp;user=22831">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 16:09 <br><script type="text/javascript">QU('spinz','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=spinz" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#19');return false;">#19</a> </span><div align=left><br>
Я указывал  - &quot;при прочих равных условиях&quot;, что исключает влияние вышеперечисленных причин. <br>Про процы и память - я думал очевидно, что речь идет о замерах rdtsc на одной машине. Такты естественно не могут служить критерием быстродействия вообще, 100 тактов на пне1 и 200 тактов на коре-и7, немного разные вещи )))<br>Вообще подобные тесты производительности весьма неточно отражают ситуацию вне зависимости от методики измерения. Для точного замера надо исключить влияние ОС и многопроцовости. Те же мегабайты в секунду могут быть совсем другими, когда другое ядро к примеру имеет кучу промахов кэша.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251983&amp;user=22831&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=19" class="addthx" data-post="251983"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]ntldr[/b]','')">ntldr</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 369.8 (мудрец), 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.89'>Активность: 0.39<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 16:22 <br><script type="text/javascript">QU('ntldr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ntldr" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#20');return false;">#20</a> </span><div align=left><br>
<I>spinz пишет:<br>Я указывал  - &quot;при прочих равных условиях&quot;, что исключает влияние вышеперечисленных причин. </I><br>Ну так мы работаем с реальным железом и софтом, и хотелось бы всегда получать корректные результаты.<br><br><I>spinz пишет:<br>Про процы и память - я думал очевидно, что речь идет о замерах rdtsc на одной машине. </I><br>Речь идет об одной машине. Допустим, что у меня быстрый проц и медленная память (пример - платформа на Core i5 с одной планкой памяти). Мне хотелось бы померять как быстро идет копирование памяти, а не сколько пустых тактов простаивает проц при доступе к ней.<br><br><I>spinz пишет:<br>Для точного замера надо исключить влияние ОС и многопроцовости. </I><br>Я придерживаюсь точки зрения, что код следует оптимизировать под исполнение в реальной среде, где он потом будет применяться, а не под сферический процессор в вакууме. Поэтому я меряю такты только для кода, который позволяет все свои данные целиком разместить в кэше. В этом случае я делаю цикл на пару сотен тысяч итераций и выбираю наименьшее число тактов по всем замерам. Если же велико влияние памяти, то надо мерять время.
<br><br><font size="1"><i>-----<br>PGP key <noindex><a href="https://diskcryptor.net/storage/new_key.asc" rel="nofollow" target="_blank">&lt0x1B6A24550F33E44A&gt</a></noindex></i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=251986&amp;user=12867&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=20" class="addthx" data-post="251986"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]cppasm[/b]','')">cppasm</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 251.3 (наставник), 81thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.77'>Активность: 0.14<span style='color:red'>&searr;</span>0.11</span><br>Статус: <a href="action=userinfo&amp;user=6859">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 17:12 &middot; Поправил: cppasm <br><script type="text/javascript">QU('cppasm','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=cppasm" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#21');return false;">#21</a> </span><div align=left><br>
<I>ntldr пишет:<br>Мне хотелось бы померять как быстро идет копирование памяти, а не сколько пустых тактов простаивает проц при доступе к ней. </I><br>Так это и будет тот самый сферический конь.<br>Время копирования памяти включает в себя время ожидания доступа к ней.<br>Какой смысл мерять только скорость копирования, если при реальном применении будет влиять и задержка доступа к памяти?<br><br>Если исключить влияние изменения тактовой частоты и привязать поток к одному ядру, rdtsc будет давать то же измерение времени, только в других единицах.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251996&amp;user=6859&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=21" class="addthx" data-post="251996"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 17:34 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#22');return false;">#22</a> </span><div align=left><br>
Вспомните недавнюю тему, где была программа для сопряжения с девайсом на ком порту управляющая форсунками. На мобильных платформах есть конкретный баг с замером через rdtsc.<br>Ну и вообще, что меряется? Копирование участка памяти, то есть важно знать сколько данных можно скопировать за определенное время, а это мб/сек...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=251999&amp;user=702&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=22" class="addthx" data-post="251999"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]Vol4ok[/b]','')">Vol4ok</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 47.1 (посетитель), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.61'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=18950">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 18:19 <br><script type="text/javascript">QU('Vol4ok','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vol4ok" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#23');return false;">#23</a> </span><div align=left><br>
<b>spinz</b>,<b>cppasm</b><br>моей целью было найти самую быструю реализацию именно по времени, когда я пишу программу мне важно не сколько тактов она сожрет, а сколько времени будет работать, поэтому я выбираю именно те величины которые имеют для меня значение. Тоже касается и условий тестирования, они должны быть аналогичны тем, в которых потом будет выполнятся мой код.<br><br>И еще, крайне бессмысленно пытаться учить людей, что и как им делать, особенно в тех случаях когда об этом не просят и очень-очень особенно когда эти люди четко знают как им лучше это сделать. Если вас так сильно интересует измерение производительности в тактах, то было бы куда полезней сесть и написать свой бэнчмэк, протестировать и представить результаты, а не разводить бестолковый флуд.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=252003&amp;user=18950&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=23" class="addthx" data-post="252003"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]ntldr[/b]','')">ntldr</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 369.8 (мудрец), 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.89'>Активность: 0.39<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 18:35 <br><script type="text/javascript">QU('ntldr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ntldr" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#24');return false;">#24</a> </span><div align=left><br>
<I>cppasm пишет:<br>Так это и будет тот самый сферический конь.Время копирования памяти включает в себя время ожидания доступа к ней. </I><br>Видимо вы пропустили предыдущие посты. Если мне нужно знать время - я меряю время. Если нужна растактовка - меряю такты. Некоторые не понимают, что это разные, нетривиально коррелирующие вещи.<br><br><I>cppasm пишет:<br>Если исключить влияние изменения тактовой частоты </I><br>Можно отключить гипертрединг, турбобуст, энергосбережение, и мерять исключительно из-под доса, но зачем? Если в ТЗ проекта не написано &quot;сделать только так, и никак иначе&quot;, то я волен выбирать оптимальные способы под конкретную задачу.
<br><br><font size="1"><i>-----<br>PGP key <noindex><a href="https://diskcryptor.net/storage/new_key.asc" rel="nofollow" target="_blank">&lt0x1B6A24550F33E44A&gt</a></noindex></i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=252006&amp;user=12867&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=24" class="addthx" data-post="252006"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]cppasm[/b]','')">cppasm</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 251.3 (наставник), 81thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.77'>Активность: 0.14<span style='color:red'>&searr;</span>0.11</span><br>Статус: <a href="action=userinfo&amp;user=6859">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 20:16 &middot; Поправил: cppasm <br><script type="text/javascript">QU('cppasm','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=cppasm" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#25');return false;">#25</a> </span><div align=left><br>
<I>Vol4ok пишет:<br>И еще, крайне бессмысленно пытаться учить людей, что и как им делать, особенно в тех случаях когда об этом не просят и очень-очень особенно когда эти люди четко знают как им лучше это сделать. </I><br>По-моему никто никого не учил. Хотя вам виднее.<br>А если так нравится придалбываться к мелочам, то я тоже умею <img src="img/smilies/s1.gif" alt=""><br><I>Vol4ok пишет:<br>QueryPerfomanceCounter к rdtsc никакого отношения не имеет - он работает на основе системного таймера, встроенного в материнскую плату, который генерирует прерывания, через определенный интервал (на современных компах &lt; 1 нс). </I><br>Период в 1нс это тактовая частота 1/10^-9=10^9Hz=1GHz<br>Если прерывания будут сыпать с такой частотой, система только их и обрабатывать будет.<br>У HPET (High Precision Event Timer) частота максимальная 10MHz.<br><I>Vol4ok пишет:<br>Если вас так сильно интересует измерение производительности в тактах, то было бы куда полезней сесть и написать свой бэнчмэк, протестировать и представить результаты, а не разводить бестолковый флуд. </I><br>Результаты будут аналогичные (в относительных величинах).<br><I>ToBad пишет:<br>Вспомните недавнюю тему, где была программа для сопряжения с девайсом на ком порту управляющая форсунками. На мобильных платформах есть конкретный баг с замером через rdtsc. </I><br>Нету там никаких багов.<br>На мобильных платформах широко используется изменение тактовой частоты в зависимости от нагрузки, отсюда и проблемы.<br>Мерять надо нормально, понимая что меряешь.<br>А прога та не работала, потому что нечего задержки делать вида for(i=0;i&lt;0x100000;i++);<br>Ясно что на разных процессорах (разных поколениях) время выполнения будет очень разное.<br><br>Вообще в статье на которую ссылку давал <b>HiEndsoft</b> всё правильно написано, точнее не скажешь:<br><i class=x>Некоторые используют в качестве таймера команду RDTSC, считывающую показания внутреннего счетчика процессора, каждый такт увеличивающегося на постоянную величину (как правило, единицу).<br>Для профилировки машинного кода она подходит на ура, но вот на роль беспристрастного метронома уже не тянет.<br>Некоторые APCI-контроллеры динамически изменяют частоту процессора или усыпляют его в паузах между работой для лучшего охлаждения.<br>Как следствие - непосредственное преобразование процессорных тактов в истинное время оказывается невозможным.</i>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=252025&amp;user=6859&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=25" class="addthx" data-post="252025"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]Vol4ok[/b]','')">Vol4ok</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 47.1 (посетитель), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.61'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=18950">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 февраля 2010 21:54 &middot; Поправил: Vol4ok <br><script type="text/javascript">QU('Vol4ok','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vol4ok" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=15816&amp;page=1#26');return false;">#26</a> </span><div align=left><br>
<I>cppasm пишет:<br>По-моему никто никого не учил. Хотя вам виднее. </I><br>тогда я не понимаю вашей цели и что вы пытаетесь тут всем доказать, вы пытаетесь доказать что мои результаты не состоятельны? или хотите мне предложить написать реализацию на rdtsc? я думаю очевидно, что писать реализацию на rdtsc я не буду, и мои результаты меня устраивают, тех кого не устраивают пишите свои тесты.<br><br><I>cppasm пишет:<br>А если так нравится придалбываться к мелочам, то я тоже умею<br>период в 1нс это тактовая частота 1/10^-9=10^9Hz=1GHz<br>Если прерывания будут сыпать с такой частотой, система только их и обрабатывать будет.<br>У HPET (High Precision Event Timer) частота максимальная 10MHz. </I><br>я говорил это на основании показателя частоты QueryPerformanceFrequency, который на моем компе равна 2 256 360 000, откуда один период составляет 4,43e-10с. Для моих измерений достаточно точности даваемой QueryPerformanceCounter даже если он будет с частотой 100KHz, на худой конец это легко можно проверить увеличив размер буфера - в моем случае результаты оставались прежними. Я не могу понять что вы мне этим хотели показать? Ваше умение &quot;придалбываться к мелочам&quot; не соответствует содержанию данной темы.<br><br>Ввиду перехода обсуждения в бесцельный флуд, я закрываю тему. Топикстартер все что хотел выяснил, всем кто принимал участие в этом выражается благодарность.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=252035&amp;user=18950&amp;forum_n=6&amp;topic=15816&amp;page=1&amp;anchor=26" class="addthx" data-post="252035"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=6&amp;topic=15816&amp;page=0.html">&lt;&lt;</a> .  <a href="action=vthread&amp;forum=6&amp;topic=15816&amp;page=0.html">1</a> . <b>2</b> .</b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> самый быстрый memcpy</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=15816" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
