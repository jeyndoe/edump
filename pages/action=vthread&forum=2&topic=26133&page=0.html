<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Ошибка BEX (APPCRASH) - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Пропатчил приложение. Суть простая: подгрузить DLL, сгенерировать в ней данные, заменить существующие. Пишутся данные в RW секцию, созданную загрузчиком, но тем не менее вылетает ошибка доступа. При этом под отладчиком или">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=40607'>vsv1</a>, <a target='_blank' href='?action=userinfo&amp;user=247'>NIKOLA</a>, <a target='_blank' href='?action=userinfo&amp;user=42610'>r0lka</a>, <a target='_blank' href='?action=userinfo&amp;user=19256'>johnniewalker</a> (+4 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/red.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=2&sortBy=0&page=0.html"><b>Крэки, обсуждения</b></a> <b class=bulletHead>&#8212;&#8250;</b> Ошибка BEX (APPCRASH)</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 09:16 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Пропатчил приложение.<br>Суть простая: подгрузить DLL, сгенерировать в ней данные, заменить существующие. <br>Пишутся данные в RW секцию, созданную загрузчиком, но тем не менее вылетает ошибка доступа. <br>При этом под отладчиком или админскими правами - заводится.<br><br>Вопрос: почему не даёт писать и решаемо ли это без &quot;официальных&quot; админ прав?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399129&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=1" class="addthx" data-post="399129"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Lambda[/b]','')">Lambda</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.3 (новичок), 6thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.56'>Активность: 0.03<span style='color:red'>&searr;</span>0.02</span><br>Статус: <a href="action=userinfo&amp;user=39981">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 12:25 <br><script type="text/javascript">QU('Lambda','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Lambda" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Слишком мало информации, чтобы что-то советовать. Где файлы для теста?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399132&amp;user=39981&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=2" class="addthx" data-post="399132"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 13:35 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<b>Lambda</b>, сомневаюсь, что наличие &quot;неполноценного&quot; экзешника и моей ДЛЛ принципиално.<br>ДЛЛ без ини-файла работать не будет, а в нем личная инфа...<br>Да и повторюсь, проблема, по моему, <strike>распространенная</strike> не уникальная, где-то попадалось на глаза такое, найти токо не могу, думаю, люди &quot;постарше&quot; нас, направление раскопок или результат, даже, и без атача подскажут...<br>Мне на сегодня и такое покатит, но на будущее стоило бы знать что-почему...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399133&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=3" class="addthx" data-post="399133"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Lambda[/b]','')">Lambda</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.3 (новичок), 6thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.56'>Активность: 0.03<span style='color:red'>&searr;</span>0.02</span><br>Статус: <a href="action=userinfo&amp;user=39981">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 13:36 <br><script type="text/javascript">QU('Lambda','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Lambda" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<b>AE</b>, &quot;будем посмотреть&quot; <img src="img/smilies/s3.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399134&amp;user=39981&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=4" class="addthx" data-post="399134"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=51133" title="18-10-2019 10:40, ранг:5.8" target="_blank">AE</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]SReg[/b]','')">SReg</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 315.1 (мудрец), 631thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.78'>Активность: 0.3<span style='color:green'>&nearr;</span>0.33</span><br>Статус: <a href="action=userinfo&amp;user=18316">Модератор</a><br><font color=blue>CrackLab</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 13:49 <br><script type="text/javascript">QU('SReg','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SReg" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<b>AE</b> &quot;личную инфу&quot; можешь выпилить, и сварганить тестовый набор. а если ты рассчитываешь, что все кинуться ванговать варики почему не воркает, то у меня для тебя плохие новости.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399135&amp;user=18316&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=5" class="addthx" data-post="399135"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 14:20 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<I>SReg пишет:<br>а если ты рассчитываешь, что все кинуться ванговать варики почему не воркает, то у меня для тебя плохие новости. </I><br>Это не новости, а просто констатация факта.<br><br>Я немного протормозил, загрузка инфы идет после ошибки, так что должно быть достаточно 2х файлов....<br><br>Еще чуть-чуть подумав...<br> - Не зря же разного рода &quot;патчеры&quot; работают от админа, наверное это единственный способ, на самом деле....<br><br>На всякий случай, вдруг кому-то не лень, (http://multi-up.com/1244058)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399136&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=6" class="addthx" data-post="399136"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 14:52 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
step-by-step trace:<br>1. Загрузили dll&#039;ку (без админа)<br>2. Создается секция с RW (API VirtualAlloc?)<br>3. Туда пишутся данные внутри процесса из dll&#039;ки (или API WriteProcessmemory?)<br><b>&gt;вынаходитесьздесь&lt;</b> возникает ошибка ACCESS_VIOLATION? <br>4. Success write data to RW page
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399137&amp;user=26651&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=7" class="addthx" data-post="399137"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 15:34 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<b>ELF_7719116</b><br><I>Создается секция с RW </I> на точке входа приложения секция уже создана - не мною<br><I>Туда пишутся данные внутри процесса из dll&#039;ки </I> совершенно верно, я первым делом ZeroMemory по адресам делаю (на ней и вылет), то есть есть смысл попробовать WriteProcessmemory?<br><I>возникает ошибка ACCESS_VIOLATION </I> ну а какая же...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399141&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=8" class="addthx" data-post="399141"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 16:24 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<I>AE пишет:<br>на точке входа приложения секция уже создана - не мною </I><br><I>AE пишет:<br> ACCESS_VIOLATION ну а какая же...  </I><br>точно RW в этом месте? результат VirtualQuery в студию?<br><br><I>AE пишет:<br>то есть есть смысл попробовать WriteProcessmemory? </I><br>Нет<br><I>AE пишет:<br>ZeroMemory по адресам делаю (на ней и вылет </I><br>чем memset не понравился?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399142&amp;user=26651&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=9" class="addthx" data-post="399142"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 16:56 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<I>ELF_7719116 пишет:<br>RW в этом месте? результат VirtualQuery в студию? </I> 4<br>Я в начале стартонул менять протект, даже удивился, что мне ето спокойно дало сделать, проверил, а он и был 4<img src="img/smilies/s6.gif" alt=""><br><I>ELF_7719116 пишет:<br>чем memset не понравился? </I> <br>а разница? Те же яйца, только напрямую без 2х оберток
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399143&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=10" class="addthx" data-post="399143"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 17:58 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<I>AE пишет:<br>а разница? </I><br>непросто так спрашиваю, в каком именно месте валится: CLCreator.(char __stdcall) GetCommandString??<br><I>AE пишет:<br>ДЛЛ без ини-файла работать не будет, а в нем личная инфа... </I><br>ну да, а то что в самой dll напихано &quot;личной инфы&quot; (ip, secrectkey, creds) это normalno. просто код, который пишет в секцию оставить, лишнее убрать.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399147&amp;user=26651&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=11" class="addthx" data-post="399147"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 18:28 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<I>ELF_7719116 пишет:<br>просто код, который пишет в секцию оставить, лишнее убрать. </I><br>спалили....да там много чего личШнОего осталось....не догнал что так можно сделать... ну да ладно....<br><br><I>ELF_7719116 пишет:<br>непросто так спрашиваю, в каком именно месте валится </I><br>Так вот, если убрать ZeroMemory, то на strcpy_s (выходит)... и сообщение краша меняется<br><br><b>При наличии ZeroMemory</b><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">Имя&nbsp;события&nbsp;проблемы<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;APPCRASH</li><li class="hl_l1">&nbsp;&nbsp;Имя&nbsp;приложения<span class="hl_char">:</span>&nbsp;EVPCastle<span class="hl_char">.</span>exe</li><li class="hl_l0">&nbsp;&nbsp;Версия&nbsp;приложения<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">12</span><span class="hl_char">.</span><span class="hl_number">1361</span><span class="hl_char">.</span><span class="hl_number">46670</span></li><li class="hl_l1">&nbsp;&nbsp;Отметка&nbsp;времени&nbsp;приложения<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">5a312448</span></li><li class="hl_l0">&nbsp;&nbsp;Имя&nbsp;модуля&nbsp;с&nbsp;ошибкой<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;ntdll<span class="hl_char">.</span>dll</li><li class="hl_l1">&nbsp;&nbsp;Версия&nbsp;модуля&nbsp;с&nbsp;ошибкой<span class="hl_char">:</span>&nbsp;<span class="hl_number">6</span><span class="hl_char">.</span><span class="hl_number">1</span><span class="hl_char">.</span><span class="hl_number">7601</span><span class="hl_char">.</span><span class="hl_number">24475</span></li><li class="hl_l0">&nbsp;&nbsp;Отметка&nbsp;времени&nbsp;модуля&nbsp;с&nbsp;ошибкой<span class="hl_char">:</span>&nbsp;<span class="hl_number">5cdd7f6d</span></li><li class="hl_l1">&nbsp;&nbsp;Код&nbsp;исключения<span class="hl_char">:</span>&nbsp;c0000005</li><li class="hl_l0">&nbsp;&nbsp;Смещение&nbsp;исключения<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">00033497</span></li><li class="hl_l1">&nbsp;&nbsp;Версия&nbsp;ОС<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">6</span><span class="hl_char">.</span><span class="hl_number">1</span><span class="hl_char">.</span><span class="hl_number">7601</span><span class="hl_char">.</span><span class="hl_number">2</span><span class="hl_char">.</span><span class="hl_number">1</span><span class="hl_char">.</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">256</span><span class="hl_char">.</span><span class="hl_number">1</span></li><li class="hl_l0">&nbsp;&nbsp;Код&nbsp;языка<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">1049</span></li><li class="hl_l1">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">1</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e</span></li><li class="hl_l0">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">2</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e372d3b4ad19135b953a78882e789</span></li><li class="hl_l1">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">3</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e</span></li><li class="hl_l0">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">4</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e372d3b4ad19135b953a78882e789</span></li>        </ol>
    </div>
</div></div>
<br><b>Без</b><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;Имя&nbsp;события&nbsp;проблемы<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BEX</li><li class="hl_l1">&nbsp;&nbsp;Имя&nbsp;приложения<span class="hl_char">:</span>&nbsp;EVPCastle<span class="hl_char">.</span>exe</li><li class="hl_l0">&nbsp;&nbsp;Версия&nbsp;приложения<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">12</span><span class="hl_char">.</span><span class="hl_number">1361</span><span class="hl_char">.</span><span class="hl_number">46670</span></li><li class="hl_l1">&nbsp;&nbsp;Отметка&nbsp;времени&nbsp;приложения<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">5a312448</span></li><li class="hl_l0">&nbsp;&nbsp;Имя&nbsp;модуля&nbsp;с&nbsp;ошибкой<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;StackHash_0a9e</li><li class="hl_l1">&nbsp;&nbsp;Версия&nbsp;модуля&nbsp;с&nbsp;ошибкой<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;Отметка&nbsp;времени&nbsp;модуля&nbsp;с&nbsp;ошибкой<span class="hl_char">:</span>&nbsp;<span class="hl_number">00000000</span></li><li class="hl_l1">&nbsp;&nbsp;Смещение&nbsp;исключения<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">6465656e</span></li><li class="hl_l0">&nbsp;&nbsp;Код&nbsp;исключения<span class="hl_char">:</span>&nbsp;c0000005</li><li class="hl_l1">&nbsp;&nbsp;Данные&nbsp;исключения<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">00000008</span></li><li class="hl_l0">&nbsp;&nbsp;Версия&nbsp;ОС<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">6</span><span class="hl_char">.</span><span class="hl_number">1</span><span class="hl_char">.</span><span class="hl_number">7601</span><span class="hl_char">.</span><span class="hl_number">2</span><span class="hl_char">.</span><span class="hl_number">1</span><span class="hl_char">.</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">256</span><span class="hl_char">.</span><span class="hl_number">1</span></li><li class="hl_l1">&nbsp;&nbsp;Код&nbsp;языка<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">1049</span></li><li class="hl_l0">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">1</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e</span></li><li class="hl_l1">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">2</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e372d3b4ad19135b953a78882e789</span></li><li class="hl_l0">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">3</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e</span></li><li class="hl_l1">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">4</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e372d3b4ad19135b953a78882e789</span></li>        </ol>
    </div>
</div></div>
<br>Признаюсь сразу - честно: понятия не имею, что это за модуль &quot;StackHash_0a9e&quot; такой, в смысле что это значит...<img src="img/smilies/s1.gif" alt=""><br>Вы мне случайно не на <I>&quot;предотвращение выполнения данных (DEP)&quot;</I> намекаете?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399149&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=12" class="addthx" data-post="399149"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 18:47 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
намекаю, чтобы вы показали в каком именно месте происходит крэш<br>библиотека CLCreator, процедура (char __stdcall) GetCommandString??<br>приаттачится и показать/скопипастить код, который вызывает ntdll и стек вызовов<br><br>в GetCommandString не так много участков кода которые чистят регионы, но это не то:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;memset<span class="hl_char">(</span>Dst<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>&nbsp;Size<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;memset<span class="hl_char">(</span>a3<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>&nbsp;a4<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;v4&nbsp;<span class="hl_char">=</span>&nbsp;CreateFileW<span class="hl_char">(</span><span class="hl_quote">L&quot;AuthorizationMessages.txt&quot;</span><span class="hl_char">,</span>&nbsp;0x81u<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>&nbsp;3u<span class="hl_char">,</span>&nbsp;1u<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l0">LABEL_18<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;v39&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;v40&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">15</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;LOBYTE<span class="hl_char">(</span>Buf<span class="hl_char">)</span>&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;memove_x<span class="hl_char">(</span><span class="hl_char">&amp;</span>Buf<span class="hl_char">,</span>&nbsp;<span class="hl_char">&amp;</span>v42<span class="hl_char">,</span>&nbsp;strlen<span class="hl_char">(</span><span class="hl_char">&amp;</span>v42<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l0">&nbsp;&nbsp;strcpy_s<span class="hl_char">(</span><span class="hl_char">*</span><span class="hl_char">(</span><span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_char">&amp;</span>name<span class="hl_char">.</span>sa_data<span class="hl_char">[</span><span class="hl_number">2</span><span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;v13<span class="hl_char">,</span>&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>const</b></span>&nbsp;<span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span><span class="hl_char">)</span>NumberOfBytesRead<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399151&amp;user=26651&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=13" class="addthx" data-post="399151"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2019 19:36 &middot; Поправил: AE <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
В общем, после беседы с вами, я решил еще раз перепроверить МБоксами свою функцию(естественно без ZeroMemory) - все пишется, все работает до последнего Рет (в смысле функ отрабатывает целиком)....<br><br>Приатачившись на ошибке стек вызовов нас отправляет к WaitForMultipleObjectsEx (NtWaitForMultipleObjects)...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399152&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=14" class="addthx" data-post="399152"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]Alchemistry[/b]','')">Alchemistry</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 145.8 (ветеран), 190thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.05'>Активность: 0.14<span style='color:green'>&nearr;</span>0.36</span><br>Статус: <a href="action=userinfo&amp;user=21411">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2019 19:04 <br><script type="text/javascript">QU('Alchemistry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Alchemistry" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<b>AE</b><br>Ты столько понаписал в теме, но даже не удосужился показать стек вызовов на момент краша. Твой мегакодес очевидно запорол либо стек либо кучу, либо все вместе. Либо виновато текущее окружение твоей ОС.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399169&amp;user=21411&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=15" class="addthx" data-post="399169"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 337.5 (мудрец), 348thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2019 21:48 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
Это ведь самая простая ошибка(#AV) из возможных. Если бы была ошибка по синхронизации, то в таком случае причину довольно сложно найти. Но в этом случае разбор исключения столь прост, что даже нет смысла это обсуждать. ТС бери инфу про фаулт(EXCEPTION_RECORD+CONTEXT) и разбирай логическую цепь. Сделай это сам.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399170&amp;user=40990&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=16" class="addthx" data-post="399170"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2019 23:00 &middot; Поправил: AE <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
<I>Alchemistry пишет:Твой мегакодес очевидно запорол либо стек либо кучу, либо все вместе. </I><br>- Стек, на момент выхода из моего участка, настолько непорочен, что даже представить себе <strike>сложно</strike> нужно, что это так!<br>- Куча? Я, не использую кучу напрямую, только через STL...<br>- Про CallStack я писал, думал достаточно, завтра пруфы выложу <br>- Почему под Админом никакой херни нету???<br><br><I>difexacaw пишет:<br>Если бы была ошибка по синхронизации, то в таком случае причину довольно сложно найти. </I><br>....в общем, завтра скрины выложу...<br><I>Поток попытался прочитать или записать виртуальный адрес, для которого у него нет соответствующего доступа.</I> По моему именно это и происходит...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399173&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=17" class="addthx" data-post="399173"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 221thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 00:38 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
<I>AE пишет:<br> Имя модуля с ошибкой:    StackHash_0a9e<br>  Версия модуля с ошибкой: 0.0.0.0<br>  Отметка времени модуля с ошибкой: 00000000<br>  Смещение исключения:     6465656e<br>  Код исключения: c0000005<br>  Данные исключения:       00000008 </I><br><br>Без ZeroMemory в секции мусор и каким-то образом передаётся управление по адресу 0x6465656e. А такой секции нет, об этом говорят данные исключения: 8. Если заметить, 0x6465656e напоминает часть какой-то ASCII-строки - &quot;need&quot;. Подумай, откуда это.
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399179&amp;user=24257&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=18" class="addthx" data-post="399179"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]Alchemistry[/b]','')">Alchemistry</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 145.8 (ветеран), 190thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.05'>Активность: 0.14<span style='color:green'>&nearr;</span>0.36</span><br>Статус: <a href="action=userinfo&amp;user=21411">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 06:40 <br><script type="text/javascript">QU('Alchemistry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Alchemistry" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
<I>AE пишет:<br>- Стек, на момент выхода из моего участка, настолько непорочен, что даже представить себе сложно нужно, что это так! </I><br>Так покажи его полностью. Что ты скрываешь? Тема - гадание на кофейной гуще.<br><br><I>AE пишет:<br>- Почему под Админом никакой херни нету??? </I><br><br>Потому что под админом у тебя ВНЕЗАПНО другое окружение. Простой пример - под админом в АП твоей программы может не быть некоего стороннего кода, который просто туда не может попасть из-за разграничения прав. Это настолько элементарно, что у меня возникли серьезные вопросы зачем ты полез куда-то со своим патчем не имея даже базовых знаний об отладке и ОС?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399180&amp;user=21411&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=19" class="addthx" data-post="399180"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 09:30 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
<I>DenCoder пишет:<br>Без ZeroMemory в секции мусор </I>, если бы просто мусор, проблемы бы не было, мусор и мусор.... я наверное <b>&quot;что-то важное&quot;</b> затираю....<img src="img/smilies/s6.gif" alt=""> я думал об этом в первую очередь, с толку сбивало различие в поведении при предоставлении прав.... <b>Alchemistry</b> пишет, что запросто, надо проверить<br>ZeroMemory не дает использовать... для меня, например, это тот еще вопрос: почему записать туда я могу а просто обнулить нет?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399182&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=20" class="addthx" data-post="399182"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 10:58 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
<b>AE</b><br>Назовите хотя бы одну вразумительную причину, почему Вы до сих пор не скопипастили стек после вызовов (его скриншот) при возникновении исключения?? Дальнейшее обсуждение темы без тех данных бессмысленно, топик - кандидат на закрытие.<br><br>Если последний вызов перед фолтом где-то в библиотеке CLCreator, то в каком месте - разберитесь для начала с этим, а потом задавайте вопросы.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399184&amp;user=26651&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=21" class="addthx" data-post="399184"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=33766" title="20-10-2019 08:36, ранг:53.9" target="_blank">BlackCode</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]ClockMan[/b]','')">ClockMan</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/17432.jpg" alt=""><br><span class=txtSm>Ранг: 568.2 (<b>!</b>), 464thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.99'>Активность: 0.55<span style='color:green'>&nearr;</span>0.57</span><br>Статус: <a href="action=userinfo&amp;user=17432">Участник</a><br><font color=blue>оптимист</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 12:17 <br><script type="text/javascript">QU('ClockMan','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ClockMan" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
<b>AE</b><br>Засунь код в обработчик исключений и чекай ошибку
<br><br><font size="1"><i>-----<br>Чтобы правильно задать вопрос, нужно знать большую часть  ответа. Р.Шекли.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399185&amp;user=17432&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=22" class="addthx" data-post="399185"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 12:22 &middot; Поправил: AE <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
<I>ELF_7719116 пишет:<br>Назовите хотя бы одну вразумительную причину, почему Вы до сих пор не скопипастили стек после вызовов </I><br>Ночью - спал, утром - дома не было (есть свидетели).<br><br><b>Первый вариант</b><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">bool&nbsp;__stdcall&nbsp;GetCommandString<span class="hl_char">(</span>_Out_&nbsp;<span class="hl_function">void</span><span class="hl_char">*</span>&nbsp;ASCIILine<span class="hl_char">,</span>&nbsp;size_t&nbsp;ASCIISize<span class="hl_char">,</span>&nbsp;_Out_&nbsp;<span class="hl_function">void</span><span class="hl_char">*</span>&nbsp;UnicodeLine<span class="hl_char">,</span>&nbsp;size_t&nbsp;UnicodeSize<span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset<span class="hl_char">(</span>ASCIILine<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>&nbsp;ASCIISize<span class="hl_char">)</span><span class="hl_comment">; -&gt; приводит к ошибке</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBox<span class="hl_char">(</span><span class="hl_function">NULL</span><span class="hl_char">,</span>&nbsp;<span class="hl_quote">L&quot;memset&quot;</span><span class="hl_char">,</span>&nbsp;<span class="hl_quote">L&quot;&quot;</span><span class="hl_char">,</span>&nbsp;MB_OK<span class="hl_char">)</span><span class="hl_comment">; не высвечивается</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset<span class="hl_char">(</span>UnicodeLine<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>&nbsp;UnicodeSize<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<span class="hl_function"><b>true</b></span><span class="hl_comment">;</span></li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">Сигнатура&nbsp;проблемы<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;Имя&nbsp;события&nbsp;проблемы<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;APPCRASH</li><li class="hl_l0">&nbsp;&nbsp;Имя&nbsp;приложения<span class="hl_char">:</span>&nbsp;EVPCastle<span class="hl_char">.</span>exe</li><li class="hl_l1">&nbsp;&nbsp;Версия&nbsp;приложения<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">12</span><span class="hl_char">.</span><span class="hl_number">1361</span><span class="hl_char">.</span><span class="hl_number">46670</span></li><li class="hl_l0">&nbsp;&nbsp;Отметка&nbsp;времени&nbsp;приложения<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">5a312448</span></li><li class="hl_l1">&nbsp;&nbsp;Имя&nbsp;модуля&nbsp;с&nbsp;ошибкой<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;ntdll<span class="hl_char">.</span>dll</li><li class="hl_l0">&nbsp;&nbsp;Версия&nbsp;модуля&nbsp;с&nbsp;ошибкой<span class="hl_char">:</span>&nbsp;<span class="hl_number">6</span><span class="hl_char">.</span><span class="hl_number">1</span><span class="hl_char">.</span><span class="hl_number">7601</span><span class="hl_char">.</span><span class="hl_number">24475</span></li><li class="hl_l1">&nbsp;&nbsp;Отметка&nbsp;времени&nbsp;модуля&nbsp;с&nbsp;ошибкой<span class="hl_char">:</span>&nbsp;<span class="hl_number">5cdd7f6d</span></li><li class="hl_l0">&nbsp;&nbsp;Код&nbsp;исключения<span class="hl_char">:</span>&nbsp;c0000005</li><li class="hl_l1">&nbsp;&nbsp;Смещение&nbsp;исключения<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">00033497</span></li><li class="hl_l0">&nbsp;&nbsp;Версия&nbsp;ОС<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">6</span><span class="hl_char">.</span><span class="hl_number">1</span><span class="hl_char">.</span><span class="hl_number">7601</span><span class="hl_char">.</span><span class="hl_number">2</span><span class="hl_char">.</span><span class="hl_number">1</span><span class="hl_char">.</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">256</span><span class="hl_char">.</span><span class="hl_number">1</span></li><li class="hl_l1">&nbsp;&nbsp;Код&nbsp;языка<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">1049</span></li><li class="hl_l0">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">1</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e</span></li><li class="hl_l1">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">2</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e372d3b4ad19135b953a78882e789</span></li><li class="hl_l0">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">3</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e</span></li><li class="hl_l1">&nbsp;&nbsp;Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">4</span><span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0a9e372d3b4ad19135b953a78882e789</span></li>        </ol>
    </div>
</div></div>
<br><b>CallStack</b><br><img src="https://sun9-69.userapi.com/c850624/v850624721/1ecd75/MemrjOcq18I.jpg" border="0" align="" alt=""><br><br><b>Второй вариант</b><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">bool&nbsp;__stdcall&nbsp;GetCommandString<span class="hl_char">(</span>_Out_&nbsp;<span class="hl_function">void</span><span class="hl_char">*</span>&nbsp;ASCIILine<span class="hl_char">,</span>&nbsp;size_t&nbsp;ASCIISize<span class="hl_char">,</span>&nbsp;_Out_&nbsp;<span class="hl_function">void</span><span class="hl_char">*</span>&nbsp;UnicodeLine<span class="hl_char">,</span>&nbsp;size_t&nbsp;UnicodeSize<span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">*</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset<span class="hl_char">(</span>ASCIILine<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>&nbsp;ASCIISize<span class="hl_char">)</span><span class="hl_comment">; </span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset<span class="hl_char">(</span>UnicodeLine<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>&nbsp;UnicodeSize<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBox<span class="hl_char">(</span><span class="hl_function">NULL</span><span class="hl_char">,</span>&nbsp;<span class="hl_quote">L&quot;Funk End&quot;</span><span class="hl_char">,</span>&nbsp;<span class="hl_quote">L&quot;&quot;</span><span class="hl_char">,</span>&nbsp;MB_OK<span class="hl_char">)</span><span class="hl_comment">; Выводится</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<span class="hl_function"><b>true</b></span><span class="hl_comment">;</span></li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">Сигнатура&nbsp;проблемы&nbsp;<span class="hl_char">:</span></li><li class="hl_l1">Имя&nbsp;события&nbsp;проблемы&nbsp;<span class="hl_char">:</span>&nbsp;BEX</li><li class="hl_l0">Имя&nbsp;приложения&nbsp;<span class="hl_char">:</span>&nbsp;EVPCastle<span class="hl_char">.</span>exe</li><li class="hl_l1">Версия&nbsp;приложения&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">12</span><span class="hl_char">.</span><span class="hl_number">1361</span><span class="hl_char">.</span><span class="hl_number">46670</span></li><li class="hl_l0">Отметка&nbsp;времени&nbsp;приложения&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">5a312448</span></li><li class="hl_l1">Имя&nbsp;модуля&nbsp;с&nbsp;ошибкой&nbsp;<span class="hl_char">:</span>&nbsp;StackHash_0a9e</li><li class="hl_l0">Версия&nbsp;модуля&nbsp;с&nbsp;ошибкой&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">0</span></li><li class="hl_l1">Отметка&nbsp;времени&nbsp;модуля&nbsp;с&nbsp;ошибкой&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">00000000</span></li><li class="hl_l0">Смещение&nbsp;исключения&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">6465656e</span></li><li class="hl_l1">Код&nbsp;исключения&nbsp;<span class="hl_char">:</span>&nbsp;c0000005</li><li class="hl_l0">Данные&nbsp;исключения&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">00000008</span></li><li class="hl_l1">Версия&nbsp;ОС&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">6</span><span class="hl_char">.</span><span class="hl_number">1</span><span class="hl_char">.</span><span class="hl_number">7601</span><span class="hl_char">.</span><span class="hl_number">2</span><span class="hl_char">.</span><span class="hl_number">1</span><span class="hl_char">.</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">256</span><span class="hl_char">.</span><span class="hl_number">1</span></li><li class="hl_l0">Код&nbsp;языка&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">1049</span></li><li class="hl_l1">Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">1</span>&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">0a9e</span></li><li class="hl_l0">Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">2</span>&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">0a9e372d3b4ad19135b953a78882e789</span></li><li class="hl_l1">Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">3</span>&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">0a9e</span></li><li class="hl_l0">Дополнительные&nbsp;сведения&nbsp;<span class="hl_number">4</span>&nbsp;<span class="hl_char">:</span>&nbsp;<span class="hl_number">0a9e372d3b4ad19135b953a78882e789</span></li>        </ol>
    </div>
</div></div>
<br><b>CallStack</b><br><img src="https://sun9-40.userapi.com/c850624/v850624721/1ecd7f/wbL7pwhsHpw.jpg" border="0" align="" alt=""><br><br><b>Добавлено спустя 5 минут</b><br><I>ClockMan пишет:<br>Засунь код в обработчик исключений и чекай ошибку </I><br>Попробую, мб чудо случится...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399186&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=23" class="addthx" data-post="399186"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]ClockMan[/b]','')">ClockMan</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/17432.jpg" alt=""><br><span class=txtSm>Ранг: 568.2 (<b>!</b>), 464thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.99'>Активность: 0.55<span style='color:green'>&nearr;</span>0.57</span><br>Статус: <a href="action=userinfo&amp;user=17432">Участник</a><br><font color=blue>оптимист</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 12:37 <br><script type="text/javascript">QU('ClockMan','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ClockMan" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
<I>AE пишет:<br>memset(ASCIILine, 0, ASCIISize); -&gt; приводит к ошибке </I><br>вопрос к <b>ASCIILine</b> указатель на строку где находится? скрин строки памяти со всеми атребутами, есть ли по тому адресу сама строка, может её там ещё нет?))
<br><br><font size="1"><i>-----<br>Чтобы правильно задать вопрос, нужно знать большую часть  ответа. Р.Шекли.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399187&amp;user=17432&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=24" class="addthx" data-post="399187"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 221thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 13:40 &middot; Поправил: DenCoder <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#25');return false;">#25</a> </span><div align=left><br>
<b>AE</b><br>На скринах WaitForMultipleObjects() относится к обработчику твоего краха. Да и к тому же это в треде, который не относится к ошибке доступа... Из стека треда, в котором произошло исключение, надо вылавливать EXCEPTION_POINTERS...<br><br>В 7ке не знаю, как включить более подробный отчёт. Но лучше всего сделать, как сказал <b>Clockman</b>:<br><I>ClockMan пишет:<br>Засунь код в обработчик исключений и чекай ошибку  </I><br>Это try-catch<br><br>Проверь адрес и размер.<br><br><I>AE пишет:<br>bool __stdcall GetCommandString(_Out_ void* ASCIILine, size_t ASCIISize, _Out_ void* UnicodeLine, size_t UnicodeSize) </I><br>Количество аргументов точно 4? Точно __stdcall?
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399189&amp;user=24257&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=25" class="addthx" data-post="399189"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 18:49 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#26');return false;">#26</a> </span><div align=left><br>
<I>DenCoder пишет:<br>Засунь код в обработчик исключений и чекай ошибку </I> херамба, а не ошибка....<br>Проверенные ексепшены:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_char">-</span>&nbsp;<span class="hl_function">std</span><span class="hl_char">:</span><span class="hl_char">:</span>exception</li><li class="hl_l1"><span class="hl_char">-</span>&nbsp;<span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span></li><li class="hl_l0"><span class="hl_char">-</span>&nbsp;<span class="hl_function">int</span></li><li class="hl_l1"><span class="hl_char">-</span>&nbsp;<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li>        </ol>
    </div>
</div></div>
<br>Может пропустил какое?<br><br>Надо по другому попробовать....<br><br><I>AE пишет:<br>Попробую, мб чудо случится... </I> <br>не срослось с чудом кароче <img src="img/smilies/s5.gif" alt=""> <img src="img/smilies/s5.gif" alt=""> <img src="img/smilies/s5.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399193&amp;user=51133&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=26" class="addthx" data-post="399193"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 20:32 &middot; Поправил: ELF_7719116 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#27');return false;">#27</a> </span><div align=left><br>
<I>AE пишет:<br>memset(ASCIILine, 0, ASCIISize); -&gt; приводит к ошибке </I><br>ORLY? В таком случае, оно бы и у меня воспроизводилось,  и наверняка, в отладчике. Указатели в кучу смотрели, насколько помню. С таким же успехом оно могло и в загрузчике exe крашиться.<br>Если там что-то в стеке и затирается, то, наиболее вероятно, при получении данных по сокету. Внизу, был цикл, который из recv в буфер байты тащит.<br> Сделайте уже, пожалуйста, switch на главный поток и покажите стек вызовов. WaitForMultipleObjects принадлежит отладочному потоку.<br><br><I>bartolomeo пишет:<br>почему самому не выделить память то ?) </I><br>... встеке. petrosyan.jpg <br>Она из heap в загрузчике у него выделялась, но это не точно. <br>Проблема в том, что:<br>а) краш воспроизводится только у ТС<br>б) ТС не нашел до сих пор примерное место, где возникает краш. Это может быть, как и криво реализованный лоадер в точке входа <b>exe</b>, так и при вызове процедуры <b>dll</b>ки из него.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399196&amp;user=26651&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=27" class="addthx" data-post="399196"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]bartolomeo[/b]','')">bartolomeo</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 42.8 (посетитель), 16thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.87'>Активность: 0.02<span style='color:green'>&nearr;</span>0.06</span><br>Статус: <a href="action=userinfo&amp;user=26261">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2019 20:32 &middot; Поправил: bartolomeo <br><script type="text/javascript">QU('bartolomeo','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=bartolomeo" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#28');return false;">#28</a> </span><div align=left><br>
а почему самому не выделить память то ?)<br><br>ещё вариант поставить железный бряк на память которую затираешь - и увидеть кто ещё в том кусочке памяти хранит свои потроха.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399197&amp;user=26261&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=28" class="addthx" data-post="399197"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]SReg[/b]','')">SReg</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 315.1 (мудрец), 631thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.78'>Активность: 0.3<span style='color:green'>&nearr;</span>0.33</span><br>Статус: <a href="action=userinfo&amp;user=18316">Модератор</a><br><font color=blue>CrackLab</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 октября 2019 02:22 <br><script type="text/javascript">QU('SReg','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SReg" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=26133.html&amp;page=0#29');return false;">#29</a> </span><div align=left><br>
<b>AE</b><br>Это не форум гадалок, я тебе 3 дня назад это сообщил. Как соизволишь показать тестовый файл, чтобы воспроизвести твою проблему, напишешь и открою.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399201&amp;user=18316&amp;forum_n=2&amp;topic=26133.html&amp;page=0&amp;anchor=29" class="addthx" data-post="399201"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/red.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=2&sortBy=0&page=0.html"><b>Крэки, обсуждения</b></a> <b class=bulletHead>&#8212;&#8250;</b> Ошибка BEX (APPCRASH)</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=26133" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
