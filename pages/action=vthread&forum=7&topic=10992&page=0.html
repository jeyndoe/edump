<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Plugin/ScriptIDA&amp;etc... - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Вот решил создать тему %) появилось немного времени.. Писать че-нить здесь буду, мож кому пригодиццо Мож кто истЕну для себя найдет А мож на свете парочка писсдатых кодеров появиццо  И так основной контекст – это обсуждение IDA и">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=28016'>asfa</a>, <a target='_blank' href='?action=userinfo&amp;user=1533'>rmn</a> (+4 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/mod.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=7&sortBy=0&page=0.html"><b>Оффтоп</b></a> <b class=bulletHead>&#8212;&#8250;</b> Plugin/ScriptIDA&amp;etc...</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 января 2008 03:56 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Вот решил создать тему %) появилось немного времени..<br>Писать че-нить здесь буду, мож кому пригодиццо<br>Мож кто истЕну для себя найдет<br>А мож на свете парочка писсдатых кодеров появиццо <br><br>И так основной контекст – это обсуждение IDA и все что с ней связано(косвенно заденем все что шевелиццо и движеццо); скрипты, плагины, etc.. вернее о их написании и зачем это нужно<br>IDA - это второй инструмент для реверсера и каждый обязан(!) знать немного больше, чем знает на данный момент<br>Разговаривать будем на ASM(MASM&amp;FASM дополняющий)/C++(VS основной) ЯП(Язык Программирования)<br>Ну и в качестве примеров жертвы как всегда будут &quot;протекторы&quot;<br><br>Начну с вопроса к ахрененнным спецам по С++<br>С++ с бинарной системой счисления работает, скромно говоря вообще ужснахникак<br>Копипаст кода из PSDK IDA(кстати хорошо придуман этот код - показывает сущность беспомощности С++, вернее вот этих шаблонов и классов; типа чем больше ты напишешь скобочек, крючечков и запятых, тем круче будешь, ведь твой исходник больше чем у других и в нем пиздастее мусор)<br>// rotate left<br>#ifdef __cplusplus<br>template&lt;class T&gt; T qrotl(T value, size_t count)<br>{<br>  const size_t nbits = sizeof(T) * 8;<br>  count %= nbits;<br><br>  T high = value &gt;&gt; (nbits - count);<br>  value &lt;&lt;= count;<br>  value |= high;<br>  return value;<br>}<br><br>// rotate right<br>template&lt;class T&gt; T qrotr(T value, size_t count)<br>{<br>  const size_t nbits = sizeof(T) * 8;<br>  count %= nbits;<br><br>  T low = value &lt;&lt; (nbits - count);<br>  value &gt;&gt;= count;<br>  value |= low;<br>  return value;<br>}<br>#endif<br><br>Так на С++ выглядят ror и rol по мнению Ильфака<br>Собственно вопрос можно ли покороче и  покрасившэ (естественно без асм вставок, чич-то на С++(этож типа самый кошерный ЯП%) ))<br>А так выглядит этот код в Оле Дебаговне(вид этого кода зависит от выставленных галочек(опций) компилятора)<br>ЖЕСТЬ<br>/* qrotl - rol */<br>0040101A  AND DWORD PTR SS:[ESP+8],1F<br>0040101F  MOV EDX,DWORD PTR SS:[ESP+4]<br>00401023  PUSH 20<br>00401025  POP ECX<br>00401026  SUB ECX,DWORD PTR SS:[ESP+8]<br>0040102A  MOV EAX,EDX<br>0040102C  SAR EAX,CL<br>0040102E  MOV ECX,DWORD PTR SS:[ESP+8]<br>00401032  SHL EDX,CL<br>00401034  OR EAX,EDX<br>00401036  RETN 8<br><br>/* qrotr- ror */<br>00401039  AND DWORD PTR SS:[ESP+8],1F<br>0040103E  MOV EDX,DWORD PTR SS:[ESP+4]<br>00401042  PUSH 20<br>00401044  POP ECX<br>00401045  SUB ECX,DWORD PTR SS:[ESP+8]<br>00401049  MOV EAX,EDX<br>0040104B  SHL EAX,CL<br>0040104D  MOV ECX,DWORD PTR SS:[ESP+8]<br>00401051  SAR EDX,CL<br>00401053  OR EAX,EDX<br>00401055  RETN 8<br><br>P. S.<br>плз. пишите гламурно и интересно<br>!!!посты с двумя словами не приветствуюццо!!!<br>если вдруг кто-то захочет посраццо (ну посты типа ты не асилишь) плз. создайте другую тему в этом подфоруме для обсуждения, если будет время и желание я всегда готов почмырить кого-нить…<br>кстати священных войн, какой ЯВУ пиздастее другого – тоже не надо, но реальные фактЫ для обоснования мнения почему надодумать так, а не по-другому !!!всегда приветствуюццо!!!<br>если у кого-нить есть свои наработки по сабжу(скрипты, плагины(ссылки или аттачи приветствуюццо)) – не стесняемся и выкладываем здесь для обсуждения ...<br>По-возможности, старайтесь не мусорить в топике (плз.)
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=176914&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=1" class="addthx" data-post="176914"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 января 2008 06:17 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
И так продолжим... (проект будет большой(!) дайте нам силы и истЕны асилить)<br>Сегодня обозначим единый стандарт, по которому будем вступать и компилировать %)<br>[comment]это нужно чтобы общество не ссало мимотазика[/comment]<br><br>Пока это простой пример, чтобы понять суть происходящего и обратить внимание на новые(о ужснах) возможности в SDK IDA<br>Что НАМ для этого нужно !!!обязательно!!!<br>1. DDK<br>версия принципиального значения не имеет, (но как всегда)но... (по умолчанию будет 3790)<br>2. само PSDK IDA<br>Если кто качал IDA с этого сайта, то рекомендую в обязательном порядке слить вот этот архив<br><a href="http://rapidshare.com/files/73981602/DataRescue.IDA.Pro.Advanced.v5.2.SDK-YAG.rar" target="_new">http://rapidshare.com/files/73981602/DataRescue.IDA.Pro.Advanced.v5.2. SDK-YAG.rar</a> (3,98 MB)<br>[comment]это не ссылка на варез! – эти файлы просто(необходимы) нужны для написания плагинов для IDA[/comment]<br>3. Microsoft Platform SDK for Windows XP SP2<br>4. Warning [Этот вариант компиляции выбран не случайно]<br>Те кто на танке давно, могут позволить себе танцевать с бубном;) как им нравиццо(принципиального значения это не имеет)<br>Для любителей &quot;ООП&quot; в обязательном порядке читать &quot;статью&quot; <b>northdemon</b> (ну и расплодилось же этих демонов%) )<br><a href="http://exelab.ru/art/action=view&amp;id=431" target="_new">http://exelab.ru/art/action=view&amp;id=431</a><br><br>На данный момент я опешу только сущность файлов управляющих компиляцией (внутренности основного проекта потом по мере необходимости)<br>Компилировать будем пример из SDK ИДЫ (yagidps\plugins\subwindow)<br>По этой ссылке кому нужно может скачать все необходимые файлы<br>Надо только будет пути к директориям DDK/SDK свои прописать;)<br><a href="http://demonteam.narod.ru/download/example.rar" target="_new">http://demonteam.narod.ru/download/example.rar</a> (34KB)<br><br>Содержимое архива <br>make.bat<br>makefile<br>sources<br>subwindow.cpp<br>subwindow.def<br>и из SDK ИДЫ libvc.w32\ida.lib<br><br>Первый файл как завещал великий ахтунг Microsoft(должен быть всегда и везде)<br>короче мусор, но надо %)<br><b>makefile</b><br># ////////////////////////////////////////////////////////////////////// ///////<br>#<br># DO NOT EDIT THIS FILE!!!  Edit .\sources. if you want to add a new source<br># file to this component.  This file merely indirects to the real make file<br># that is shared by all the driver components of the Windows NT DDK<br>#<br>!INCLUDE &#036;(NTMAKEENV)\makefile.def<br># ////////////////////////////////////////////////////////////////////// ///////<br><br>второй файл<br>этот файл нужен, при запуске которого МЫ вступаем и компилируем<br><b>make.bat</b><br>rem ////////////////////////////////////////////////////////////////////// ///////<br>rem C:\WINDDK\3790 – соответственно директория и версия DDK ваши<br>rem C:\CODE\IDA\subwindow – директория в которой лежат файлы предназначенные для компиляции<br>%SystemRoot%\system32\cmd.exe /c &quot;cd C:\WINDDK\3790\bin\&amp;&amp;setenv.bat C:\WINDDK\3790 free W2K &amp;&amp;cd C:\CODE\IDA\subwindow&amp;&amp;build -ecZ&quot;<br>rem эти две строчки нужны для удаления срача оставленного компилятором<br>rem но если ВЫ в первый раз, то лучше закомментите их от греха подальше<br>RMDIR /s /q C:\CODE\IDA\subwindow\objfre_w2K_x86<br>DEL /s /q C:\CODE\IDA\subwindow\buildfre_w2K_x86.log<br>rem копипастим в директорию с плагинами для ИДЫ и меняем расширение файла subwindow.dll на *.plw и все, плагин готов<br>XCOPY C:\CODE\IDA\subwindow\i386\subwindow.dll C:\Progra~1\IDA\plugins\subwindow.plw /Y<br>pause<br>rem ////////////////////////////////////////////////////////////////////// ///////<br>[comment]после того как появиццо консолька, щелкните на заголовке окна ПКМ и выберете в появившемся контекстном меню, пункт <b>свойства</b> и настройте в появившемся диалоге это окно как вам хочеццо и будет удобнее[/comment]<br><br>третий файл<br>основной и самый нужный<br><b>sources</b><br># ////////////////////////////////////////////////////////////////////// ///////<br>#подробное описание всего этого есть в SDK/DDK#<br># ////////////////////////////////////////////////////////////////////// ///////<br># имя файла, получаемое на выходе(имя файла с расширением *.def должен быть идентично этому имени!) #<br>TARGETNAME=subwindow<br># символ &quot;.&quot; указывает на текущую директорию где появиццо папка i386 и скомпилированный файл(subwindow.dll) в ней #<br>TARGETPATH=.<br># на выходе должен быть *.dll(DYNLINK - указывает компилятору скомпилировать *.dll) #<br>TARGETTYPE=DYNLINK<br><br>INCLUDES=C:\CODE\IDA\SDK\include; C:\WINDDK\Microsoft Platform SDK for Windows XP SP2\Include<br>TARGETLIBS=C:\CODE\IDA\SDK\libvc.w32\ida.lib <br>&#036;(SDK_LIB_PATH)\user32.lib<br><br># это опции передаваемые компилятору чтобы на выходе получить файл &quot;без мусора и не только&quot; #<br>X86_CPU_OPTIMIZATION=/Oxsg<br><br>USE_MSVCRT=1<br>USE_NATIVE_EH=1<br><br># нужно для IDA #<br>C_DEFINES=-D__NT__ -D__IDP__ <br><br># исходники которые должны быть скомпелированы #<br>SOURCES=subwindow.cpp<br># все это пока по минимуму #<br># ////////////////////////////////////////////////////////////////////// ///////<br><br>четвертый файл<br>тоже нужен &quot;для коррекции имен экспортируемых данных&quot;, но тоже мусор – короче чтобы компиль тупо не тупил %)<br>пока в нем всего буржуйских два слова<br><b>subwindow.def</b><br>EXPORTS<br>PLUGIN<br><br>Для экспериментов с плагином нужно отдизасмить простенький файлик типа с кодом в несколько строчек и им пользоваццо<br>потому как ИДА не подгружает плагины, если не открыть че-нить в ней<br>!!!ВНИМАНИЕ - никогда не открывайте в ИДЕ важных для вас файлов, из-за маленькой ошибки в плагине вы можете убить базу ИДЫ безвозвратно!!!<br>самый быстрый путь к отладке в олечке в случае, когда потребуеццо найти багу в плагине:<br>запускаем ИДУ, открываем в ней тестовый файлик и аттачимся к процессу ИДЫ олькой<br>олечка может ругаццо все зависит от ее настроек(обычно в появляющихся месаджах тупо жмем <b>OK</b>, но если их будет слишком много потанцуйте с настройками олечки)<br>приаттачились? Жмем F9 и вызываем Memory map(Alt+M), ищем там наш плагин и переходим оттуда на наш код плагина, далее по обстоятельствам<br>еще может возникнуть ситуация когда ИДА будет падать не успев запустиццо из-за плагина, но мне лениво описывать такие варианты, будем считать что мы код пишем всегда правильно и отладка нам не нужна %))<br><br>и так запускаем <b>make.bat</b> <br>видим что все ОК, запускаем ИДУ, открываем в ней тестовый файлик и лезем по меню до.. (Edit-&gt;Plugins-&gt;Create IDA subwindow)<br>результат всего этого вас улыбнет, но это будет в качестве домашнего задания, чич-то поржать %)<br>[comment]<br>весь этот ананизм Ильфака вызван из-за юзанья ООП борланда, если бы писал GUI на чистом API, было бы куда проще и не нужны были бы эти убогие функи в SDK для создания своих окон<br>достаточно было бы сделать структуру, заполнить ее хендлами фейса и передать ее через PDK инициализации как это сделано в WinAsm<br>[/comment]<br>ВЫ еще не скомпилировали? – тогда МЫ идем к вам©<br><br>P. S.<br>Ну вот МЫ немного(совсем чуть-чуть) приблизились к опенсорсному плагину, функционал которого пока приватный...<br>И с нуля будем шариДь в(о ужснах)  C++<br>Те, КТО не научиццо вступать и компилировать, заюзать плагин не смогут;)<br><br>ЗЫ: могу где-нить ошибиццо, сильно не проверял, но камни в огород по этому поводу приветствуеццо!
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177022&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=2" class="addthx" data-post="177022"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]__[/b]','')">__</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 115.1 (ветеран), 3thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.73'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=7172">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 января 2008 12:29 <br><script type="text/javascript">QU('__','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=__" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<I>Demon666 пишет:<br>Так на С++ выглядят ror и rol по мнению Ильфака <br>Собственно вопрос можно ли покороче и покрасившэ (естественно без асм вставок, чич-то на С++(этож типа самый кошерный ЯП%) )) </I><br><br>#define ROL(X,N)      (((X)&lt;&lt;(N))|((X)&gt;&gt;(8*sizeof(X)-(N))))<br>#define ROR(X,N)      (((X)&gt;&gt;(N))|((X)&lt;&lt;(8*sizeof(X)-(N))))
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=177045&amp;user=7172&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=3" class="addthx" data-post="177045"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]cppasm[/b]','')">cppasm</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 251.3 (наставник), 81thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.77'>Активность: 0.14<span style='color:red'>&searr;</span>0.11</span><br>Статус: <a href="action=userinfo&amp;user=6859">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 января 2008 14:59 &middot; Поправил: cppasm <br><script type="text/javascript">QU('cppasm','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=cppasm" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
Не катит.<br>Для знаковых типов ROR будет работать неправильно.<br><br>[-=Добавлено=-]<br>Вот набросал проверочный код, какой результат правильный смотри сам...<br><br>#include&lt;stdio.h&gt;<br><br>#define ROL(X,N) (((X)&lt;&lt;(N))|((X)&gt;&gt;(8*sizeof(X)-(N)))) <br>#define ROR(X,N) (((X)&gt;&gt;(N))|((X)&lt;&lt;(8*sizeof(X)-(N))))<br><br>int __declspec(naked) ror(int var,int num)<br>{<br>	__asm{<br>		push	ebp<br>		mov	ebp,esp<br>		mov	eax,var<br>		mov	ecx,num<br>		ror	eax,cl<br>		pop	ebp<br>		ret<br>	}<br>}<br><br>void main(void)<br>{<br>	int x=0x80000000;<br>	printf(&quot;ASM_FN=%08X -&gt; MACRO=%08X\n&quot;,ror(x,1),ROR(x,1));<br>}<br><br>Поимели:<br>ASM_FN=40000000 -&gt; MACRO=C0000000<br><br>В макросе надо первый аргумент к беззнаковому типу приводить, например к unsigned int.<br><br>#define ROL(X,N) ((((unsigned)X)&lt;&lt;(N))|(((unsigned)X)&gt;&gt;(8*sizeof(X)-(N)))) <br>#define ROR(X,N) ((((unsigned)X)&gt;&gt;(N))|(((unsigned)X)&lt;&lt;(8*sizeof(X)-(N))))
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=177065&amp;user=6859&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=4" class="addthx" data-post="177065"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 13 января 2008 04:23 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>__ пишет:<br>#define ROL(X,N) (((X)&lt;&lt;(N))|((X)&gt;&gt;(8*sizeof(X)-(N)))) <br>#define ROR(X,N) (((X)&gt;&gt;(N))|((X)&lt;&lt;(8*sizeof(X)-(N)))) </I><br>При перемене мест скобочек, крючечков и запятых - код практически не меняеццо;)<br>И твои макро в нашем случае не решают поставленную задачу, при использовании таких ключей оптимизации кода(/Oxs)<br>хз. Может ему какой спец.ключик нужен чтобы компиль понимал твой код и сгенерил этот злащастный ror или rol<br>[postfix]Просьба в топике не придераццо конкретно к словам/ошибкам в словах(к коду естественно надо(красивый код всегда приветствуеццо)), важно понять суть обсуждения[/postfix]<br>Компилятор генерит вот такой код: (с оптимизацией)<br>//////////////////////////////////////////////////////////////<br>#define ROR(X,N) (((X)&gt;&gt;(N))|((X)&lt;&lt;(8*sizeof(X)-(N)))) <br>extern &quot;C&quot;<br>VOID Start()<br>{<br>char buf[256];<br>int x=0x80000000; <br>wsprintfA((LPSTR)buf,&quot;MACRO=%08X\n&quot;,ROR(x,1)); <br>}<br><br>00401014 SUB ESP,100<br><b>0040101A PUSH C0000000</b><br>0040101F LEA EAX,DWORD PTR SS:[ESP+4]<br>00401023 PUSH 00401008 ; ASCII &quot;MACRO=%08X&quot;<br>00401028 PUSH EAX<br>00401029 CALL DWORD PTR DS:[&lt;&amp;USER32.wsprintfA&gt;]  ; USER32.wsprintfA<br>0040102F ADD ESP,10C<br>00401035 RETN<br>//////////////////////////////////////////////////////////////<br><br>Но даже если мы уберем оптимизацию, то получим:<br>//////////////////////////////////////////////////////////////<br>00401020  PUSH EBP<br>00401021  MOV EBP,ESP<br>00401023  SUB ESP,108<br><b>00401029  MOV DWORD PTR SS:[EBP-4],80000000<br>00401030  MOV EAX,DWORD PTR SS:[EBP-4]<br>00401033  SAR EAX,1<br>00401035  MOV ECX,DWORD PTR SS:[EBP-4]<br>00401038  SHL ECX,1F<br>0040103B  OR EAX,ECX</b><br>0040103D  PUSH EAX<br>0040103E  PUSH 00401008 ; ASCII &quot;MACRO=%08X&quot;<br>00401043  LEA EDX,DWORD PTR SS:[EBP-108]<br>00401049  PUSH EDX                                <br>0040104A  CALL DWORD PTR DS:[&lt;&amp;USER32.wsprintfA&gt;]  ; USER32.wsprintfA<br>00401050  ADD ESP,0C<br>00401053  MOV ESP,EBP<br>00401055  POP EBP                                  <br>00401056  RETN<br>//////////////////////////////////////////////////////////////<br>Вопрос нес в себе чич-то показательный характер немощности синтаксиса C++ и потребности обязательного присутствия в исходнике ASM кода!<br>Задача в том, что надо при помощи синтаксиса C++ заставить сгенерировать псевдокоманду ASM`а ror или rol, а не кучу мусора эмулирующего ror или rol как это видно из примеров<br>Вот для примера крючок ^ сгенерит xor, | сгенерит or, &amp; сгенерит and... etc – а вот ror или rol чет мля никак, нужен крючок какой-нить %)<br>Ну-да ладно(надодумать вопрос сам себя исчерпал), видать как обычно, когда че-нить потребуеццо, в этом C++ нет, все через жопу делаеццо(главное чтоб в исходнике побольше скобочек нарисовано было(ужснах))<br>[comment]А вообще в споре (если это не флейм) практически всегда рождаецца истЕна! [/comment]<br><br>это и есть один из вариантов, по причине которого нужен именно такой вариант компилирования...<br>забегая чуть в перед - мы имеем возможность, не отходя от кассы компилить MASM32 сырки практически в полном объеме и подключать этот код статистически (это немного будет похоже на то, как это делает делфи, но возможности гораздо шире)<br>кстати это один из приоритетов MASM`a перед  FASM`ом<br><br>Вот тут те, кто уже начал учиццо вступать и компилировать обязательное чтиво(как убивали препода%)) )<br>forum.sources.ru/showtopic=208941<br>[offtop]мля, скокаж я сегодня выпил.. ппц[/offtop]
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177141&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=5" class="addthx" data-post="177141"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]__[/b]','')">__</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 115.1 (ветеран), 3thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.73'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=7172">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 13 января 2008 14:33 <br><script type="text/javascript">QU('__','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=__" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<I>Demon666 пишет:<br>Может ему какой спец.ключик нужен чтобы компиль понимал твой код и сгенерил этот злащастный ror или rol </I><br><br>используйте icc и будет вам ror и rol ;)<br>cl считает что его код быстрее для большинства процессоров чем ror и rol<br><br><br><I>cppasm пишет:<br>В макросе надо первый аргумент к беззнаковому типу приводить </I><br><br>или знать особенности применения этих макросов, мне не требовался ror и rol для знаковых типов
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=177177&amp;user=7172&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=6" class="addthx" data-post="177177"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]overwriter[/b]','')">overwriter</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/8266.jpg" alt=""><br><span class=txtSm>Ранг: 155.4 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.6'>Активность: 0.14<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8266">Участник</a><br><font color=blue>Робо-Алкаш</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 13 января 2008 14:43 &middot; Поправил: overwriter <br><script type="text/javascript">QU('overwriter','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=overwriter" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
а почему топик в оффтопе)? я в &quot;Обсуждениях&quot; уже создавал тему)<br><br>Пока не понял к чему это ?? Вроде была статья как писать плагин к ID&#039;е
<br><br><font size="1"><i>-----<br>Researcher</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177180&amp;user=8266&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=7" class="addthx" data-post="177180"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 января 2008 08:41 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<I>__ пишет:<br>или знать особенности применения этих макросов, мне не требовался ror и rol для знаковых типов </I><br>Не думаю, что это он тебе предъявлял, просто красиво дополнил кодом, чтобы у новичков не возникало проблем с типами ;)<br><br><b>overwriter</b><br>Вообще тема должна быть у новичков, но я когда сделали оффтоп, создавал темы всегда здесь<br>хз. Тут если так по честному, то прошу прощения у тех, кто писал в личку и я не ответил(время мля)<br>кто-то предъявлял что у него ранг маленький и он не может постить(что тут можно сказать: - 20 набрать здесь на cracklab`е (но и писали с довольно большим рангом, даже больше чем у меня), это не такая уж и проблема(да и не хотелось бы чтобы плодилось клоны, да и модераторам забот меньше, а то забанят мну))<br>[comment] вообще с приходом <b>Archer</b> стопудофф контекст сайта станет чище от флейма, но верните нам самого злого модератора Лордика!(он &quot;в двух словах&quot; всегда мог написать истЕну) [/comment]<br>кто-то писал, что из-за оффтопа не увидел сразу тему(я лично не хочу, чтобы мозолила глаза тема просто так кому это не интересно, да и кто ищет и кому надо - тот всегда найдет©)<br>да и вообще cracklab – это же не панель где ноги раздвинул и тебе всЁ дают(если каждому давать поломаеццо кровать© Рем(если че, это написано было не в мой адрес))<br>в личке просило поделиццо наработками и инфой уже больше десяти человек(ИМХО – это уже в обязательном порядке должна создаццо тема)<br>да и вообще тема создавалась в надежде, что прейдут сюда новые кодеры(ты же лично должен понимать что это только плюс) и те, кто действительно хочет стать спецом в этом деле<br><br>тема отдельная, потому что здесь пишеццо плагин имеющий свой функционал(я немного описывал его возможности в дебатах с КК на васме)<br>это &quot;некий свой&quot; скриптовый движок, который позволит добавить любой свой функционал и использовать возможности SDK ИДЫ и заюзать все это без проблем легко и просто(примеров кому это надо море)<br>но это даже не основная причина создания топика – суть немного в другом<br>вот на форумах постоянно создаюццо темы с просьбами помочь решить проблему и начинают жевать то, что пережевано давно несколько лет назад, при этом тратят на это время, но вот можно будет использовать это время с пользой для общества, в любой момент взять и дополнить лично функционал этого плагина<br>как это сделать я постепенно постараюсь подробно описать<br>многие могут и у кого-то уже есть определенные полезные функи, но GUI для них нет, вот и смогут их добавить в скриптовый движок для юзанья этого полезного кода в ИДЕ<br>опенсорсный проект – это хорошо, но должен быть хоть кокой-то сапппорт, иначе проект заглохнет - ИМХО<br><br>я бы мог в качестве примера выложить применение этого движка на файле запротекченом VMprotect, но файло приватное и просили его не светить на паблике(сразу бы вопросы отпали зачем это нужно)<br>но если тема не нравиццо, пишите (достаточно трех челов кто протЕв), мну ее закроет...<br>По-крайней мере ко мне вопросов потом больше не будет, почему так произошло!<br><br>некоторые новички задают себе вопрос с чего начать кодить, тут с грубым сарказмом будут примеры, обосновывающие приоритеты компиляторов с их плохой стороны, а не пиар дерьма ООП, которое несет в себе миру только ЗЛО и плодит лентяев, которые не на что не способны кроме копипаста <br>Аминь!
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177250&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=8" class="addthx" data-post="177250"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]Jupiter[/b]','')">Jupiter</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1379.png" alt=""><br><span class=txtSm>Ранг: 605.2 (<b>!</b>), 341thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.38'>Активность: 0.47<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1379">Модератор</a><br><font color=blue>Research &amp; Development</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 января 2008 12:25 <br><script type="text/javascript">QU('Jupiter','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Jupiter" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<I>Demon666 пишет:<br>я бы мог в качестве примера выложить применение этого движка на файле запротекченом VMprotect, но файло приватное и просили его не светить на паблике(сразу бы вопросы отпали зачем это нужно)</I><br>т.е. проблема в собсно файле под вмпротом? но ведь можно взять для примера другой файл - также запротекченный вмпротом. или проблема в другом и это лишь отговорка?<br><br><I>Demon666 пишет:<br>опенсорсный проект – это хорошо, но должен быть хоть кокой-то сапппорт, иначе проект заглохнет - ИМХО  </I><br>верно. +1<br><br>вот это стоило бы выделить болдом, т.к. суть теряется в столь пространном посте:<br><I>Demon666 пишет:</I><br>это &quot;некий свой&quot; скриптовый <b>движок</b>, который <b>позволит добавить любой свой функционал и использовать возможности SDK ИДЫ</b> и заюзать все это без проблем <b>легко и просто</b> (примеров кому это надо море) .<br><br>/конец цитаты<br>а как двиг будет подстраиваться под изменения сдк?<br>и вообще как это будет реализовано технически?
<br><br><font size="1"><i>-----<br>EnJoy!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177263&amp;user=1379&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=9" class="addthx" data-post="177263"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]cppasm[/b]','')">cppasm</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 251.3 (наставник), 81thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.77'>Активность: 0.14<span style='color:red'>&searr;</span>0.11</span><br>Статус: <a href="action=userinfo&amp;user=6859">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 января 2008 16:20 &middot; Поправил: cppasm <br><script type="text/javascript">QU('cppasm','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=cppasm" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<b>Demon666</b> ООП тоже не люблю, но на чистый Си ты зря наезжаеш.<br>Насчёт ROR/ROL - странная постановка задачи.<br>Создадим себе проблемы а потом будем их решать <img src="img/smilies/s1.gif" alt=""><br>Кто мешает написать вставку на ассемблере?<br><br>#include&lt;stdio.h&gt;<br><br>unsigned __declspec(naked) __fastcall rol(unsigned num, char bit)<br>{<br>	_asm{<br>		mov	eax,ecx<br>		mov	cl,dl<br>		rol	eax,cl<br>		ret<br>	}<br>}<br><br>unsigned __declspec(naked) __fastcall ror(unsigned num, char bit)<br>{<br>	_asm{<br>		mov	eax,ecx<br>		mov	cl,dl<br>		ror	eax,cl<br>		ret<br>	}<br>}<br><br>void main(void)<br>{<br>	printf(&quot;rol(3,1)=%08X, ror(3,1)=%08X\n&quot;,rol(3,1),ror(3,1));<br>}<br><br>Насчёт скриптового движка что-то ничего не ясно.<br>Сути не видно, не понятно как посты в кучу собрать.<br>Как вопрос насчёт ROR/ROL связан с плагином и IDA SDK?<br>Единственное что понял - тут собираются вступать и компелировать <img src="img/smilies/s1.gif" alt=""><br>Остальное всё в тумане...<br>Напиши кратко идею, а то много букв - суть размазана.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=177295&amp;user=6859&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=10" class="addthx" data-post="177295"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 января 2008 19:24 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<I>cppasm пишет:<br>но на чистый Си ты зря наезжаеш. </I><br>Нет тут ты мимотазика, я даже добавлю что лучше кодить на С++, но не юзать зомбированно классы, шаблоны, etc<br><I>cppasm пишет:<br>Создадим себе проблемы а потом будем их решать  </I><br>Это Microsoft создали проблемы с этими типами, а теперь не могут вылезти из этой помойной ямы, пусть лучше поучаццо у создателей движка PHP и их синтаксис<br>Больше гига кода, а мля нормальный редактор сделать не могут, открываешь их IDE и блевать хочеццо - ИМХО<br><I>cppasm пишет:<br>Кто мешает написать вставку на ассемблере? </I><br>Гы, ну я ж писал уже, что этот пример для того, что нам без ASM`а никуда<br>Ты наверное встречал вопросы на форумах от новичков -&gt; с чего начать изучение ASM или C++, MASM или FASM, ну вот им и ответ (пусть чешут мосх)<br><br><I>Jupiter пишет:<br>т.е. проблема в собсно файле под вмпротом? но ведь можно взять для примера другой файл - также запротекченный вмпротом. или проблема в другом и это лишь отговорка? </I><br>Да проблем собственно нет.. Отец Дерматолог правила знает, мож порадует нас малоимущих, да запротектит файлик последней версией прота ;)(короче там, где шифруеццо таблица указателей на исполнители байт кода)<br><br><I>Jupiter пишет:<br>а как двиг будет подстраиваться под изменения сдк? <br>и вообще как это будет реализовано технически? </I><br><I>cppasm пишет:<br>Напиши кратко идею, а то много букв - суть размазана. </I><br>Да все банально просто и ничего нового в этом нет(чет с этими праздниками до исходников добраццо не могу%) )<br>Вот примерно так вкратце<br>так мы регистрируем новую свою функу FindBinary для скрипта<br>lua_register(L,&quot;FindBinary&quot;,FindBinary);<br>а так выглядит сама функа на С++, в ней функа CompareSignature написана на MASM`е и находиццо в сорсе *.asm, но компилит все это дело VS(DDK)<br>int FindBinary(lua_State *L)<br>{<br>	ULONG status=-1;<br>	ea_t Start;<br>	ea_t End;<br>	ea_t Temp;<br>	Start=(ea_t)lua_tonumber(L,-3); // так мы читаем из скрипта параметры передаваемые функции<br>	End=(ea_t)lua_tonumber(L,-2);<br>	if(Start&lt;End)<br>	{<br>		const char* szSignature = lua_tostring(L,-1);<br>		ULONG TempMemory=(ULONG)GlobalAlloc(GMEM_ZEROINIT,End-Start);<br>		get_many_bytes((ea_t)Start,(HGLOBAL)TempMemory,End-Start);<br>		if(-1==(Temp=(ea_t)CompareSignature(TempMemory,(TempMemory)+(End-Sta rt),(LPSTR)szSignature)))<br>			Start=-1;<br>		else<br>			Start+=Temp;<br>		GlobalFree((HGLOBAL)TempMemory);<br>		status=Start;<br>	}<br>	lua_pushnumber(L,status); // а так возвращаем в скрипт резултат<br>    return 1;<br>}<br>В скрипте надо будет написать<br>Signature=&quot;EB0?EB6A??EB01EB54EB01EB6A40&quot;<br>addressStart =SegStart(-1);<br>address=FindBinary(addressStart, SegEnd(-1), Signature);<br>SegStart и SegEnd – это тоже такие же функи как FindBinary в скрипте<br>или так<br>address=FindBinary(0x00401000, 0x00402000, &quot;EB0?EB6A??EB01EB54EB01EB6A40&quot;);<br>тут функа FindBinary имеет максимально расширенный формат поиска, просто для примера так примитивно написано<br><br>Теперь по работе с SDK<br>Допустим нам нужно вызвать msg (скромно для примера)<br>Регистрируем <br>lua_register(L,&quot;msg&quot;,print_msg);<br>и вот сам код на С++, вызова функи из SDK ИДЫ msg, но тут немного расширенный функционал, то есть как бы примитивное авто определение типа идет, что вывести в консольное окно ИДЫ строку или число, некое подобие синтаксиса PHP где тип не обязательно указывать(все это пока примитивно чич-то для понимания сути)<br>int print_msg(lua_State *L)<br>{<br>    if(3==lua_type(L,-1))<br>    {<br>    	ULONG hex=(ULONG)lua_tonumber(L,-1);<br>	    msg(&quot;%08X\n&quot;,hex);<br>    }<br>    else<br>    {<br>	    const char* Message = lua_tostring(L,-1);<br>	    msg(&quot;%s\n&quot;,Message);<br>    }<br>    return 0;<br>}<br>В скрипте надо будет написать<br>msg(&quot;Script&quot;); <br>или <br>msg(0x4072B4);<br><br>Надо будет зарегать потом нужные функи SDK в движке и обработать их своим кодом для удобства работы с интерфейсом ИДЫ<br>Для примера ИДА не смогла оформить красиво данные в проге(даже добавлю что эти данные пошифрованы), при помощи скрипта мы вызываем из SDK функу do_data_ex с определенными параметрами и все данные превращаюццо в DWORD`ы(ну естественно расшифровываем их заодно)<br>int MakeData(lua_State *L)<br>// только часть кода функи<br>...<br>case TYPE_DWORD:<br>{ <br>int &#036;temp=&#036;length/4;<br>do_unknown_range(ea,&#036;temp*4,true);<br>if(0==&#036;temp)<br>{<br>do_data_ex(ea,0x20000000L/*FF_DWRD*/,4,BADNODE);<br>}<br>else<br>{<br>for(;&#036;temp!=0;--&#036;temp)<br>{<br>do_data_ex(ea,0x20000000L/*FF_DWRD*/,4,BADNODE);<br>ea+=4;<br>}<br>}<br>}<br>break;<br>кто-то может сказать, что есть подобное в стандартных скриптах - не отрицаю, но это медленно и примитивно сделано и некоторые задачи не реально выполнить стандартными скриптами<br>да и вообще я лично не могу уступить соблазну контролировать весь процесс лично и в любой момент расширить функционал, а не ждать подачки от Ильфака<br>почему собственно свой движок – да потому что планирую переделать синтаксис движка LUA(сделать как в PHP, проект-то опенсорсный), а то синтаксис там сильно убогий - ИМХО<br>надо мозги собрать в кучу после этих пьянок, короче на днях выложу первые сырки(пока шаблон и GUI будет(без движка))<br>вообщем примерно как-то так...<br><br><b>Jupiter</b><br>Слушай, а вот встречный вопрос – это не ты случайно в проекте WinAsm с Шуриком русский форум координируешь? (вернее в команде с Antonis Kyprianou?)
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177305&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=11" class="addthx" data-post="177305"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]Jupiter[/b]','')">Jupiter</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1379.png" alt=""><br><span class=txtSm>Ранг: 605.2 (<b>!</b>), 341thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.38'>Активность: 0.47<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1379">Модератор</a><br><font color=blue>Research &amp; Development</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 января 2008 22:35 <br><script type="text/javascript">QU('Jupiter','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Jupiter" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<b>Demon666</b><br>нормально расписал, понятно. задумка хорошая. через скрипт делать - эт прально.<br><br><I>cppasm пишет:<br>надо мозги собрать в кучу после этих пьянок </I><br>ээт точно ;) терь ещё и дни рождения пошли... ээх<br><br><I>Demon666 пишет:<br>Слушай, а вот встречный вопрос – это не ты случайно в проекте WinAsm с Шуриком русский форум координируешь? (вернее в команде с Antonis Kyprianou?) </I><br>ну я ;)<br>я там заведую разделом проектов в т.ч., можешь глянуть - там есть интересные штуки на асме. я там выкладывал менеджер процессов EzProcess, маленький и шустрый. могёт оптимизировать память процесса через вызов SetProcessWorkingSetSize<br>кстати, WinAsm оч. удобная среда разработки. сейчас антонис разрабатывает новый контрол - HiEdit, тож можешь глянуть.
<br><br><font size="1"><i>-----<br>EnJoy!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177323&amp;user=1379&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=12" class="addthx" data-post="177323"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 января 2008 08:06 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
Так, если что, чтобы далеко от темы не убегать, пока тут решил инфу запостить о скриптовом движке LUA<br>Вкратце: очень маленький движок, мобильный, везде, где потребуеццо можно без проблем заюзать<br>Вдруг кому-то нужно для своих проектов будет, БАЯН, но всеже...(чуток хелпер все-таки почитать нужно)<br>Ссылка на оффсайт(проект опенсорсный)<br>www.lua.org<br>А здесь версия справочника на русском<br>www.lua.ru<br>и вот здесь немного с примерами<br>ilovelua.narod.ru<br>этого надодумать, достаточно будет<br><br><I>Jupiter пишет:<br>ну я ;) </I><br>ну, что тут можно сказать...<br>большой пасиба за ваше время, потраченное на реализацию и поддержку проекта<br>за своевременную помощь начинающим учиццо вступать и компилировать<br>скокаж я уже километров ASM кода реализовал в IDE WinAsm<br>жаль что в книгах типа Пирагова и т. д. не пиарят ваш проект WinAsm (а описывают ужснах DOS и среду tasm для WIN32%) )<br>здесь насколько я знаю много кто юзает WinAsm, так что можно смело считать, что историю ваша команда делает с великой пользой для общества кодеров<br><br><b>Jupiter</b><br>вот тут ради такого дела порылся сейчас в ящике и нашел плагин...<br>чтоб тему новую не плодить здесь спрошу авось проблемка решиццо<br>когда-то, давно еще в начале того года, дали проект полностью на ASM`е(около 2MB)<br>так вот сам понимаешь файлов много, ну и заодно констант, структур, функций...<br>проект не я писал, а че где и в каком файле находиццо, ну заипешся искать и запоминать<br>поиск в WinAsm стандартный и из-за этого не очень удобный, времени мало, а реализовать поставленную задачу надо быстро<br>ну, вот на коленках по быстрому и решил накатать этот плагин<br>основное что мне надо было, я сделал, но на половину, так как в IDE непонятные мне досихпор ограничения оказались(я потом когда проект сделал, еще несколько раз пытался найти причину такой бажности, но так и неасилил. Мож щаз попробуем вдвоем с этим разобраццо?)<br>а именно:<br>первое на чем влетел – это когда делаешь поиск слова/фразы по всем файлам в проекте<br>такая бага есть, что развернутые окна MDI начинают сворачиваццо и становятся маленькими(ну неудобно ппц)<br>я порылся в файле WinAsm`а и нашел в чем причина:<br>.text:004081A1 6A 00 push 0 ; lParam<br>.text:004081A3 57 push edi ; wParam<br>.text:004081A4 68 23 02 00 00 push WM_MDIRESTORE ; Msg<br>.text:004081A9 FF 35 25 75 45 00 push dword_457525 ; hWnd<br>.text:004081AF E8 F0 B2 02 00 call SendMessageA<br>Адреса и код из версии 5.1.5.0<br>Я занопил этот участок кода, вроде скока юзаю траблов не было после патча<br>хз. Пользы от этого кода вроде никакой, а вот дискофорт есть <br>да и патчить каждый раз новую версию чет лениво, остановился пока на 5.1.5.0<br><br>второе неудобство возникло, когда я захотел осуществить реализацию идеи<br>когда поиск находит слово, он должен выровнять по центру редактора кода(CodeHiC) найденное слово, я сделал вроде все OK, но вот если потянуть за Splitter bar и раздвоить окно редактора кода на два, то уже не катит, получаеццо что найденное слово вообще может на экране не появиццо <br>как я там только не танцевал с бубном, даже пытался размеры контрола через GetDC(контекст) узнать, бесполезно. Тут думаю решение проблемы одно в структуре CHILDDATA возвращать два хендла hEditor первого и второго. Может там где его можно получить(?), чет полазил по PSDK, так и не нашел как это сделать.<br>Я конечно понимаю что это мелочи, но мож я че не увидел и это уже есть?<br><br>Третья это вообще ппц<br>Я добавляю свой TAB(Search) на панель где Project|Blocks|Resources|Search(рядом с ними)<br>(я там еще свой ToolBar добавляю с кнопкой для удобства и пункт меню(Add-Ins-&gt;Go to folder...) для перехода к нужному файлу в папку)<br>Смысл этой панели такой – мы вбиваем искомое слово в ComboBox_edit и нажимаем поиск<br>Плагин ищет слово во всем проекте и выводит на панель ссылки, на строки в файлах, в которых нашел искомое слово. Потом можно клацать по ссылке и мы будем переходить на это слово<br>Все просто замечательно, но есть одно но<br>Простой ComboBox добавляеццо на панель, а мля с Edit`ом в нем, нет(фокус не получает)<br>Вот если просто edit сделать, то все замечательно работает, но с ComboBox`ом удобнее всеже<br>Наверно там ставиццо какой-то субкласс(хук) что не дает обрабатывать сообщения от такого ComboBox`a c Edit`ом<br>Я понимаю, что это единичный случай, но может, были с этим у кого-то проблемы уже, и решение было найдено?<br>Вот ссылка на скачку плагина, с ним понятнее скорее всего будет о чем я<br>demonteam.narod.ru/download/SecondarySearch.rar<br>Надо галочки поставить в Add-Ins Manager чтобы плагин подгружался в IDE при старте<br>Там эта панелька убогая сильно, но это не важно суть проблемы видна сразу будет, я так думаю <br><b>Jupiter</b><br>если вдруг у тебя время и желание будет, может, посмотришь плагин?
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177340&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=13" class="addthx" data-post="177340"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]cppasm[/b]','')">cppasm</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 251.3 (наставник), 81thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.77'>Активность: 0.14<span style='color:red'>&searr;</span>0.11</span><br>Статус: <a href="action=userinfo&amp;user=6859">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 15 января 2008 11:22 <br><script type="text/javascript">QU('cppasm','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=cppasm" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
<I>Demon666 пишет:<br>Нет тут ты мимотазика, я даже добавлю что лучше кодить на С++, но не юзать зомбированно классы, шаблоны, etc  </I><br>И что ж там от С++ останется если не использовать классы и шаблоны <img src="img/smilies/s1.gif" alt=""><br><br><I>Jupiter пишет:<br>cppasm пишет: <br>надо мозги собрать в кучу после этих пьянок <br>ээт точно ;) терь ещё и дни рождения пошли... ээх  </I><br>Эт не я писал <img src="img/smilies/s3.gif" alt=""><br><br><I>Demon666 пишет:<br>Гы, ну я ж писал уже, что этот пример для того, что нам без ASM`а никуда <br>Ты наверное встречал вопросы на форумах от новичков -&gt; с чего начать изучение ASM или C++, MASM или FASM, ну вот им и ответ (пусть чешут мосх)  </I><br>Ну всё равно с ASM начинать немного напряжно, особенно если человек в архитектуре не ориентируется.<br>Лучше с HLL какого-нить с плавным уходом в ASM, начиная со встроенного.<br>Но это ИМХО...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=177355&amp;user=6859&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=14" class="addthx" data-post="177355"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]cppasm[/b]','')">cppasm</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 251.3 (наставник), 81thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.77'>Активность: 0.14<span style='color:red'>&searr;</span>0.11</span><br>Статус: <a href="action=userinfo&amp;user=6859">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 января 2008 15:33 <br><script type="text/javascript">QU('cppasm','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=cppasm" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
Гы-гы <img src="img/smilies/s1.gif" alt=""><br><b>Demon666</b> на твой выпад протефф Си ставим блок <img src="img/smilies/s1.gif" alt=""><br><br>Стандартные функции:<br><br>stdlib.h<br><br>_rotr(int x,int n);<br>_rotl(int x,int n);<br><br>Стандартизировано, есть во всех компиляторах начиная с DOS&#039;овских.<br><br>Сишный код:<br><br>#include&lt;stdlib.h&gt;<br><br>int main(void)<br>{<br>	_asm int 3<br>	return _rotr(0x80000000,31);<br>}<br><br>Асм-листинг из Olly:<br>00401000  /&#036; CC             INT3<br>00401001  |. B8 00000080    MOV EAX,80000000<br>00401006  |. C1C8 1F        ROR EAX,1F<br>00401009  \. C3             RETN<br><br>Так что на самом деле всё реализуемо ;)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=177618&amp;user=6859&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=15" class="addthx" data-post="177618"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]Jupiter[/b]','')">Jupiter</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/1379.png" alt=""><br><span class=txtSm>Ранг: 605.2 (<b>!</b>), 341thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.38'>Активность: 0.47<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1379">Модератор</a><br><font color=blue>Research &amp; Development</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 января 2008 18:17 &middot; Поправил: <a href="action=stats#mods">Модератор</a> <br><script type="text/javascript">QU('Jupiter','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Jupiter" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
<b>Demon666</b><br>спасибо за добрые слова.<br>по поводу WinAsm ответил в PM<br><br>про Lua также почитал на ibm.com: Создание встраиваемых сценариев на языке Lua http://www.ibm.com/developerworks/ru/library/l-lua/ <br><br>Archer: чтоб пост отдельный не плодить <img src="img/smilies/s1.gif" alt=""> LUA ещё используеццо в моём QuickUnpack <img src="img/smilies/s1.gif" alt="">
<br><br><font size="1"><i>-----<br>EnJoy!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177632&amp;user=1379&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=16" class="addthx" data-post="177632"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 января 2008 05:26 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
Прошу прощения за то что так с опозданием(время мля), жидошекелей всегда мало(их никогда много не бывает), хз. почему %))<br><br><I>cppasm пишет:<br>И что ж там ..++ останется..  </I><br>Да-да, совершенно верно, а сталобыть правда (ЗЫ: и истЕна тоже), ты же сам написал ответ в своем вопросе: - два плюса там точно останеццо!<br>К примеру, в C++ можно в &quot;любом месте&quot; инициализировать переменную...<br><I>cppasm пишет:<br>Так что на самом деле всё реализуемо ;) </I><br>мАлАдЕц! - кто ищет, тот всегда найдет истЕну(было бы время и желание) ;)<br><br>мля, вот постараюсь выложить исходники(надо только в красочный вид их оформить)<br><b>cppasm</b><br>надеюсь, поможешь(?) их гламурненько для общества сделать, только на паблике как ты это делаешь красиво...(я протЕв привата, асек, каналов, etc(это только тормозит осуществление задуманного и новых идей и самореализации))<br>!!!критика в любой момент приветствуеццо!!!<br>Те, кто силен в Си/C++, ASM(и у кого есть свободное время) просьба проявить желание в халявной помощи для написания (проектов!) – это потом(хз. возможно) вам поможет сэкономить время и поиметь сладких жидошекелей...<br>Да вполне возможно, что это все запутано и непонятно, но поможет многим(надеюсь)…<br><br><I>cppasm пишет:<br>Ну всё равно с ASM начинать немного напряжно </I><br>ПротЕв(!), это зависит от того, кто написал чтиво и от того, кто его читал<br>Вот для примера<br>Создают периодически топики, не могу вступить и скомпилировать пример из статьи/книги Калашникова и т. д.<br>Обсуждают там  что-то, и вот появляеццо ветеран форума и постит ссылку bitfry.narod.ru/<br>Я там ниразу не был, но после этой ссылки обычно с банальными вопросами не возвращаюццо, а пишут: -  все понятно спасибо!<br>Тут вопрос, зачем печатать и продавать  неудачников прошлого века, есть же современники и практики!?<br>(достаточно обратиццо к автору с коммерческим предложением и будет вам классика не хуже! - ИМХО)<br><br><b>Jupiter</b><br>Нет-нет, тут немного чуть-чуть по-другому, я этот плагин(одна из причин и не случайно) выложил для примера и чтобы показать идею проекта PSDK WinAsm, (ведь плагинов написано очень много, может даже больше чем для оли - ИМХО) <br>плагины – расширяют возможность проги!(нужен только грамотный и интересный подход в PSDK, как это сделано в WinAsm)<br>тут надодумать нет ограничений на посты, даже более того, если есть идеи их надо писать !!!обязательно!!!<br>не думаю что злостно тут будут удалять важные посты(а просьба вообще их не удалять) – это не случайно же оффтопом завеццо!!!<br><I>Demon666 пишет:<br>косвенно заденем все что шевелиццо и движеццо </I><br>Я ведь не просто так это написал ;)<br>Я там зареган, но почему-то, постить там сил не хватает <br>Ведь плагин может и на ста тачках работать, а на одной какой-нибудь вообще не запустиццо даже и хз. почему...<br><br>для примера структура передаваемая плагину (копипаст© WinAsm)<br>HANDLES STRUCT<br>	hMain				HWND ?<br>	hMenu				HWND ?<br>	hClient				HWND ?<br>	hStatus				HWND ?<br>	hRebar				HWND ?<br>	hMainTB				HWND ?<br>	hEditTB				HWND ?<br>	hMakeTB				HWND ?<br>	Reserved1			HWND ?<br>	Reserved2			HWND ?<br>	hProjExplorer		HWND ?<br>	hProjTab			HWND ?<br>	hProjTree			HWND ?<br>	hBlocksList		HWND ?<br>	hOutParent			HWND ?<br>	hOut				HWND ?<br>	phImlNormal			DWORD ?<br>	phImlMonoChrome		DWORD ?<br>	phAcceleratorTable	DWORD ?<br>	PopUpMenus			POPUPMENUS &lt;?&gt;<br>HANDLES ENDS<br>Мы можем взять почти любой хендл и заюзать для своих нужд, для создания окон(форм%)дельфи, кудаж без него) GUI<br>Когда это все сделано на чистом API, то все просто, но когда юзают ООП - это начинает ограничивать возможности и очень сильно<br>у оли такой щедрости &quot;нет&quot;, там немного по-другому сделано, можно вызвать отдельную функу, чтобы узнать то, что нужно, но неудобно – ИМХО<br>вот может косвенно что-то поможет или будет возможность заюзать код(идею) из проекта в другом проекте ;) <br>ведь как практика доказала что скриптовый язык в отладчике нужен, плагины и кодеры тоже ;)<br>вот, на мой взгляд, часть сущности SDK в проекте WinAsm идеальна, нужен только пиар, да и вообще в коммерческих целях описывают в книгах/статьях/форумах откровенно(ИМХО) дерьмо Py.., а интересные идеи(начинают) кануть в лету ;(<br><br>ведь как обычно крутиццо, вертиццо в голове, а достаточно несколько буквочек и великая прога сделана!(просто надо по возможности больше инфы как это сделано у других в SDK(своего рода обмен полезной информацией!))<br>интересно всегда послушать мнение участников форума(важны их идеи о их проектах(!!!это все всегда взаимосвязано!!!))<br>чуть попозже постараюсь отписаться еще...(не держите зла, плиз), это ведь только начало...<br><br>P. S.<br>Очень прошу проявить терпение тем, кому интересен проект!(плз)
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177670&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=17" class="addthx" data-post="177670"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 января 2008 02:21 &middot; Поправил: Demon666 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
Вот первые исходники(шаблон и бинарик(вдруг нужен будет для сравнения да и для теста тоже)) и ссылка на скачку<br>demonteam.narod.ru/download/PSplus.rar<br>С комментариями чуть попозже, не хватило чет меня на них<br>Суть кода в исходнике, короче че делает<br>Создаеццо окно для запуска скриптов<br>Похоже ппц как на окно у ИДЫ(File-&gt;IDC file...), которое появляеццо после запуска скрипта<br>Отличие там только в том, что я убрал двойные кнопки(одна из которых предназначена для вызова редактора скриптов)<br>Я это сделал в контекстном меню (ПKM на кнопке)<br>Там два пункта меню Edit Script LUA и Delete button и вырезал разные проверки, чтобы исходник легче читался<br>В исходнике много переменных написанных чич-то на автомате, чтобы компиль не генерил лишнего кода(мусора)<br>Запуск нового скрипта меню File-&gt;Script LUA file...<br>И еще <br>View-&gt;Show ScriptDock или View-&gt;Hide ScriptDock<br>Скорее всего баги будут, так как исходник не полный, но если вдруг кому че непонятно - пишем здесь, постараюсь поподробнее объяснить<br>И знатакофф С++, просьба тоже сказать свое слово протефф ;)<br><br><b>[ADD]</b><br>Исходник чуть подправил<br>одну проверку удалил случайно(теперь должно окно при выборе файла нормально появляццо)<br>И добавил при удалении всех кнопок с панели, окно автоматически закрываеццо<br>Исходники обновил скачать можно по тойже ссылке
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=177742&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=18" class="addthx" data-post="177742"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 января 2008 22:52 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
гы-гы, вот сегодня под пивом(без водки) подшаманил чуток проект<br>надодумать от GUI большего и не потребуеццо, кроме &quot;отладчика&quot; скриптов(может немного(совсем чуть-чуть%)) лучше чем у оли;) )<br><br>Что нового: (процентов 7 от оригинала GUI, качество исходников 65%)<br>ЗЫ: комментарии внутри исходников %))<br>ЗЫЫ: архивчег обновил по старой ссылке ;)<br><br>P. S.<br>бгг, а да чуть не забыл, пользуйтесь кнопкой F1 в IDA чаще, чем ходите на очко <br>процентов 90 на стопудофф, что там есть в справке истЕна...<br>хм(чешем мосх)-кхе.. пиво заканчиваеццо..
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=178434&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=19" class="addthx" data-post="178434"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 31 января 2008 21:20 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
Кто-то уже привык к студии, и жить без нее не может, да и вообще вроде как стандарт <br>Маленький ликбез по добавлению проекта в студию(VS 2005) бгг, да-да..<br><br>1. Нужно создать новую папку в папке, где находятся исходники<br>и назвать ее, ну к примеру VS 2005 Project PSplus, там студия будет хранить свои файлы<br>короче мусор, который нам нах и не нужен...<br>пробздимся в меню File-&gt;New-&gt;Project from Existing Code...<br>появиццо диалог <b>Create New Project from Existing Code Files </b><br>2. <b>What type of project would you like to create?</b><br>выберем Visual C++  и жмем Next &gt;<br>3. <b>Specify Project Location and Source Files<br>You can choose the files from one or more folders.</b><br>Project file location: <br>выберете ту самую папку, где студия будет хранить свой мусор<br>к примеру: C:\CODE\IDA\PSplus\VS 2005 Project PSplus<br>Project name:<br>Пишем название: PSplus и жмем Next &gt;<br>4. <b>Specify Project Settings<br>These details determine how the project is built and the type of the project created.</b><br>выбераем Use external build system и жмем Next &gt;<br>5. <b>Specify Debug Configuration Settings<br>Set the debug configuration&#039;s settings.</b><br>Build command line:<br>Указываем путь и имя батника<br>к примеру: C:\CODE\IDA\PSplus\make.bat<br>при нажатии в студии кнопки Build Selection(где в место Selection будет имя проекта(PSplus)) <br>или кнопки Build Solution(или в меню(тоже самое)) запустится наш батник и начнется компиляция<br>Rebuild command line:<br>Указываем путь и имя батника(в нашем случае тоже самое что и для Build command line)<br>к примеру: C:\CODE\IDA\PSplus\make.bat<br>при нажатии в студии кнопки Rebuild Selection(или в меню(тоже самое))  запустится наш батник и начнется компиляция<br>теперь все ошибки, произошедшие во время компиляции, будут отображается в самой студии, а не в консольном окне Windows<br>6. и жмем <b>Finish</b> (вроде все, но..)<br><br>7. Теперь можно добавить в созданный только что проект в VS 2005, файлы исходников и т. д.<br>для последующего их редактирования(изменения) написания в них нового кода<br>для этого надо вызвать меню View-&gt;Solution Explorer<br>в появившемся окне через контекстное меню Add-&gt;Existing Item...<br>выбираем файлы исходников нашего проекта<br>ну, или создаем новые через контекстное меню Add-&gt;New Item...<br>теперь окна подсказок для показа значений констант, прототипов функций, мощный поиск по файлам и т. д. наши %)<br><br>бу-го-га, теперь МЫ элита пиздастых(профессиональных) программеров(гы-гы, не сдержался)<br>теперь МЫ пишем в студии(VS 2005) дрова %))) <br>а да, чуть не забыл, надо еще (не обязательно это делать) в Solution Configurations поставить Release
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=178856&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=20" class="addthx" data-post="178856"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 февраля 2008 21:19 &middot; Поправил: <a href="action=stats#mods">Модератор</a> <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
<b>Archer</b> (вдруг, если читать будешь) тут есть два вопроса: (если нет желания ответить, то потри этот пост)<br><br>Первый<br>Что думаешь(?) вот про это:<br>[url=http://www.wasm.ru/forum/viewtopic.php?id=24767&amp;p=2<br>]http://www.wasm.ru/forum/viewtopic.php?id=24767&amp;p=2<br>[/url]<br>там вроде парни горят желанием отладчик писать<br>да и вообще вкратце, если можно.. как там движения есть с отладчиком (интересно же очень)<br>а то, как у негра в святилище, хрен че видать<br><br>Второй<br>Отладчику по-любому нужен скриптовый движок – ИМХО<br>Че-нить думал в этом направлении?<br>Ты планируешь на экспорт функи отладчика делать(?), типа как это сделано у оли и ИДЫ в SDK<br>Поддержку плагинов(?) и передачу плугу хендлов окон(GUI) для расширения возможностей со стороны<br>Вообщем плз. просвети малоимущих хоть чуть-чуть (думаю не только мну одному это интересно)<br>Если можно, то тут (чтоб народ новости с дальнего фронта почитал...)<br><br>Archer: я, конечно, понимаю, что это оффтоп, но не настолько же <img src="img/smilies/s1.gif" alt=""><br>1. Ну хотят-пусть пишут, у меня команда набрана уже, в принципе. <img src="img/smilies/s1.gif" alt=""> Некоторые модули (не будем тыкать пальцами) тормозят, но надеюсь, что будет норм. Пока работа идёт, насчёт бетки сказать сложно.<br>2. Скрипты будут, насчёт плагов-тоже, наверно, хер его знает. Сделать бы бетку...
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=179083&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=21" class="addthx" data-post="179083"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 февраля 2008 00:58 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
бгг, и снова вернее продолжить сегодня решил проект..<br>что нового, а собственно ничего, плагин даже беткой назвать трудно<br>но об особенностях надодумать пару слов черкнуть стоит<br>и так...<br><br>добавил немного интеллекта скриптдоку<br>теперь можно запускать через плагин не только скрипты LUA, но и IDC<br>расширение скрипта может быть любым, плагин сам определит, что за скрипт <br>и пометит соответствующей иконкой, также, если в скрипте при запуске есть ошибки <br>он тоже эти скрипты помечает специальными иконками, вообщем не запутаешься<br><br>установка банальна проста<br>надо скопипастить библу lua5.1.dll из архива в директорию IDA<br>(C:\Program Files\IDA), короче туда где находиццо idag.exe/idag64.exe<br>Бинарик плагина надо положить в папку с плагинами(C:\Program Files\IDA\plugins)<br><br>На этом в принципе и все, теперь инфа для тех, кому интересен сам процесс написания плагина<br>Собственно код, относящийся к LUA, находиццо в файле ScriptEngineLUA.cpp<br><br>Я добавил в исходник свой класс и даже там создаеццо объект<br>Знаю что спецы протефф таких вещей, но в данном случае добавление класса оправдано <br>Это сделано, для того чтобы убрать из исходника длинные строки API функций для работы с ini файлом настроек(код чистенький остаееццо, как слеза девственницы только чистый API)<br><br>&quot;оператор new переопределен&quot; и вставляет наш код вместо бу-го-га от Microsoft<br><br>Так теперь основные моменты и небольшое описание фунок которые там, на данный момент есть<br>Вообщем решено было использовать название команд в скрипте такие же, как и у скриптового движка оли <br><br>Команда <b>log</b> (все команды и не только регистро-зависимы, то есть log и Log это НЕ одно и тоже!)<br>Выводит сообщения в message window ИДЫ, некое подобие как у оли окно Log data<br>Но имеет более расширенный формат<br>Для примера можно воспользоваться стандартными возможностями библиотек LUA<br>в скрипте объявляется новая переменная в любом месте<br>в оли это affair делаеццо с помощью команды VAR x<br>у нас просто пишется для примера<br><br>--Присваиваем переменным значения (символы &quot;--&quot; означают, что это комментарий)<br>x=0x20;<br>str=&quot;переменная&quot;;<br>--Выводим в окно ИДЫ строку<br>log(string.format(&quot;\n%s x=%.08X&quot;,str,x));<br><br>в окне message window ИДЫ появиццо:<br>Run Script &#039;C:\LUA\Scripts\test.lua&#039;<br>переменная x=00000020<br><br>string.format – это стандартная функа движка LUA, там их много.. как их юзать, для этого надо почитать литератору, ссылки на которою довались выше<br>надодумать, на глаз заметны большие возможности скриптового движка LUA, чем у оли<br>а я даже где-то читал, что сам один из авторов скриптового движка оли, грезил мечтой подключить к оли скриптовый движок LUA<br><br>так что у нас еще там есть, а вот<br>функа <b>StringtoHex</b>, чет поднапряг я мосх, так и не смог вспомнить подобную функцию в стандартных библиотеках C++, пришлось написать свою, так оказалось быстрее, чем вспоминать<br><b>вопрос: </b> может, кто знает из спецофф, есть ли подобная в C++, только не надо такую что весит 10кило<br>так примерно байт 200 не более...<br>если нет, то будем ахтунгофф из Microsoft считать неудачниками<br><br>Команда <b>fill</b><br>Подобная есть у оли(но по возможностям отличаеццо)<br>FILL addr, len, value <br>Эта команда заполняет память программы, начиная с указанного адреса, заданным значением, и с указанным размером.<br><br>Видел вопросы от некоторых, есть ли специальная возможность в ИДЕ патчить<br>Выяснилось что есть, но по умалчанию в меню этого нет, надо в файле конфигурации специально включать<br>Но и опять мимотазика она патчит только образ, но не сам *.exe/dll etc<br>Вот эта команда скрипта fill патчит сам *.exe/dll etc<br>Немного о ней<br>fill(addr, len, value, flag);<br>параметр addr<br>указывает адрес откуда начинаем патчить<br>параметр len<br>длина <br>параметр value<br>это новые значения, которыми будем заполнять, тут можно как у оли просто указать для примера 0x90<br>но есть немного шире возможность<br>можно указать текстовую строку для примера &quot;90C35490459090&quot; плагин пропатчит именно этими байтами<br>а длина будет указывать столько количество раз повторить эту строку<br>параметр flag<br>тут значение 0 указывает что НЕ надо патчить *.exe/dll etc, пропатчена будет только база(образ) ИДЫ<br>если 1, то пачиццо будет и сам *.exe/dll etc вместе с базой<br>для примера в скрипте<br>fill(0x401000,1,&quot;909090C3&quot;,1);<br>тут еще стоит сказать что *.exe/dll etc должен находиццо тамже где и база(короче в директории где дизасмилась прога) вместе с *.idb<br><br>функа <b>reanalysis</b><br>чет я полазил по SDK ИДЫ так и не нашел, потом посмотрел, а такая функа есть в ИДЕ, но не экспортируеццо почему-то, вот я и рипнул от туда оригинал<br>нужна она, для того чтобы, когда пропатчим прогу, данные визуально не изменяюццо и такое ощущение что не пропатчилось, вот ее та мы и вызываем чтобы пофиксить этот баг, перерисовываем главное окно ИДЫ<br>кстати в самом скрипте ИДЫ, если применить PatchByte, тоже изменяеццо, только если окно покрутить короче не перерисовываеццо это дело<br><br>так ну вот МЫ и подобрались к самому главному, как добавлять свой код<br>#pragma pack(push,1)<br>luaL_Reg PSplus[]=<br>{<br>	{&quot;log&quot;,log},<br>	{&quot;fill&quot;,fill},<br>};<br>#pragma pack(pop)<br><br>int InitializationLUA(void)<br>{<br>	if (!(L=lua_open())) return -1; // создаем новый стек LUA<br>	luaL_openlibs(L); // загружаем все стандартные библиотеки LUA<br>	for(int i=0; 2&gt;i; i++)<br>		lua_register(L,PSplus[i].name,PSplus[i].func); // регистрируем наш массив функций <br>	return 0;<br>}<br>/*sizeof(PSplus)*/<br>VOID TerminateLUA()<br>{<br>	lua_close(L);<br>}<br>Пишем свою функцию и помещаем ее в файл ScriptEngineLUA.cpp<br>И добавляем в массив PSplus<br>Так для примера функция (функция должна быть выше массива PSplus, но ниже строки lua_State *L;)<br>int get_dword(lua_State *L)<br>{<br>	lua_pushnumber(L,get_original_long(lua_tonumber(L,-1)));<br>	return 1;<br>}<br>В массив PSplus вставляем <br>{&quot;get_dword&quot;,get_dword},<br>(в качестве эксперимента попробуйте сами просто добавить этот код, что выше в исходник, который можно скачать по старой ссылке(90kb), так сказать набейте руку перед своим творчеством)<br>get_dword(addr);<br>параметр addr<br>читает dword по указанному адресу, оригинальный! то есть даже если пропатчить то команда скрипта возвратит оригинальные байты dword, а не пропатченые, если такое уже было сделано<br>ИДА имеет свойство сохранить оригинальные байты до их изменения, и с помощью этой команды можно вернуть/узнать их<br><b>вопрос: </b> может, кто знает из спецофф, вот надо в C++ найти какой-нибудь крючок вместо 2 вот здесь<br>for(int i=0; <b>2</b>&gt;i; i++)<br>можно написать вот так <br>for(int i=0; <b>sizeof(PSplus) </b>&gt;i; i++)<br>но не прет, компиль цуко пишет по 40 байт на единицу, короче неправильно размер определяет<br>можно тупо ставить число(в нашем случае будет 3) сколько там в массиве команд, но это не есть гуд (можно и забыть случайно)<br>вот и надо чтобы на автомате это дело было, может массив как-то надо изменить чтобы правильно определялся размер...<br><br>функция lua_tonumber(L,-1) принимает значение, передаваемое в скрипте для обработки в нашей функции<br>тут, пожалуй, надо добавить если мы передаем 3 значения, то первое прочитать из стека надо с индексом lua_tonumber(L,-3) второе lua_tonumber(L,-2) и третье lua_tonumber(L,-1)<br>return 1; - тут 1 означает, сколько мы возвращаем обратно в скрипт значений, после обработки полученных данных их может быть и 2 и 3 и т. д.<br>возврашаюццо(помещаются в стек) они при помощи функций LUA lua_pushnumber(L,value);<br>для принятия строки передаваемой из скрипта в нашу функцию использовать надо lua_tostring(L,-1)<br>за более полной информацией надо курить хелпер LUA<br><br>смысл всего этого - что каждый, если добавит (так сказать приложит руку)по одной своей функции<br>сто человек по одной это уже сто команд в скрипте <br>движок будет развиваццо и расширять свои возможности очень быстро<br>возможности, мягко говоря, безграничны...
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=180451&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=22" class="addthx" data-post="180451"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 февраля 2008 00:52 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=10992.html&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
Новости с дальнего фронта<br>Некоторые авторы борются против банального копипаста и специально в исходниках заменяют буржуйские символы на русские, тем самым заставляют компиль генерить ошибки <br>ньюбику приходиццо думать, почему код не работает и искать причину – тем самым улучшают понимание в кодинге обучающегося <br>у нас будет подход к обучению другой<br>я буду рассказывать как добавить новый код в проект(то есть вам придеццо самим собирать плагин из разных кусков кода)<br>теперь будет обновляццо &quot;только&quot; новый файл CommandFunctions.cpp (его пока нет, я его выложу чуть попозже вместе с бинариком)<br>для примера как это будет выглядеть<br>вернемся к вопросу о<br>for(int i=0; 2&gt;i; i++)<br>для того чтобы решить эту задачу надо добавить вот такой код в файл проекта PSplus.h<br>extern &quot;C++&quot;<br>template &lt;typename T, size_t N&gt;<br>char (*RtlpNumberOf( UNALIGNED T (&amp;)[N] ))[N];<br>#define RTL_NUMBER_OF_V2(A) (sizeof(*RtlpNumberOf(A)))<br><br>И в файле ScriptEngineLUA.cpp заменить строчку в функе InitializationLUA<br>for(int i=0; 2&gt;i; i++)<br>на<br>for(int i=0; RTL_NUMBER_OF_V2(PSplus)&gt;i; i++)<br> <br>Немного забегая в перед могу добавить, что мы также коснемся некой эмуляции с работой типов размером в 64 бита ;)<br>также в новом архиве будет присутствовать хелпер(sources.help) по &quot;командам&quot; файла sources<br>в нем будет описание опций, но только намекающие на понимание для чего это нужно, но не более<br><br>не все имеют желание научиццо вступать и компилировать и вполне возможно, что захотят поюзать плагин<br>для этого решено было добавить защиту в плагин от ЛАМО-челов<br>плагин будет своего рода полнофункциональной демкой, его ограничения будут запуск скрипта всего два раза и еще кое-что, что придеццо искать вам самим<br>так как плагин на данный момент имеет минимальный функционал то и защита его будет (-10)<br>по мере повышения возможностей плагина его защита будет увеличиваццо вплоть до ВМ`а %))<br>вешаццо паблик навесная защита никакая не будет(!) все только свое – типа крякми с разным уровнем защиты<br>в исходниках естественно кода защиты не будет, а вот в бинарике будет...
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=181148&amp;user=4551&amp;forum_n=7&amp;topic=10992.html&amp;page=0&amp;anchor=23" class="addthx" data-post="181148"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/mod.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=7&sortBy=0&page=0.html"><b>Оффтоп</b></a> <b class=bulletHead>&#8212;&#8250;</b> Plugin/ScriptIDA&amp;etc...</span></td>
</tr></table>
</div>
<a name=newreply></a>
<center><h3>У вас должно быть 20 пунктов ранга, чтобы оставлять сообщения в  этом подфоруме, но у вас только 0</h3></center><script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=10992" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
