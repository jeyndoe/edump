<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Сокеты - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Доброго времени суток уважаемые форумчане. Вот уже 2 ночи а я все не могу догнать кой чего... Если быть кратким то сразу вопрос - сокеты это относительно низкоуровневый интерфейс для работы с сетью (т.е. все высокоуровневые проги">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=50833'>vasilevradislav</a>, <a target='_blank' href='?action=userinfo&amp;user=55995'>tyns777</a>, <a target='_blank' href='?action=userinfo&amp;user=42072'>zombi-vadim</a> (+3 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Сокеты</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 января 2008 02:58 &middot; Поправил: smex <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Доброго времени суток уважаемые форумчане.<br>Вот уже 2 ночи а я все не могу догнать кой чего... <br>Если быть кратким то сразу вопрос - сокеты это относительно низкоуровневый интерфейс для работы с сетью (т.е. все высокоуровневые проги работают так или иначе через сокеты) либо сокеты это просто однин из интерфейсов для работы с сетью? <br><br>Т.е. к примеру по аналогии с функцией API ZwQueryDirectoryFile - эту функцию как &quot;ядро&quot; использует множество других функций, так ли дело обстоит с сокетами. Заранее благодарю всех всех всех ).
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178671&amp;user=12605&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=1" class="addthx" data-post="178671"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 января 2008 05:00 <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
<b>smex</b>, socket это стандартный API для работы с сетью на windows. Концепция была влята с unix систем где socket можно открыть и локальный (не TCP) и разговаривать с другой прогой запущенной на том же компе. Интерфейс winsock 1.1 это копия Berkeley sockets реализованая на windows. Внизу, в ядре, есть модуль tcpip.sys который реализовывает IP, TCP, ARP, и т.д. Ещё ниже живёт NDIS который связывает драйвера сетевых карт с протоколами.<br><br>Короче, socket это абстрактный API, где можно выбирать протоколы<br><br>en.wikipedia.org/wiki/Berkeley_sockets
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178676&amp;user=1737&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=2" class="addthx" data-post="178676"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 января 2008 05:14 &middot; Поправил: smex <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
Собственно что хотел узнать,s0larian наверно не много недопонял,или я как обычно криво объясняю что надо. Так вот<br>К примеру есть приложение на прямую не используещее сокеты ( к примеру через MFC), так вот это предложение если отправит данные то они могут пройти мимо сокетов или сокеты это ступенька лесницы, которую так или иначе используют все приложения. <br>PS: Или попробую еще немного перефразировать - смогу ли я ловить попытки прог вылести в инет перехватывая функции для работы с сокетами?<br>PS2: Выкрутасы типа драйвера и тд не в счет, нада не давать инет простеньким прогам - браузер, почта, торрнет и так далее в этом духе.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178678&amp;user=12605&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=3" class="addthx" data-post="178678"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 января 2008 10:23 &middot; Поправил: s0larian <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
Эта, из user mode самый стандартный подход это socket API, но дело не в этом. Сложность будет в winsock 2 - overlaped send/receive, т.к. это цепляется на IO completion ports. То есть это не простой blocking call как WriteFile.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178691&amp;user=1737&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=4" class="addthx" data-post="178691"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]ssx[/b]','')">ssx</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 352.4 (мудрец), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.96'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=33">Участник</a><br><font color=blue>retired</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 января 2008 10:37 <br><script type="text/javascript">QU('ssx','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ssx" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>smex пишет:<br>К примеру есть приложение на прямую не используещее сокеты ( к примеру через MFC)</I><br>MFC тоже использует сокеты - см. исходники, там все есть
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178694&amp;user=33&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=5" class="addthx" data-post="178694"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]Unmoored[/b]','')">Unmoored</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.2 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.48'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=9253">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 января 2008 11:00 <br><script type="text/javascript">QU('Unmoored','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Unmoored" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
&quot;Браузер, почта, торрнет и так далее в этом духе&quot; эти приложения точно юзают сокеты. Только вот перехват всех функций это очень большая работа, которая может привести к нестабильности системы. К тому же как собрались перехватывать? Для произвольного процесса тоже работенка еще та, тут лоадером не отделаешься. К томуже ws2_32.dll библиотека обертка пользовательского режима, которая использует &quot;настоящие&quot; API режима ядра через DeviceIOControl. Т.е. некоторые приложения вроде снифферов могут напрямую обращаться к объектам ядра. Если я правильно помню в винде есть API Layered Service Provider/Service Provider Interface (LSP/SPI) , позволяющие получать подробную информацию о состоянии стеков, установленных соединениях, активности процессов и воздействовать на них, модифицировать трафик. В MSDN есть раздел под названием Winsock SPI Functions посвященный этим API.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178697&amp;user=9253&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=6" class="addthx" data-post="178697"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 31 января 2008 02:11 &middot; Поправил: smex <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Насчет ws2_32.dll всем большое спасибо - не знал. <br>Но главное что енто возможно, а API передающие управление в драйвер ведь тоже можно перехватить... Пошел читать MSDN.<br>PS: Насчет способа перехвата - думаю на библиотеку хук поставить чтобы во все оконные приложения загружалась. Способ уже мной проверенный, глюков не вызывал.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178765&amp;user=12605&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=7" class="addthx" data-post="178765"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 31 января 2008 04:09 <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<b>smex</b>, я ж уже отписал, дело не в том что б перехватить export dll, а в том что б узнать когда именно данные приходят в апликуху.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178771&amp;user=1737&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=8" class="addthx" data-post="178771"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]smex[/b]','')">smex</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 31.5 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.95'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12605">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 01 февраля 2008 08:11 &middot; Поправил: smex <br><script type="text/javascript">QU('smex','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=smex" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
Ого, все не так просто как мне кажется. А если перехватывать не экспорт в длл, а внедряться в каждую прогу и перехватывать нужные функции. Согласен это извращение, но как  я понимаю другого выхода у меня нет... Или может кто подскажет что, направит куда нибудь (только не на три буквы), нужен простенький Ring3 фаерволл.<br><br>PS: Блин смудил, хотел поблагодарить всех а потом тему закрыть.. Промазал мимо кнопки. Короч свиду меня вы направили в нужном направлении, всем большое спасибо за помощь, ссылки и поддержку. )))
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178875&amp;user=12605&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=9" class="addthx" data-post="178875"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 01 февраля 2008 10:01 &middot; Поправил: s0larian <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<b>smex</b>, ты не догоняешь главного - с winsock2 можно сокету &quot;присвоить&quot; event handle и сказать что ты именно так ты хочешь узнавать когда приходят данные. Потом следует WaitForSingleObject(). Что ты будешь перехватывать в таком случае? <img src="img/smilies/s3.gif" alt=""><br><br>Firewall делается в ядре, на уровне NDIS (пакекты), то есть под tcpip.sys. Другой вариант - TDI filter, но тут потоки данных, не пакеты. Иногда оба подхода сразу...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178880&amp;user=1737&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=10" class="addthx" data-post="178880"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Unmoored[/b]','')">Unmoored</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.2 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.48'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=9253">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 01 февраля 2008 10:47 <br><script type="text/javascript">QU('Unmoored','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Unmoored" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
www.microsoft.com/msj/0599/LayeredService/LayeredService.aspx
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178882&amp;user=9253&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=11" class="addthx" data-post="178882"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]Great[/b]','')">Great</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.0 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.47'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=15173">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 01 февраля 2008 16:29 <br><script type="text/javascript">QU('Great','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Great" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=11142.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
Для юзермода это самый низкоуровневый документированный вариант работы с сетью.<br>В общей сложности структура такова:<br><br>1. (опционально wsock32.dll как переходник к ws2_32)<br>2.    ws2_32.dll - WIN SOCKETS    - обычный интерфейс<br>3.    ws2help.dll - win sock helper - вспомогательные функции.<br>на этом заканчивается юзермодная часть, ws2help вызывает NtDeviceIoControlFile для взаимодействия с кернел частью сокетов - драйвером AFD.SYS (Auxillary Function Driver)<br>А он уже с NDIS общается и прочей ерундой
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=178919&amp;user=15173&amp;forum_n=6&amp;topic=11142.html&amp;page=0&amp;anchor=12" class="addthx" data-post="178919"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Сокеты</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=11142" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
