<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Программа работает только внутри отладчика - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Есть код: Code:       proc&nbsp;check;invoke RegisterHotKey,0,1,0x0004,0x41;invoke RegisterHotKey,0,2,0x0004,0x4cstart3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invoke&nbsp;AdjustTokenPrivileges,[phToken],0,PrivilegeCount&n">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=42072'>zombi-vadim</a>, <a target='_blank' href='?action=userinfo&amp;user=31361'>zds</a> (+4 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Программа работает только внутри отладчика</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=6&amp;topic=22201&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=6&amp;topic=22201&amp;page=2.html">3</a> . <a href="action=vthread&amp;forum=6&amp;topic=22201&amp;page=3.html">4</a> . <a href="action=vthread&amp;forum=6&amp;topic=22201&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 сентября 2013 20:27 &middot; Поправил: Envy12 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Есть код:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;check</li><li class="hl_l1"><span class="hl_comment">;invoke RegisterHotKey,0,1,0x0004,0x41</span></li><li class="hl_l0"><span class="hl_comment">;invoke RegisterHotKey,0,2,0x0004,0x4c</span></li><li class="hl_l1">start3<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;AdjustTokenPrivileges<span class="hl_char">,</span><span class="hl_char">[</span>phToken<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>PrivilegeCount&nbsp;<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>prcs<span class="hl_char">.</span>dwSize<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function">sizeof</span><span class="hl_char">.</span>PROCESSENTRY32</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;CreateToolhelp32Snapshot<span class="hl_char">,</span>&nbsp;TH32CS_SNAPPROCESS<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32First<span class="hl_char">,</span><span class="hl_registr">eax</span><span class="hl_char">,</span>prcs</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_char">[</span>memhandle2<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">loop1<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;GetMessage<span class="hl_char">,</span>msg<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span><span class="hl_number">1</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>je</b></span>&nbsp;stop</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span><span class="hl_registr">edi</span><span class="hl_char">]</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_char">[</span>prcs<span class="hl_char">.</span>szExeFile<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jnz</b></span>&nbsp;kill2</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>add</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_number">4</span></li><li class="hl_l1">next<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32Next<span class="hl_char">,</span><span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>prcs</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jne</b></span>&nbsp;&nbsp;&nbsp;&nbsp;loop1</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;start3</li><li class="hl_l0">kill2<span class="hl_char">:</span></li><li class="hl_l1"><span class="hl_function"><b>stdcall</b></span>&nbsp;kill1</li><li class="hl_l0"><span class="hl_function"><b>jmp</b></span>&nbsp;next</li><li class="hl_l1">stop<span class="hl_char">:</span></li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;GetMessage<span class="hl_char">,</span>msg<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span><span class="hl_number">2</span></li><li class="hl_l0"><span class="hl_function"><b>jnz</b></span>&nbsp;next</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;Sleep<span class="hl_char">,</span><span class="hl_number">1200000</span></li><li class="hl_l0"><span class="hl_function"><b>jmp</b></span>&nbsp;next</li><li class="hl_l1"><span class="hl_function">ret</span></li><li class="hl_l0"><span class="hl_function">endp</span></li>        </ol>
    </div>
</div></div>
<br>Первые 2 стркои закоментил тк с ними функция отказывается работать вне отладчика, без них все ок, как в отладчике так и без. В чем тут дело?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331298&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=1" class="addthx" data-post="331298"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Phantom007[/b]','')">Phantom007</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 19.7 (новичок), 14thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.62'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=33369">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 сентября 2013 20:37 <br><script type="text/javascript">QU('Phantom007','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Phantom007" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
<b>Envy12</b><br>Работает - не трогай. (с)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331299&amp;user=33369&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=2" class="addthx" data-post="331299"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]UniSoft[/b]','')">UniSoft</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/1288.png" alt=""><br><span class=txtSm>Ранг: 52.0 (постоянный), 146thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.41'>Активность: 0.03<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=1288">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 сентября 2013 20:37 <br><script type="text/javascript">QU('UniSoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UniSoft" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
может стоило бы почитать про RegisterHotKey.<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">BOOL&nbsp;RegisterHotKey<span class="hl_char">(</span>&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;HWND&nbsp;hWnd<span class="hl_char">,</span>&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;id<span class="hl_char">,</span>&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;UINT&nbsp;fsModifiers<span class="hl_char">,</span>&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;UINT&nbsp;vk&nbsp;</li><li class="hl_l1"><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">hWnd&nbsp;&nbsp;<span class="hl_char">[</span><span class="hl_function">in</span><span class="hl_char">]</span><span style="word-break: break-all">&nbsp;Handle&nbsp;to&nbsp;the&nbsp;window&nbsp;that&nbsp;will&nbsp;receive&nbsp;WM_HOTKEY&nbsp;messages&nbsp;generated&nbsp;by&nbsp;the&nbsp;hot&nbsp;key</span><span class="hl_char">.</span>&nbsp;The&nbsp;value&nbsp;of&nbsp;<span class="hl_char">&lt;</span>b<span class="hl_char">&gt;</span><span class="hl_function"><b>this</b></span>&nbsp;parameter&nbsp;should&nbsp;<span class="hl_function"><b>not</b></span>&nbsp;be&nbsp;<span class="hl_function">NULL</span><span class="hl_char">.</span><span class="hl_char">&lt;</span><span class="hl_char">/</span>b<span class="hl_char">&gt;</span></li>        </ol>
    </div>
</div></div>
<br><br>если хотите использовать RegisterHotKey, то создавайте окошко, хотя бы невидимое, а там ловите WM_HOTKEY
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331300&amp;user=1288&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=3" class="addthx" data-post="331300"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 сентября 2013 20:40 &middot; Поправил: Envy12 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<I>Phantom007 пишет:<br>Работает - не трогай. (с)  </I><br><img src="img/smilies/s5.gif" alt=""><br><br><br><I>UniSoft пишет:<br>если хотите использовать RegisterHotKey, то создавайте окошко, хотя бы невидимое, а там ловите WM_HOTKEY  </I><br>Так и без окошка GetMessage ловит хоткеи. А нащет окна, незнаю, может есть какой-то нормальный способ, но для меня сделать в фасме окно почти непосильная задача, поэтому я всячески избегаю их. В msdn про hwnd не все так однозначно.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331301&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=4" class="addthx" data-post="331301"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 сентября 2013 20:57 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
Программа работает только внутри отладчика - прям какой-то <b>MRD</b> (DRM наоборот)<br>Может там есть код:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function">If</span><span class="hl_char">(</span>IsDebuggerPresent<span class="hl_char">(</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">ExitProcess<span class="hl_char">(</span><span class="hl_number">0</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<img src="img/smilies/s5.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331303&amp;user=26651&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=5" class="addthx" data-post="331303"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=34639" title="23-09-2013 17:28, ранг:2.1" target="_blank">deniskore</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 сентября 2013 20:58 &middot; Поправил: Envy12 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<I>ELF_7719116 пишет:<br>Программа работает только внутри отладчика - прям какой-то MRD (DRM наоборот) </I><br>Ну не совсем так конкретно, она работает, но функция не доходит до:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>stdcall</b></span>&nbsp;kill1</li>        </ol>
    </div>
</div></div>
<br>а должна.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331304&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=6" class="addthx" data-post="331304"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 сентября 2013 04:27 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<b>Envy12</b>,<br>невидимое окошко-то создайте. Мало ли что там &quot;и так работает&quot;...<br><br>- - - - - - - - - - - - -- - - -  -- - - - - -- &gt;8<br>;;Create invisible main window:<br>push 0                   ;; lParam <br>push hInst             ;; hInstance    <br>push 0                   ;; menu <br>push 0                   ;; Parent hWnd<br>push 0                   ;; height  <br>push 0                   ;; width  <br>push 1                   ;; start_y  <br>push 1                   ;; start_x  <br>push WS_DISABLED          ;; 8000000h  - window style         <br>push offset szTitleName    ;; any title string ptr<br>push offset szClassName  ;; Register class structure first!<br>push 0                               ;; extra style    <br>call CreateWindowEx  <br>- - - - - -- - - -  -- - - - - -- &gt;8<br><br>Как заполнять WNDCLASS STRUC - гляньте в примерах.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331337&amp;user=35473&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=7" class="addthx" data-post="331337"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=26595" title="24-09-2013 15:25, ранг:5.9" target="_blank">Envy12</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 сентября 2013 19:40 &middot; Поправил: Envy12 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
Проблемка с recource data, что нужно поставить туда? После CreateWindow входит в процедуру, но хендл не возвращает, ошибка 714. В мсдн описано 2 случая либо фейл, либо succeed, но у меня функция как бы сработала, однако hwnd нету.<br><br>Все разобрался) Только вот все равно не работает. Если в GetMessage указать hwnd, то прога останавливается, а оно мне ненужно.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331385&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=8" class="addthx" data-post="331385"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]Dr0p[/b]','')">Dr0p</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/33727.png" alt=""><br><span class=txtSm>Ранг: 72.3 (постоянный), 133thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.5'>Активность: 0.38<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=33727">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 сентября 2013 22:03 <br><script type="text/javascript">QU('Dr0p','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dr0p" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<b>Envy12</b><br><br>Ты бы свою задачу описал, а не ущербные попытки её решения <img src="img/smilies/s13.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331390&amp;user=33727&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=9" class="addthx" data-post="331390"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 сентября 2013 22:36 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<b>Envy12</b>,<br>тут же написали, что обработку хоткеев нужно выполнять в оконной процедуре...<br>так и выполните обработку в ней - установите какой-нибудь флажок.<br>Класс окна должен быть зарегистрирован. При его регистрации - задаётся указатель на оконную процедуру.<br><br>Ещё лучше - найдите готовую программку, где это всё реализовано, и посмотрите, как сделано.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331394&amp;user=35473&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=10" class="addthx" data-post="331394"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 сентября 2013 22:41 &middot; Поправил: Envy12 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<I>Dr0p пишет:<br>Ты бы свою задачу описал, а не ущербные попытки её решения  </I><br>Нужно чтобы функция, работала и доходила до
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>stdcall</b></span>&nbsp;kill1</li>        </ol>
    </div>
</div></div>
 в оле все пашет, без неё нет.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331395&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=11" class="addthx" data-post="331395"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 сентября 2013 22:50 &middot; Поправил: Envy12 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<I>dosprog пишет:<br>так и выполните обработку в ней - установите какой-нибудь флажок.<br>Класс окна должен быть зарегистрирован. При его регистрации - задаётся указатель на оконную процедуру. </I><br>Я уже все сделал, CreateWindows, класс зарегал. Если я сделаю проверку хоткея в оконной процедуре, то она <strike>зацикливается</strike> (выполняется слишком долго) и не выходит оттуда.<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;check</li><li class="hl_l1">start3<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;CreateToolhelp32Snapshot<span class="hl_char">,</span>&nbsp;TH32CS_SNAPPROCESS<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32First<span class="hl_char">,</span><span class="hl_registr">eax</span><span class="hl_char">,</span>prcs</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_char">[</span>memhandle2<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">loop1<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>stdcall</b></span>&nbsp;WindowsProc<span class="hl_char">,</span><span class="hl_char">[</span>hwnd1<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span><span class="hl_registr">edi</span><span class="hl_char">]</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_char">[</span>prcs<span class="hl_char">.</span>szExeFile<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jnz</b></span>&nbsp;kill2</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>add</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_number">4</span></li><li class="hl_l1">next<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32Next<span class="hl_char">,</span><span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>prcs</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jne</b></span>&nbsp;&nbsp;&nbsp;&nbsp;loop1</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;start3</li><li class="hl_l0">kill2<span class="hl_char">:</span></li><li class="hl_l1"><span class="hl_function"><b>stdcall</b></span>&nbsp;kill1</li><li class="hl_l0"><span class="hl_function"><b>jmp</b></span>&nbsp;next</li><li class="hl_l1"><span class="hl_function">ret</span></li><li class="hl_l0"><span class="hl_function">endp</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;WindowsProc<span class="hl_char">,</span>hwnd<span class="hl_char">,</span>uint<span class="hl_char">,</span>wparam<span class="hl_char">,</span>lparam</li><li class="hl_l1"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_char">[</span>reg<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0"><span class="hl_function"><b>jnz</b></span>&nbsp;next2</li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_char">[</span>hwnd1<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;RegisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">1</span><span class="hl_char">,</span>0x0004<span class="hl_char">,</span>0x41</li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;RegisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">2</span><span class="hl_char">,</span>0x0004<span class="hl_char">,</span>0x4c</li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_char">[</span>reg<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">1</span></li><li class="hl_l0">next2<span class="hl_char">:</span></li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;GetMessage<span class="hl_char">,</span>msg<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span><span class="hl_number">1</span></li><li class="hl_l1"><span class="hl_function"><b>jne</b></span>&nbsp;exit1</li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;GetMessage<span class="hl_char">,</span>msg<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span><span class="hl_number">2</span></li><li class="hl_l0"><span class="hl_function"><b>jnz</b></span>&nbsp;exit1</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;ExitProcess<span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">exit1<span class="hl_char">:</span></li><li class="hl_l1"><span class="hl_function">ret</span></li><li class="hl_l0"><span class="hl_function">endp</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=331396&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=12" class="addthx" data-post="331396"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]Dr0p[/b]','')">Dr0p</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/33727.png" alt=""><br><span class=txtSm>Ранг: 72.3 (постоянный), 133thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.5'>Активность: 0.38<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=33727">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 сентября 2013 22:55 <br><script type="text/javascript">QU('Dr0p','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dr0p" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
<b>Envy12</b><br><br>&gt; Нужно чтобы функция, работала и доходила до<br><br>Ты бы свою задачу описал, а не ущербные попытки её решения
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331397&amp;user=33727&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=13" class="addthx" data-post="331397"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 сентября 2013 22:57 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
<I>Dr0p пишет:<br>Ты бы свою задачу описал, а не ущербные попытки её решения  </I><br>Задача, сделать так чтобы записывался список исключения для процессов, а потом закрывать все что туда не входит + <u>выключать по хоткею</u>.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331398&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=14" class="addthx" data-post="331398"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 сентября 2013 23:00 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<b>Envy12</b>,<br>короче, неправильно.<br>В оконной процедуре нужно ТОЛЬКО УСТАНАВЛИВАТЬ ФЛАЖКИ.<br>Только.<br><br>Найдите программку BAZARBOX.EXE - там корректно выполняется обработка горячих клавиш. Классика.<br><br>P.S. - вот она: <img src="img/attach.gif" alt=""> <a href="./files/2030_24.09.2013_EXELAB.rU.tgz">2030_24.09.2013_EXELAB.rU.tgz</a> - BAZARBOX.RAR
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331399&amp;user=35473&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=15" class="addthx" data-post="331399"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 сентября 2013 23:18 &middot; Поправил: Envy12 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
Непойму, зачем там такой долгий цикл? <strike>Вроде в виндовой процедуре</strike>.<br>0040124D<br>Разобрался
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331400&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=16" class="addthx" data-post="331400"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 сентября 2013 00:39 &middot; Поправил: Envy12 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
Сделал виндовую процедуру, добавил туда проверку на хоткеи, <strike>все</strike> работает. В запущенном виде, без отладчика все равно не работает<img src="img/smilies/s9.gif" alt=""><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;WindowsProc<span class="hl_char">,</span>hwnd<span class="hl_char">,</span>uint<span class="hl_char">,</span>wparam<span class="hl_char">,</span>lparam</li><li class="hl_l1"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_char">[</span>reg<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0"><span class="hl_function"><b>jnz</b></span>&nbsp;exit1</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;RegisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">1</span><span class="hl_char">,</span>0x0004<span class="hl_char">,</span>0x41</li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;RegisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">2</span><span class="hl_char">,</span>0x0004<span class="hl_char">,</span>0x4c</li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_char">[</span>reg<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">1</span></li><li class="hl_l0">exit1<span class="hl_char">:</span></li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span>uint<span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>0x312</li><li class="hl_l1"><span class="hl_function"><b>jne</b></span>&nbsp;exit3</li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span>wparam<span class="hl_char">]</span></li><li class="hl_l1"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_number">1</span></li><li class="hl_l0"><span class="hl_function"><b>jne</b></span>&nbsp;exit3</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;GetMessage<span class="hl_char">,</span>msg<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span><span class="hl_number">2</span></li><li class="hl_l1"><span class="hl_function"><b>jne</b></span>&nbsp;exit3</li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;TranslateMessage<span class="hl_char">,</span>msg</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;DispatchMessage<span class="hl_char">,</span>msg</li><li class="hl_l0"><span class="hl_function"><b>stdcall</b></span>&nbsp;pause1</li><li class="hl_l1">exit3<span class="hl_char">:</span></li><li class="hl_l0"><span class="hl_function">ret</span></li><li class="hl_l1"><span class="hl_function">endp</span></li>        </ol>
    </div>
</div></div>
<br>Если приаттачится к процессу, то он стоит ничего не делает, даже незаходит на бряки, по которым в отладчике идет.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331404&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=17" class="addthx" data-post="331404"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 сентября 2013 00:56 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
<noindex><a href="http://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=-1#15" rel="nofollow" target="_blank">--&gt; Пост #15 &lt;--</a></noindex>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331405&amp;user=35473&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=18" class="addthx" data-post="331405"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 сентября 2013 13:43 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
То-есть мне нужно убрать из виндовой процедуры все кроме cmp eax,? Мне нужно обработать последовательно 2 хоткея, чтобы по отдельности они не работали, и чтобы строго после первого шел второй.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331426&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=19" class="addthx" data-post="331426"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 сентября 2013 20:10 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
<b>Envy12</b>,<br>вот странное дело, я же дал вам пример готовой работающей программки.<br>Ну что стОит напустить на неё IDA и выдрать оттуда интересующее?..<br><br>Вообще, как я понял, у вас консольная программа. WndProc при этом <b>делать</b> ничего не должна. <br>В ней - только обработка <b>заранее</b> назначенных хоткеев - установка своих внутренних флажков.<br>Как уже писалось выше от <b>UniSoft</b>...<br><br>Подумайте, а что программа будет делать с теми символами, которые будут скапливаться в STDIN <br>от случайных или неслучайных нажатий на любые кнопки во время её работы?<br>То-есть, помимо реакции на &quot;горячие&quot; клавиши должны обрабатываться и символы из STDIN,<br>иначе по завершении вашей программы все нажатия других (&quot;негорячих&quot;) кнопок будут вывалены в <br>командную строку консоли.<br><br>P.S. - ((Учитывая следующий пост от <b>UniSoft</b>)) - если хотите, чтобы программа работала на всей<br>линейке систем MS, нужно &quot;расслабиться и попытаться получить удовольствие&quot; от всех их (MS) штучек, <br>сделав всё по документации. Это нелегко. ))
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331458&amp;user=35473&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=20" class="addthx" data-post="331458"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]UniSoft[/b]','')">UniSoft</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/1288.png" alt=""><br><span class=txtSm>Ранг: 52.0 (постоянный), 146thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.41'>Активность: 0.03<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=1288">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 сентября 2013 20:58 <br><script type="text/javascript">QU('UniSoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UniSoft" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#21');return false;">#21</a> </span><div align=left><br><div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;GetMessage<span class="hl_char">,</span>msg<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span><span class="hl_number">2</span>&nbsp;<span class="hl_comment">; &lt;&lt;&lt;&lt;&lt;&lt; как так?????</span></li><li class="hl_l0"><span class="hl_function"><b>jne</b></span>&nbsp;exit3</li>        </ol>
    </div>
</div></div>
<br>WINAPI функция возвращает результат в eax/rax...<br>Ну а GetMessage возвращает BOOL... <br>значение в ecx по возвращению из функции считается случайным, и не должно использоваться.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331459&amp;user=1288&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=21" class="addthx" data-post="331459"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=35473" title="25-09-2013 17:38, ранг:13.6" target="_blank">dosprog</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 сентября 2013 23:04 &middot; Поправил: Envy12 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
Не знаю можно ли прогу считать консольной, если у ней нету окна или консоли запущенной.<br>Я вашу программу прогнал в оле и постарался сделать также.<br>То-есть вы считаете, что у меня прога не правильно работает без отладчика, по вине stdin? Какие данные туда идут? Я никаких манипуляций с ним не производил. У меня проблема состоит в том и только том, что функция перестает работать с хоткеями, без них же все ок, также как и в отладчике.<br>Максимум программа должна работать на хп и 7, минимум только на 7.<br>GetMessage в  ecx пишет ид хоткея, случайных значений там не наблюдал.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331461&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=22" class="addthx" data-post="331461"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 сентября 2013 23:26 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
<b>Envy12</b>,<br>Программа BAZARBOX.EXE - не является консольной. Это GUI-приложение.<br>Прогу можно считать консольной, если она  требует запуска консоли. <br>Консольная программа тоже может создавать окна, в том числе и видимые, <br>но консоль ей требуется по определению.<br>Ваш код не работает по той причине, что вы неверно используете функцию RegisterHotKey().<br>Может, вообще отказаться от хоткеев и обойтись работой со STDIN/STDOUT ?<br><br>Впрочем, вот скелет консольной программы с обработкой хоткеев, а дальше я пас.<br><img src="img/attach.gif" alt=""> <a href="./files/923a_25.09.2013_EXELAB.rU.tgz">923a_25.09.2013_EXELAB.rU.tgz</a> - TEST_HOT.EXE
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331463&amp;user=35473&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=23" class="addthx" data-post="331463"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]UniSoft[/b]','')">UniSoft</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/1288.png" alt=""><br><span class=txtSm>Ранг: 52.0 (постоянный), 146thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.41'>Активность: 0.03<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=1288">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 сентября 2013 02:51 &middot; Поправил: UniSoft <br><script type="text/javascript">QU('UniSoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UniSoft" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
<I>Envy12 пишет:<br>Не знаю можно ли прогу считать консольной, если у ней нету окна или консоли запущенной. </I><br>Нельзя.<br><br><I>Envy12 пишет:<br>То-есть вы считаете, что у меня прога не правильно работает без отладчика </I><br>Уже сказали почему, я даже вырезку привел из MSDN, но вы почему-то упорно не верите...<br>Не просто так там наверное сказали, что <b>hWnd не может быть NULL.</b><br><br><I>Envy12 пишет:<br>GetMessage в  ecx пишет ид хоткея, случайных значений там не наблюдал. </I><br>Да мало ли что вы наблюдаете в отладчике, есть некие стандарты, <br>хотите чтобы работало, пишите правильно... Придерживайтесь стандартов.<br>Примеров же навалом, на той же странице fasm&#039;а...<br>В вашей ревизии ядра может <strike>случайно</strike> <b>каким-то образом</b> в ecx и попадает id хоткея (хотя я <u>сомневаюсь</u>), но никто не гарантирует, что в других ревизиях будет также... <br><br>Ну и вот рабочий код на закуску, набросал быстренько... <br>Скрытое окошко, <br>  <b>CTRL+F1</b> - выводит MessageBox, <br>  <b>CTRL+F2</b> (выводит MessageBox и далее выходит из проги)<br>(Хотя честно говоря, я никогда ранее не использовал связку PostThreadMessage/GetMessage)<br>Интересно было бы услышать отзывы от спецов <img src="img/smilies/s1.gif" alt=""><br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>format</b></span>&nbsp;PE&nbsp;GUI&nbsp;<span class="hl_number">4</span><span class="hl_char">.</span><span class="hl_number">0</span></li><li class="hl_l1"><span class="hl_function"><b>entry</b></span>&nbsp;start</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'win32wx.inc'</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>section</b></span>&nbsp;<span class="hl_quote">'.data'</span>&nbsp;<span class="hl_function"><b>data</b></span>&nbsp;<span class="hl_function"><b>readable</b></span>&nbsp;<span class="hl_function">writeable</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;_class&nbsp;TCHAR&nbsp;<span class="hl_quote">'FASMWIN32'</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;_title&nbsp;TCHAR&nbsp;<span class="hl_quote">'window example'</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;wc&nbsp;WNDCLASS&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>WindowProc<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span>COLOR_BTNFACE<span class="hl_char">+</span><span class="hl_number">1</span><span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span>_class</li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>section</b></span>&nbsp;<span class="hl_quote">'.bss'</span>&nbsp;<span class="hl_function"><b>readable</b></span>&nbsp;<span class="hl_function">writeable</span></li><li class="hl_l1">&nbsp;&nbsp;g_cookie&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;g_uniqmsg&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;g_hWnd&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;g_hThread&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;g_ThreadID&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;g_busy&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;g_msg&nbsp;MSG</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>section</b></span>&nbsp;<span class="hl_quote">'.code'</span>&nbsp;<span class="hl_function"><b>code</b></span>&nbsp;<span class="hl_function"><b>readable</b></span>&nbsp;<span class="hl_function">executable</span></li><li class="hl_l0"><span class="hl_comment">;======================================</span></li><li class="hl_l1">&nbsp;&nbsp;start<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>g_busy<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function">FALSE</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;GetModuleHandle<span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>wc<span class="hl_char">.</span>hInstance<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;LoadIcon<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>IDI_APPLICATION</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>wc<span class="hl_char">.</span>hIcon<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;LoadCursor<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>IDC_ARROW</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>wc<span class="hl_char">.</span>hCursor<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;RegisterClass<span class="hl_char">,</span>wc</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit_process</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;CreateWindowEx<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>_class<span class="hl_char">,</span>_title<span class="hl_char">,</span>WS_SYSMENU<span class="hl_char">,</span><span class="hl_number">128</span><span class="hl_char">,</span><span class="hl_number">128</span><span class="hl_char">,</span><span class="hl_number">256</span><span class="hl_char">,</span><span class="hl_number">192</span><span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_char">[</span>wc<span class="hl_char">.</span>hInstance<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function"><b>NULL</b></span>&nbsp;<span class="hl_comment">;WS_VISIBLE+</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>g_hWnd<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>test</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit_process</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;ShowWindow<span class="hl_char">,</span><span class="hl_registr">eax</span><span class="hl_char">,</span>SW_HIDE</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;GetTickCount</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>xor</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span>g_hWnd<span class="hl_char">]</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>g_cookie<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;RegisterWindowMessage<span class="hl_char">,</span><span class="hl_quote">&quot;my_unique_message&quot;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span>WM_USER</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmovz</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_registr">ecx</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>g_uniqmsg<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;CreateThread<span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>ThreadProc<span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>g_ThreadID</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>g_hThread<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;msg_loop<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;GetMessage<span class="hl_char">,</span>g_msg<span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end_loop</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;TranslateMessage<span class="hl_char">,</span>g_msg</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;DispatchMessage<span class="hl_char">,</span>g_msg</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg_loop</li><li class="hl_l0">&nbsp;&nbsp;end_loop<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;PostThreadMessage<span class="hl_char">,</span><span class="hl_char">[</span>g_ThreadID<span class="hl_char">]</span><span class="hl_char">,</span>WM_QUIT<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;WaitForSingleObject<span class="hl_char">,</span><span class="hl_char">[</span>g_hThread<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_char">-</span><span class="hl_number">1</span>&nbsp;<span class="hl_comment">; INFINITE</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;MessageBox<span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_quote">&quot;bye bye&quot;</span><span class="hl_char">,</span>_title<span class="hl_char">,</span>MB_OK<span class="hl_char">+</span>MB_SYSTEMMODAL</li><li class="hl_l0">&nbsp;&nbsp;exit_process<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;ExitProcess<span class="hl_char">,</span><span class="hl_char">[</span>g_msg<span class="hl_char">.</span>wParam<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_comment">;======================================</span></li><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;WindowProc&nbsp;hwnd<span class="hl_char">,</span>wmsg<span class="hl_char">,</span>wparam<span class="hl_char">,</span>lparam</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>ebx</b></span>&nbsp;<span class="hl_registr"><b>esi</b></span>&nbsp;<span class="hl_registr">edi</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>wmsg<span class="hl_char">]</span><span class="hl_char">,</span>WM_CREATE</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>je</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wmcreate</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>wmsg<span class="hl_char">]</span><span class="hl_char">,</span>WM_DESTROY</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>je</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wmdestroy</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>wmsg<span class="hl_char">]</span><span class="hl_char">,</span>WM_HOTKEY</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>je</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wmhotkey</li><li class="hl_l0">&nbsp;&nbsp;defwndproc<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;DefWindowProc<span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_char">[</span>wmsg<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_char">[</span>wparam<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_char">[</span>lparam<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish</li><li class="hl_l1">&nbsp;&nbsp;wmhotkey<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span>wparam<span class="hl_char">]</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>je</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hotkey1</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">2</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>je</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hotkey2</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defwndproc</li><li class="hl_l0">&nbsp;&nbsp;hotkey1<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>g_busy<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function">FALSE</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jnz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returnZ</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>g_busy<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function">TRUE</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;PostThreadMessage<span class="hl_char">,</span><span class="hl_char">[</span>g_ThreadID<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_char">[</span>g_uniqmsg<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_char">[</span>g_cookie<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">1</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returnZ</li><li class="hl_l0">&nbsp;&nbsp;hotkey2<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>g_busy<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function">FALSE</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jnz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returnZ</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>g_busy<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function">TRUE</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;PostThreadMessage<span class="hl_char">,</span><span class="hl_char">[</span>g_ThreadID<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_char">[</span>g_uniqmsg<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_char">[</span>g_cookie<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">2</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returnZ</li><li class="hl_l0">&nbsp;&nbsp;wmcreate<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;RegisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">,</span>&nbsp;MOD_CONTROL<span class="hl_char">,</span>&nbsp;VK_F1</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;RegisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">2</span><span class="hl_char">,</span>&nbsp;MOD_CONTROL<span class="hl_char">,</span>&nbsp;VK_F2</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returnZ</li><li class="hl_l0">&nbsp;&nbsp;wmdestroy<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;UnregisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;UnregisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">2</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;PostQuitMessage<span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;returnZ<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>xor</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;finish<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>edi</b></span>&nbsp;<span class="hl_registr"><b>esi</b></span>&nbsp;<span class="hl_registr">ebx</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">ret</span></li><li class="hl_l1"><span class="hl_function">endp</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_comment">;======================================</span></li><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;ThreadProc&nbsp;lparam</li><li class="hl_l1"><span class="hl_function"><b>local</b></span>&nbsp;msg<span class="hl_char">:</span>MSG</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>ebx</b></span>&nbsp;<span class="hl_registr"><b>esi</b></span>&nbsp;<span class="hl_registr">edi</span></li><li class="hl_l1">&nbsp;&nbsp;thread_ready<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>g_busy<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function">FALSE</span></li><li class="hl_l1">&nbsp;&nbsp;thread_msg_loop<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;GetMessage<span class="hl_char">,</span><span class="hl_function"><b>addr</b></span>&nbsp;msg<span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread_end_loop</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; just in case</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>msg<span class="hl_char">.</span>message<span class="hl_char">]</span><span class="hl_char">,</span>WM_QUIT</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread_end_loop</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; Thread messages, posted by the PostThreadMessage function,</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; have a message hWnd value of NULL</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>msg<span class="hl_char">.</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function"><b>NULL</b></span>&nbsp;<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jnz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;thread_msg_loop</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; is it our message ?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; this is simple protection from messages send from another process</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span>g_uniqmsg<span class="hl_char">]</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>msg<span class="hl_char">.</span>message<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jnz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;thread_msg_loop</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span>g_cookie<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>msg<span class="hl_char">.</span>wParam<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jnz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;thread_msg_loop</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; here process our messages</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>msg<span class="hl_char">.</span>lParam<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">1</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_hotkey1</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>msg<span class="hl_char">.</span>lParam<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">2</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_hotkey2</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;----------------------</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread_msg_loop</li><li class="hl_l1">&nbsp;&nbsp;process_hotkey1<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;MessageBox<span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_quote">&quot;pressed hotkey 1&quot;</span><span class="hl_char">,</span>_title<span class="hl_char">,</span>MB_OK<span class="hl_char">+</span>MB_SYSTEMMODAL</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread_ready</li><li class="hl_l0">&nbsp;&nbsp;process_hotkey2<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;MessageBox<span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_quote">&quot;pressed hotkey 2&quot;</span><span class="hl_char">,</span>_title<span class="hl_char">,</span>MB_OK<span class="hl_char">+</span>MB_SYSTEMMODAL</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;SendMessage<span class="hl_char">,</span><span class="hl_char">[</span>g_hWnd<span class="hl_char">]</span><span class="hl_char">,</span>WM_CLOSE<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread_ready</li><li class="hl_l0">&nbsp;&nbsp;thread_end_loop<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>edi</b></span>&nbsp;<span class="hl_registr"><b>esi</b></span>&nbsp;<span class="hl_registr">ebx</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">ret</span></li><li class="hl_l1"><span class="hl_function">endp</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>section</b></span>&nbsp;<span class="hl_quote">'.idata'</span>&nbsp;<span class="hl_function"><b>import</b></span>&nbsp;<span class="hl_function"><b>data</b></span>&nbsp;<span class="hl_function"><b>readable</b></span>&nbsp;<span class="hl_function">writeable</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;<span class="hl_function"><b>library</b></span>&nbsp;kernel32<span class="hl_char">,</span><span class="hl_quote">'KERNEL32.DLL'</span><span class="hl_char">,</span><span class="hl_char">\</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user32<span class="hl_char">,</span><span class="hl_quote">'USER32.DLL'</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;<span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'api\kernel32.inc'</span></li><li class="hl_l1">&nbsp;&nbsp;<span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'api\user32.inc'</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=331464&amp;user=1288&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=24" class="addthx" data-post="331464"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 сентября 2013 19:28 &middot; Поправил: Envy12 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#25');return false;">#25</a> </span><div align=left><br>
<I>dosprog пишет:<br>Программа BAZARBOX.EXE - не является консольной. Это GUI-приложение. </I><br>Я говорил про свою программу. У меня в ней нету консоли.<br><br><I>dosprog пишет:<br>Ваш код не работает по той причине, что вы неверно используете функцию RegisterHotKey(). </I><br><br><I>UniSoft пишет:<br>Уже сказали почему, я даже вырезку привел из MSDN, но вы почему-то упорно не верите...<br>Не просто так там наверное сказали, что hWnd не может быть NULL. </I><br>А вы мне почему не верите? Я привел свой код:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;RegisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">1</span><span class="hl_char">,</span>0x0004<span class="hl_char">,</span>0x41</li>        </ol>
    </div>
</div></div>
<br><br><I>UniSoft пишет:<br>Да мало ли что вы наблюдаете в отладчике, есть некие стандарты,<br>хотите чтобы работало, пишите правильно... Придерживайтесь стандартов. </I><br>Я сам долго не хотел делать в виндовой процедуре еще один вызов GetMessage, но мне нужно чтобы эти хоткеи обрабатывались последовательно.<br><br>У меня не было ShowWindow, возможно в этом проблема.<br>Так еще можно долго гадать, вот код, кому интересно:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>format</b></span>&nbsp;PE&nbsp;GUI&nbsp;<span class="hl_number">4</span><span class="hl_char">.</span><span class="hl_number">0</span></li><li class="hl_l1"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'win32a.inc'</span></li><li class="hl_l0"><span class="hl_function"><b>entry</b></span>&nbsp;start</li><li class="hl_l1"><span class="hl_function"><b>section</b></span>&nbsp;<span class="hl_quote">'.text'</span>&nbsp;<span class="hl_function"><b>code</b></span>&nbsp;<span class="hl_function"><b>readable</b></span>&nbsp;<span class="hl_function">executable</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>proc</b></span>&nbsp;init</li><li class="hl_l0">start1<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;AdjustTokenPrivileges<span class="hl_char">,</span><span class="hl_char">[</span>phToken<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>PrivilegeCount&nbsp;<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;HeapCreate<span class="hl_char">,</span>0x00040000<span class="hl_char">,</span><span class="hl_number">400</span><span class="hl_char">,</span>0x256</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>add</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>0x688</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_char">[</span>memhandle2<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>prcs<span class="hl_char">.</span>dwSize<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function">sizeof</span><span class="hl_char">.</span>PROCESSENTRY32</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;CreateToolhelp32Snapshot<span class="hl_char">,</span>&nbsp;TH32CS_SNAPPROCESS<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32First<span class="hl_char">,</span><span class="hl_registr">eax</span><span class="hl_char">,</span>prcs</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_char">[</span>memhandle2<span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_char">.</span><span class="hl_function">loop</span><span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">esi</span><span class="hl_char">,</span>prcs<span class="hl_char">.</span>szExeFile</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">movsd</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>inc</b></span>&nbsp;<span class="hl_char">[</span>count<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32Next<span class="hl_char">,</span><span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>prcs</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jne</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">.</span><span class="hl_function">loop</span></li><li class="hl_l0"><span class="hl_function">ret</span></li><li class="hl_l1"><span class="hl_function">endp</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>proc</b></span>&nbsp;kill1</li><li class="hl_l0"><span class="hl_function">pushad</span></li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>prcs<span class="hl_char">.</span>szExeFile</li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span><span class="hl_registr">eax</span><span class="hl_char">]</span></li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span><span class="hl_char">[</span>count<span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_function"><b>shl</b></span>&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span><span class="hl_number">1</span></li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_char">[</span>memhandle2<span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_function"><b>repne</b></span>&nbsp;<span class="hl_function">scasd</span></li><li class="hl_l1"><span class="hl_function"><b>jz</b></span>&nbsp;end1</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;StrStrI<span class="hl_char">,</span>prcs<span class="hl_char">.</span>szExeFile<span class="hl_char">,</span>process1</li><li class="hl_l0"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1"><span class="hl_function"><b>jne</b></span>&nbsp;end1</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;OpenProcess<span class="hl_char">,</span>0x1F0FFF<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_char">[</span>prcs<span class="hl_char">.</span>th32ProcessID<span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;TerminateProcess<span class="hl_char">,</span><span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_function">NULL</span></li><li class="hl_l1">end1<span class="hl_char">:</span></li><li class="hl_l0"><span class="hl_function">popad</span></li><li class="hl_l1"><span class="hl_function">ret</span></li><li class="hl_l0"><span class="hl_function">endp</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;check</li><li class="hl_l1">start3<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;CreateToolhelp32Snapshot<span class="hl_char">,</span>&nbsp;TH32CS_SNAPPROCESS<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32First<span class="hl_char">,</span><span class="hl_registr">eax</span><span class="hl_char">,</span>prcs</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_char">[</span>memhandle2<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">loop1<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>stdcall</b></span>&nbsp;message</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span><span class="hl_registr">edi</span><span class="hl_char">]</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_char">[</span>prcs<span class="hl_char">.</span>szExeFile<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jnz</b></span>&nbsp;kill2</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>add</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_number">4</span></li><li class="hl_l1">next<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32Next<span class="hl_char">,</span><span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>prcs</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jne</b></span>&nbsp;&nbsp;&nbsp;&nbsp;loop1</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;start3</li><li class="hl_l0">kill2<span class="hl_char">:</span></li><li class="hl_l1"><span class="hl_function"><b>stdcall</b></span>&nbsp;kill1</li><li class="hl_l0"><span class="hl_function"><b>jmp</b></span>&nbsp;next</li><li class="hl_l1"><span class="hl_function">ret</span></li><li class="hl_l0"><span class="hl_function">endp</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;message</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;GetMessage<span class="hl_char">,</span>msg<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0"><span class="hl_function"><b>test</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1"><span class="hl_function"><b>jz</b></span>&nbsp;exit</li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;TranslateMessage<span class="hl_char">,</span>msg</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;DispatchMessage<span class="hl_char">,</span>msg</li><li class="hl_l0">exit<span class="hl_char">:</span></li><li class="hl_l1"><span class="hl_function">ret</span></li><li class="hl_l0"><span class="hl_function">endp</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;pause1</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;MessageBoxA<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;ExitProcess<span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1"><span class="hl_function">ret</span></li><li class="hl_l0"><span class="hl_function">endp</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;WindowsProc<span class="hl_char">,</span>hwnd<span class="hl_char">,</span>uint<span class="hl_char">,</span>wparam<span class="hl_char">,</span>lparam</li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span>uint<span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>0x312</li><li class="hl_l1"><span class="hl_function"><b>jne</b></span>&nbsp;exit3</li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span>wparam<span class="hl_char">]</span></li><li class="hl_l1"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_number">1</span></li><li class="hl_l0"><span class="hl_function"><b>jne</b></span>&nbsp;exit3</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;GetMessage<span class="hl_char">,</span>msg<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0"><span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_char">[</span>msg<span class="hl_char">+</span><span class="hl_number">8</span><span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">2</span></li><li class="hl_l1"><span class="hl_function"><b>jne</b></span>&nbsp;exit3</li><li class="hl_l0"><span class="hl_function"><b>stdcall</b></span>&nbsp;pause1</li><li class="hl_l1">exit3<span class="hl_char">:</span></li><li class="hl_l0"><span class="hl_function">ret</span></li><li class="hl_l1"><span class="hl_function">endp</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">start<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;GetModuleHandleA<span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_char">[</span>wnd<span class="hl_char">.</span>hInstance<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;RegisterClass<span class="hl_char">,</span>wnd</li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;CreateWindowEx<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>class<span class="hl_char">,</span>menu1<span class="hl_char">,</span>WS_DISABLED<span class="hl_char">,</span><span class="hl_number">1</span><span class="hl_char">,</span><span class="hl_number">1</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_char">[</span>wnd<span class="hl_char">.</span>hInstance<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_char">[</span>hwnd1<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;&nbsp;ShowWindow<span class="hl_char">,</span><span class="hl_registr">eax</span><span class="hl_char">,</span>SW_HIDE</li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;RegisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd1<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">1</span><span class="hl_char">,</span>0x0004<span class="hl_char">,</span>0x41</li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;RegisterHotKey<span class="hl_char">,</span><span class="hl_char">[</span>hwnd1<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">2</span><span class="hl_char">,</span>0x0004<span class="hl_char">,</span>0x4c</li><li class="hl_l1"><span class="hl_function"><b>stdcall</b></span>&nbsp;init</li><li class="hl_l0"><span class="hl_function"><b>stdcall</b></span>&nbsp;check</li><li class="hl_l1"><span class="hl_function">ret</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>section</b></span>&nbsp;<span class="hl_quote">'.data'</span>&nbsp;<span class="hl_function"><b>data</b></span>&nbsp;<span class="hl_function"><b>readable</b></span>&nbsp;<span class="hl_function">writeable</span></li><li class="hl_l0">hwnd1&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">menu1&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_quote">'fasm window'</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">class&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_quote">'fasm class'</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">wnd&nbsp;WNDCLASS&nbsp;<span class="hl_number">0</span><span class="hl_char">,</span>WindowsProc<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span><span class="hl_function">NULL</span><span class="hl_char">,</span>COLOR_BTNFACE<span class="hl_char">+</span><span class="hl_number">1</span><span class="hl_char">,</span>menu1<span class="hl_char">,</span>class</li><li class="hl_l0">msg&nbsp;MSG</li><li class="hl_l1">count&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_number">0</span></li><li class="hl_l0">memhandle2&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">TOKEN_QUERY_TOKEN_ADJUST_PRIVILEGES&nbsp;<span class="hl_char">=</span><span class="hl_number">28h</span></li><li class="hl_l1">TH32CS_SNAPPROCESS&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">2</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">struct&nbsp;PROCESSENTRY32</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dwSize&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cntUsage&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th32ProcessID&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th32DefaultHeapID&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th32ModuleID&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cntThreads&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th32ParentProcessID&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pcPriClassBase&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dwFlags&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;szExeFile&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_number">260</span>&nbsp;<span class="hl_function">dup</span><span class="hl_char">(</span><span class="hl_char">?</span><span class="hl_char">)</span></li><li class="hl_l0"><span class="hl_function">ends</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">PrivilegeCount&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_number">1</span></li><li class="hl_l1">pLocalId&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">Attributes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_number">2</span></li><li class="hl_l1">phToken&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">hSnapshot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">prcs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PROCESSENTRY32</li><li class="hl_l0">process1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_quote">'taskmgr.exe'</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">Privilege&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_quote">'SeDebugPrivilege'</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_comment">;=============================================</span></li><li class="hl_l0"><span class="hl_function"><b>section</b></span>&nbsp;<span class="hl_quote">'.idata'</span>&nbsp;<span class="hl_function"><b>import</b></span>&nbsp;<span class="hl_function"><b>data</b></span>&nbsp;<span class="hl_function">readable</span></li><li class="hl_l1"><span class="hl_comment">;=============================================</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>library</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kernel32<span class="hl_char">,</span><span class="hl_quote">'KERNEL32.DLL'</span><span class="hl_char">,</span><span class="hl_char">\</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;advapi32<span class="hl_char">,</span><span class="hl_quote">'ADVAPI32.DLL'</span><span class="hl_char">,</span><span class="hl_char">\</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shell32<span class="hl_char">,</span><span class="hl_quote">'SHELL32.DLL'</span><span class="hl_char">,</span><span class="hl_char">\</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user32<span class="hl_char">,</span><span class="hl_quote">'USER32.DLL'</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'API\kernel32.inc'</span></li><li class="hl_l1"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'API\advapi32.inc'</span></li><li class="hl_l0"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'API\shell32.inc'</span></li><li class="hl_l1"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'API\user32.inc'</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=331487&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=25" class="addthx" data-post="331487"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 сентября 2013 00:11 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#26');return false;">#26</a> </span><div align=left><br>
Мне проще это сделать в MASM&#039;e:  <img src="img/attach.gif" alt=""> <a href="./files/acda_27.09.2013_EXELAB.rU.tgz">acda_27.09.2013_EXELAB.rU.tgz</a> - транслировалось MASM&#039;ом.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331496&amp;user=35473&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=26" class="addthx" data-post="331496"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 сентября 2013 03:12 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#27');return false;">#27</a> </span><div align=left><br>
<b>Envy12</b>,<br>вы невнимательны...<br>вот она ваша программка: <img src="img/attach.gif" alt=""> <a href="./files/f45a_27.09.2013_EXELAB.rU.tgz">f45a_27.09.2013_EXELAB.rU.tgz</a> - транслировалось FASM&#039;ом. <br>Переделана WndProc.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331505&amp;user=35473&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=27" class="addthx" data-post="331505"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 сентября 2013 17:15 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#28');return false;">#28</a> </span><div align=left><br>
Эм, это тоже не работает<img src="img/smilies/s11.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=331543&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=28" class="addthx" data-post="331543"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]Envy12[/b]','')">Envy12</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.9 (посетитель), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.75'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=26595">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 октября 2013 20:16 <br><script type="text/javascript">QU('Envy12','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Envy12" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#29');return false;">#29</a> </span><div align=left><br>
Итак, веселье продолжается<img src="img/smilies/s6.gif" alt=""> Убрал из проги все что связано с окнами, хоткеями и тд, оставил только процедуру остановки и опять же, вне отладчика половина кода из процедуры просто игнорируется и проходит мимо! Уважаемые форумчане, прошу помогите, тут что-то очень странное<img src="img/smilies/s15.gif" alt=""><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>format</b></span>&nbsp;PE&nbsp;GUI&nbsp;<span class="hl_number">4</span><span class="hl_char">.</span><span class="hl_number">0</span></li><li class="hl_l1"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'win32a.inc'</span></li><li class="hl_l0"><span class="hl_function"><b>entry</b></span>&nbsp;start</li><li class="hl_l1"><span class="hl_function"><b>section</b></span>&nbsp;<span class="hl_quote">'.text'</span>&nbsp;<span class="hl_function"><b>code</b></span>&nbsp;<span class="hl_function"><b>readable</b></span>&nbsp;<span class="hl_function">executable</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>proc</b></span>&nbsp;init</li><li class="hl_l0">start1<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;AdjustTokenPrivileges<span class="hl_char">,</span><span class="hl_char">[</span>phToken<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>PrivilegeCount&nbsp;<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;HeapCreate<span class="hl_char">,</span>0x00040000<span class="hl_char">,</span><span class="hl_number">400</span><span class="hl_char">,</span>0x256</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>add</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>0x688</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_char">[</span>memhandle2<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>prcs<span class="hl_char">.</span>dwSize<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_function">sizeof</span><span class="hl_char">.</span>PROCESSENTRY32</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;CreateToolhelp32Snapshot<span class="hl_char">,</span>&nbsp;TH32CS_SNAPPROCESS<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32First<span class="hl_char">,</span><span class="hl_registr">eax</span><span class="hl_char">,</span>prcs</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_char">[</span>memhandle2<span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_char">.</span><span class="hl_function">loop</span><span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">esi</span><span class="hl_char">,</span>prcs<span class="hl_char">.</span>szExeFile</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">movsd</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>inc</b></span>&nbsp;<span class="hl_char">[</span>count<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">.</span>next<span class="hl_char">:</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32Next<span class="hl_char">,</span><span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>prcs</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jne</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">.</span><span class="hl_function">loop</span></li><li class="hl_l1"><span class="hl_function">ret</span></li><li class="hl_l0"><span class="hl_function">endp</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>proc</b></span>&nbsp;kill1</li><li class="hl_l1"><span class="hl_function">pushad</span></li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>prcs<span class="hl_char">.</span>szExeFile</li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span><span class="hl_registr">eax</span><span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span><span class="hl_char">[</span>count<span class="hl_char">]</span></li><li class="hl_l1"><span class="hl_function"><b>shl</b></span>&nbsp;<span class="hl_registr">ecx</span><span class="hl_char">,</span><span class="hl_number">1</span></li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_char">[</span>memhandle2<span class="hl_char">]</span></li><li class="hl_l1"><span class="hl_function"><b>repne</b></span>&nbsp;<span class="hl_function">scasd</span></li><li class="hl_l0"><span class="hl_function"><b>jz</b></span>&nbsp;end1</li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;OpenProcess<span class="hl_char">,</span>0x1F0FFF<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_char">[</span>prcs<span class="hl_char">.</span>th32ProcessID<span class="hl_char">]</span></li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;TerminateProcess<span class="hl_char">,</span><span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_function">NULL</span></li><li class="hl_l0">end1<span class="hl_char">:</span></li><li class="hl_l1"><span class="hl_function">popad</span></li><li class="hl_l0"><span class="hl_function">ret</span></li><li class="hl_l1"><span class="hl_function">endp</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>proc</b></span>&nbsp;check</li><li class="hl_l0">start3<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;CreateToolhelp32Snapshot<span class="hl_char">,</span>&nbsp;TH32CS_SNAPPROCESS<span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">eax</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32First<span class="hl_char">,</span><span class="hl_registr">eax</span><span class="hl_char">,</span>prcs</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_char">[</span>memhandle2<span class="hl_char">]</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">loop1<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Sleep<span class="hl_char">,</span><span class="hl_number">500</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_char">[</span><span class="hl_registr">edi</span><span class="hl_char">]</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_char">[</span>prcs<span class="hl_char">.</span>szExeFile<span class="hl_char">]</span><span class="hl_char">,</span><span class="hl_registr">eax</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jnz</b></span>&nbsp;kill2</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>add</b></span>&nbsp;<span class="hl_registr">edi</span><span class="hl_char">,</span><span class="hl_number">4</span></li><li class="hl_l0">next<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>invoke</b></span>&nbsp;Process32Next<span class="hl_char">,</span><span class="hl_char">[</span>hSnapshot<span class="hl_char">]</span><span class="hl_char">,</span>prcs</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jne</b></span>&nbsp;&nbsp;&nbsp;&nbsp;loop1</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;start3</li><li class="hl_l1">kill2<span class="hl_char">:</span></li><li class="hl_l0"><span class="hl_function"><b>stdcall</b></span>&nbsp;kill1</li><li class="hl_l1"><span class="hl_function"><b>jmp</b></span>&nbsp;next</li><li class="hl_l0"><span class="hl_function">ret</span></li><li class="hl_l1"><span class="hl_function">endp</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>proc</b></span>&nbsp;pause1</li><li class="hl_l0"><span class="hl_function"><b>invoke</b></span>&nbsp;MessageBoxA<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>caption<span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1"><span class="hl_function"><b>invoke</b></span>&nbsp;Sleep<span class="hl_char">,</span><span class="hl_number">3600000</span></li><li class="hl_l0"><span class="hl_function"><b>jmp</b></span>&nbsp;start3</li><li class="hl_l1"><span class="hl_function">endp</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">start<span class="hl_char">:</span></li><li class="hl_l0"><span class="hl_function"><b>stdcall</b></span>&nbsp;init</li><li class="hl_l1"><span class="hl_function"><b>stdcall</b></span>&nbsp;check</li><li class="hl_l0"><span class="hl_function"><b>stdcall</b></span>&nbsp;pause1</li><li class="hl_l1"><span class="hl_function">ret</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>section</b></span>&nbsp;<span class="hl_quote">'.data'</span>&nbsp;<span class="hl_function"><b>data</b></span>&nbsp;<span class="hl_function"><b>readable</b></span>&nbsp;<span class="hl_function">writeable</span></li><li class="hl_l0">caption&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_quote">'Пауза'</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">waitc&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_number">5</span></li><li class="hl_l0">msg&nbsp;MSG</li><li class="hl_l1">count&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_number">0</span></li><li class="hl_l0">memhandle2&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">PID&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">TOKEN_QUERY_TOKEN_ADJUST_PRIVILEGES&nbsp;<span class="hl_char">=</span><span class="hl_number">28h</span></li><li class="hl_l0">TH32CS_SNAPPROCESS&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">2</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">struct&nbsp;PROCESSENTRY32</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dwSize&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cntUsage&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th32ProcessID&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th32DefaultHeapID&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th32ModuleID&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cntThreads&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th32ParentProcessID&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pcPriClassBase&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dwFlags&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;szExeFile&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_number">260</span>&nbsp;<span class="hl_function">dup</span><span class="hl_char">(</span><span class="hl_char">?</span><span class="hl_char">)</span></li><li class="hl_l1"><span class="hl_function">ends</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">PrivilegeCount&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_number">1</span></li><li class="hl_l0">pLocalId&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">Attributes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_number">2</span></li><li class="hl_l0">phToken&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">hSnapshot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dd</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l0">prcs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PROCESSENTRY32</li><li class="hl_l1">class&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WNDCLASS</li><li class="hl_l0">Privilege&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_quote">'SeDebugPrivilege'</span><span class="hl_char">,</span><span class="hl_number">0</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_comment">;=============================================</span></li><li class="hl_l1"><span class="hl_function"><b>section</b></span>&nbsp;<span class="hl_quote">'.idata'</span>&nbsp;<span class="hl_function"><b>import</b></span>&nbsp;<span class="hl_function"><b>data</b></span>&nbsp;<span class="hl_function">readable</span></li><li class="hl_l0"><span class="hl_comment">;=============================================</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>library</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kernel32<span class="hl_char">,</span><span class="hl_quote">'KERNEL32.DLL'</span><span class="hl_char">,</span><span class="hl_char">\</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;advapi32<span class="hl_char">,</span><span class="hl_quote">'ADVAPI32.DLL'</span><span class="hl_char">,</span><span class="hl_char">\</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shell32<span class="hl_char">,</span><span class="hl_quote">'SHELL32.DLL'</span><span class="hl_char">,</span><span class="hl_char">\</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user32<span class="hl_char">,</span><span class="hl_quote">'USER32.DLL'</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'API\kernel32.inc'</span></li><li class="hl_l0"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'API\advapi32.inc'</span></li><li class="hl_l1"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'API\shell32.inc'</span></li><li class="hl_l0"><span class="hl_function"><b>include</b></span>&nbsp;<span class="hl_quote">'API\user32.inc'</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=332031&amp;user=26595&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=29" class="addthx" data-post="332031"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="30" onfocus="this.blur()" href="JavaScript:di('[b]Archer[/b]','')">Archer</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/1556.jpg" alt=""><br><span class=txtSm>Ранг: 2014.5 <b><u>(!!!!)</u></b>, 1278thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.27'>Активность: 1.34<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1556">Модератор</a><br><font color=blue>retired</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 октября 2013 21:12 <br><script type="text/javascript">QU('Archer','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Archer" target="_blank">Личное сообщение</a> &middot;  <a href="#30" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=22201&amp;page=0#30');return false;">#30</a> </span><div align=left><br>
Какой процедуры половина проходит мимо? С чего ты это взял? Гадаю, что это потому, что нет у процесса дебажных привилегий, а под отладчиком есть.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=332035&amp;user=1556&amp;forum_n=6&amp;topic=22201&amp;page=0&amp;anchor=30" class="addthx" data-post="332035"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=6&amp;topic=22201&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=6&amp;topic=22201&amp;page=2.html">3</a> . <a href="action=vthread&amp;forum=6&amp;topic=22201&amp;page=3.html">4</a> . <a href="action=vthread&amp;forum=6&amp;topic=22201&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Программа работает только внутри отладчика</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#31" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="6">
<input type="hidden" name="topic" value="22201">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=22201" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
