<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Как программно узнать размер функции написанной на си ? - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Я написал ф-цию: Code:       void*&nbsp;xGetCoolHashe(PVOID&nbsp;*&nbsp;PData,&nbsp;DWORD&nbsp;SizeOfData){/*&nbsp;много&nbsp;кода&nbsp;*/&nbsp;&nbsp;return&nbsp;&lt;value&gt;;}       вопрос, как можно узнать размер этой ф-ции">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=1533'>rmn</a>, <a target='_blank' href='?action=userinfo&amp;user=8344'>Magister Yoda</a>, <a target='_blank' href='?action=userinfo&amp;user=50833'>vasilevradislav</a>, <a target='_blank' href='?action=userinfo&amp;user=55995'>tyns777</a>, <a target='_blank' href='?action=userinfo&amp;user=42072'>zombi-vadim</a> (+6 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Как программно узнать размер функции написанной на си ?</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]theCollision[/b]','')">theCollision</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 271.5 (наставник), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.24'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4439">Участник</a><br><font color=blue>Packer Reseacher</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 августа 2008 22:04 &middot; Поправил: theCollision <br><script type="text/javascript">QU('theCollision','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=theCollision" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Я написал ф-цию:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function">void</span><span class="hl_char">*</span>&nbsp;xGetCoolHashe<span class="hl_char">(</span>PVOID&nbsp;<span class="hl_char">*</span>&nbsp;PData<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>DWORD</b></span>&nbsp;SizeOfData<span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">*</span>&nbsp;много&nbsp;кода&nbsp;<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l1">&nbsp;&nbsp;return&nbsp;<span class="hl_char">&lt;</span>value<span class="hl_char">&gt;</span><span class="hl_comment">;</span></li><li class="hl_l0">}</li>        </ol>
    </div>
</div></div>
<br><br>вопрос, как можно узнать размер этой ф-ции для того, чтобы записать ее в файл и юзать уже в коде, который базово-независим ?<br><br>фишку вроде вроде кода после последнего оператора в ф-ции:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">_asm&nbsp;{</li><li class="hl_l1">nop</li><li class="hl_l0">nop</li><li class="hl_l1">nop</li><li class="hl_l0">nop</li><li class="hl_l1">}<span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
с поиском значения 0x90909090 не предлагать, знаю эту фишку, ща юзаю ;)<br><br>P.S.:<br>Круто выглядит код в теге &quot;код&quot;, когда прикрутили ? вроде небыло же ! ;)
<br><br><font size="1"><i>-----<br>My love is very cool girl.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200420&amp;user=4439&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=1" class="addthx" data-post="200420"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Flint[/b]','')">Flint</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/2981.jpg" alt=""><br><span class=txtSm>Ранг: 238.8 (наставник), 67thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2981">Участник</a><br><font color=blue>CyberHunter</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 августа 2008 22:23 &middot; Поправил: Flint <br><script type="text/javascript">QU('Flint','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Flint" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
что мешает это сделать так:<br>вначале функции вызываешь call &#036;+5 потом pop eax и затем sub eax, 5 получишь адрес начала своей функции, потом jmp на такую же конструкцию, которая будет стоять перед ret получишь адрес конца функции потом джамп в основое тело, там получаешь разницу=размер функции в байтах.<br><br>Примерно так<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"></li><li class="hl_l1"><span class="hl_number">00401000</span>&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;<span class="hl_number">00401005</span>&nbsp;</li><li class="hl_l0"><span class="hl_number">00401005</span>&nbsp;&nbsp;<span class="hl_function"><b>POP</b></span>&nbsp;EAX</li><li class="hl_l1"><span class="hl_number">00401006</span>&nbsp;&nbsp;<span class="hl_function"><b>SUB</b></span>&nbsp;<span class="hl_registr">EAX</span><span class="hl_char">,</span>5</li><li class="hl_l0"><span class="hl_number">00401009</span>&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;<span class="hl_registr">ECX</span><span class="hl_char">,</span>EAX</li><li class="hl_l1"><span class="hl_number">0040100B</span>&nbsp;&nbsp;<span class="hl_function"><b>JMP</b></span>&nbsp;<span class="hl_function"><b>SHORT</b></span>&nbsp;0040103E</li><li class="hl_l0"><span class="hl_number">0040100D</span>&nbsp;&nbsp;<span class="hl_function"><b>SUB</b></span>&nbsp;<span class="hl_registr">EAX</span><span class="hl_char">,</span><span class="hl_registr"><b>ECX</b></span>&nbsp;<span class="hl_comment">; В eax размер функции</span></li><li class="hl_l1"><span class="hl_number">0040100F</span>&nbsp;&nbsp;&nbsp;<span class="hl_comment">; Полезный код</span></li><li class="hl_l0"></li><li class="hl_l1"><span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l0"><span class="hl_number">0040103C</span>&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>JMP</b></span>&nbsp;<span class="hl_function"><b>SHORT</b></span>&nbsp;00401049</li><li class="hl_l1"><span class="hl_number">0040103E</span>&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;00401043</li><li class="hl_l0"><span class="hl_number">00401043</span>&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>POP</b></span>&nbsp;EAX</li><li class="hl_l1"><span class="hl_number">00401044</span>&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>ADD</b></span>&nbsp;<span class="hl_registr">EAX</span><span class="hl_char">,</span>6</li><li class="hl_l0"><span class="hl_number">00401047</span>&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>JMP</b></span>&nbsp;<span class="hl_function"><b>SHORT</b></span>&nbsp;0040100D</li><li class="hl_l1"><span class="hl_number">00401049</span>&nbsp;&nbsp;&nbsp;RETN</li><li class="hl_l0"></li>        </ol>
    </div>
</div></div><br><br><font size="1"><i>-----<br>Nulla aetas ad discendum sera</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200421&amp;user=2981&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=2" class="addthx" data-post="200421"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]Azur1d[/b]','')">Azur1d</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 129.7 (ветеран), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.51'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8921">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 августа 2008 23:02 &middot; Поправил: Azur1d <br><script type="text/javascript">QU('Azur1d','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Azur1d" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
Можно попробовать такую фишку:<br>Берешь адрес нужной функции, берешь адрес следующей, и вычисляешь разницу. Они компилятся обышно последовательно.<br>Но эта фишка не всегда работает. <br>Если юзаешь борландовский билдер, по поковыряй в сторону VMT
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=200425&amp;user=8921&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=3" class="addthx" data-post="200425"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]s0larian[/b]','')">s0larian</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/1737.jpg" alt=""><br><span class=txtSm>Ранг: 387.4 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.19'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1737">Участник</a><br><font color=blue>системщик</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 августа 2008 00:05 <br><script type="text/javascript">QU('s0larian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=s0larian" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<b>theCollision</b>, дело - труба, универсального решения тут нет, т.к. компилер по-разному может оптимизировать. То есть, указатели и метки это просто частные случаи.<br><br>Я бы вынес ф-цию в отдельную секцию - это будет видно в PE заголовках.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=200430&amp;user=1737&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=4" class="addthx" data-post="200430"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]Dian[/b]','')">Dian</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.4 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4566">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 августа 2008 04:26 <br><script type="text/javascript">QU('Dian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dian" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>Azur1d пишет:<br>Берешь адрес нужной функции, берешь адрес следующей, и вычисляешь разницу. Они компилятся обышно последовательно.  </I><br>Пробовал такое - прокатило<br><br><br>Возможно, прокатит конструкция такого плана:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"></li><li class="hl_l1">__asm{</li><li class="hl_l0">lbl<span class="hl_char">:</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;lbl</li><li class="hl_l0">}</li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200438&amp;user=4566&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=5" class="addthx" data-post="200438"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]flamer[/b]','')">flamer</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.3 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.26'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4338">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 августа 2008 09:23 &middot; Поправил: flamer <br><script type="text/javascript">QU('flamer','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=flamer" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Доброго здоровья!<br>Бр, а в чем беда-то?<br>Ну, кроме оффтопа -- кучи асма?<br><br>Правила работы с указателями в зубы и задачка решается на ура.<br><b>Без</b> ухищрений <b>оптимизации</b> компиляторы не меняют порядок следования переменных и функций. Да, они могут выравнивать их на свой вкус, но <b>порядок определяется программистом</b>.<br>Вывод.<br>Определяем функцию ... my_func(...) {}<br>Ее адрес определить - элементарно - один оператор &amp; <br><br>Определяем следующую функцию ( в примере это - main )<br><br>Вычитаем из большего адреса меньший - получаем длинну блока, который компилятор выделил под функцию. Да, в нем может быть хлам за концом функции, но это не страшно.<br><br>Зная адрес и длинну блока памяти можешь делать с ним, что хочешь.<br><br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">#include&nbsp;<span class="hl_char">&lt;</span>stdio<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l1">#include&nbsp;<span class="hl_char">&lt;</span>stdlib<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l0"><span class="hl_function"><b>int</b></span>&nbsp;main<span class="hl_char">(</span><span class="hl_function">int</span><span class="hl_char">,</span>&nbsp;<span class="hl_function">char</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span class="hl_function"><b>int</b></span>&nbsp;<span class="hl_function"><b>test</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">void</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">typedef&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">*</span>printFType<span class="hl_char">)</span>&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>const</b></span>&nbsp;<span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span><span class="hl_function">format</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span>&nbsp;<span class="hl_char">)</span>&nbsp;&nbsp;<span class="hl_comment">;</span></li><li class="hl_l1"><span class="hl_function"><b>int</b></span>&nbsp;<span class="hl_function"><b>test</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">void</span><span class="hl_char">)</span>&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printFType&nbsp;pprintf<span class="hl_char">=</span><span class="hl_char">&amp;</span>printf<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pprintf<span class="hl_char">(</span><span class="hl_quote">&quot;address of pprintf = 0x%x\n&quot;</span><span class="hl_char">,</span>&nbsp;pprintf<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">return&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li><li class="hl_l0"><span class="hl_function"><b>int</b></span>&nbsp;main<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;argc<span class="hl_char">,</span>&nbsp;<span class="hl_function">char</span><span class="hl_char">*</span><span class="hl_char">*</span>&nbsp;argv<span class="hl_char">)</span>&nbsp;{</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;testEnd&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>unsigned&nbsp;<span class="hl_function">int</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">&amp;</span>main<span class="hl_char">,</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testStart&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>unsigned&nbsp;<span class="hl_function">int</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">&amp;</span><span class="hl_function"><b>test</b></span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">test</span><span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf<span class="hl_char">(</span><span class="hl_quote">&quot;address of test = 0x%x\nsize of test = 0x%x&quot;</span><span class="hl_char">,</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">(</span>unsigned&nbsp;<span class="hl_function">int</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">&amp;</span><span class="hl_function">test</span><span class="hl_char">,</span>&nbsp;testEnd<span class="hl_char">-</span>testStart<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;EXIT_SUCCESS<span class="hl_comment">;</span></li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<br>Ну, и небольшой оффтоп, хотя, вопрос может возникнуть.<br>Внутри &quot;проблемной&quot; функции другие функции лучше вызывать через указатели.<br>Т.е. вначале целевой функции создать указатели на испольуземые функции и использовать их.<br>В чем суть? В  упрощенности отвязки кода от месторасположения. В случае, если используемые функции будут в другом месте (например системные вызовы) достаточно (на 32-битках) поменять один дворд, а не перекомпилить функцию.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=200446&amp;user=4338&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=6" class="addthx" data-post="200446"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]RSI[/b]','')">RSI</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 284.8 (наставник), 6thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.85'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6361">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 августа 2008 10:03 <br><script type="text/javascript">QU('RSI','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=RSI" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<b>flamer</b><br>не согласен =)<br><br>писал на VC++ 6.0:<br>1) во первых когда получаешь адресс функции (если на Debug ) то получишь адресс jmp на свою функцию, а не адресс ее начала.<br>2) почти никогда функции не располагаются друг за другом, это уже причуды компилера.<br><br>в итоге это сработает только на Release когда код будет малость оптимизирован + можно добавить атрибут static функции.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=200450&amp;user=6361&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=7" class="addthx" data-post="200450"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]PE_Kill[/b]','')">PE_Kill</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3232.gif" alt=""><br><span class=txtSm>Ранг: 793.4 <font color=magenta>(<b>! !</b>)</font>, 568thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.59'>Активность: 0.74<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3232">Участник</a><br><font color=blue>Шаман</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 августа 2008 10:04 &middot; Поправил: PE_Kill <br><script type="text/javascript">QU('PE_Kill','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=PE_Kill" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<I>s0larian пишет:<br>дело - труба, универсального решения тут нет, т.к. компилер по-разному может оптимизировать. </I><br>А что мешает вырубить оптимизацию для этой функции?<br><br>зы А вообще, имхо, такие вещи надо на асме делать, особенно кулхэш ;)
<br><br><font size="1"><i>-----<br>Yann Tiersen best and do not fuck</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200451&amp;user=3232&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=8" class="addthx" data-post="200451"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]flamer[/b]','')">flamer</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 25.3 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.26'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4338">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 августа 2008 10:09 &middot; Поправил: flamer <br><script type="text/javascript">QU('flamer','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=flamer" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<I>RSI пишет:<br>не согласен =) </I><br><I>PE_Kill пишет:<br>А что мешает вырубить оптимизацию для этой функции? </I><br>+1<br><br>Всё равно, раз функция должна быть переносимой, то ее использование уже не стандартно.<br>Ну отладь ее, да выкуси. (++ пост №6 обновил)<br><br><I>Flint пишет:<br>вначале функции вызываешь call &#036;+5 потом pop eax и затем sub eax, 5 получишь адрес начала своей функции, потом jmp на такую же конструкцию, которая будет стоять перед ret получишь адрес конца функции потом джамп в основое тело, там получаешь разницу=размер функции в байтах </I><br><br>И если уж идти по пути асма, то кто мешает не геморроиться, а элементарно ипользовать лэблы?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=200452&amp;user=4338&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=9" class="addthx" data-post="200452"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]theCollision[/b]','')">theCollision</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 271.5 (наставник), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.24'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4439">Участник</a><br><font color=blue>Packer Reseacher</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 августа 2008 11:30 <br><script type="text/javascript">QU('theCollision','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=theCollision" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Господа,какой нафиг асм ? ;) Вопрос касательно использования на языке С и только ! Будет вопрос по асму, задам в отдельной теме, а тут задал про С ;) Так что смотрю только и только по С, а кто писал на асме, те посты пропускаю! ;)
<br><br><font size="1"><i>-----<br>My love is very cool girl.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200456&amp;user=4439&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=10" class="addthx" data-post="200456"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Dian[/b]','')">Dian</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.4 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4566">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 августа 2008 03:22 <br><script type="text/javascript">QU('Dian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dian" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<I>theCollision пишет:<br>с поиском значения 0x90909090 не предлагать, знаю эту фишку, ща юзаю ;)  </I><br>Кстати, хорошая идея - для случая, если кто-то будет исследовать программу <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=200540&amp;user=4566&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=11" class="addthx" data-post="200540"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]theCollision[/b]','')">theCollision</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 271.5 (наставник), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.24'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4439">Участник</a><br><font color=blue>Packer Reseacher</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 августа 2008 11:47 <br><script type="text/javascript">QU('theCollision','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=theCollision" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<b>Dian</b><br>Где ее ставить то? Перед закрывающей &quot;}&quot; ? Тогда компиллер эпилог поставит! Если как накед, то самому мудрить с эпилогом и прологом!
<br><br><font size="1"><i>-----<br>My love is very cool girl.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200571&amp;user=4439&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=12" class="addthx" data-post="200571"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]Ice-T[/b]','')">Ice-T</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/12329.jpg" alt=""><br><span class=txtSm>Ранг: 126.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.01'>Активность: 0.14<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12329">Участник</a><br><font color=blue>#CCh</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 августа 2008 13:05 <br><script type="text/javascript">QU('Ice-T','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice-T" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
А если <b>value </b>для <b>return</b> передавать какое-нибудь особенное. Повторений избежать не сложно. Ищем сигну от начала функции и все.
<br><br><font size="1"><i>-----<br>invoke OpenFire</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200589&amp;user=12329&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=13" class="addthx" data-post="200589"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]alexey_k[/b]','')">alexey_k</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 135.2 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.79'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6716">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 августа 2008 14:01 &middot; Поправил: alexey_k <br><script type="text/javascript">QU('alexey_k','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=alexey_k" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
пример на борландовском компилере (робит только в Release-билде, на дебаге не прокатит <img src="img/smilies/s14.gif" alt=""> )<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>int</b></span>&nbsp;myfunc<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;i<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"></li><li class="hl_l0"><span class="hl_function"><b>int</b></span>&nbsp;main<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;argc<span class="hl_char">,</span>&nbsp;<span class="hl_function">char</span><span class="hl_char">*</span>&nbsp;argv<span class="hl_char">[</span><span class="hl_char">]</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;myfunc<span class="hl_char">(</span><span class="hl_number">0</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li><li class="hl_l0"></li><li class="hl_l1"><span class="hl_function"><b>int</b></span>&nbsp;myfunc<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;i<span class="hl_char">)</span></li><li class="hl_l0">{</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;тут&nbsp;какой<span class="hl_char">-</span>нить&nbsp;код</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<span class="hl_number">0</span><span class="hl_comment">; // напр. так</span></li><li class="hl_l1">__asm&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_quote">'whatermark'</span><span class="hl_char">,</span>0</li><li class="hl_l0">}</li>        </ol>
    </div>
</div></div>
<br><br>далее просто получаем указатель на эту функу (это будед начало), затем ищем строку &quot;whatermark&quot;, вычитаем её длинну и получаем адрес конца функи.<br><br>из иды:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"></li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401170</span>&nbsp;<span class="hl_comment">; int __cdecl main(int argc,const char **argv,const char *envp)</span></li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401170</span>&nbsp;_main&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>proc</b></span>&nbsp;<span class="hl_function"><b>near</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; DATA XREF: .data:0040204Co</span></li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span>00401170</li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401170</span>&nbsp;argc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;&nbsp;8</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401170</span>&nbsp;argv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;&nbsp;0Ch</li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401170</span>&nbsp;envp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;&nbsp;10h</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span>00401170</li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;ebp</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401171</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">ebp</span><span class="hl_char">,</span>&nbsp;esp</li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401173</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;0</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;@jpeg@_16402&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; jpeg::_16402 </span></li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">0040117A</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ecx</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">0040117B</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ebp</li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">0040117C</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retn</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">0040117C</span>&nbsp;_main&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endp</li><li class="hl_l0"></li><li class="hl_l1"><span class="hl_comment">; вот хз почему моя функа стала называться jpeg =)</span></li><li class="hl_l0"></li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401180</span>&nbsp;@jpeg@_16402&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>proc</b></span>&nbsp;<span class="hl_function"><b>near</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; CODE XREF: _main+5p</span></li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;ebp</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401181</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">ebp</span><span class="hl_char">,</span>&nbsp;esp</li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401183</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>xor</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;eax</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ebp</li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401186</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retn</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401186</span>&nbsp;@jpeg@_16402&nbsp;&nbsp;&nbsp;&nbsp;endp</li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span>00401186</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401186</span>&nbsp;<span class="hl_comment">; ---------------------------------------------------------------------- -----</span></li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401187</span>&nbsp;aWhatermark&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>db</b></span>&nbsp;<span class="hl_quote">'whatermark'</span><span class="hl_char">,</span>0</li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401192</span>&nbsp;<span class="hl_comment">; ---------------------------------------------------------------------- -----</span></li><li class="hl_l0"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401192</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>ebp</b></span>&nbsp;<span class="hl_comment">; правда это </span></li><li class="hl_l1"><span class="hl_char">.</span>text<span class="hl_char">:</span><span class="hl_number">00401193</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>retn</b></span>&nbsp;<span class="hl_comment">; и это тоже непонятно зачем тут =(</span></li>        </ol>
    </div>
</div></div>
<br><br>зы<br>ногами не пинать, т.к. имхо PEKill прав, такие вещи на асме пишутся очень просто, зачем себе жизнь усложнять.. но мы не ищем лёгких путей <img src="img/smilies/s6.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=200594&amp;user=6716&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=14" class="addthx" data-post="200594"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]Ice-T[/b]','')">Ice-T</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/12329.jpg" alt=""><br><span class=txtSm>Ранг: 126.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.01'>Активность: 0.14<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12329">Участник</a><br><font color=blue>#CCh</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 августа 2008 14:14 <br><script type="text/javascript">QU('Ice-T','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice-T" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<I>alexey_k пишет:<br>правда это <br>.text:00401193                 retn ; и это тоже непонятно зачем тут =( </I><br>стандартная хрень на дельфи <img src="img/smilies/s1.gif" alt=""><br><br>return(0x90909090) компилится, как нистранно в mov EAX,90909090, после сигны ищем первый 0xC3 дизасмом длин это и есть последний retn. В функцию передаем указатель на выходной буфер и все. Я бы так и сделал и не одной строчки на асме, как ты и хотел)
<br><br><font size="1"><i>-----<br>invoke OpenFire</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200597&amp;user=12329&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=15" class="addthx" data-post="200597"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]Dian[/b]','')">Dian</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 37.4 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4566">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 августа 2008 09:38 <br><script type="text/javascript">QU('Dian','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dian" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
<b>theCollision</b>, размер эпилога нужно счесть константой и просто прибавить <img src="img/smilies/s1.gif" alt=""><br><br>Где-то на форуме мне попадался &quot;дизассемблер длин функций&quot; - очень сильная штука
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=200677&amp;user=4566&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=16" class="addthx" data-post="200677"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]RSI[/b]','')">RSI</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 284.8 (наставник), 6thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.85'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6361">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 августа 2008 10:10 <br><script type="text/javascript">QU('RSI','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=RSI" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
<b>theCollision</b><br>если уж сильно хочешь загнаться, то можешь посмотреть как работают проты ( в частности ExeCryptor и Themida ) когда юзаются маркеры ( т.е. маркер это опять таки забитая цепочка байт ( сигна ) по которой прот находит начало и конец, а дальше опеределяет что с этим сделать).
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=200678&amp;user=6361&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=17" class="addthx" data-post="200678"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]theCollision[/b]','')">theCollision</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 271.5 (наставник), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.24'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4439">Участник</a><br><font color=blue>Packer Reseacher</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 августа 2008 20:26 &middot; Поправил: theCollision <br><script type="text/javascript">QU('theCollision','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=theCollision" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
<b>Ice-T</b><br>Логично ! ;) Думаю даже дизасм-длин не нужен, просто поиск 0xC3 )<br><br>Тогда теперь ситуация такая, в конце ф-ции я же могу возвращать нетолько хреновый результат а-ля return(-1) но и зашибись типа return(0) или другой какой важный проге! Если поставлю после последнего ретурна :<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">__asm&nbsp;{</li><li class="hl_l1">&nbsp;<span class="hl_function"><b>nop</b></span>&nbsp;</li><li class="hl_l0">&nbsp;nop</li><li class="hl_l1">&nbsp;<span class="hl_function"><b>nop</b></span>&nbsp;</li><li class="hl_l0">&nbsp;nop</li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
т.е. вероятность что компиллер подумает это нах ненадо и выкинет! ;))) Как принудительно директивами это задать , в стиле:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">__asm&nbsp;{</li><li class="hl_l1">__отимизиатор_вЫключить</li><li class="hl_l0">&nbsp;<span class="hl_function"><b>nop</b></span>&nbsp;</li><li class="hl_l1">&nbsp;nop</li><li class="hl_l0">&nbsp;<span class="hl_function"><b>nop</b></span>&nbsp;</li><li class="hl_l1">&nbsp;nop</li><li class="hl_l0">__отимизиатор</li>        </ol>
    </div>
</div></div>
_включить<br>}<br><br>я бы задал это в макросе и в конце нужных мне ф-ций его вставлял бы! А потом бы написал ф-цию поиска 0x90909090 и потом 0xC3 и копировал бы в файлом без учета B8 90 90 90 90 , а вставлял бы 0xC3<br><br>Вот примерно то что я хочу, осталось заставить компиллер MS Visual Studio 2005(8) Team Stuidio это захавать ))<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">#define&nbsp;FUNC_FINISH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__asm&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#pragma&nbsp;optimize<span class="hl_char">(</span><span class="hl_quote">&quot;&quot;</span><span class="hl_char">,</span>&nbsp;off<span class="hl_char">)</span>&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>nop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>nop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">\</span>&nbsp;&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>nop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>nop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#pragma&nbsp;optimize<span class="hl_char">(</span><span class="hl_quote">&quot;&quot;</span><span class="hl_char">,</span>&nbsp;on<span class="hl_char">)</span>&nbsp;&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>        </ol>
    </div>
</div></div>
<br>пока пришел к:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span style="word-break: break-all">#define&nbsp;FUNC_FINISH&nbsp;__asm&nbsp;_emit&nbsp;0x90&nbsp;__asm&nbsp;&nbsp;_emit&nbsp;0x90&nbsp;__asm&nbsp;_emit&nbsp;0x90&nbsp;__asm&nbsp;&nbsp;_emit&nbsp;0x90</span></li>        </ol>
    </div>
</div></div>
но как в этот же макросвставить отключение оптимизации и дальнейшее включение. Чтобы вставив один единственный FUNC_FINISH у меня генерировлось эта 90909090 и оптимизатор чтобы не выкидывал ее из кода!
<br><br><font size="1"><i>-----<br>My love is very cool girl.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200753&amp;user=4439&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=18" class="addthx" data-post="200753"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]theCollision[/b]','')">theCollision</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 271.5 (наставник), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.24'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4439">Участник</a><br><font color=blue>Packer Reseacher</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 августа 2008 22:26 <br><script type="text/javascript">QU('theCollision','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=theCollision" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
На данном этапе у меня:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span style="word-break: break-all">#define&nbsp;FUNC_FINISH&nbsp;__asm&nbsp;{&nbsp;__asm&nbsp;_emit&nbsp;0x90&nbsp;__asm&nbsp;&nbsp;_emit&nbsp;0x90&nbsp;__asm&nbsp;_emit&nbsp;0x90&nbsp;__asm&nbsp;&nbsp;_emit&nbsp;0x90&nbsp;}</span></li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">*</span>&nbsp;много&nbsp;дури&nbsp;<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l0">#pragma&nbsp;optimize<span class="hl_char">(</span><span class="hl_quote">&quot;&quot;</span><span class="hl_char">,</span>&nbsp;off<span class="hl_char">)</span></li><li class="hl_l1"><span class="hl_function"><b>DWORD</b></span>&nbsp;xMyFunc<span class="hl_char">(</span><span class="hl_char">)</span></li><li class="hl_l0">{</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">*</span>&nbsp;много&nbsp;кода&nbsp;<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l0">&nbsp;&nbsp;}&nbsp;<span class="hl_char">/</span><span class="hl_char">*</span>&nbsp;for&nbsp;i&nbsp;<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l1">&nbsp;&nbsp;return<span class="hl_char">(</span><span class="hl_char">-</span><span class="hl_number">1</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;FUNC_FINISH</li><li class="hl_l1">}</li><li class="hl_l0">#pragma&nbsp;optimize<span class="hl_char">(</span><span class="hl_quote">&quot;&quot;</span><span class="hl_char">,</span>&nbsp;on<span class="hl_char">)</span></li>        </ol>
    </div>
</div></div>
<br>и получаю:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_comment">; 94   :   return(-1);</span></li><li class="hl_l1"></li><li class="hl_l0">&nbsp;&nbsp;<span class="hl_number">000d5</span>&nbsp;&nbsp;<span class="hl_number">83</span>&nbsp;c8&nbsp;ff&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">-</span>1</li><li class="hl_l1">&nbsp;&nbsp;<span class="hl_number">000d8</span>&nbsp;&nbsp;eb&nbsp;<span class="hl_number">04</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>SHORT</b></span>&nbsp;<span class="hl_char">$</span>LN9@xMyFunc</li><li class="hl_l0"></li><li class="hl_l1"><span class="hl_comment">; 95   :   FUNC_FINISH</span></li><li class="hl_l0"></li><li class="hl_l1">&nbsp;&nbsp;<span class="hl_number">000da</span>&nbsp;&nbsp;<span class="hl_number">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">-</span><span class="hl_number">112</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; ffffff90H</span></li><li class="hl_l0">&nbsp;&nbsp;<span class="hl_number">000db</span>&nbsp;&nbsp;<span class="hl_number">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">-</span><span class="hl_number">112</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; ffffff90H</span></li><li class="hl_l1">&nbsp;&nbsp;<span class="hl_number">000dc</span>&nbsp;&nbsp;<span class="hl_number">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">-</span><span class="hl_number">112</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; ffffff90H</span></li><li class="hl_l0">&nbsp;&nbsp;<span class="hl_number">000dd</span>&nbsp;&nbsp;<span class="hl_number">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">-</span><span class="hl_number">112</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; ffffff90H</span></li><li class="hl_l1"><span class="hl_char">$</span>LN9@xMyFunc<span class="hl_char">:</span></li>        </ol>
    </div>
</div></div>
<br><br>Но вставляется тело ф-ции без оптимизации! А мне бы хотелось убрать только и только эти самые 0x90...
<br><br><font size="1"><i>-----<br>My love is very cool girl.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200784&amp;user=4439&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=19" class="addthx" data-post="200784"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]Ice-T[/b]','')">Ice-T</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/12329.jpg" alt=""><br><span class=txtSm>Ранг: 126.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.01'>Активность: 0.14<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12329">Участник</a><br><font color=blue>#CCh</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 28 августа 2008 06:34 <br><script type="text/javascript">QU('Ice-T','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice-T" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
Вычисляй размер функции в конце самой функции и пусть <b>return</b> его возвращает <img src="img/smilies/s5.gif" alt="">
<br><br><font size="1"><i>-----<br>invoke OpenFire</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200815&amp;user=12329&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=20" class="addthx" data-post="200815"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]theCollision[/b]','')">theCollision</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 271.5 (наставник), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.24'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4439">Участник</a><br><font color=blue>Packer Reseacher</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 28 августа 2008 11:09 <br><script type="text/javascript">QU('theCollision','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=theCollision" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
<b>Ice-T</b> Дааа, еще чего предложишь ? )
<br><br><font size="1"><i>-----<br>My love is very cool girl.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200844&amp;user=4439&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=21" class="addthx" data-post="200844"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]Tim[/b]','')">Tim</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 253.9 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.91'>Активность: 0.13<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=161">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 28 августа 2008 14:07 <br><script type="text/javascript">QU('Tim','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Tim" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
какая-то странная затея это все. столько уже всего предложили, а что еще нужно?<br>&quot;программно узнать размер функции на си&quot; - мы говорим о функции, в которой нет ни одного CALL или JMP вне функции? Если функция своя-самописаная, к чему это все? Можно перевести в опкод и не морочиться. Если хочется все так оптимизировать, тогда искать по RETN или по сигнатуре. Ведь проект компилится одним компилем, так под него и подгонять!<br>Странная тема вообще <img src="img/smilies/s6.gif" alt="">
<br><br><font size="1"><i>-----<br>MicroSoft? Is it some kind of a toilet paper?</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200882&amp;user=161&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=22" class="addthx" data-post="200882"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]theCollision[/b]','')">theCollision</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 271.5 (наставник), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.24'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4439">Участник</a><br><font color=blue>Packer Reseacher</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 28 августа 2008 14:40 <br><script type="text/javascript">QU('theCollision','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=theCollision" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
<b>Tim</b><br>А подумать ? Для чего еще нужно писать ф-цию написанную на си и в файл ? Да и спрашивать не где нить на форуме по базам данных, а на реверсинге, где большинство тем это крипторы, пакеры, проты и всякая подобная лабудень !!! Видно же что пишется криптор или пакер! Совсем народ думать разучился!<br><br>&gt;&gt;столько уже всего предложили, а что еще нужно? <br>А чего конкертно-то предложили ? ты вот возьми напиши xGetProcAddress положи ее в peimage.cpp и ни где в проекте ее не используй!!! Т.е. не пиши строк вида: xGetProcAddress(hDll, DllFunc); <br>У меня лично компиллер при построении проекта в exe-шник не ложит то что не используется!!! Т.е. он оптимизирует и думает, раз не юзается,значит нафиг не надо!!! Почему мне это должно нравится ?<br>Вот и возникает вопрос как сделать так чтобы и сохранить оптимизацию ф-ции и чтобы размер можно было получить! Пока пришел к методу, что написал в посте #19. Но тут отключается оптимизация вообще, было бы идеально заставить компиллер не выкидывать ф-цию и оптимизировать, при этом вставляя в конец 0x90909090, но как это сделать ?
<br><br><font size="1"><i>-----<br>My love is very cool girl.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200889&amp;user=4439&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=23" class="addthx" data-post="200889"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]Tim[/b]','')">Tim</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 253.9 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.91'>Активность: 0.13<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=161">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 28 августа 2008 19:31 <br><script type="text/javascript">QU('Tim','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Tim" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
<b>theCollision</b><br>да это понятно, что пишется прот или пакер <img src="img/smilies/s6.gif" alt=""><br>просто мне интересно, почему нельзя перевести функу в опкоды и юзать так <img src="img/smilies/s1.gif" alt=""><br>ведь эта функция же будет писаться в защищаемый файл и там использоваться?! <img src="img/smilies/s11.gif" alt=""><br><br>ведь как-то писались и пишутся сотни протов и пакеров...
<br><br><font size="1"><i>-----<br>MicroSoft? Is it some kind of a toilet paper?</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200928&amp;user=161&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=24" class="addthx" data-post="200928"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]theCollision[/b]','')">theCollision</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 271.5 (наставник), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.24'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4439">Участник</a><br><font color=blue>Packer Reseacher</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 28 августа 2008 20:46 <br><script type="text/javascript">QU('theCollision','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=theCollision" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#25');return false;">#25</a> </span><div align=left><br>
<b>Tim</b><br>А если я багу в ф-ции допущу ? Поправлю и че опять перекомпилять, опять в бин вид, а потом в виде си ! Это не есть автоматизация процесса, куда правильней задать порядок ф-ций, что я ща и делаю ;)))<br><br>Есть опция в MS Visual Studio 2005 Team Suite, с названием &quot;/ODER&quot; ему надо дать на вход файлик порядка ф-ций, токо пока не пойму че и как делать ! Если порядок ф-ций будет таким каким я укажу, то логично что можно получить размер по Func2 - Func1
<br><br><font size="1"><i>-----<br>My love is very cool girl.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200941&amp;user=4439&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=25" class="addthx" data-post="200941"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]theCollision[/b]','')">theCollision</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 271.5 (наставник), 12thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.24'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4439">Участник</a><br><font color=blue>Packer Reseacher</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 28 августа 2008 21:03 &middot; Поправил: theCollision <br><script type="text/javascript">QU('theCollision','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=theCollision" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=12625.html&amp;page=0#26');return false;">#26</a> </span><div align=left><br>
Все, вроде как победил )))<br><br>Опишу действия, которые касаются MS Visual Studio 2005 Team Suite:<br>0. Делаем пробную компиляцию и ищем obj main.obj файл и юзая dumpbin /symbols получаем имена ф-ций, которые записываем в файл func_order.cfg в том порядке каком хотим!<br>1. В опциях проекта, для обеих версий и дебаг и релиз ищем Linker-&gt;Optimization-&gt;Funcion Order в него прописываем наш файл @func_order.cfg, также не удаляем COMDATs тамже ключик по выше!<br>&gt;&gt;COMDAT record запись в формате COFF , содержащая инициализируемый общий блок данных и делающая упакованные функции видимыми для компоновщика<br>3. В хидере cryptor.h к примеру пишем макрос:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">#define&nbsp;SIZE_OF_xFunc1&nbsp;<span class="hl_char">(</span><span class="hl_function">DWORD</span><span class="hl_char">)</span><span class="hl_char">(</span><span class="hl_char">(</span><span class="hl_function">BYTE</span><span class="hl_char">*</span><span class="hl_char">)</span>Func2&nbsp;<span class="hl_char">-</span>&nbsp;<span class="hl_char">(</span><span class="hl_function">BYTE</span><span class="hl_char">*</span><span class="hl_char">)</span>Func1<span class="hl_char">)</span></li>        </ol>
    </div>
</div></div>
<br>4. Пишем еще одну ф-цию:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>DWORD</b></span>&nbsp;SizeOfFunction<span class="hl_char">(</span><span class="hl_function"><b>IN</b></span>&nbsp;<span class="hl_function">BYTE</span><span class="hl_char">*</span>&nbsp;Func<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>IN</b></span>&nbsp;<span class="hl_function"><b>DWORD</b></span>&nbsp;SizeOfFunc<span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;for&nbsp;<span class="hl_char">(</span><span class="hl_comment">;SizeOfFunc &gt; 0 &amp;&amp; Func[SizeOfFunc-1] == 0xCC; )</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;SizeOfFunc<span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;return&nbsp;SizeOfFunc<span class="hl_comment">;</span></li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<br>5. Дожидаемся полнолуния<br>6. Компилем, результат храним в надежной от затирания файла !
<br><br><font size="1"><i>-----<br>My love is very cool girl.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=200945&amp;user=4439&amp;forum_n=6&amp;topic=12625.html&amp;page=0&amp;anchor=26" class="addthx" data-post="200945"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Как программно узнать размер функции написанной на си ?</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#27" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="6">
<input type="hidden" name="topic" value="12625">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=12625" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
