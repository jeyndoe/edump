<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Заменить старший байт - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Нужна была функция для преобразования значения цвета BGR &lt;-&gt; RGB с принудительной установкой альфы, написал так: Code:       mov&nbsp;dword&nbsp;eax,&nbsp;Colorbswap&nbsp;eaxror&nbsp;eax,&nbsp;8&nbsp;; принудительная">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=40382'>jinoweb</a> (+4 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Заменить старший байт</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]Ate[/b]','')">Ate</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.9 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.6'>Активность: 0.03<span style='color:green'>&nearr;</span>0.05</span><br>Статус: <a href="action=userinfo&amp;user=39934">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 марта 2020 00:52 &middot; Поправил: Ate <br><script type="text/javascript">QU('Ate','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ate" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Нужна была функция для преобразования значения цвета BGR &lt;-&gt; RGB с принудительной установкой альфы, написал так:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;Color</li><li class="hl_l1"><span class="hl_function"><b>bswap</b></span>&nbsp;<span class="hl_registr">eax</span></li><li class="hl_l0"><span class="hl_function"><b>ror</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">8</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_comment">; принудительная установка альфы в 255</span></li><li class="hl_l1"><span class="hl_function"><b>ror</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">24</span></li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">al</span><span class="hl_char">,</span>&nbsp;0xFF</li><li class="hl_l1"><span class="hl_function"><b>rol</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">24</span></li>        </ol>
    </div>
</div></div>
<br><br>почему-то думаю можно как-то проще заменить старший байт (последние три инструкции)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=403995&amp;user=39934&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=1" class="addthx" data-post="403995"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]ClockMan[/b]','')">ClockMan</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/17432.jpg" alt=""><br><span class=txtSm>Ранг: 568.2 (<b>!</b>), 465thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.99'>Активность: 0.55<span style='color:green'>&nearr;</span>0.57</span><br>Статус: <a href="action=userinfo&amp;user=17432">Участник</a><br><font color=blue>оптимист</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 марта 2020 01:10 <br><script type="text/javascript">QU('ClockMan','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ClockMan" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br><div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>OR</b></span>&nbsp;<span class="hl_registr">EAX</span><span class="hl_char">,</span><span class="hl_number">0FF0</span></li>        </ol>
    </div>
</div></div>
<br>?
<br><br><font size="1"><i>-----<br>Чтобы правильно задать вопрос, нужно знать большую часть  ответа. Р.Шекли.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=403996&amp;user=17432&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=2" class="addthx" data-post="403996"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=39934" title="13-03-2020 23:03, ранг:11.4" target="_blank">Ate</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]rmn[/b]','')">rmn</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 158.4 (ветеран), 123thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.28'>Активность: 0.14<span style='color:green'>&nearr;</span>0.49</span><br>Статус: <a href="action=userinfo&amp;user=1533">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 марта 2020 01:30 <br><script type="text/javascript">QU('rmn','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=rmn" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br><div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>shl</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">8</span></li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">al</span><span class="hl_char">,</span>&nbsp;0xFF</li><li class="hl_l0"><span class="hl_function"><b>bswap</b></span>&nbsp;<span class="hl_registr">eax</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=403999&amp;user=1533&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=3" class="addthx" data-post="403999"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=39934" title="13-03-2020 23:03, ранг:11.4" target="_blank">Ate</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Ate[/b]','')">Ate</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.9 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.6'>Активность: 0.03<span style='color:green'>&nearr;</span>0.05</span><br>Статус: <a href="action=userinfo&amp;user=39934">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 марта 2020 02:05 <br><script type="text/javascript">QU('Ate','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ate" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
Спасибо, то что нужно.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=404000&amp;user=39934&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=4" class="addthx" data-post="404000"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]friend[/b]','')">friend</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 13.2 (новичок), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.43'>Активность: 0.28=0.28</span><br>Статус: <a href="action=userinfo&amp;user=52993">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 марта 2020 03:24 <br><script type="text/javascript">QU('friend','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=friend" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>ClockMan пишет:<br>OR EAX,0FF0 </I><br>Почему маска странная? Опечатка?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=404001&amp;user=52993&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=5" class="addthx" data-post="404001"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]_MBK_[/b]','')">_MBK_</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 63.5 (постоянный), 35thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.61'>Активность: 0.29<span style='color:green'>&nearr;</span>0.96</span><br>Статус: <a href="action=userinfo&amp;user=41701">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 14 марта 2020 05:37 <br><script type="text/javascript">QU('_MBK_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=_MBK_" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Вообще то какбэ or eax, 0xFF000000
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=404004&amp;user=41701&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=6" class="addthx" data-post="404004"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]Ate[/b]','')">Ate</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.9 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.6'>Активность: 0.03<span style='color:green'>&nearr;</span>0.05</span><br>Статус: <a href="action=userinfo&amp;user=39934">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 мая 2020 20:56 <br><script type="text/javascript">QU('Ate','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ate" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Аналогичный вопрос по возможности оптимизировать конструкцию вида:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_comment">; Читаем из таймера значение в 100нс интервалах, преобразуем в мс и сохраняем в 'time'</span></li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">rbp</span><span class="hl_char">,</span>&nbsp;qword&nbsp;<span class="hl_char">[</span>timer<span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;r15<span class="hl_char">,</span>&nbsp;qword&nbsp;<span class="hl_char">[</span><span class="hl_registr">rbp</span><span class="hl_char">]</span></li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">rax</span><span class="hl_char">,</span>&nbsp;r15</li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">rcx</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">10000</span></li><li class="hl_l1"><span class="hl_function">cqo</span></li><li class="hl_l0"><span class="hl_function"><b>idiv</b></span>&nbsp;<span class="hl_registr">rcx</span></li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;r15<span class="hl_char">,</span>&nbsp;<span class="hl_registr">rax</span></li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;qword&nbsp;<span class="hl_char">[</span>time<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;r15</li>        </ol>
    </div>
</div></div>
<br><br>Поскольку 10<b>k</b> не является степенью двойки, заменить деление битовым сдвигом вроде как не получается, мб умножением?<br>И еще хотел уточнить, как в данном варианте происходит округление при делении, нужно ли добавлять код для &quot;Round to nearest&quot;?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406279&amp;user=39934&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=7" class="addthx" data-post="406279"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 мая 2020 23:05 &middot; Поправил: ELF_7719116 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
Как минимум, можно обойтись без <b>r15</b> и <b>rbp</b><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">rax</span><span class="hl_char">,</span>&nbsp;qword&nbsp;<span class="hl_char">[</span>timer<span class="hl_char">]</span></li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">rcx</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">10000</span></li><li class="hl_l0"><span class="hl_function">cqo</span></li><li class="hl_l1"><span class="hl_function"><b>idiv</b></span>&nbsp;<span class="hl_registr">rcx</span></li><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;qword&nbsp;<span class="hl_char">[</span>time<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">rax</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=406282&amp;user=26651&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=8" class="addthx" data-post="406282"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=39934" title="20-05-2020 19:09, ранг:12.7" target="_blank">Ate</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]ClockMan[/b]','')">ClockMan</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/17432.jpg" alt=""><br><span class=txtSm>Ранг: 568.2 (<b>!</b>), 465thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.99'>Активность: 0.55<span style='color:green'>&nearr;</span>0.57</span><br>Статус: <a href="action=userinfo&amp;user=17432">Участник</a><br><font color=blue>оптимист</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 мая 2020 01:34 <br><script type="text/javascript">QU('ClockMan','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ClockMan" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<b>SAR RAX, 0x10</b>
<br><br><font size="1"><i>-----<br>Чтобы правильно задать вопрос, нужно знать большую часть  ответа. Р.Шекли.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=406284&amp;user=17432&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=9" class="addthx" data-post="406284"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]_MBK_[/b]','')">_MBK_</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 63.5 (постоянный), 35thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.61'>Активность: 0.29<span style='color:green'>&nearr;</span>0.96</span><br>Статус: <a href="action=userinfo&amp;user=41701">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 мая 2020 03:22 <br><script type="text/javascript">QU('_MBK_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=_MBK_" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Там же десятичное 10к
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406285&amp;user=41701&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=10" class="addthx" data-post="406285"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]VOLKOFF[/b]','')">VOLKOFF</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 173.8 (ветеран), 208thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.95'>Активность: 0.12<span style='color:green'>&nearr;</span>0.36</span><br>Статус: <a href="action=userinfo&amp;user=5846">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 мая 2020 03:44 &middot; Поправил: VOLKOFF <br><script type="text/javascript">QU('VOLKOFF','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VOLKOFF" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<I>ELF_7719116 пишет:<br>Как минимум, можно обойтись без r15 и rbp </I><br>Тут судя по коду **timer а не *timer и в твоем варианте мы читаем в RAX адрес указателя а не значение<br>Хотя предпоследняя и вторая строки явно лишние, можно заменить на <i class=x>mov rax, qword [rbp]</i> и <i class=x>mov qword [time], rax</i> соответственно, избавившись от <i class=x>r15</i><br><br><I>ClockMan пишет:<br>SAR RAX, 0x10 </I><br>А даст ли sar нужный результат при делителе не 2&#8319;...<br><br><I>Ate пишет:<br>как в данном варианте происходит округление при делении, нужно ли добавлять код для &quot;Round to nearest&quot;?</I><br>Целочисленное частное округляется в сторону нуля.<br>Я бы вообще не стал заморачиваться с округлением, если не нужна точность меньше* 1мс<br>В ином случае можно заюзать FPU (у которого дефолтный режим округления как раз к ближайшему),<br><i class=x>fld+fistp</i>, или <i class=x>cvtss2si </i>(если режим не изменен)<br>но проще проверять остаток деления и соответственно корректировать результат.<br><br>Можно вместо деления умножать на 0.0001, но тогда все придется делать на фпу, хотя работать будет быстрее ~x2  <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406287&amp;user=5846&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=11" class="addthx" data-post="406287"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=39934" title="20-05-2020 19:09, ранг:12.7" target="_blank">Ate</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]_MBK_[/b]','')">_MBK_</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 63.5 (постоянный), 35thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.61'>Активность: 0.29<span style='color:green'>&nearr;</span>0.96</span><br>Статус: <a href="action=userinfo&amp;user=41701">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 мая 2020 05:45 <br><script type="text/javascript">QU('_MBK_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=_MBK_" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<I>VOLKOFF пишет:<br>Целочисленное частное округляется в сторону нуля </I><br>Там знаковое деление, для отрицательных чисел, насколько я понимаю, с точностью до наоборот
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406288&amp;user=41701&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=12" class="addthx" data-post="406288"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]VOLKOFF[/b]','')">VOLKOFF</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 173.8 (ветеран), 208thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.95'>Активность: 0.12<span style='color:green'>&nearr;</span>0.36</span><br>Статус: <a href="action=userinfo&amp;user=5846">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 мая 2020 21:42 <br><script type="text/javascript">QU('VOLKOFF','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VOLKOFF" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
<I>_MBK_ пишет:<br>для отрицательных чисел, насколько я понимаю, с точностью до наоборот </I><br><br><b>Intel® 64 and IA-32 Software Developer’s Manuals 2019</b><br><i class=x>The quotient from the IDIV instruction is <b>rounded toward zero</b>, whereas the “quotient” of the SAR instruction is<br>rounded toward negative infinity. This difference is apparent only for negative numbers. For example, when the<br>IDIV instruction is used to divide -9 by 4, the result is -2 with a remainder of -1. If the SAR instruction is used to<br>shift -9 right by two bits, the result is -3 and the “remainder” is +3; however, the SAR instruction stores only the<br>most significant bit of the remainder (in the CF flag)</i><br><br><i class=x>IDIV_</i>-5:2=<b>-2</b><br><i class=x>IDIV__</i>5:2= <b>2</b><br><br><i class=x>...-2,5...<b>-2</b>...0...<b>2</b>...2,5...</i><br><br>Вроде все логично.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406302&amp;user=5846&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=13" class="addthx" data-post="406302"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]Ate[/b]','')">Ate</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.9 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.6'>Активность: 0.03<span style='color:green'>&nearr;</span>0.05</span><br>Статус: <a href="action=userinfo&amp;user=39934">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 мая 2020 22:24 <br><script type="text/javascript">QU('Ate','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ate" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
Спасибо за ответы!<br>Действительно, можно же на 0.0001 умножать и тактов меньше уходит.<br>Сделал так (double factor = 0.0001)<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_registr">rax</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">[</span>timer<span class="hl_char">]</span></li><li class="hl_l1"><span class="hl_function"><b>fild</b></span>&nbsp;qword&nbsp;<span class="hl_char">[</span><span class="hl_registr">rax</span><span class="hl_char">]</span></li><li class="hl_l0"><span class="hl_function"><b>fmul</b></span>&nbsp;<span class="hl_char">[</span>factor<span class="hl_char">]</span></li><li class="hl_l1"><span class="hl_function"><b>fistp</b></span>&nbsp;&nbsp;<span class="hl_char">[</span>time<span class="hl_char">]</span></li>        </ol>
    </div>
</div></div>
<br><br>Насколько понимаю, результат fistp зависит от битов 14 и 13 регистра MXCSR.<br>Если я в коде не менял режима, насколько высока вероятность, что он будет не стандартным, имеет смысл его проставлять (и если да, как покороче это сделать)?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406306&amp;user=39934&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=14" class="addthx" data-post="406306"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]RamMerlabs[/b]','')">RamMerlabs</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 73.1 (постоянный), 130thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.41'>Активность: 0.04<span style='color:green'>&nearr;</span>0.23</span><br>Статус: <a href="action=userinfo&amp;user=9891">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 мая 2020 22:46 &middot; Поправил: RamMerlabs <br><script type="text/javascript">QU('RamMerlabs','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=RamMerlabs" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
MXCSR для SIMD floating-point же. <br>Для простого x87 FPU будет CW - 10 и 11 биты для Ваших целей. Как-то так:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">wControlWord&nbsp;<span class="hl_function"><b>WORD</b></span>&nbsp;<span class="hl_char">?</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>fstcw</b></span>&nbsp;wControlWord</li><li class="hl_l1"><span class="hl_function"><b>or</b></span>&nbsp;wControlWord<span class="hl_char">,</span>&nbsp;<span class="hl_number">0C00h</span></li><li class="hl_l0"><span class="hl_function"><b>fldcw</b></span>&nbsp;wControlWord</li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=406308&amp;user=9891&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=15" class="addthx" data-post="406308"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=39934" title="21-05-2020 00:23, ранг:13.7" target="_blank">Ate</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]_MBK_[/b]','')">_MBK_</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 63.5 (постоянный), 35thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.61'>Активность: 0.29<span style='color:green'>&nearr;</span>0.96</span><br>Статус: <a href="action=userinfo&amp;user=41701">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 мая 2020 01:35 &middot; Поправил: _MBK_ <br><script type="text/javascript">QU('_MBK_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=_MBK_" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
<I>VOLKOFF пишет:<br><br>Вроде все логично </I><br>Логичен был бы эквивалент round - число= частное&#215;делитель+остаток, но, по сути таки да, получается, что везде делят по модулю и дописывают знак, т.е. и на отрицательных выравнивает к нулю <img src="img/smilies/s9.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406312&amp;user=41701&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=16" class="addthx" data-post="406312"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]friend[/b]','')">friend</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 13.2 (новичок), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.43'>Активность: 0.28=0.28</span><br>Статус: <a href="action=userinfo&amp;user=52993">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 мая 2020 13:49 <br><script type="text/javascript">QU('friend','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=friend" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
просто деление edi на 10000, быстро, ret result in eax:<br><br>divide_by_10k(int edi):<br>        movsx   rax, edi<br>        imul    rax, rax, 1759218605<br>        sar     rax, 44<br>        sar     edi, 31<br>        sub     eax, edi<br>        ret<br><br>;)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406318&amp;user=52993&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=17" class="addthx" data-post="406318"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]RamMerlabs[/b]','')">RamMerlabs</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 73.1 (постоянный), 130thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.41'>Активность: 0.04<span style='color:green'>&nearr;</span>0.23</span><br>Статус: <a href="action=userinfo&amp;user=9891">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 мая 2020 22:10 &middot; Поправил: RamMerlabs <br><script type="text/javascript">QU('RamMerlabs','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=RamMerlabs" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
<b>friend</b><br>Выше речь идёт о делении 64-битного значения, соответственно конкретно эта реализация не подойдёт - rdx из пары rdx:rax после imul никак не обрабатывается, но с большой вероятностью будет задействован (т.е. нужен &quot;обычный&quot; вариант imul с одним операндом)<br>PS: И с &quot;магическими&quot; константами нужно быть осторожным - не все комбинации из умножения на такую константу и сдвига дадут точный результат на всём диапазоне аргументов, даже в пределах [0...2^32).
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406328&amp;user=9891&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=18" class="addthx" data-post="406328"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]friend[/b]','')">friend</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 13.2 (новичок), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.43'>Активность: 0.28=0.28</span><br>Статус: <a href="action=userinfo&amp;user=52993">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 22 мая 2020 00:06 <br><script type="text/javascript">QU('friend','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=friend" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
x64div:<br>        movabs  rdx, 3777893186295716171<br>        mov     rax, rdi<br>        sar     rdi, 63<br>        imul    rdx<br>        sar     rdx, 11<br>        mov     rax, rdx<br>        sub     rax, rdi<br>        ret<br><br>&gt; PS: И с &quot;магическими&quot; константами нужно быть осторожным - не все комбинации из умножения на такую константу и сдвига дадут точный результат на всём диапазоне аргументов, даже в пределах [0...2^32). <br>Ты sub забыл. Погугли что за трюк. Я ведь не от руки/головы этот код пишу, godbolt ftw ;)<br><br>Also, Hackers Delight, Chapter 10. Integer Division By Constants<br><br>https://stackoverflow.com/questions/36039509/why-does-the-0x55555556-divide-by-3-hack-work<br><br>Если я ошибаюсь то пиши где алго не точен.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406330&amp;user=52993&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=19" class="addthx" data-post="406330"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]RamMerlabs[/b]','')">RamMerlabs</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 73.1 (постоянный), 130thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.41'>Активность: 0.04<span style='color:green'>&nearr;</span>0.23</span><br>Статус: <a href="action=userinfo&amp;user=9891">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 22 мая 2020 01:18 <br><script type="text/javascript">QU('RamMerlabs','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=RamMerlabs" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
<b>friend</b><br>Не забыл, &quot;трюк&quot; этот достаточно давно известен, суть алгоритма замены деления аналогичная везде - mul+shr/sar+sub. <br>Хоть упоминай sub, хоть нет, переполнение rax при умножении заведомо немаленького числа (напомню, речь в задаче идёт о счётчике &quot;тиков&quot;) на 0x68DB8BAD более чем вероятно <img src="img/smilies/s1.gif" alt=""><br><br>Я не говорю, что конкретно это &quot;магическая&quot; константа для замены деления на конкретно этот делитель приведёт к неточному результату, а в целом о подходе. емнип, на форуме masm32 это обсуждалось и приводились примеры тестирования для разных констант, демонстрирующие, что не вся &quot;магия&quot; одинаково полезна.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406334&amp;user=9891&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=20" class="addthx" data-post="406334"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]VOLKOFF[/b]','')">VOLKOFF</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 173.8 (ветеран), 208thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.95'>Активность: 0.12<span style='color:green'>&nearr;</span>0.36</span><br>Статус: <a href="action=userinfo&amp;user=5846">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 22 мая 2020 02:53 &middot; Поправил: VOLKOFF <br><script type="text/javascript">QU('VOLKOFF','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VOLKOFF" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
Вариант имеет место быть, но выигрыша в скорости, или краткости конструкции перед выбранным ТС подходом у него нет, а вот недостаток (с позиции запроса ТС) есть - отсутствие округления результата к ближайшему целому.<br><br>Кстати &quot;о птичках&quot;<br><I>RamMerlabs пишет:<br>or wControlWord, 0C00h </I><br><br><code>Rounding Modes and Encoding of Rounding Control (RC) Field:<br>RC: .  Rounding Mode:<br>00b - Round to nearest  (even)  Default!<br>01b - Round down  (toward &#8722;&#8734;)<br>10b - Round up    (toward +&#8734;)<br>11b - Round toward zero (Truncate)</code><br><br><code>!or [CWR], 0000110000000000b ; (0C00h) приведет к Round toward zero (Truncate)</code><br><br>Для <b>Round to nearest</b> нужно<br><br><code>!and   [CWR], 0xf3ff  ; 1111001111111111b</code><br><br>Или еще можно сбросить в дефолт через <b>finit</b>, флаш пайплайна так и так будет (из-за fldcw в изначальном варианте)<br>Если код будет в цикле, достаточно перед ним (или в начале функции) вызвать один раз. Маловероятно, но стоит убедится что сброс остальных флагов не повлияет на логику программы:<br><br><code>FINIT/FNINIT инициализация сопроцессора (установка значений в 037Fh)<br>RC  = 00b             ; <i class=x>округление к ближайшему целому</i><br>PM,UM,OM,ZM,DM,IM = 1 ; <i class=x>все исключения не замаскированы</i><br>PC  = 11b             ; <i class=x>максимальная точность 64 бита (даже если при старте программы было установлено 10b)</i><br>SWR = 0h              ; <i class=x>отсутствие исключений и указание на то, что r0 является вершиной стека и соответствует ST(0)</i><br>TWR = FFFFh           ;<i class=x> все регистры стека сопроцессора пусты</i><br>DPR = 0 <br>PR  = 0</code><br><br>PS<br><b>LinXP</b>, спасибки, работает <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406336&amp;user=5846&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=21" class="addthx" data-post="406336"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=39934" title="26-05-2020 06:42, ранг:13.7" target="_blank">Ate</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]friend[/b]','')">friend</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 13.2 (новичок), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.43'>Активность: 0.28=0.28</span><br>Статус: <a href="action=userinfo&amp;user=52993">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 мая 2020 15:30 &middot; Поправил: friend <br><script type="text/javascript">QU('friend','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=friend" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
<I>RamMerlabs пишет:<br>Хоть упоминай sub, хоть нет, переполнение rax </I><br>Переполнения rax из принципа быть не может, трюк этот для деления на константы и так как в задаче делят на 10к то тут всё однозначно.<br>-edit-<br>То есть &quot;переполнение&quot; есть но оно не играет роли.<br><br>Насчёт скорости не верю что подымать фпу и трогать мем быстрее даже в цикле. Бэнчи в студию.<br><br>-edit-<br>unsigned, even shorter<br><br>xdiv(unsigned long long):<br>        movabs  rdx, 3777893186295716171<br>        mov     rax, rdi<br>        mul     rdx<br>        mov     rax, rdx<br>        shr     rax, 11<br>        ret
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406365&amp;user=52993&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=22" class="addthx" data-post="406365"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=39934" title="26-05-2020 06:42, ранг:13.7" target="_blank">Ate</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]Ate[/b]','')">Ate</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 18.9 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.6'>Активность: 0.03<span style='color:green'>&nearr;</span>0.05</span><br>Статус: <a href="action=userinfo&amp;user=39934">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 мая 2020 09:57 &middot; Поправил: Ate <br><script type="text/javascript">QU('Ate','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ate" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
Спасибо!<br><br>Столкнулся еще с одним интересным вопросом.<br>Есть структура размером 8 байт, как я понимаю безопасно считать это значение из другого потока я могу только под х64 например обычным mov, под х32 нужна атомарная операция среди которых для работы с QUAD подходит только LOCK CMPXCHG8B и у нее есть особенность расположения данных в EDX:EAX  и  ECX:EBX<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_registr">eax</span><span class="hl_char">,</span>&nbsp;mem</li><li class="hl_l1"><span class="hl_function"><b>mov</b></span>&nbsp;<span class="hl_function"><b>dword</b></span>&nbsp;<span class="hl_registr">edx</span><span class="hl_char">,</span>&nbsp;mem<span class="hl_char">+</span><span class="hl_number">4</span></li><li class="hl_l0"><span class="hl_function"><b>lock</b></span>&nbsp;<span class="hl_function"><b>cmpxchg8b</b></span>&nbsp;<span class="hl_char">[</span>dest<span class="hl_char">]</span></li>        </ol>
    </div>
</div></div>
<br><br>Есть ли возможность под х32 поместить в EDX:EAX значение из памяти одной командой?<br>И вообще не усложняю ли я реальное положение дел?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406399&amp;user=39934&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=23" class="addthx" data-post="406399"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]VOLKOFF[/b]','')">VOLKOFF</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 173.8 (ветеран), 208thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.95'>Активность: 0.12<span style='color:green'>&nearr;</span>0.36</span><br>Статус: <a href="action=userinfo&amp;user=5846">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 мая 2020 12:56 <br><script type="text/javascript">QU('VOLKOFF','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VOLKOFF" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26381.html&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
<I>Ate пишет:<br>не усложняю ли я </I><br>Однозначно.<br>По основным пунктам ты безусловно мыслишь верно, но сравнение с обменом в таком контексте обойдется слишком дорого, поэтому имхо лучше так не делать.<br><code>MOVQ - вполне себе атомарно<br>MOVLPS<br>FILD/FSTP</code><br><br>Вот <noindex><a href="https://godbolt.org/#z:OYLghAFBqd5TKALEBjA9gEwKYFFMCWALugE4A0BIEAViAIzkA2AhgHaioCkATAEK8%2B5AM7oArqVTYQAcl4BmAm1RMxOANRd5AYRYkAtgW7zcXAAwBBcxeFFMIEHvSHj2pug7r3HLbnXCkFlJsTC0BS2sAN3QCTH8SYIhvYC8PFJYASk0AdnCLdQL1AHoi9RZBenUSePQAB3UMfVqCJmxSYXUAM1JndRoxW1SWQk8iJGwy0hTu3v1sfTIAT2tC4tKxNlbhDrHsRfUBiYBlI9wedQAFCwARa4BFFcKAoJCAOlsybAhy/kZ4%2BxAcwWpEWAH0yDhSKDgqwAB4hDJhaxcbLXZERSzJVKedzDCDRWJZFF5VbBIgSNj%2BQLBTCvXGYCC2AFApbg0iQ6HYOEIpERVHoiwyDLMWQAVhk5DYsjMEvQsm0gkE/nEkgmCnoEqI0qFwoA1iB5PJXgA2AAcAE55GYrdlRaazNlzaaRTIACwS/QgUVmSXa8hymQS4QgH1amQy4VwWAoRrNVoUKgQWMtNogYDZHjkTotIhtYMQABGfoLSiCi1kGvIjTmbCIAHlNuXwxKcPp2MBWn7CMFUEQCJFsMHm%2BRsPDUGJcxWJUpc0w/URSARPTINcLWBw0Ir%2BMwCAXg5BhXU%2Bx4hwBaOvydSn/Tyc5XgDqLCYTCv%2BnJbGwWmugWEAHcuUwQYqlIDBrmKEpSsOAawqaxqnsarrqMAqCoOo2SvOcED4MQZCaDw8h/Nozhxm0eHyKKGSatqGTCuMwyphAYFuh6Xo%2BpBMr%2BrIQYhuQYYRnqBpGmalrWg6doOk6LryBBfoBlRzaRogUbIGgxEpgm1DJvGaYZlmOZ5tQRbDiWbBllOVbODW9aNl28ztp2w7dtgvb9oOfqjs5E7SCu061ly86Lsuq7MO2m78IIO57vAh61MebBnher63gUp6Ps%2Br7bBM17vp%2B8jfiwf4AUBEggfQTHir6UGyDBcEIUhKFoRh6hYYQCRkYRanxu1lG8dRAnyK6rwZhmZjmtk9DyOaE30Iwc7MeQnrepVHFySIPF8UK5DKRAMadW0lCaXtpA6Zm2ZMLm7SGcWpYguZ1bYLWDZME2HGtvZ3mvQQPZ9gOQ4cR546Tj5lB%2BXNHELkuU5rqF3DhduTC7vujH%2BrFBAnrI56XteyUPk%2BL7XiwkSwq%2BOVfj%2B/7PsVqqgS6FXsbK1WwfBiHIah6GYdhbXquQ6hEU06lka6PUbTR5B0ZC1BMe6C2sctDOBmtoZ9eQ%2BoDUNPAjWNE1TQRs2yNJcucQrItbUpSm7fz8YHUmR0gEYqD0M6Z0XfmRkcSZZnA/dj02Y5dkcA5n3fa5f0SgDXnmTO/nDhDQWbeunBbkICNRQeKNxQlWM3jwVOleVMlVTINXM%2Bo9vqI7zWc7h3O80dZHyMLyv6vhrxmBroqWvI2STbarrGtkLrS4tbGyVxiu9QppvwDtqmW/tiZaamKjtq6ZiMM7BmFtdpm3V7lkPdZz22W2AcfS2X3OT9bnDuHQOVlHYOaoFUMhRusMCPDiPRenaPxRjiWniZCnL8Kd35Kmxuca8mUc4iGAtIMqtMC4rUZrVRCy9PCDTMK8SoLUcKkHajzPmJF8EKB4I3BStFsD0WOsjOaQ9Zb0yNtxJWFCVYGnoK8O0A1TQZnoG3bIFoeCiikkg%2BW8l%2BIuhgYw1aIthQDnaL/EArogA" rel="nofollow" target="_blank">--&gt; живые примеры &lt;--</a></noindex>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=406402&amp;user=5846&amp;forum_n=6&amp;topic=26381.html&amp;page=0&amp;anchor=24" class="addthx" data-post="406402"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=39934" title="28-05-2020 04:55, ранг:14.7" target="_blank">Ate</a></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Заменить старший байт</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#25" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="6">
<input type="hidden" name="topic" value="26381">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=26381" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
