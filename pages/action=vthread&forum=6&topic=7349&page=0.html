<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Помогите структурировать код - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Помогите структурировать такой код:  result = init_a();  if (result != 0) goto work;  result = init_b();  if (result == 0) goto exit; /* Никак не получается? Ну и чёрт с ним. */  convert_to_a(result); work:  exec(result); /*">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=39467'>hgdagon</a>, <a target='_blank' href='?action=userinfo&amp;user=28016'>asfa</a>, <a target='_blank' href='?action=userinfo&amp;user=26261'>bartolomeo</a> (+4 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Помогите структурировать код</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]iZzz32[/b]','')">iZzz32</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 3.3 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.65'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=7910">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 09:38 &middot; Поправил: iZzz32 <br><script type="text/javascript">QU('iZzz32','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=iZzz32" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Помогите структурировать такой код:<br><code><br>  result = init_a();<br>  if (result != 0) goto work;<br>  result = init_b();<br>  if (result == 0) goto exit; /* Никак не получается? Ну и чёрт с ним. */<br>  convert_to_a(result);<br>work:<br>  exec(result); /* Делаем нечно ужасное… ^_^ */<br>exit:<br></code>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113519&amp;user=7910&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=1" class="addthx" data-post="113519"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Larry[/b]','')">Larry</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/1102.jpg" alt=""><br><span class=txtSm>Ранг: 114.4 (ветеран), 21thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.51'>Активность: 0.04<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=1102">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 09:49 <br><script type="text/javascript">QU('Larry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Larry" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Что значит структурировать?<br><br>Что конкретно ты хочешь?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113524&amp;user=1102&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=2" class="addthx" data-post="113524"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]iZzz32[/b]','')">iZzz32</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 3.3 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.65'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=7910">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 09:56 &middot; Поправил: iZzz32 <br><script type="text/javascript">QU('iZzz32','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=iZzz32" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
Переписать без goto и меток. Код сгенерирован компилятором MSVC6. Я написал вариант (см. выше), но в оригинале определённо было как-то по-другому...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113526&amp;user=7910&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=3" class="addthx" data-post="113526"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]ant_man[/b]','')">ant_man</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 27.7 (посетитель), 2thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.58'>Активность: 0.01=0.01</span><br>Статус: <a href="action=userinfo&amp;user=921">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 09:59 <br><script type="text/javascript">QU('ant_man','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ant_man" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
if(!(res=init_a()))exec(res);<br>else if(!(res=init_b())){convert_to_a(res);exec(res);}
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113527&amp;user=921&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=4" class="addthx" data-post="113527"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]iZzz32[/b]','')">iZzz32</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 3.3 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.65'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=7910">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 10:12 <br><script type="text/javascript">QU('iZzz32','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=iZzz32" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
Вы меня не поняли. Что надо написать на сях, чтобы компилятор сгенерировал вот такой код:<br><code><br>        call    init_a<br>        test    eax,eax<br>        jne     work<br>        call    init_b<br>        test    eax,eax<br>        je      exit            ;Никак не получается? Ну и чёрт с ним.<br>        push    eax<br>        call    convert_to_a<br>work:<br>        push    eax<br>        call    exec            ;Делаем нечто ужасное...<br>exit:<br></code><br>Тут <b>один</b> вызов exec!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113533&amp;user=7910&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=5" class="addthx" data-post="113533"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]HoBleen[/b]','')">HoBleen</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/5110.jpg" alt=""><br><span class=txtSm>Ранг: 240.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.09'>Активность: 0.19<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5110">Участник</a><br><font color=blue>Author of ACKiller </font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 10:55 &middot; Поправил: HoBleen <br><script type="text/javascript">QU('HoBleen','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HoBleen" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<I>iZzz32 пишет:<br>Что надо написать на сях, чтобы компилятор сгенерировал вот такой код: </I><br>Все зависит от компилятора. Разные компиляторы генерируют разный код и оптимизируют его по-разному (даже такой маленький отрывок кода). Тебе нужен тот же компилятор (+та же версия) что и у программистов, писавщих эту программу, тогда можно будет гадать какого именно вида был исходник. <br><br>А вообще зачем тебе это надо? Код ведь имеет ту же функциональность.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113545&amp;user=5110&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=6" class="addthx" data-post="113545"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]iZzz32[/b]','')">iZzz32</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 3.3 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.65'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=7910">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 11:04 <br><script type="text/javascript">QU('iZzz32','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=iZzz32" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<b>HoBleen</b>, есть у меня MSVC6!.. Пробовал с разными ключами разные варианты. Ну не генерирует он один exec никак! Зачем мне это надо? Просто интересно, как такое получилось у программиста, это писавшего.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113548&amp;user=7910&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=7" class="addthx" data-post="113548"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]sniperZ[/b]','')">sniperZ</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 260.2 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.07'>Активность: 0.19<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5211">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 11:59 <br><script type="text/javascript">QU('sniperZ','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=sniperZ" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<I>Larry пишет:<br>Что значит структурировать? </I><br><img src="img/smilies/s6.gif" alt="">. Чел явн0 0сн0в алг0ритмизации не знает.<img src="img/smilies/s16.gif" alt=""><br><I>iZzz32 пишет:<br>Тут один вызов exec! </I><br>Них не п0йму.И в исх0дном на си т0же один выз0в exec.<img src="img/smilies/s13.gif" alt=""><br>Выражайся п0нятнее.<img src="img/smilies/s3.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113559&amp;user=5211&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=8" class="addthx" data-post="113559"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]xDriver[/b]','')">xDriver</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 45.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.71'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=587">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 13:00 &middot; Поправил: xDriver <br><script type="text/javascript">QU('xDriver','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=xDriver" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
result = init_a(); <br>if (result == 0) {<br>   result = init_b(); <br>  if (result!=0) convert_to_a(result); <br>} else {<br>   exec(result);<br>}
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113569&amp;user=587&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=9" class="addthx" data-post="113569"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]Enigma[/b]','')">Enigma</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 88.3 (постоянный), 3thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.58'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8396">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 13:29 <br><script type="text/javascript">QU('Enigma','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Enigma" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<b>xDriver</b> Не то... не то твой пример делает, если result после init_b не будет = 0 то exec не выполнится... а должен...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113571&amp;user=8396&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=10" class="addthx" data-post="113571"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]xDriver[/b]','')">xDriver</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 45.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.71'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=587">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 13:43 &middot; Поправил: xDriver <br><script type="text/javascript">QU('xDriver','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=xDriver" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<b>Enigma</b><br>Да просмотрел, спасибо <br>тада так:<br><br><code>result = init_a(); <br>switch(result) {<br>     case 0: <br>         result = init_b(); <br>         if (result==0) break;<br>	 convert_to_a(result); <br>     default:	  	  	  <br>         exec(result);<br>}</code><br><br><br>ЕЛКИ ПАЛКИ НУ КОГДА ФОРМАТИРОВАНИЕ КОДА БУДЕТ, НЕВОЗМОЖНО ТАКОЕ ЧИТАТЬ.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113573&amp;user=587&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=11" class="addthx" data-post="113573"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]Enigma[/b]','')">Enigma</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 88.3 (постоянный), 3thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.58'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8396">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 14:04 <br><script type="text/javascript">QU('Enigma','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Enigma" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<b>xDriver</b> Да вроде тоже не то, default выполняется тока когда в case не найдено необходимых меток, опять же таки exec выполнятся не будет... вообще интересный пример, наверное все таки это надо каждый компилятор смотреть, хрен знает как он это построит...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113575&amp;user=8396&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=12" class="addthx" data-post="113575"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]xDriver[/b]','')">xDriver</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 45.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.71'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=587">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 14:12 <br><script type="text/javascript">QU('xDriver','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=xDriver" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
<b>Enigma</b><br>А вот тут ты не прав.<br>default выполнится в случае case 0: и result=!0 после init_b() потомучто нет break<br>также default выполнится если result после init_a() будет отличен от нуля.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113576&amp;user=587&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=13" class="addthx" data-post="113576"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]Enigma[/b]','')">Enigma</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 88.3 (постоянный), 3thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.58'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8396">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 14:21 <br><script type="text/javascript">QU('Enigma','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Enigma" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
<b>xDriver</b> Лана, ты в switch&#039;е 0: изменяешь переменную для которой этот switch создан, компилятор такое не пропустит, а если и пропустит, ... херота наверное получится...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113578&amp;user=8396&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=14" class="addthx" data-post="113578"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]xDriver[/b]','')">xDriver</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 45.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.71'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=587">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 14:26 <br><script type="text/javascript">QU('xDriver','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=xDriver" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<b>Enigma</b><br>Блин<br>switch отработал потом с  result делай что хочешь, компилятору на это пох.<br>хотя ща проверю на Borland Builder 6.0 ....
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113580&amp;user=587&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=15" class="addthx" data-post="113580"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]Enigma[/b]','')">Enigma</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 88.3 (постоянный), 3thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.58'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8396">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 14:29 <br><script type="text/javascript">QU('Enigma','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Enigma" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
if (res=init_a()) {<br>  if (!(res=init_b())) // Если a - ху.во, делаем b<br>    convert_to_a(res); // И если пиз.ато делаем b - делаем convert<br>}<br>if (!res) exec(res); // Если дожили досюда и res==0 то делаем exec<br><br>Лана, держи структуризатор :-D
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113582&amp;user=8396&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=16" class="addthx" data-post="113582"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]xDriver[/b]','')">xDriver</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 45.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.71'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=587">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 января 2007 14:37 <br><script type="text/javascript">QU('xDriver','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=xDriver" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
<b>Enigma</b><br>Ну вообщем как я и говорил ... код рабочий<br>Компилятору на изменение result внутри switch фиалетово.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113583&amp;user=587&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=17" class="addthx" data-post="113583"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]iZzz32[/b]','')">iZzz32</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 3.3 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.65'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=7910">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2007 00:53 &middot; Поправил: iZzz32 <br><script type="text/javascript">QU('iZzz32','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=iZzz32" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=7349.html&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
Посмотрел. Вариант от xDriver забавен, но в нём та же проблема, что и в моём (с goto) - лишние jmp-ы после компиляции.<br>Вариант от Enigma:<code><br>if (!(r = init_a())) {<br>	if ((r = init_b())) convert_to_a(r);<br>}<br>if (r) exec(r);<br></code><br>очень похож на PowerPC-шный вариант того же самого кода:<code><br>					* &quot;Note that in assembly language programming,<br>					* generally means multiply...&quot; (C) Stuart Ball<br><br>	bl	init_a			* Зовём init_a.<br>	mr.	r30,r3			* Кладём результат в r30, ставим флаги в cr0.<br>	bne	work			* Прыгаем, если не стоит (вроде бит 2?) в cr0.<br>	bl	init_b			* Зовём init_b.<br>	mr.	r30,r3			* Кладём результат в r30, ставим флаги в cr0.<br>	mcrf	cr4,cr0			* Кладём флаги из поля 0 в поле 4 регистра cr.<br>	beq	cr4,chk_rslt		* Прыгаем, если стоит бит 2 в cr4.<br>	mr	r3,r30			* Кладём результат обратно в r3 (первый параметр).<br>	bl	convert_to_a		* Зовём convert_to_a.<br>chk_rslt:<br>	beq	cr4,exit		* Прыгаем, если стоит бит 2 в cr4.<br>work:<br>	mr	r3,r30			* Кладём результат обратно в r3 (первый параметр).<br>	bl	exec			* Зовём exec.<br>exit:<br></code><br>А как добиться от MSVC6 кода, приведённого в моём втором посте, мне, наверное, никогда не понять.<br>PS(оффтоп): Посоветуйте, пожалуйста, хорошие мануалки по программированию/реверсингу для PPC.<br>PPS(<I>edit</I>): Ну ёклмн, правда, куда делась моя табуляция?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=113637&amp;user=7910&amp;forum_n=6&amp;topic=7349.html&amp;page=0&amp;anchor=18" class="addthx" data-post="113637"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Помогите структурировать код</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#19" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="6">
<input type="hidden" name="topic" value="7349">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=7349" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
