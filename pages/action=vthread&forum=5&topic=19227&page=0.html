<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>IDA 6.1 ошибка памяти - read only при запуске программы из под отладчика - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="При попытке запуска программы из под отладчика IDA 6.1 отладчик выдает что инструкция по адресу: A93B395 обратилась к памяти по адресу: &lt;разные адреса от одного запуска к другому&gt; и эта память не может быть read. ">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=28016'>asfa</a>, <a target='_blank' href='?action=userinfo&amp;user=26261'>bartolomeo</a>, <a target='_blank' href='?action=userinfo&amp;user=41701'>_MBK_</a> (+7 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> IDA 6.1 ошибка памяти - read only при запуске программы из под отладчика</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]Dim77[/b]','')">Dim77</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 9.7 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.68'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=30627">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 ноября 2011 00:15 &middot; Поправил: Dim77 <br><script type="text/javascript">QU('Dim77','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dim77" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
При попытке запуска программы из под отладчика IDA 6.1 отладчик выдает что инструкция по адресу: A93B395 обратилась к памяти по адресу: &lt;разные адреса от одного запуска к другому&gt; и эта память не может быть read. <br><br>Инструкция ниже выполняется много раз успешно в процессе загрузки и выгрузки системных и програмных библиотек для программы, которую я пытаюсь запустить. Затем, в определенный момент возникает ошибка, приведенная выше. <br><br>Я пытался запускать программу под отладчиком в Windows Safe Mode, чтобы посмотреть, как уменьшение количества загруженных процессов влияет на распределение памяти. Это не помогло. <br><br>Есть впечатление, что отладчик и библиотеки используют в какой-то момент один и тот же сегмент памяти. Можно их как-то разнести или еще как-то это поправить? <br><br>Видел описание похожей проблемы <noindex><a href="https://ssl.exelab.ru/f/action=vthread&amp;forum=1&amp;topic=12507&amp;page=1" rel="nofollow" target="_blank">здесь</a></noindex> Решение там не описано, предложено пользоватся другим отладчиком - это все что возможно сделать? <br><br>Shw32.dll:0A93B395 mov     dx, [eax+0Eh]<br>Shw32.dll:0A93B399 mov     cx, dx<br>Shw32.dll:0A93B39C and     cx, 0FFF8h<br>Shw32.dll:0A93B3A1 cmp     cx, 0CAD0h<br>Shw32.dll:0A93B3A6 jnz     short loc_A93B3D1<br>Shw32.dll:0A93B3A8 and     dl, 7<br>Shw32.dll:0A93B3AB cmp     dl, 5<br>Shw32.dll:0A93B3AE jnb     short loc_A93B3D1<br>Shw32.dll:0A93B3B0 mov     eax, [eax]<br>Shw32.dll:0A93B3B2 cmp     word ptr [eax+20h], 0BEADh<br>Shw32.dll:0A93B3B8 jnz     short loc_A93B3D1<br>Shw32.dll:0A93B3BA mov     eax, 1<br>Shw32.dll:0A93B3BF mov     dword ptr [ebp-4], 0FFFFFFFFh<br>Shw32.dll:0A93B3C6 jmp     short loc_A93B3DA<br><br>Операция  mov     dx, [eax+0Eh] - это то на чем все останавливается. Память по адресу в dx оказывается read по какой-то причине и естесственно туда ничего записать не получается.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=294813&amp;user=30627&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=1" class="addthx" data-post="294813"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Dart Sergius[/b]','')">Dart Sergius</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/22828.jpg" alt=""><br><span class=txtSm>Ранг: 105.6 (ветеран), 36thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.72'>Активность: 0.1<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=22828">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 ноября 2011 00:18 <br><script type="text/javascript">QU('Dart Sergius','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dart Sergius" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
а отдать на растерзание данное исключение процессу религия не позволяет?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=294814&amp;user=22828&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=2" class="addthx" data-post="294814"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]Dim77[/b]','')">Dim77</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 9.7 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.68'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=30627">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 ноября 2011 00:24 &middot; Поправил: Dim77 <br><script type="text/javascript">QU('Dim77','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dim77" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
После 8-10 таких исключений программа вылетает с кодом: -1073741819.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=294819&amp;user=30627&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=3" class="addthx" data-post="294819"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Dart Sergius[/b]','')">Dart Sergius</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/22828.jpg" alt=""><br><span class=txtSm>Ранг: 105.6 (ветеран), 36thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.72'>Активность: 0.1<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=22828">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 ноября 2011 00:32 <br><script type="text/javascript">QU('Dart Sergius','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dart Sergius" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
Значит, путь тебе в SEH.<br>Где-то в обработчике ошибки, он понимает что программа отлаживается. Мб выложишь пациента? (естественно вместе с exe)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=294821&amp;user=22828&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=4" class="addthx" data-post="294821"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]Dim77[/b]','')">Dim77</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 9.7 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.68'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=30627">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 ноября 2011 01:13 &middot; Поправил: Dim77 <br><script type="text/javascript">QU('Dim77','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dim77" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
Выложил здесь: <br><br><noindex><a href="http://www.multiupload.com/TTZXDCA82Q" rel="nofollow" target="_blank">--&gt;D2 Exe (4 MB)&lt;--</a></noindex><br><noindex><a href="http://www.multiupload.com/XFTF8XUBEE" rel="nofollow" target="_blank">--&gt;Shw32.dll (110.03 KB)&lt;--</a></noindex><br><noindex><a href="http://www.multiupload.com/17W6EBZ04G" rel="nofollow" target="_blank">--&gt;C4dll-R.dll (127.5 KB) &lt;--</a></noindex><br><noindex><a href="http://www.multiupload.com/XDE6NMAO8Q" rel="nofollow" target="_blank">--&gt;Msvcrt.dll (271.27 KB)  &lt;--</a></noindex><br><noindex><a href="http://www.multiupload.com/GFUX4QHLCF" rel="nofollow" target="_blank">--&gt;D2debug011111.idb (64.74 MB)  &lt;--</a></noindex><br><br>Если каких-то библиотек нехватает, то могу дозалить. <br><br>Пока решения нет, буду смотреть SEH. Спасибо.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=294824&amp;user=30627&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=5" class="addthx" data-post="294824"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]tundra37[/b]','')">tundra37</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 310.8 (мудрец), 29thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.32'>Активность: 0.43<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4072">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 ноября 2011 10:55 <br><script type="text/javascript">QU('tundra37','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tundra37" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<i class=x>Память по адресу в dx оказывается read по какой-то причине и естесственно туда ничего записать не получается. </i> <i class=x>и эта память не может быть read. </i><br>Ерунду ты написал. Память не может быть ПРОЧИТАНА. Да и команду ты не понял. Программа обращается в НЕВЫДЕЛЕННУЮ процессу память. Значит надо в отладчике анализировать почему в EAX попал адрес.<br>А скорее всего там ноль.<br>Кстати, а без отладчика программа не падает? Может не в отладчике дело?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=294988&amp;user=4072&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=6" class="addthx" data-post="294988"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]Dim77[/b]','')">Dim77</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 9.7 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.68'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=30627">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 ноября 2011 13:59 <br><script type="text/javascript">QU('Dim77','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dim77" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Без отладчика программа не падает. <br><br>Проверю, но вообще-то каждый раз при запуске отладчик ругается на разные адреса, неравные 0. Запущу и приведу пример.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=295004&amp;user=30627&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=7" class="addthx" data-post="295004"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]ajax[/b]','')">ajax</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/8830.gif" alt=""><br><span class=txtSm>Ранг: 337.6 (мудрец), 224thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.53'>Активность: 0.21<span style='color:red'>&searr;</span>0.1</span><br>Статус: <a href="action=userinfo&amp;user=8830">Участник</a><br><font color=blue>born to be evil</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 ноября 2011 14:12 &middot; Поправил: ajax <br><script type="text/javascript">QU('ajax','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ajax" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<b>Dim77</b><br>idastealth, возможно, спасет &quot;отца русской демократии&quot; <img src="img/smilies/s1.gif" alt=""><br>да, лично мне отладка в 6.1 не нравится. все еще юзаю 5.5
<br><br><font size="1"><i>-----<br>От многой мудрости много скорби, и умножающий знание умножает печаль</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=295005&amp;user=8830&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=8" class="addthx" data-post="295005"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]tundra37[/b]','')">tundra37</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 310.8 (мудрец), 29thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.32'>Активность: 0.43<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4072">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 ноября 2011 16:59 <br><script type="text/javascript">QU('tundra37','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tundra37" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<i class=x>Проверю, но вообще-то каждый раз при запуске отладчик ругается на разные адреса, неравные 0. Запущу и приведу пример. </i><br> И это тоже понятно. Прога читает &quot;мусор&quot;. Пока значения &quot;хорошие&quot; - бродит по памяти, при плохих - эксепшн.<br> Возможно в ней нельзя ставить софтовые бряки. Вариантов масса. Я бы попробовал другой отладчик. <br>  Опять ты пишешь ерунду. Адрес, где произошел эксепшн естественно ненулевой. А вот адрес откуда пытаются читать - его надо смотреть в регистре EAX(для случая что ты привел), ну или в другом - надо команду анализировать.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=295017&amp;user=4072&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=9" class="addthx" data-post="295017"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]Dim77[/b]','')">Dim77</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 9.7 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.68'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=30627">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 ноября 2011 19:24 &middot; Поправил: Dim77 <br><script type="text/javascript">QU('Dim77','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dim77" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Подключил IDAStealth, пока не помогает. Нужно еще поиграться с настройками. Если есть какие-либо соображения о том, как его настроить, то буду благодарен. <br><br>По поводу памяти: Ошибка, которую программа выдает: The instruction at 0xA93B395 (см выше код инструкции) referenced memory at 0x1FD000E. The memory can not be read -&gt; 01FD000E. (exc. code c0000005, tid 748). <br><br>Содержание регистров: <br><br>EAX 01FD0000<br>EDX 01F80000<br><br>Регистр, откуда процедура вызывается: EIP<br><br>Запустил под  OllyDbg. Все тоже самое, только в Olly видно, где начинается обработка исключений. Кроме того, первый раз, когда я под ним запустил, то после того, как программа падает, он написал, что мы дошли до последнего SEH. А сейчас просто уходит в бесконечный loop на определенном адресе. <br><br>Кстати IDAStealth, дает эту информацию: <br><br>IDAStealth: debugger reached top-level SEH handler at 0x6cc0aa<br>IDAStealth: debugger reached top-level SEH handler at 0x7c839ad8<br><br>Внизу немного больше кода около места, где все останавливается. <br><br>CPU Disasm<br>Address   Hex dump          Command                                  Comments<br>0A93B360  /&#036;  64:A1 0000000 MOV EAX,DWORD PTR FS:[0]                 ; SHW32.0A93B360(guessed Arg1)<br>0A93B366  |.  55            PUSH EBP<br>0A93B367  |.  8BEC          MOV EBP,ESP<br>0A93B369  |.  6A FF         PUSH -1<br>0A93B36B  |.  68 7041940A   PUSH OFFSET 0A944170<br>0A93B370  |.  68 60D2930A   PUSH 0A93D260<br>0A93B375  |.  50            PUSH EAX<br>0A93B376  |.  64:8925 00000 MOV DWORD PTR FS:[0],ESP                 ; Installs SE handler 0A93D260<br>0A93B37D  |.  83EC 10       SUB ESP,10<br>0A93B380  |.  53            PUSH EBX<br>0A93B381  |.  56            PUSH ESI<br>0A93B382  |.  57            PUSH EDI<br>0A93B383  |.  8965 E8       MOV DWORD PTR SS:[LOCAL.6],ESP<br>0A93B386  |.  C745 FC 00000 MOV DWORD PTR SS:[LOCAL.1],0<br>0A93B38D  |.  8B45 08       MOV EAX,DWORD PTR SS:[ARG.1]<br>0A93B390  |.  25 0000FFFF   AND EAX,FFFF0000<br>0A93B395  |.  66:8B50 0E    MOV DX,WORD PTR DS:[EAX+0E]<br>0A93B399  |.  66:8BCA       MOV CX,DX<br>0A93B39C  |.  66:81E1 F8FF  AND CX,FFF8<br>0A93B3A1  |.  66:81F9 D0CA  CMP CX,0CAD0<br>0A93B3A6  |.  75 29         JNE SHORT 0A93B3D1<br>0A93B3A8  |.  80E2 07       AND DL,07<br>0A93B3AB  |.  80FA 05       CMP DL,5<br>0A93B3AE  |.  73 21         JNB SHORT 0A93B3D1<br>0A93B3B0  |.  8B00          MOV EAX,DWORD PTR DS:[EAX]<br>0A93B3B2  |.  66:8178 20 AD CMP WORD PTR DS:[EAX+20],0BEAD<br>0A93B3B8  |.  75 17         JNE SHORT 0A93B3D1<br>0A93B3BA  |.  B8 01000000   MOV EAX,1<br>0A93B3BF  |.  C745 FC FFFFF MOV DWORD PTR SS:[LOCAL.1],-1<br>0A93B3C6  \.  EB 12         JMP SHORT 0A93B3DA
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=295030&amp;user=30627&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=10" class="addthx" data-post="295030"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]tundra37[/b]','')">tundra37</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 310.8 (мудрец), 29thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.32'>Активность: 0.43<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4072">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 ноября 2011 13:14 <br><script type="text/javascript">QU('tundra37','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tundra37" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<b>Dim77</b> SHW32  вообще-то занимется распределением памяти. Возможно это &quot;доброкачественный&quot; эксепшн - просто проверяется заказана ли память и если не хватает - дозаказывают. В Олли надо просто отключить анализ всех эксепшенов - возможно все заработает.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=295092&amp;user=4072&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=11" class="addthx" data-post="295092"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]Dim77[/b]','')">Dim77</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 9.7 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.68'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=30627">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 10 ноября 2011 17:23 &middot; Поправил: Dim77 <br><script type="text/javascript">QU('Dim77','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Dim77" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19227.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<b>tundra37</b>Включил Ignore всех exceptions в Olly, не заработало. Программа упала с сообщением: Access violation when reading [BAADF00D] - application was unable to process exception.<br><br>Ситуация похожа вот на <noindex><a href="https://www.openrce.org/forums/posts/775" rel="nofollow" target="_blank">этот баг</a></noindex>. Хотя  у меня в IDA, при возникновении исключения TF бит равен 0, хотя возможно нужно смотреть по шагам. <br><br>Запустил все под Visual Studio и заработало, пока только приаттачился к процессу. Еще не разобрался, как дебагер в студии работает. Но исключения он обрабатывает нормально.<br><br>несколько поторопился с выводами. Студия может приаттачится к процессу, но не может его запустить. В ней так же как и в Олли и ИДА при отключенной обработке исключений все останавливается на адресе: baadf00d.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=295112&amp;user=30627&amp;forum_n=5&amp;topic=19227.html&amp;page=0&amp;anchor=12" class="addthx" data-post="295112"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> IDA 6.1 ошибка памяти - read only при запуске программы из под отладчика</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#13" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="5">
<input type="hidden" name="topic" value="19227">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=19227" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
