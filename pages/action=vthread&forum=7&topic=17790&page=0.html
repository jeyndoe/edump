<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Помогите оптимизировать перевод dword массива в hex строку и обратно на PHP - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Интересует именно быстрота перевода в обе стороны. Вариант с serialize не то, что нужно. Массив переменной длинны с 32-битными значениями в HEX. Сейчас сделал так: Code:       &lt;?//&nbsp;Заполнили&nbsp;массив$dw[]=0x12345678;$dw">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b> (+2 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/mod.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=7&sortBy=0&page=0.html"><b>Оффтоп</b></a> <b class=bulletHead>&#8212;&#8250;</b> Помогите оптимизировать перевод dword массива в hex строку и обратно на PHP</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 февраля 2011 01:57 &middot; Поправил: ToBad <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=17790.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Интересует именно быстрота перевода в обе стороны. Вариант с serialize не то, что нужно. Массив переменной длинны с 32-битными значениями в HEX. Сейчас сделал так:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_char">&lt;</span><span class="hl_char">?</span></li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Заполнили&nbsp;массив</li><li class="hl_l0"><span class="hl_char">$</span><span class="hl_function">dw</span><span class="hl_char">[</span><span class="hl_char">]</span><span class="hl_char">=</span>0x12345678<span class="hl_comment">;</span></li><li class="hl_l1"><span class="hl_char">$</span><span class="hl_function">dw</span><span class="hl_char">[</span><span class="hl_char">]</span><span class="hl_char">=</span>0x11223344<span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_char">$</span><span class="hl_function">dw</span><span class="hl_char">[</span><span class="hl_char">]</span><span class="hl_char">=</span>0x77778888<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Вывели&nbsp;значения</li><li class="hl_l1">print_r<span class="hl_char">(</span><span class="hl_char">$</span><span class="hl_function">dw</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Перевели&nbsp;в&nbsp;HEX&nbsp;строку</li><li class="hl_l0"><span class="hl_char">$</span>d<span class="hl_char">=</span><span class="hl_quote">''</span><span class="hl_comment">;</span></li><li class="hl_l1">foreach&nbsp;<span class="hl_char">(</span><span class="hl_char">$</span><span class="hl_function"><b>dw</b></span>&nbsp;as&nbsp;<span class="hl_char">$</span>val<span class="hl_char">)</span>&nbsp;<span class="hl_char">$</span>d<span class="hl_char">.</span><span class="hl_char">=</span>pack<span class="hl_char">(</span><span class="hl_quote">'I'</span><span class="hl_char">,</span><span class="hl_char">$</span>val<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_char">$</span>d<span class="hl_char">=</span>array_shift<span class="hl_char">(</span>unpack<span class="hl_char">(</span><span class="hl_quote">'H*'</span><span class="hl_char">,</span><span class="hl_char">$</span>d<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Вывели</li><li class="hl_l1">echo&nbsp;<span class="hl_char">$</span>d<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Перевели&nbsp;HEX&nbsp;строку&nbsp;в&nbsp;другой&nbsp;массив&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l0"><span class="hl_char">$</span>dw2<span class="hl_char">=</span>array_values<span class="hl_char">(</span>unpack<span class="hl_char">(</span><span class="hl_quote">'I*'</span><span class="hl_char">,</span>pack<span class="hl_char">(</span><span class="hl_quote">'H*'</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>d<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Вывели&nbsp;значения&nbsp;массива</li><li class="hl_l1">print_r<span class="hl_char">(</span><span class="hl_char">$</span>dw2<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_char">?</span><span class="hl_char">&gt;</span></li>        </ol>
    </div>
</div></div>
<br><br>Результат такой:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">Array&nbsp;<span class="hl_char">(</span>&nbsp;<span class="hl_char">[</span><span class="hl_number">0</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">305419896</span>&nbsp;<span class="hl_char">[</span><span class="hl_number">1</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">287454020</span>&nbsp;<span class="hl_char">[</span><span class="hl_number">2</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">2004322440</span>&nbsp;<span class="hl_char">)</span>&nbsp;</li><li class="hl_l1"><span class="hl_number">785634124433221188887777</span></li><li class="hl_l0">Array&nbsp;<span class="hl_char">(</span>&nbsp;<span class="hl_char">[</span><span class="hl_number">0</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">305419896</span>&nbsp;<span class="hl_char">[</span><span class="hl_number">1</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">287454020</span>&nbsp;<span class="hl_char">[</span><span class="hl_number">2</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">2004322440</span>&nbsp;<span class="hl_char">)</span></li>        </ol>
    </div>
</div></div>
<br><br>Работает правильно, но думаю можно более быстро. Помогите пожалуйста оптимизировать.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=277416&amp;user=702&amp;forum_n=7&amp;topic=17790.html&amp;page=0&amp;anchor=1" class="addthx" data-post="277416"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Av0id[/b]','')">Av0id</a></b><br></div>
<img src="img/s8.gif" alt=""><br><span class=txtSm>Ранг: 516.1 (<b>!</b>), 39thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.38'>Активность: 0.28<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1378">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 февраля 2011 11:27 <br><script type="text/javascript">QU('Av0id','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Av0id" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=17790.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
может не то<br><br>php.net/manual/en/function.base-convert.php<br><br>и там в комментах много чего интересного
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=277516&amp;user=1378&amp;forum_n=7&amp;topic=17790.html&amp;page=0&amp;anchor=2" class="addthx" data-post="277516"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=702" title="21-02-2011 14:48, ранг:407.7" target="_blank">ToBad</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 февраля 2011 17:48 &middot; Поправил: ToBad <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=17790.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<I>Av0id пишет:<br>может не то<br><br><noindex><a href="http://php.net/manual/en/function.base-convert.php" rel="nofollow" target="_blank">http://php.net/manual/en/function.base-convert.php</a></noindex><br><br>и там в комментах много чего интересного </I><br><br>Спасибо! В комментах действительно много интересного! Пока их читал, парралельно пробивал непонятные моменты в гугле. В итоге заменил самый тормознутый код на новый.<br>Этот:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;Перевели&nbsp;в&nbsp;HEX&nbsp;строку</li><li class="hl_l1"><span class="hl_char">$</span>d<span class="hl_char">=</span><span class="hl_quote">''</span><span class="hl_comment">;</span></li><li class="hl_l0">foreach&nbsp;<span class="hl_char">(</span><span class="hl_char">$</span><span class="hl_function"><b>dw</b></span>&nbsp;as&nbsp;<span class="hl_char">$</span>val<span class="hl_char">)</span>&nbsp;<span class="hl_char">$</span>d<span class="hl_char">.</span><span class="hl_char">=</span>pack<span class="hl_char">(</span><span class="hl_quote">'I'</span><span class="hl_char">,</span><span class="hl_char">$</span>val<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span class="hl_char">$</span>d<span class="hl_char">=</span>array_shift<span class="hl_char">(</span>unpack<span class="hl_char">(</span><span class="hl_quote">'H*'</span><span class="hl_char">,</span><span class="hl_char">$</span>d<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br>На этот:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">function&nbsp;ArrayToHex<span class="hl_char">(</span><span class="hl_char">$</span>array<span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;array_unshift<span class="hl_char">(</span><span class="hl_char">$</span>array<span class="hl_char">,</span>&nbsp;<span class="hl_quote">'I*'</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">$</span>res&nbsp;<span class="hl_char">=</span>&nbsp;unpack<span class="hl_char">(</span><span class="hl_quote">'H*'</span><span class="hl_char">,</span>&nbsp;call_user_func_array<span class="hl_char">(</span><span class="hl_quote">'pack'</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>array<span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<span class="hl_char">$</span>res<span class="hl_char">[</span><span class="hl_number">1</span><span class="hl_char">]</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<br>Работает раза в два быстрее!<br>Думаю уже оптимизировать особо нечего, но если у кого есть идеи - буду рад!<br>p.s. Если можно не закрывайте топик, может чем дополнится.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=277552&amp;user=702&amp;forum_n=7&amp;topic=17790.html&amp;page=0&amp;anchor=3" class="addthx" data-post="277552"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/mod.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=7&sortBy=0&page=0.html"><b>Оффтоп</b></a> <b class=bulletHead>&#8212;&#8250;</b> Помогите оптимизировать перевод dword массива в hex строку и обратно на PHP</span></td>
</tr></table>
</div>
<a name=newreply></a>
<center><h3>У вас должно быть 20 пунктов ранга, чтобы оставлять сообщения в  этом подфоруме, но у вас только 0</h3></center><script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=17790" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
