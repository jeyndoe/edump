<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Пытаюсь придумать алгоритм - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Есть задача, для которой пытаюсь разработать алгоритм. Не могу найти красивое и простое решение. Вкратце расскажу, о чём речь. Устройство может принимать и отдавать купюры, до 80-ти штук распределяемые на N каналов у каждого из">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=55914'>Kybyx</a>, <a target='_blank' href='?action=userinfo&amp;user=44014'>user99</a> (+3 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/mod.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=7&sortBy=0&page=0.html"><b>Оффтоп</b></a> <b class=bulletHead>&#8212;&#8250;</b> Пытаюсь придумать алгоритм</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 октября 2012 17:24 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=20457.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Есть задача, для которой пытаюсь разработать алгоритм. Не могу найти красивое и простое решение. Вкратце расскажу, о чём речь. Устройство может принимать и отдавать купюры, до 80-ти штук распределяемые на N каналов у каждого из которых своя цена.<br>Для примера возьмём 5 каналов с купюрами 5, 10, 20, 50, 100. Кол-во купюр на каждом из каналов от 0 до 80, но максимум 80 на все каналы. Количество постоянно меняется, то есть добавляются новые банкноты и мы можем выдавать сохранённые. Естественно, всегда знаем сколько у нас есть.<br>Задача алгоритма сформировать максимально возможную сумму к выплате с учётом того, что с одной стороны желательно выдавать как можно меньше купюр, а с другой сохранять некий баланс, чтобы не оставалось каких-то одних много и подобными им не были заняты все 80 возможных позиций. Хотя тут можно сделать ограничение на канал, 15 или 20.<br>Например, если у нас есть одна сотня и пять полтинников, а выдать нужно сто, то лучше если это будут две банкноты по 50. Но если у нас два полтинника и сотня – выдаём сотню.<br>Я понимаю, что можно оптимизировать или по распределению банкнот, или по количеству ибо это два разных алгоритма и если нельзя выбрать что-то среднее, то лучше оптимизировать по кол-ву. То есть выдача с наименьшим кол-вом банкнот.<br>Так же никогда нельзя предугадать какие банкноты будут приходить чаще или какие и когда потребуются выплаты.<br>Задача пересчитывать из имеющегося, сколько максимально от запрошенной суммы может быть выдано. Минимум у нас это 5, если имеется хотя бы одна банкнота, иначе следующая по старшинству, максимум 2000, более не нужно.<br>Как я подошёл к решению. Так как идей насчёт логики просчёта всего вышеописанного у меня нет, я выбрал самый глупый и ресурсоёмкий процесс которым всё-таки можно добиться результата. Я просчитал все варианты на 5 каналов по 25 банкнот максимум на каждом. 25*25*25*25*25 и выбрал из них все до 2000 включительно. У меня получилось 4,5 миллиона комбинаций. Без всякого сжатия это файл 22-23 мб, так же сделал индекс из 400 записей где каждая запись даёт прирост на 5. Следовательно, из этого индекса могу легко узнать, что комбинации для выплаты 280 у меня начинаются с 9556 записи в базе и заканчиваются 10203. Далее предполагается сделать так:<br>1)	Пробежаться назад от записи 10203 к первой например и выбрать все записи где кол-во банкнот на канал не более чем есть у нас.<br>2)	Узнать максимально приближённую сумму к желаемой и выбрать все записи с этой суммой.<br>3)	Выбрать из этих записей ту, которая подходит нам более по минимальному количеству выдаваемых банкнот или по более менее равному распределению по каналам.<br><br>Чем более думаю об этом, тем более глупым кажется моё решение. Очень нужны свежие идеи!<br>p.s. Всё делаю на Delphi, под базой подразумеваю двоичный файл а не реальную базу данных… <br><br>Спасибо если дочитали до конца!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=313504&amp;user=702&amp;forum_n=7&amp;topic=20457.html&amp;page=0&amp;anchor=1" class="addthx" data-post="313504"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.86'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 октября 2012 23:22 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=20457.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Это, похоже, задача о банкомате. Решаем методом динамического программирования, при появлении коллизий - выбором наименьшего колличества купюр. А базы и индексы - это, конечно, оригинально.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=313512&amp;user=6336&amp;forum_n=7&amp;topic=20457.html&amp;page=0&amp;anchor=2" class="addthx" data-post="313512"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]OKOB[/b]','')">OKOB</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6801.png" alt=""><br><span class=txtSm>Ранг: 527.7 (<b>!</b>), 381thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.78'>Активность: 0.16<span style='color:red'>&searr;</span>0.09</span><br>Статус: <a href="action=userinfo&amp;user=6801">Участник</a><br><font color=blue><font color=red>Победитель турнира 2010</font></font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 октября 2012 15:37 <br><script type="text/javascript">QU('OKOB','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=OKOB" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=20457.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
Дочитал до конца <img src="img/smilies/s1.gif" alt="">. Имхо можно пробывать решать как задачу оптимизации (целочисленного линейного программирования). Доводы в прицепе.<br><br><img src="img/attach.gif" alt=""> <a href="./files/830c_27.10.2012_EXELAB.rU.tgz">830c_27.10.2012_EXELAB.rU.tgz</a> - Bankomat.rtf
<br><br><font size="1"><i>-----<br>127.0.0.1, sweet 127.0.0.1</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=313529&amp;user=6801&amp;forum_n=7&amp;topic=20457.html&amp;page=0&amp;anchor=3" class="addthx" data-post="313529"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 октября 2012 20:31 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=20457.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<I>OKOB пишет:<br>Дочитал до конца . Имхо можно пробывать решать как задачу оптимизации (целочисленного линейного программирования). Доводы в прицепе. </I><br><br>Я доводы тоже дочитал до конца, <img src="img/smilies/s1.gif" alt=""> только это мне совсем не помогло...<br>Видимо такие &quot;оригинальные&quot; идеи как базы и индексы рождаются у меня не спроста... Чего греха таить, я плохо учился в школе и было это очень давно. Из написанного я вообще ничего не понял. Сразу пошёл на вики, что бы прочитать о симплекс-методе, но запутался ещё больше. Говорили мне, что математика понадобится, а мне химия нравилась... <img src="img/smilies/s1.gif" alt=""><br>Очень хорошо, что есть сервис где можно поиграться, но плохо то, что там на 10 переменных, а у нас их 11...<br>Если мы возьмём не 5 каналов с банкнотами, а 4 или 3, то как можно подогнать всё написанное, что бы на том же онлайн сервисе по нажимать и понять, что вообще получается и как работает?<br><br><I>ARCHANGEL пишет:<br>Это, похоже, задача о банкомате. Решаем методом динамического программирования </I><br><br>Точнее о железяке ITL NV200 SMART Payout, а применить можно где угодно.<br>Буквально вчера появилась идея разбития задачи на подзадачи, теперь знаю, что правильно это называется методом динамического программирования. Хотя всё равно не уверен, что правильно понимаю... Нужно оба варианта попробовать, если осилю первый...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=313532&amp;user=702&amp;forum_n=7&amp;topic=20457.html&amp;page=0&amp;anchor=4" class="addthx" data-post="313532"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 октября 2012 23:12 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=20457.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
Появилась вот такая идея (наверное это ближе к методу динамического программирования). Сперва проверяем сколько у нас всего, и если менее того, что нужно выдать, то выдаем всё. Далее так как сумма может быть от 5 до 2000, кратная пяти, то сразу смотрим есть ли в конце пятёрка и готовим её на выдачу если она у нас имеется. Потом проверяем сколько у нас сотен. Их может быть от 0 до 20 и проверяем кол-во десятков в остатке, их соответственно от 0 до 9. Другими словами сумма 1275 это 5, 12 по 100 и 70. Так как ранее я делал базу вариантов, то мне оттуда пригодится всего 196 записей с выдачей 10, 20, 30, 40, 50, 60, 70, 80, 90, 100. Нужно только отсортировать варианты интеллектуально, например при наличии всего в достатке идеальный вариант для выдачи 90 это 50+2*20, если так нельзя, то 50+20+2*10, потом 50+4*10, 4*20+10, 3*20+3*10 и т.д. вплоть до пятёрок. Тут не суть важно как именно, главное добавить немного выборки, например для выдачи сотни лучше применить 1*100 чем 2*50, но если полтинников гораздо больше чем сотен или сотня последняя, можно выбирать второй вариант. Соответственно и далее, сравнивать кол-во купюр и отдавать предпочтение соседним меньшим, если крупных дефицит. <img src="img/smilies/s1.gif" alt=""><br>Для суммы 1275 нужно  вызвать эту &quot;умную&quot; функцию раз для 5, 12 раз для 100 и раз для 70 соответственно каждый раз передавая кол-во свободных купюр, получая сколько осталось после выдачи и добавляя к счётчикам на выдачу варианты после каждого захода в функцию...<br>Последнее сложно получилось описать, но думаю понятно, что я имел ввиду...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=313536&amp;user=702&amp;forum_n=7&amp;topic=20457.html&amp;page=0&amp;anchor=5" class="addthx" data-post="313536"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]OKOB[/b]','')">OKOB</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6801.png" alt=""><br><span class=txtSm>Ранг: 527.7 (<b>!</b>), 381thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.78'>Активность: 0.16<span style='color:red'>&searr;</span>0.09</span><br>Статус: <a href="action=userinfo&amp;user=6801">Участник</a><br><font color=blue><font color=red>Победитель турнира 2010</font></font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 28 октября 2012 00:32 &middot; Поправил: OKOB <br><script type="text/javascript">QU('OKOB','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=OKOB" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=20457.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Для 4х каналов, без купюр достоинством 5.<br><br><img src="http://i48.tinypic.com/14l3epz.jpg" border="0" align="" alt=""><br><br>Для поиграть изменять значения в самом правом столбце (правая часть ограничений) и в функции цели (первые 4 коэффициента). Для ориентирования, на скрине заданы: формируемая сумма - 1000, возможно использовать 30 купюр достоинством 10, 25 купюр достоинством 20, 15 купюр достоинством 50 и 10 купюр достоинством 100. Симплекс-методом вообще не получилось (косяки ресурса??), Гомори в этой постановке посчитал, но в результате выгреб все купюры младшего достоинства с большими весовыми коэффициентами набрав сумму 74 купюрами, что свидетельствует о недостатке целевой функции. Сейчас в качестве весовых коэффициентов используются значения ресурса купюр. Можно отвязаться в них от ресурсов и использовать какие либо импирические значения.
<br><br><font size="1"><i>-----<br>127.0.0.1, sweet 127.0.0.1</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=313540&amp;user=6801&amp;forum_n=7&amp;topic=20457.html&amp;page=0&amp;anchor=6" class="addthx" data-post="313540"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/mod.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=7&sortBy=0&page=0.html"><b>Оффтоп</b></a> <b class=bulletHead>&#8212;&#8250;</b> Пытаюсь придумать алгоритм</span></td>
</tr></table>
</div>
<a name=newreply></a>
<center><h3>У вас должно быть 20 пунктов ранга, чтобы оставлять сообщения в  этом подфоруме, но у вас только 0</h3></center><script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=20457" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
