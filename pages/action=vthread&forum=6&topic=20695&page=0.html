<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Небольшой TrueRNG - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Хочу поделиться крайне простым и маленьким кодом генератора истинно случайных чисел. Это не ГПСЧ, это настоящий недетерминированный ГСЧ. Принцип работы ясен из комментариев к коду. Code:      ">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=31361'>zds</a>, <a target='_blank' href='?action=userinfo&amp;user=1288'>UniSoft</a> (+5 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Небольшой TrueRNG</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]ntldr[/b]','')">ntldr</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 369.8 (мудрец), 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.89'>Активность: 0.39<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 09:21 <br><script type="text/javascript">QU('ntldr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ntldr" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Хочу поделиться крайне простым и маленьким кодом генератора истинно случайных чисел. Это не ГПСЧ, это настоящий недетерминированный ГСЧ. Принцип работы ясен из комментариев к коду.<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">unsigned&nbsp;<span class="hl_function"><b>char</b></span>&nbsp;randomBit<span class="hl_char">(</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;__int64&nbsp;t0&nbsp;<span class="hl_char">=</span>&nbsp;__rdtsc<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">; // читаем счетчик тактов процессора</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;ждем&nbsp;следующего&nbsp;тика&nbsp;таймера</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;перед&nbsp;генерацией&nbsp;длинных&nbsp;последовательностей&nbsp;бит&nbsp;не&nbsp;забудьте</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;вызвать&nbsp;timeBeginPeriod<span class="hl_char">(</span><span class="hl_number">1</span><span class="hl_char">)</span>&nbsp;для&nbsp;ускорения&nbsp;системного&nbsp;таймера</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;t1&nbsp;<span class="hl_char">=</span>&nbsp;timeGetTime<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_char">(</span>t1&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;timeGetTime<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_char">)</span>&nbsp;Sleep<span class="hl_char">(</span><span class="hl_number">1</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;определяем&nbsp;сколько&nbsp;тактов&nbsp;процессора&nbsp;прошло&nbsp;за&nbsp;время&nbsp;<span class="hl_number">1</span>&nbsp;тика&nbsp;таймера</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;тик&nbsp;таймера&nbsp;минимум&nbsp;1мс<span class="hl_char">,</span>&nbsp;при&nbsp;частоте&nbsp;процессора&nbsp;1ггц&nbsp;периоды&nbsp;генераторов</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;отличаются&nbsp;на&nbsp;<span class="hl_number">6</span>&nbsp;порядков<span class="hl_char">,</span>&nbsp;при&nbsp;таком&nbsp;различии&nbsp;значение&nbsp;частоты&nbsp;и&nbsp;фазы&nbsp;неизбежно</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;будет&nbsp;плавать&nbsp;даже&nbsp;на&nbsp;генераторах&nbsp;синхронизированных&nbsp;ФАПЧ<span class="hl_char">,</span>&nbsp;что&nbsp;дает&nbsp;нам</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;истинно&nbsp;случайные&nbsp;числа<span class="hl_char">,</span>&nbsp;случайность&nbsp;которых&nbsp;возникает&nbsp;из&nbsp;теплового&nbsp;шума</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t0&nbsp;<span class="hl_char">=</span>&nbsp;__rdtsc<span class="hl_char">(</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">-</span>&nbsp;t0<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;получаем&nbsp;бит&nbsp;энтропии&nbsp;складывая&nbsp;по&nbsp;модулю&nbsp;<span class="hl_number">2</span>&nbsp;все&nbsp;биты&nbsp;результата&nbsp;на&nbsp;тот&nbsp;случай</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;если&nbsp;у&nbsp;каких<span class="hl_char">-</span>нибудь&nbsp;процессоров&nbsp;счетчик&nbsp;тактов&nbsp;увеличивается&nbsp;не&nbsp;на&nbsp;единицу</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_char">(</span>t0&nbsp;<span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">)</span>&nbsp;t0&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>t0&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">)</span>&nbsp;^&nbsp;<span class="hl_char">(</span>t0&nbsp;<span class="hl_char">&amp;</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;t0&nbsp;<span class="hl_char">&amp;</span>&nbsp;<span class="hl_number">1</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li>        </ol>
    </div>
</div></div>
<br><br>Достоинства: простота, компактность, самая настоящая тру-случайность без движений мышкой, шумов звуковой карты и прочей сложной фигни.<br>Недостатки: максимальная производительность - 1000 бит в секунду, аппаратная и архитектурная зависимость (только x86/amd64, случайность на виртуалках под вопросом).<br><br>З.Ы. В голом виде запрещается использовать в крипто, используйте как один из многих источников энтропии для ГПСЧ.
<br><br><font size="1"><i>-----<br>PGP key <noindex><a href="https://diskcryptor.net/storage/new_key.asc" rel="nofollow" target="_blank">&lt0x1B6A24550F33E44A&gt</a></noindex></i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316943&amp;user=12867&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=1" class="addthx" data-post="316943"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=21411" title="08-01-2013 05:49, ранг:62.8" target="_blank">Alchemistry</a>, <a href="action=userinfo&user=1989" title="08-01-2013 06:22, ранг:391.3" target="_blank">OnLyOnE</a>, <a href="action=userinfo&user=4773" title="08-01-2013 06:56, ранг:71.0" target="_blank">plutos</a>, <a href="action=userinfo&user=2585" title="08-01-2013 07:42, ранг:846.5" target="_blank">Gideon Vi</a>, <a href="action=userinfo&user=1541" title="08-01-2013 22:29, ранг:195.9" target="_blank">Getorix</a></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]ClockMan[/b]','')">ClockMan</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/17432.jpg" alt=""><br><span class=txtSm>Ранг: 568.2 (<b>!</b>), 465thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.99'>Активность: 0.55<span style='color:green'>&nearr;</span>0.57</span><br>Статус: <a href="action=userinfo&amp;user=17432">Участник</a><br><font color=blue>оптимист</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 12:11 <br><script type="text/javascript">QU('ClockMan','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ClockMan" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
<I>ntldr пишет:<br>Это не ГПСЧ, это настоящий недетерминированный ГСЧ </I><br>Вот вы бедные мучаетесь, свизданули бы уже код с Delphi  <b>Randomize</b> и не парились.<br><I>ntldr пишет:<br>случайность на виртуалках под вопросом </I><br>как и её роботаспособность зависло на глухо программа с таким кодом.
<br><br><font size="1"><i>-----<br>Чтобы правильно задать вопрос, нужно знать большую часть  ответа. Р.Шекли.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316950&amp;user=17432&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=2" class="addthx" data-post="316950"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]r_e[/b]','')">r_e</a></b><br></div>
<img src="img/s8.gif" alt=""><br><span class=txtSm>Ранг: 590.6 (<b>!</b>), 408thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.08'>Активность: 0.36<span style='color:red'>&searr;</span>0.18</span><br>Статус: <a href="action=userinfo&amp;user=11966">Модератор</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 12:58 <br><script type="text/javascript">QU('r_e','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=r_e" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<b>ntldr</b><br>Сомневаюсь в True RNG, но это уже и не ПРНГ.<br>В своем первозданном виде все тесты на случайность проходит?
<br><br><font size="1"><i>-----<br>старый пень</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316954&amp;user=11966&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=3" class="addthx" data-post="316954"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]TryAga1n[/b]','')">TryAga1n</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 262.5 (наставник), 337thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.45'>Активность: 0.34<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=31275">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 13:57 <br><script type="text/javascript">QU('TryAga1n','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=TryAga1n" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<I>ClockMan пишет:<br>Вот вы бедные мучаетесь, свизданули бы уже код с Delphi Randomize и не парились. </I><br>http://www.cracklab.narod.ru/doc/rand.htm
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=316956&amp;user=31275&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=4" class="addthx" data-post="316956"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]Gideon Vi[/b]','')">Gideon Vi</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/2585.jpg" alt=""><br><span class=txtSm>Ранг: 1131.7 <b><u>(!!!!)</u></b>, 447thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.83'>Активность: 0.67<span style='color:red'>&searr;</span>0.2</span><br>Статус: <a href="action=userinfo&amp;user=2585">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 14:00 <br><script type="text/javascript">QU('Gideon Vi','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Gideon Vi" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>ClockMan пишет:<br>Вот вы бедные мучаетесь, свизданули бы уже код с Delphi  Randomize и не парились. </I><br><br>закусывать надо.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=316957&amp;user=2585&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=5" class="addthx" data-post="316957"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=23568" title="08-01-2013 16:45, ранг:56.0" target="_blank">yagello</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]ClockMan[/b]','')">ClockMan</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/17432.jpg" alt=""><br><span class=txtSm>Ранг: 568.2 (<b>!</b>), 465thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.99'>Активность: 0.55<span style='color:green'>&nearr;</span>0.57</span><br>Статус: <a href="action=userinfo&amp;user=17432">Участник</a><br><font color=blue>оптимист</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 14:59 <br><script type="text/javascript">QU('ClockMan','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ClockMan" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<I>TryAga1n пишет:<br>http://www.cracklab.narod.ru/doc/rand.htm </I><br>Судя по году статьи и то что в <b>Randomize</b> используется <b>GetSystemTime</b> видать старая версия Delphi,в новой идёт получения числа через <b>QueryPerformanceCounter</b>,такчто вы дедушка<b>TryAga1n</b> устарели.<br><I>Gideon Vi пишет:<br>закусывать надо. </I><br>А вам занюхивать.
<br><br><font size="1"><i>-----<br>Чтобы правильно задать вопрос, нужно знать большую часть  ответа. Р.Шекли.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316963&amp;user=17432&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=6" class="addthx" data-post="316963"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]ClockMan[/b]','')">ClockMan</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/17432.jpg" alt=""><br><span class=txtSm>Ранг: 568.2 (<b>!</b>), 465thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.99'>Активность: 0.55<span style='color:green'>&nearr;</span>0.57</span><br>Статус: <a href="action=userinfo&amp;user=17432">Участник</a><br><font color=blue>оптимист</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 15:30 <br><script type="text/javascript">QU('ClockMan','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ClockMan" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br><div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;__int64&nbsp;t0&nbsp;<span class="hl_char">=</span>&nbsp;__rdtsc<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">; // читаем счетчик тактов процессора</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;ждем&nbsp;следующего&nbsp;тика&nbsp;таймера</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;перед&nbsp;генерацией&nbsp;длинных&nbsp;последовательностей&nbsp;бит&nbsp;не&nbsp;забудьте</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;&nbsp;вызвать&nbsp;timeBeginPeriod<span class="hl_char">(</span><span class="hl_number">1</span><span class="hl_char">)</span>&nbsp;для&nbsp;ускорения&nbsp;системного&nbsp;таймера</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;t1&nbsp;<span class="hl_char">=</span>&nbsp;timeGetTime<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_char">(</span>t1&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;timeGetTime<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_char">)</span>&nbsp;Sleep<span class="hl_char">(</span><span class="hl_number">1</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;определяем&nbsp;сколько&nbsp;тактов&nbsp;процессора&nbsp;прошло&nbsp;за&nbsp;время&nbsp;<span class="hl_number">1</span>&nbsp;тика&nbsp;таймера</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;тик&nbsp;таймера&nbsp;минимум&nbsp;1мс<span class="hl_char">,</span>&nbsp;при&nbsp;частоте&nbsp;процессора&nbsp;1ггц&nbsp;периоды&nbsp;генераторов</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;отличаются&nbsp;на&nbsp;<span class="hl_number">6</span>&nbsp;порядков<span class="hl_char">,</span>&nbsp;при&nbsp;таком&nbsp;различии&nbsp;значение&nbsp;частоты&nbsp;и&nbsp;фазы&nbsp;неизбежно</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;будет&nbsp;плавать&nbsp;даже&nbsp;на&nbsp;генераторах&nbsp;синхронизированных&nbsp;ФАПЧ<span class="hl_char">,</span>&nbsp;что&nbsp;дает&nbsp;нам</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;истинно&nbsp;случайные&nbsp;числа<span class="hl_char">,</span>&nbsp;случайность&nbsp;которых&nbsp;возникает&nbsp;из&nbsp;теплового&nbsp;шума</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t0&nbsp;<span class="hl_char">=</span>&nbsp;__rdtsc<span class="hl_char">(</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">-</span>&nbsp;t0<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;получаем&nbsp;бит&nbsp;энтропии&nbsp;складывая&nbsp;по&nbsp;модулю&nbsp;<span class="hl_number">2</span>&nbsp;все&nbsp;биты&nbsp;результата&nbsp;на&nbsp;тот&nbsp;случай</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;если&nbsp;у&nbsp;каких<span class="hl_char">-</span>нибудь&nbsp;процессоров&nbsp;счетчик&nbsp;тактов&nbsp;увеличивается&nbsp;не&nbsp;на&nbsp;единицу</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_char">(</span>t0&nbsp;<span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">)</span>&nbsp;t0&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>t0&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">)</span>&nbsp;^&nbsp;<span class="hl_char">(</span>t0&nbsp;<span class="hl_char">&amp;</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;t0&nbsp;<span class="hl_char">&amp;</span>&nbsp;<span class="hl_number">1</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>Вашь код большая ошибка...<br>Вы вызываете в начале <br><b>unsigned __int64 t0 = __rdtsc();</b> потом <b>t0 = __rdtsc() - t0;</b> а вы знаете что значение в вашем коде будут вальвироватся в пределе одного значения(старый трюк на детект отладчика измерения тиков)<br>ну а дальше <b>timeGetTime</b>(сколько миллисекунд прошло с момента запуска ОС) это вообще упрастит нам задачу а дальше как http://www.cracklab.narod.ru/doc/rand.htm.
<br><br><font size="1"><i>-----<br>Чтобы правильно задать вопрос, нужно знать большую часть  ответа. Р.Шекли.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316967&amp;user=17432&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=7" class="addthx" data-post="316967"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]Archer[/b]','')">Archer</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/1556.jpg" alt=""><br><span class=txtSm>Ранг: 2014.5 <b><u>(!!!!)</u></b>, 1278thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.27'>Активность: 1.34<span style='color:red'>&searr;</span>0.25</span><br>Статус: <a href="action=userinfo&amp;user=1556">Модератор</a><br><font color=blue>retired</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 15:40 <br><script type="text/javascript">QU('Archer','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Archer" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
Вообще говоря, не уловил скептицизма.<br>Во-первых, антиотладка-это замер выполнения чистого кода, который в идеале не переключается. Здесь же явно переключения будут из-за спячки.<br>Во-вторых, даже если и есть гарантия, что разница будет, скажем, от 1 и 1000, никаких предположений по поводу ксора всех битов ты не сделаешь. Хотя бы ввиду того, что весь большой интервал сводится к 1 биту.<br>timeGetTime же в самом генераторе практически не участвует, а нужно скорее просто для того, чтобы прождать достаточный промежуток времени, чтобы интервал разницы был побольше.<br>З.Ы. Что же касается ранда-зная начальное значение и алгоритм ты можешь найти все последующие значения. В данном случае это не применимо (поэтому это и не ГПСЧ), посему аналогию с рандом не совсем понимаю.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=316969&amp;user=1556&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=8" class="addthx" data-post="316969"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]r_e[/b]','')">r_e</a></b><br></div>
<img src="img/s8.gif" alt=""><br><span class=txtSm>Ранг: 590.6 (<b>!</b>), 408thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.08'>Активность: 0.36<span style='color:red'>&searr;</span>0.18</span><br>Статус: <a href="action=userinfo&amp;user=11966">Модератор</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 16:31 <br><script type="text/javascript">QU('r_e','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=r_e" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
Ну кое-какие предположения сделать все-таки можно.<br>Например, выделить факторы, влияющие на генратор. Это будут ГЧ и шедулер ОС. Минимизировать влияние второго можно регулируя приоритеты. Для первого труднее - нужно добиться стабильного температурного режима. А возможно и электромагнитного фона.<br>Опять же, что делать с эмулируемыми средами?<br>В случае железного тру ГСЧ никакие пляски не помогут.<br><br>Низкую скорость можно компенсировать использованием сильной крипты и положительной связью от самого ГСЧ, домешивая время от времени новые данные.
<br><br><font size="1"><i>-----<br>старый пень</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316974&amp;user=11966&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=9" class="addthx" data-post="316974"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]VodoleY[/b]','')">VodoleY</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 488.1 (мудрец), 272thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.01'>Активность: 0.35<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=17319">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 19:46 <br><script type="text/javascript">QU('VodoleY','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VodoleY" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Касательно ГСЧ очень неплохо от майкрософт пресса &quot;Защищенный  код&quot; было написано. там и факторы были описаны, которыми можно пользоваться и косяки, на которые обычно наступают
<br><br><font size="1"><i>-----<br>Наша работа во тьме, Мы делаем, что умеем. Мы отдаем, что имеем, Наша работа во тьме....</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316984&amp;user=17319&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=10" class="addthx" data-post="316984"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]ntldr[/b]','')">ntldr</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 369.8 (мудрец), 400thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.89'>Активность: 0.39<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=12867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 января 2013 21:15 <br><script type="text/javascript">QU('ntldr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ntldr" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=20695.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
Мда. Никто кроме арчера попросту не понял как оно работает. Учите матчасть господа, что такое системный таймер и что такое time stamp counter.<br>Я объяснять не буду. Топик можно закрывать.
<br><br><font size="1"><i>-----<br>PGP key <noindex><a href="https://diskcryptor.net/storage/new_key.asc" rel="nofollow" target="_blank">&lt0x1B6A24550F33E44A&gt</a></noindex></i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=316985&amp;user=12867&amp;forum_n=6&amp;topic=20695.html&amp;page=0&amp;anchor=11" class="addthx" data-post="316985"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Небольшой TrueRNG</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=20695" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
