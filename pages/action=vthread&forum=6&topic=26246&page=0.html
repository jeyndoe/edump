<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Формат для передачи данных между потоками - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Хочу реализовать передачу данных между потоками через CreateThread Вопрос состоит в том, как именно обернуть параметры функции. Пример функции Code:       &nbsp;bool&nbsp;Encrypt(const&nbsp;char*&nbsp;x1,&nbsp;const&nbsp;size_t&nb">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b> (+4 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Формат для передачи данных между потоками</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=6&amp;topic=26246&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=6&amp;topic=26246&amp;page=2.html">3</a> . <a href="action=vthread&amp;forum=6&amp;topic=26246&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]galenkane[/b]','')">galenkane</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 28.5 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.03'>Активность: 0.07<span style='color:green'>&nearr;</span>0.15</span><br>Статус: <a href="action=userinfo&amp;user=42738">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 января 2020 21:54 <br><script type="text/javascript">QU('galenkane','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=galenkane" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Хочу реализовать передачу данных между потоками через CreateThread<br><br>Вопрос состоит в том, как именно обернуть параметры функции.<br><br>Пример функции<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;bool&nbsp;Encrypt<span class="hl_char">(</span><span class="hl_function"><b>const</b></span>&nbsp;<span class="hl_function">char</span><span class="hl_char">*</span>&nbsp;x1<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>const</b></span>&nbsp;size_t&nbsp;x2<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>const</b></span>&nbsp;unsigned&nbsp;<span class="hl_function">char</span><span class="hl_char">*</span>&nbsp;x3<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>const</b></span>&nbsp;unsigned&nbsp;<span class="hl_function">char</span><span class="hl_char">*</span>&nbsp;x4<span class="hl_char">,</span>&nbsp;unsigned&nbsp;<span class="hl_function">char</span><span class="hl_char">*</span>&nbsp;x5<span class="hl_char">,</span>&nbsp;size_t<span class="hl_char">&amp;</span>&nbsp;x5<span class="hl_char">)</span></li>        </ol>
    </div>
</div></div>
<br><br>Посоветуете что-то?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401232&amp;user=42738&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=1" class="addthx" data-post="401232"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]VOLKOFF[/b]','')">VOLKOFF</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 173.8 (ветеран), 208thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.95'>Активность: 0.12<span style='color:green'>&nearr;</span>0.36</span><br>Статус: <a href="action=userinfo&amp;user=5846">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 января 2020 22:52 <br><script type="text/javascript">QU('VOLKOFF','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VOLKOFF" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
<I>galenkane пишет:<br>передачу данных между потоками через CreateThread </I><br>... ну допустим. В lpParameter указатель на данные и как бы все. Зачем нужна непонятная &quot;чудо-функция&quot;?<br>Или вопрос должен звучать &quot;как закриптовать данные&quot;, тогда контекст с потоками можно было не озвучивать.<br>Непонятно, б****!© <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401237&amp;user=5846&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=2" class="addthx" data-post="401237"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]galenkane[/b]','')">galenkane</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 28.5 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.03'>Активность: 0.07<span style='color:green'>&nearr;</span>0.15</span><br>Статус: <a href="action=userinfo&amp;user=42738">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 января 2020 23:41 <br><script type="text/javascript">QU('galenkane','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=galenkane" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
криптовать ничего не надо<br><br><b>Добавлено спустя 1 минуту</b><br>надо данные передавать на стек
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401240&amp;user=42738&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=3" class="addthx" data-post="401240"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]rmn[/b]','')">rmn</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 158.4 (ветеран), 123thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.28'>Активность: 0.14<span style='color:green'>&nearr;</span>0.49</span><br>Статус: <a href="action=userinfo&amp;user=1533">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 02 января 2020 23:45 <br><script type="text/javascript">QU('rmn','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=rmn" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<I>galenkane пишет:<br>надо данные передавать на стек </I><br>Данные заносишь в структуру, адрес которой передаешь на стек. Больше никак.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401242&amp;user=1533&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=4" class="addthx" data-post="401242"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]galenkane[/b]','')">galenkane</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 28.5 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.03'>Активность: 0.07<span style='color:green'>&nearr;</span>0.15</span><br>Статус: <a href="action=userinfo&amp;user=42738">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 января 2020 05:03 <br><script type="text/javascript">QU('galenkane','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=galenkane" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
Как из структуры потом достать данные?<br><br><b>Добавлено спустя 23 минуты</b><br>Сделал вот так <br>https://gist.github.com/lurumdare/d3a8558f544fe1cabf9f1fc2d6bdf179
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401246&amp;user=42738&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=5" class="addthx" data-post="401246"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]user99[/b]','')">user99</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 43.1 (посетитель), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 2.06'>Активность: 0.16<span style='color:green'>&nearr;</span>0.29</span><br>Статус: <a href="action=userinfo&amp;user=44014">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 января 2020 10:10 <br><script type="text/javascript">QU('user99','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=user99" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<b>galenkane</b>, еще было бы неплохо освободить память из-под MessageBoxParameters
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401251&amp;user=44014&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=6" class="addthx" data-post="401251"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.85'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 января 2020 15:08 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Более ООП подход - файловые проекции. CreateFileMapping/OpenFileMapping. Для синхронизации можно использовать критические секции (один процесс) или события (разные процессы, можно и в одном, но будет медленнее). А вообще более детальное описание задачи, вероятно, помогло бы в поиске более качественного решения.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401259&amp;user=6336&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=7" class="addthx" data-post="401259"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]galenkane[/b]','')">galenkane</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 28.5 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.03'>Активность: 0.07<span style='color:green'>&nearr;</span>0.15</span><br>Статус: <a href="action=userinfo&amp;user=42738">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 января 2020 18:37 <br><script type="text/javascript">QU('galenkane','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=galenkane" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<b>ARCHANGEL</b> требуется работать с ООП и виртуальными функциями в потоках. Чтобы данные передавались между ними.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401276&amp;user=42738&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=8" class="addthx" data-post="401276"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.85'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 января 2020 19:29 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<b>galenkane</b><br>Это всё ещё очень туманно <img src="img/smilies/s1.gif" alt="">
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401280&amp;user=6336&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=9" class="addthx" data-post="401280"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 338.5 (мудрец), 349thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 января 2020 19:46 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<b>ARCHANGEL</b><br><br>Крит секции могут быть глобальными, те для межпроцессной синхронизации. Вот только эти синхронизации использовались на младших версиях, затем их заменили на RWL, в частности SRWL. Так как в критсект нет разделения по типу доступа к ресурсам, а это не профайл.<br><br><b>rmn</b><br><br>Прямой записью в чужой стек, ну да, начинать нужно с эксплойтов, а лучший способ это обкатать на своих косяках <img src="img/smilies/s5.gif" alt=""><br><br><b>galenkane</b><br><br>Самый быстрый способ- создание глобальной переменной, как выше сказали это отображение одной физической области на разные адреса, в частности в разных ап(процессах). Потоки будут туда обращаться, а железо произведёт синхрон, те атомарные выборки нп по выравниванию, не смотря что отображение в другом ап. Ну и для быстрого синхрона использовать эффективные синхронизации, это уже зависит от процесса - потоки выполняются в одном или в разных процессах. Если в разных, то будет долго из за приведения описателя к обьекту ядром.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401281&amp;user=40990&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=10" class="addthx" data-post="401281"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]galenkane[/b]','')">galenkane</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 28.5 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.03'>Активность: 0.07<span style='color:green'>&nearr;</span>0.15</span><br>Статус: <a href="action=userinfo&amp;user=42738">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 января 2020 20:16 <br><script type="text/javascript">QU('galenkane','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=galenkane" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
https://gist.github.com/lurumdare/8b6275107daf7283c0bb8a409045266a PoC на данный момент<br><br>хочется простоты на самом деле
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401287&amp;user=42738&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=11" class="addthx" data-post="401287"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.85'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 января 2020 21:11 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<b>galenkane</b><br><br>Жуткая жуть, конечно, а не PoC. Потому я вам и предлагаю не костыли тут городить, а описать задачу. Практическую, которую вам нужно решить. Вряд ли на практике нужно так через жопу вызвать MessageBox.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401294&amp;user=6336&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=12" class="addthx" data-post="401294"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=40990" title="03-01-2020 18:17, ранг:326.6" target="_blank">difexacaw</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]galenkane[/b]','')">galenkane</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 28.5 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.03'>Активность: 0.07<span style='color:green'>&nearr;</span>0.15</span><br>Статус: <a href="action=userinfo&amp;user=42738">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 января 2020 22:51 <br><script type="text/javascript">QU('galenkane','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=galenkane" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
<b>ARCHANGEL</b> задача хранить данные на стеке
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401299&amp;user=42738&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=13" class="addthx" data-post="401299"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.85'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 января 2020 01:35 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
<b>galenkane</b><br><br>Это чушь какая-то, а не задача. Вы уж меня простите за прямоту.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401301&amp;user=6336&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=14" class="addthx" data-post="401301"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]galenkane[/b]','')">galenkane</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 28.5 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.03'>Активность: 0.07<span style='color:green'>&nearr;</span>0.15</span><br>Статус: <a href="action=userinfo&amp;user=42738">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 января 2020 02:48 <br><script type="text/javascript">QU('galenkane','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=galenkane" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<b>ARCHANGEL</b> задача как бы есть <br><br>мб вы не поняли ее<br><br>главное чтобы они были на стеке
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401303&amp;user=42738&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=15" class="addthx" data-post="401303"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]-=AkaBOSS=-[/b]','')">-=AkaBOSS=-</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/26242.png" alt=""><br><span class=txtSm>Ранг: 150.3 (ветеран), 175thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.88'>Активность: 0.16<span style='color:red'>&searr;</span>0.07</span><br>Статус: <a href="action=userinfo&amp;user=26242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 января 2020 09:38 <br><script type="text/javascript">QU('-=AkaBOSS=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=AkaBOSS=-" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
<I>galenkane пишет:<br>PoC на данный момент </I><br><noindex><a href="https://ithappens.me/story/9" rel="nofollow" target="_blank"><u>вспомнилось</u></a></noindex>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401306&amp;user=26242&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=16" class="addthx" data-post="401306"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]f13nd[/b]','')">f13nd</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/8075.png" alt=""><br><span class=txtSm>Ранг: 271.4 (наставник), 331thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.63'>Активность: 0.32<span style='color:green'>&nearr;</span>1.49</span><br>Статус: <a href="action=userinfo&amp;user=8075">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 января 2020 10:08 <br><script type="text/javascript">QU('f13nd','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=f13nd" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
Хз проблема в чем. Создай структуру, объяви локальную переменную этого типа, заполни, передай указатель на нее в lpParameter. Не забывай, что как только в текущем потоке завершится функция, в локальных переменных которой лежит это структура, папе сделают укол. Тебе советы по синтаксису твоего ЯП чтоли нужны?
<br><br><font size="1"><i>-----<br>2 оттенка серого</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401307&amp;user=8075&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=17" class="addthx" data-post="401307"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]Alchemistry[/b]','')">Alchemistry</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 145.8 (ветеран), 191thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.05'>Активность: 0.14<span style='color:green'>&nearr;</span>0.36</span><br>Статус: <a href="action=userinfo&amp;user=21411">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 января 2020 10:13 <br><script type="text/javascript">QU('Alchemistry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Alchemistry" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
<b>galenkane</b><br>Твой &quot;stackprotect&quot; это один большой лулз с use-after-free как бонус. Нужно больше С++ кастов и прочей абсолютно ненужной здесь ООП мишуры. Без этого ты эти ссаные вин апи не дернешь однозначно.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401308&amp;user=21411&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=18" class="addthx" data-post="401308"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=33192" title="04-01-2020 13:03, ранг:36.9" target="_blank">morgot</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]f13nd[/b]','')">f13nd</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/8075.png" alt=""><br><span class=txtSm>Ранг: 271.4 (наставник), 331thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.63'>Активность: 0.32<span style='color:green'>&nearr;</span>1.49</span><br>Статус: <a href="action=userinfo&amp;user=8075">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 января 2020 10:18 &middot; Поправил: f13nd <br><script type="text/javascript">QU('f13nd','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=f13nd" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
В качестве альтернативы можешь рассмотреть WM_COPYDATA(PostThreadMessage). Ходят слухи, что даже между процессами можно данные ею передавать. Это будет всяко грамотней.
<br><br><font size="1"><i>-----<br>2 оттенка серого</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401309&amp;user=8075&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=19" class="addthx" data-post="401309"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]galenkane[/b]','')">galenkane</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 28.5 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.03'>Активность: 0.07<span style='color:green'>&nearr;</span>0.15</span><br>Статус: <a href="action=userinfo&amp;user=42738">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 января 2020 18:41 <br><script type="text/javascript">QU('galenkane','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=galenkane" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
<b>Alchemistry</b> так-то на это не обращайте внимание. <br><br><b>f13nd</b> спасибо гляну
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401330&amp;user=42738&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=20" class="addthx" data-post="401330"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 338.5 (мудрец), 349thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 января 2020 01:51 &middot; Поправил: difexacaw <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
<b>f13nd</b><br><br>&gt; WM_COPYDATA<br><br>В этом смысл - посылка нотифи в ожидающий обьект, поток выйдет из сна и получит данные; при этом событии стек сместится вниз, так как всякое сообщение доставляется как обратный вызов ядра с параметрами. Тоесть никаких траблов со стеком не произойдёт, в отличие от прямой записи в локальную переменную. Это отличается от обычного чтения данных, те например поток входит в сервис передавая указатель на чужую локаль, куда ядро запишет данные. Так нельзя делать, это создание уязвимости.<br><br>Если у тс есть окна, то он первым делом начнёт передавать таким образом указатели опять же на локальные переменные, при этом открыв возможность атаки - тогда из другого процесса можно передать произвольный указатель. Так и была когда то давно реализована атака на shelltray.<br><br>Тема походу про написание дырявого кода.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401342&amp;user=40990&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=21" class="addthx" data-post="401342"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]galenkane[/b]','')">galenkane</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 28.5 (посетитель), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.03'>Активность: 0.07<span style='color:green'>&nearr;</span>0.15</span><br>Статус: <a href="action=userinfo&amp;user=42738">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 января 2020 02:32 <br><script type="text/javascript">QU('galenkane','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=galenkane" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
WM_COPYDATA для двух процессов?<br><br>Как быть с потоками?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401343&amp;user=42738&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=22" class="addthx" data-post="401343"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]f13nd[/b]','')">f13nd</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/8075.png" alt=""><br><span class=txtSm>Ранг: 271.4 (наставник), 331thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.63'>Активность: 0.32<span style='color:green'>&nearr;</span>1.49</span><br>Статус: <a href="action=userinfo&amp;user=8075">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 января 2020 09:30 <br><script type="text/javascript">QU('f13nd','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=f13nd" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
<I>difexacaw пишет:<br>В этом смысл - посылка нотифи в ожидающий обьект, поток выйдет из сна и получит данные; при этом событии стек сместится вниз, так как всякое сообщение доставляется как обратный вызов ядра с параметрами. </I><br>Про что это вообще? Насколько я могу судить, с WM_COPYDATA весь геморрой с синхронизацией и доставкой n байт другому потоку винда берет на себя. Почему ты решил, что я предлагал указатель на локальную переменную этим передавать? Если пишешь что-то с прицелом на публикование, никакого подобного колхоза вообще быть не должно, а если какую-то утилитарную шляпу собственного покроя для личного поноса - абсолютно наплевать какие ужасные уязвимости оно содержит.
<br><br><font size="1"><i>-----<br>2 оттенка серого</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401353&amp;user=8075&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=23" class="addthx" data-post="401353"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 338.5 (мудрец), 349thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 января 2020 13:01 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
<b>f13nd</b><br><br>Потому что:<br><br>&gt; задача хранить данные на стеке<br><br>А для этого нужно передать в функцию обмена данными указатель на эту область. Если бы было нужно простое копирование, то тс вопрос такой не задал. Было бы проще, если знать зачем это нужно.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401359&amp;user=40990&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=24" class="addthx" data-post="401359"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]rmn[/b]','')">rmn</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 158.4 (ветеран), 123thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.28'>Активность: 0.14<span style='color:green'>&nearr;</span>0.49</span><br>Статус: <a href="action=userinfo&amp;user=1533">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 января 2020 13:44 <br><script type="text/javascript">QU('rmn','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=rmn" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#25');return false;">#25</a> </span><div align=left><br>
<I>difexacaw пишет:<br>А для этого нужно передать в функцию обмена данными указатель на эту область...</I><br>... и размер данных. И винда скопирует эти данные в другой контекст. Так же, как ты можешь использовать WM_SETTEXT с другим окном, при этом если окно в другом процессе, туда улетает LPARAM не из твоего адресного пространства.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401364&amp;user=1533&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=25" class="addthx" data-post="401364"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 338.5 (мудрец), 349thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 января 2020 13:56 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#26');return false;">#26</a> </span><div align=left><br>
<b>rmn</b><br><br>И при выходе из функции обмена локальные данные будут уничтожены, так как стек сместится вверх. Можно зарезервировать место на стеке и туда копировать данные, но зачем. Где хранить указатель на этот буфер, в тлс.. тогда зачем нужен буфер на стеке.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401365&amp;user=40990&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=26" class="addthx" data-post="401365"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]rmn[/b]','')">rmn</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 158.4 (ветеран), 123thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.28'>Активность: 0.14<span style='color:green'>&nearr;</span>0.49</span><br>Статус: <a href="action=userinfo&amp;user=1533">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 января 2020 14:02 <br><script type="text/javascript">QU('rmn','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=rmn" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#27');return false;">#27</a> </span><div align=left><br>
<b>difexacaw</b><br>Причем здесь вообще какой-то стек?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401367&amp;user=1533&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=27" class="addthx" data-post="401367"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 338.5 (мудрец), 349thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 января 2020 14:04 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#28');return false;">#28</a> </span><div align=left><br>
<b>rmn</b><br><br>Откуда же мне знать, так нужно <img src="img/smilies/s1.gif" alt="">
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401368&amp;user=40990&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=28" class="addthx" data-post="401368"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]rmn[/b]','')">rmn</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 158.4 (ветеран), 123thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.28'>Активность: 0.14<span style='color:green'>&nearr;</span>0.49</span><br>Статус: <a href="action=userinfo&amp;user=1533">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 января 2020 14:10 <br><script type="text/javascript">QU('rmn','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=rmn" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#29');return false;">#29</a> </span><div align=left><br>
<b>difexacaw</b><br>Кому нужно? ТС просто идиот и не может внятно сформулировать задачу. В примере, что он выше привел, никакого &quot;хранения на стеке&quot; нет; выделяется структура с параметрами на куче и ее адрес передается в функции потоков. Единственная проблема там в том, что он неправильно управляет временем жизни структуры и все это упадет с эксепшеном, если луна в ненужной фазе будет.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=401369&amp;user=1533&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=29" class="addthx" data-post="401369"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="30" onfocus="this.blur()" href="JavaScript:di('[b]difexacaw[/b]','')">difexacaw</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/40990.png" alt=""><br><span class=txtSm>Ранг: 338.5 (мудрец), 349thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.02'>Активность: 2.11<span style='color:green'>&nearr;</span>2.42</span><br>Статус: <a href="action=userinfo&amp;user=40990">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 января 2020 20:27 <br><script type="text/javascript">QU('difexacaw','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=difexacaw" target="_blank">Личное сообщение</a> &middot;  <a href="#30" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=26246&amp;page=0#30');return false;">#30</a> </span><div align=left><br>
<b>rmn</b><br><br>Ну зачем же сразу про идиота. Если цель не понятна, а тут это вопрос по защите, не значит что человек глупый. Скорее он не хочет говорить про то, что нам знать не нужно. Механизмы обхода защиты особо не обсуждаются.
<br><br><font size="1"><i>-----<br>vx</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=401391&amp;user=40990&amp;forum_n=6&amp;topic=26246&amp;page=0&amp;anchor=30" class="addthx" data-post="401391"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=6&amp;topic=26246&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=6&amp;topic=26246&amp;page=2.html">3</a> . <a href="action=vthread&amp;forum=6&amp;topic=26246&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Формат для передачи данных между потоками</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=26246" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
