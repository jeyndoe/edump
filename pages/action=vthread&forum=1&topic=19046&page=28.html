<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Взлом Android приложений - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="В теме обсуждаются вопросы взлома под андроид и соответствующие тулзы. ТУТОРИАЛЫ: --&gt; Тутор от chelpa&lt;-- --&gt; От аффтора antilvl&lt;-- --&gt; дебаг .so&lt;-- ТУЛЗЫ: JEB ApkAnalyser --&gt; Android Reverse Engineering">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=28512'>-Sanchez-</a> (+8 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/green.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=1&sortBy=0&page=0.html"><b>Основной форум</b></a> <b class=bulletHead>&#8212;&#8250;</b> Взлом Android приложений</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=27.html">&lt;&lt;</a> <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=0.html">1</a> ... <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=26.html">27</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=27.html">28</a> . <b>29</b> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=29.html">30</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=30.html">31</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=31.html">32</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=32.html">33</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=33.html">34</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=34.html">35</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=35.html">36</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=36.html">37</a> ... <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=37.html">38</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=38.html">39</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=29.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]SaNX[/b]','')">SaNX</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 456.3 (мудрец), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.03'>Активность: 0.28<span style='color:red'>&searr;</span>0.02</span><br>Статус: <a href="action=userinfo&amp;user=2108">Участник</a><br><font color=blue>Android Reverser</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 сентября 2011 12:37 &middot; Поправил: SaNX <br><script type="text/javascript">QU('SaNX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SaNX" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#1');return false;">#1</a> </span><div align=left><br>
В теме обсуждаются вопросы взлома под андроид и соответствующие тулзы.<br><u><b>ТУТОРИАЛЫ:</b></u><br><noindex><a href="/f/files/8e98_14.12.2012_EXELAB.rU.tgz" rel="nofollow" target="_blank">--&gt; Тутор от chelpa&lt;--</a></noindex><br><noindex><a href="http://androidcracking.blogspot.ru/search/label/tutorial" rel="nofollow" target="_blank">--&gt; От аффтора antilvl&lt;--</a></noindex><br><noindex><a href="/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=14#12" rel="nofollow" target="_blank">--&gt; дебаг .so&lt;--</a></noindex><br><br><u><b>ТУЛЗЫ:</b></u><br>JEB<br>ApkAnalyser<br><noindex><a href="http://redmine.honeynet.org/projects/are/wiki" rel="nofollow" target="_blank">--&gt; Android Reverse Engineering (A.R.E.) &lt;--</a></noindex><br><noindex><a href="https://ibotpeaches.github.io/Apktool/" rel="nofollow" target="_blank">--&gt; Apktool &lt;--</a></noindex><br><noindex><a href="https://github.com/JesusFreke/smali" rel="nofollow" target="_blank">--&gt; Smali/baksmali &lt;--</a></noindex><br><noindex><a href="http://code.google.com/p/apk-recovery/" rel="nofollow" target="_blank">--&gt; APKRecovery &lt;--</a></noindex><br><noindex><a href="http://code.google.com/p/dex2jar/" rel="nofollow" target="_blank">--&gt; Dex2Jar &lt;--</a></noindex><br><noindex><a href="http://code.google.com/p/apkinspector/" rel="nofollow" target="_blank">--&gt; APKInspector &lt;--</a></noindex><br><noindex><a href="http://avatar.dimonvideo.ru/forum/att/1728149047/ae_luckypatcher.apk" rel="nofollow" target="_blank">--&gt; Lucky Patcher 1.2.0 &lt;--</a></noindex><br><noindex><a href="http://narod.ru/disk/38276760001/CrackAssist.0.3.by.ChelpuS.apk.html" rel="nofollow" target="_blank">--&gt; Crack Assist 0.3 &lt;--</a></noindex><br><noindex><a href="http://ul.to/or3kme6t" rel="nofollow" target="_blank">--&gt; ART &lt;--</a></noindex><br><noindex><a href="http://jd.benow.ca" rel="nofollow" target="_blank">--&gt; JD-GUI &lt;--</a></noindex><br><noindex><a href="http://zairon.wordpress.com/dexinspector/" rel="nofollow" target="_blank">--&gt; DexInspector &lt;--</a></noindex><br><noindex><a href="https://github.com/strazzere/android-unpacker/tree/master/native-unpacker" rel="nofollow" target="_blank">--&gt; Android unpacker &lt;--</a></noindex><br>GikDbg<br><br><br>В аттаче fernflower, очень годный жава декомпилер.<br><img src="img/attach.gif" alt=""> <a href="./files/0ece_06.12.2012_EXELAB.rU.tgz">0ece_06.12.2012_EXELAB.rU.tgz</a> - fernflower.jar
<br><br><font size="1"><i>-----<br>SaNX</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=291546&amp;user=2108&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=1" class="addthx" data-post="291546"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=1931" title="13-09-2011 19:21, ранг:438.3" target="_blank">4kusNick</a>, <a href="action=userinfo&user=24193" title="10-10-2011 17:52, ранг:0.4" target="_blank">WmLiM</a>, <a href="action=userinfo&user=21807" title="19-11-2011 18:04, ранг:6.3" target="_blank">gsx3000</a>, <a href="action=userinfo&user=2775" title="27-01-2012 12:12, ранг:342.4" target="_blank">Maximus</a>, <a href="action=userinfo&user=27749" title="15-06-2012 17:13, ранг:2.0" target="_blank">CoolMax_86</a>, <a href="action=userinfo&user=1301" title="14-08-2012 06:11, ранг:68.3" target="_blank">Rustem</a>, <a href="action=userinfo&user=14476" title="02-10-2012 08:04, ранг:97.0" target="_blank">Oott</a>, <a href="action=userinfo&user=32939" title="06-10-2012 20:10, ранг:1.2" target="_blank">streit</a>, <a href="action=userinfo&user=11207" title="07-10-2012 13:49, ранг:3.8" target="_blank">t0ShA</a>, <a href="action=userinfo&user=21408" title="06-12-2012 14:13, ранг:60.2" target="_blank">BAHEK</a>, <a href="action=userinfo&user=35262" title="09-07-2013 07:46, ранг:3.8" target="_blank">sooqa</a>, <a href="action=userinfo&user=24" title="10-07-2013 16:24, ранг:1249.8" target="_blank">Ara</a>, <a href="action=userinfo&user=17319" title="12-11-2013 10:01, ранг:233.4" target="_blank">VodoleY</a>, <a href="action=userinfo&user=28841" title="14-01-2014 12:28, ранг:65.9" target="_blank">vden</a>, <a href="action=userinfo&user=36687" title="24-01-2014 10:45, ранг:0.0" target="_blank">Thegodofviruses</a>, <a href="action=userinfo&user=15457" title="10-03-2014 13:45, ранг:0.3" target="_blank">SDFnik</a>, <a href="action=userinfo&user=13359" title="26-03-2014 23:28, ранг:4.4" target="_blank">Soso</a>, <a href="action=userinfo&user=24594" title="21-04-2014 13:29, ранг:22.1" target="_blank">ff0h</a>, <a href="action=userinfo&user=2753" title="12-05-2014 12:15, ранг:63.1" target="_blank">RAMZEZzz</a>, <a href="action=userinfo&user=37517" title="05-06-2014 22:08, ранг:0.0" target="_blank">quency</a>, <a href="action=userinfo&user=25973" title="18-06-2014 18:44, ранг:3.2" target="_blank">XroM_N70</a>, <a href="action=userinfo&user=34465" title="23-12-2014 17:07, ранг:38.2" target="_blank">Alinator3500</a>, <a href="action=userinfo&user=16383" title="16-01-2015 06:31, ранг:341.1" target="_blank">Coderess</a>, <a href="action=userinfo&user=38223" title="30-06-2015 22:50, ранг:3.5" target="_blank">samtehnik</a>, <a href="action=userinfo&user=6946" title="12-08-2016 12:26, ранг:721.8" target="_blank">Isaev</a>, <a href="action=userinfo&user=43857" title="29-04-2018 04:32, ранг:0.0" target="_blank">dgyst</a>, <a href="action=userinfo&user=43820" title="22-01-2019 11:52, ранг:1.2" target="_blank">ALSSL</a>, <a href="action=userinfo&user=35473" title="03-02-2019 10:35, ранг:390.0" target="_blank">dosprog</a>, <a href="action=userinfo&user=40400" title="23-07-2019 05:23, ранг:0.1" target="_blank">omeh2003</a>, <a href="action=userinfo&user=11638" title="29-09-2019 17:04, ранг:39.7" target="_blank">d0wn</a>, <a href="action=userinfo&user=26651" title="07-10-2019 04:38, ранг:379.3" target="_blank">ELF_7719116</a>, <a href="action=userinfo&user=7" title="23-01-2020 13:38, ранг:534.7" target="_blank">Bad_guy</a></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Apokrif[/b]','')">Apokrif</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 171.0 (ветеран), 11thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.5'>Активность: 0.05<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=19416">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 июня 2016 16:25 &middot; Поправил: Apokrif <br><script type="text/javascript">QU('Apokrif','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Apokrif" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#2');return false;">#2</a> </span><div align=left><br>
Я бы сначала посмотрел в листинге, зашифрована jni_onload() или нет, а потом стал дальше думать.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365342&amp;user=19416&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=2" class="addthx" data-post="365342"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 июня 2016 17:12 &middot; Поправил: mixer632 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#3');return false;">#3</a> </span><div align=left><br>
<b>Apokrif</b>, посмотри, вроде по структуре похожи они. Мне кажется тут без шифрования.<br><img src="http://data3.floomby.com/files/share/21_6_2016/16/WEiM27OSEGMwy86BCYXfg.jpg" border="0" align="" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365343&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=3" class="addthx" data-post="365343"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Apokrif[/b]','')">Apokrif</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 171.0 (ветеран), 11thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.5'>Активность: 0.05<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=19416">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 июня 2016 18:02 <br><script type="text/javascript">QU('Apokrif','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Apokrif" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#4');return false;">#4</a> </span><div align=left><br>
<I>mixer632 пишет:<br>Мне кажется тут без шифрования. </I><br>Блин, ну нельзя же все понимать так буквально. Видно, что она вызывает только sub_AB30 и надо смотреть глубже. И смотреть проще на плюсах, а не ARM ASM...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365345&amp;user=19416&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=4" class="addthx" data-post="365345"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 июня 2016 19:56 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#5');return false;">#5</a> </span><div align=left><br>
<b>Apokrif</b>, на sub_AB30 я тоже обратил внимание, в ней очень много кода, понятно что главный функционал в ней.<br>Обработал в hex-rays в плюсовый код, можете посмотреть куда в ней копать дальше. Я поизучал функцию registernatives(), по сути нужно найти ее вызов, а из ее параметров взять указатель на структуру динамических фунок, но вот проблема, ида не умеет распознавать эти функции в коде, как бы ее найти.<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">jint&nbsp;RegisterNatives<span class="hl_char">(</span>JNIEnv&nbsp;<span class="hl_char">*</span>env<span class="hl_char">,</span>&nbsp;jclass&nbsp;clazz<span class="hl_char">,</span></li><li class="hl_l1"><span class="hl_function"><b>const</b></span>&nbsp;JNINativeMethod&nbsp;<span class="hl_char">*</span>methods<span class="hl_char">,</span>&nbsp;jint&nbsp;nMethods<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br>Как я понимаю надо искать что-то вида:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>push</b></span>&nbsp;nMethods</li><li class="hl_l1"><span class="hl_function"><b>push</b></span>&nbsp;methods</li><li class="hl_l0"><span class="hl_function"><b>push</b></span>&nbsp;clazz</li><li class="hl_l1"><span class="hl_function"><b>push</b></span>&nbsp;env</li><li class="hl_l0"><span class="hl_function"><b>call</b></span>&nbsp;registernatives</li>        </ol>
    </div>
</div></div>
<br><br><img src="img/attach.gif" alt=""> <a href="./files/adf4_21.06.2016_EXELAB.rU.tgz">adf4_21.06.2016_EXELAB.rU.tgz</a> - sub_ab30.txt
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365349&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=5" class="addthx" data-post="365349"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 22 июня 2016 23:06 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#6');return false;">#6</a> </span><div align=left><br>
А получится ли после registernatives() если в смали коде вызвать функцию <br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>void</b></span>&nbsp;<span class="hl_char">*</span>dlsym<span class="hl_char">(</span><span class="hl_function"><b>void</b></span>&nbsp;<span class="hl_char">*</span>handle<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>const</b></span>&nbsp;<span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span>symbol<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br>Для динамически экспортируемого метода и для jnionload(), потом определить разность между их адресами, ведь в памяти они будут по другим адресам, но расстояние между ними тоже самое, правильно я понимаю ?<br>Чтобы потом вычислив разность в памяти их адресов найти в самом *.so файле откуда этот метод начинается.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365358&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=6" class="addthx" data-post="365358"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]r_e[/b]','')">r_e</a></b><br></div>
<img src="img/s8.gif" alt=""><br><span class=txtSm>Ранг: 590.4 (<b>!</b>), 408thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.08'>Активность: 0.36<span style='color:red'>&searr;</span>0.18</span><br>Статус: <a href="action=userinfo&amp;user=11966">Модератор</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 июня 2016 11:35 <br><script type="text/javascript">QU('r_e','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=r_e" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#7');return false;">#7</a> </span><div align=left><br>
<b>mixer632</b><br>Ты бы не издевался над людьми и выложил бы свой апк.
<br><br><font size="1"><i>-----<br>старый пень</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=365364&amp;user=11966&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=7" class="addthx" data-post="365364"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 июня 2016 15:54 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#8');return false;">#8</a> </span><div align=left><br>
<b>r_e</b>, http://rgho.st/8gJ7djyRP<br>Посмотрите, пожалуйста. Интересует определение адресов динамически экспортируемых функций в libdexprotector.so
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365368&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=8" class="addthx" data-post="365368"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 июня 2016 15:19 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#9');return false;">#9</a> </span><div align=left><br>
<b>r_e</b>, я разобрался с отладкой нативной библиотеки через android_server от иды, можешь подсказать как мне поймать прогу на вызове в jni_onload(), эта функция получает управление один раз во время загрузки либы и конечно я подключаюсь после уже с отладчиком.<br>Какие тут варианты можно попробовать:<br>1. messagebox перед system.load() в смали коде прописать, чтобы идой подключиться до загрузки библиотеки в память<br>2. Бесконечный цикл в jni_onload() вписать в начале.<br>Мне интересно сработает ли 1 метод, то есть ида сможет бряк поставить на эту функцию или нет, ведь в этот момент либа еще не загружена в память.<br>Ну и есть ли еще какие способы ее там поймать, которые лучше предложенных ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365382&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=9" class="addthx" data-post="365382"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]Apokrif[/b]','')">Apokrif</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 171.0 (ветеран), 11thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.5'>Активность: 0.05<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=19416">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 июня 2016 17:07 <br><script type="text/javascript">QU('Apokrif','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Apokrif" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#10');return false;">#10</a> </span><div align=left><br>
<I>mixer632 пишет:<br>Какие тут варианты можно попробовать </I><br>Наверное можно пропатчить jni_onload(), вписать в начале soft breakpoint.<br>Я никогда не пробовал это делать, так что гуглите...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365383&amp;user=19416&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=10" class="addthx" data-post="365383"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]VodoleY[/b]','')">VodoleY</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 488.1 (мудрец), 272thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.01'>Активность: 0.35<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=17319">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 июня 2016 18:33 &middot; Поправил: VodoleY <br><script type="text/javascript">QU('VodoleY','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VodoleY" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#11');return false;">#11</a> </span><div align=left><br>
наткнулся на прикольную статью на хабре.. много полезных мелочей и ньюансов.. не смотря на то что статье 2 года, думаю начинающим будет полезно. там про далвик и про нейтив код.. вобщем вот<br>https://habrahabr.ru/post/232531/<br>и еще тутор на инглише<br>http://shubhamaher.com/native-android-reverse-engineering/<br>http://forum.xda-developers.com/showthread.php?t=2050393
<br><br><font size="1"><i>-----<br>Наша работа во тьме, Мы делаем, что умеем. Мы отдаем, что имеем, Наша работа во тьме....</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=365385&amp;user=17319&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=11" class="addthx" data-post="365385"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=40768" title="24-06-2016 18:32, ранг:20.1" target="_blank">mixer632</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 июня 2016 21:32 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#12');return false;">#12</a> </span><div align=left><br>
<b>Apokrif</b>, нашел тут статью http://www.hexblog.com/?p=809 с помощью двух запущенных ида получилось смали и натив вместе отлаживать. Используя эту статью получилось в Jni_onload брякнуться)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365388&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=12" class="addthx" data-post="365388"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]SaNX[/b]','')">SaNX</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 456.3 (мудрец), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.03'>Активность: 0.28<span style='color:red'>&searr;</span>0.02</span><br>Статус: <a href="action=userinfo&amp;user=2108">Участник</a><br><font color=blue>Android Reverser</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 июня 2016 21:38 <br><script type="text/javascript">QU('SaNX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SaNX" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#13');return false;">#13</a> </span><div align=left><br>
Дабы брякнуться на любой функе, достаточно в этой функе джамп на себя прописать. типа так:<br>xxx123: jmp xxx123<br>после бряка восстановить в памяти оригинальные байты и дебажить
<br><br><font size="1"><i>-----<br>SaNX</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=365389&amp;user=2108&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=13" class="addthx" data-post="365389"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]VodoleY[/b]','')">VodoleY</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 488.1 (мудрец), 272thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.01'>Активность: 0.35<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=17319">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 24 июня 2016 22:37 <br><script type="text/javascript">QU('VodoleY','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VodoleY" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#14');return false;">#14</a> </span><div align=left><br>
<b>SaNX</b>--&gt; дебаг .so&lt;-- <br>кстати.. в шапке твой пост) не хош подправить содержимое? а запускать андроид сервер разве не надо? раз ты мануал писал)<br><br><b>Добавлено спустя 5 минут</b><br>и может в шапочку еще на gikdbg.art ссылочку добавить.. для колекци.. типа.. ОлькаМод для дебаг андроида.. говорять глючная.. но комуто помогает
<br><br><font size="1"><i>-----<br>Наша работа во тьме, Мы делаем, что умеем. Мы отдаем, что имеем, Наша работа во тьме....</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=365397&amp;user=17319&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=14" class="addthx" data-post="365397"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 июня 2016 00:03 &middot; Поправил: mixer632 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#15');return false;">#15</a> </span><div align=left><br>
<I>VodoleY пишет:<br>говорять глючная </I><br>Пробовал, логает жутко. С идой нормально дебажится. <br>Гдбсервер тоже пробовал, на любителя какой-то.<br>На реал устройстве на команду continue падал с ошибкой доступа, на виртуал устройстве continue работала, а команда info function упорно вместо адресов в памяти выдавала их смещения в файле на диске, то есть бряк не поставить было.<br><br><b>Добавлено спустя 1 минуту</b><br><b>VodoleY</b>, не знаешь плагинов или утилит по распознаванию JNI фунок, чтобы ида их опознавала охота.<br>Хочу облегчить поиск в арм коде либы этой функи:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">jint&nbsp;RegisterNatives<span class="hl_char">(</span>JNIEnv&nbsp;<span class="hl_char">*</span>env<span class="hl_char">,</span>&nbsp;jclass&nbsp;clazz<span class="hl_char">,</span></li><li class="hl_l1"><span class="hl_function"><b>const</b></span>&nbsp;JNINativeMethod&nbsp;<span class="hl_char">*</span>methods<span class="hl_char">,</span>&nbsp;jint&nbsp;nMethods<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=365399&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=15" class="addthx" data-post="365399"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]VodoleY[/b]','')">VodoleY</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 488.1 (мудрец), 272thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.01'>Активность: 0.35<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=17319">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 июня 2016 09:31 <br><script type="text/javascript">QU('VodoleY','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VodoleY" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#16');return false;">#16</a> </span><div align=left><br>
<b>mixer632</b> разве что скрипт писать.. с сигнатурным поиском и разметкой.. как это автоматизировать в иде я не знаю. задай вопрос в теме использование иды там r_e тебе может чет путнего насоветует
<br><br><font size="1"><i>-----<br>Наша работа во тьме, Мы делаем, что умеем. Мы отдаем, что имеем, Наша работа во тьме....</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=365402&amp;user=17319&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=16" class="addthx" data-post="365402"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]Apokrif[/b]','')">Apokrif</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 171.0 (ветеран), 11thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.5'>Активность: 0.05<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=19416">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 июня 2016 20:13 &middot; Поправил: Apokrif <br><script type="text/javascript">QU('Apokrif','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Apokrif" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#17');return false;">#17</a> </span><div align=left><br>
<I>SaNX пишет:<br>Дабы брякнуться на любой функе, достаточно в этой функе джамп на себя прописать </I><br>Соратники,<br>А в IDA + andoid_server работают эти <noindex><a href="https://www.hex-rays.com/products/ida/support/idadoc/1413.shtml" rel="nofollow" target="_blank">фишки</a></noindex>?<br><i class=x>- Suspend on library load/unload<br>      If selected, the debugger will suspend if a new library is<br>      loaded or if a previously loaded library is unloaded.<br></i>И еще<br><i class=x>Event condition<br>      When one or more debug events (see above) are checked then this<br>      option is used to specify a condition. In the following example,<br>      the debugger will suspend the prcoess whenever a module with the<br>      name test.dll is loaded:<br></i><b>GetEventId() == LIBRARY_LOAD &amp;&amp; strstr(GetEventModuleName(), &quot;test.dll&quot;) != -1</b><br>Если да, то на Jni_onload() брякнуться д.б. без проблем? <img src="img/smilies/s11.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365413&amp;user=19416&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=17" class="addthx" data-post="365413"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]r_e[/b]','')">r_e</a></b><br></div>
<img src="img/s8.gif" alt=""><br><span class=txtSm>Ранг: 590.4 (<b>!</b>), 408thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.08'>Активность: 0.36<span style='color:red'>&searr;</span>0.18</span><br>Статус: <a href="action=userinfo&amp;user=11966">Модератор</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 июня 2016 22:00 <br><script type="text/javascript">QU('r_e','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=r_e" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#18');return false;">#18</a> </span><div align=left><br>
<b>VodoleY</b><br>По ведропротекторам это SaNXа кастовать надо в топик. Я плотно с ними не работал.<br>RegisterNatives экспортируется явно из ядра? Или он метод класса?<br>Если экспортируется явно, то метод поиска стандартный: база + смещение.<br>Если метод класса, то пишешь свою .so + apk, которая явно вызывает его и определяешь для твоего ядра смешение метода. Можешь в apk показывает его на экране. Ну а дальше дело техники.
<br><br><font size="1"><i>-----<br>старый пень</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=365417&amp;user=11966&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=18" class="addthx" data-post="365417"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 июня 2016 23:24 &middot; Поправил: mixer632 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#19');return false;">#19</a> </span><div align=left><br>
<b>r_e</b>, нашел все смещения jni через этот проект с гитхаба https://gist.github.com/libmaru/5814814<br>Та функа похоже не явно вызывается в либе, там нашел всякие jni вызовы типа GetStaticMethodID, CallStaticObjectMethod. Разрабы в смали коде помешаны на рефлексии, видать либу также писали.<br>По экспорту там только jni_onload(), она все остальное при старте формирует.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365425&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=19" class="addthx" data-post="365425"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]Apokrif[/b]','')">Apokrif</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 171.0 (ветеран), 11thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.5'>Активность: 0.05<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=19416">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 июня 2016 01:18 &middot; Поправил: Apokrif <br><script type="text/javascript">QU('Apokrif','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Apokrif" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#20');return false;">#20</a> </span><div align=left><br>
<I>Apokrif пишет:<br>Соратники,<br>А в IDA + andoid_server работают эти фишки?<br>- Suspend on library load/unload </I><br>Однако проверил - всё работает! <img src="img/smilies/s1.gif" alt=""><br>Вот всё по шагам:<br><br>Взял простейший код отсюда<br>http://www.hexblog.com/?p=809<br>Ставим и проверяем:<br>adb shell <br>android_server &amp;<br>am start -D -e debug true -n ida.debug.hellojni/.MainActivity<br><i class=x>Появилось окно &quot;Waiting for debugger&quot;</i><br><br>ida -&gt; attach to ida.debug.hellojni<br><b>Debugger options</b><br>X Suspend on library load/unload<br><b>Event condition</b><br>GetEventId() == LIBRARY_LOAD &amp;&amp; strstr(GetEventModuleName(), &quot;libhello-jni.so&quot;) != -1<br>* Если не ставить, ida будет брякаться на загрузке/выгрузке всех либ! <img src="img/smilies/s16.gif" alt=""><br><br>ida -&gt; run/continue<br><br>Теперь надо &quot;подтолкнуть&quot; наш &quot;Waiting for debugger&quot; процесс:<br># Находим наш процесс<br>adb jdwp<br>755<br><br><i class=x>APK д.б с <b>application android:debuggable=&quot;true&quot;</b><br>Без него будет пустой лист.<br>Возможно, что если сам девайс разрешает debug-жить любые APK, то в AndroidManifest.xml это не нужно.<br>Как разрешить для девайса уже обсуждали.<br></i><br># Пробрасаваем порт<br>adb forward tcp:8000 jdwp:755<br><br># Прицепляемся<br>jdb -connect com.sun.jdi.SocketAttach:hostname=localhost,port=8000<br><br>И брякнулись в ida на <br>loaded /data/app/ida.debug.hellojni-1/lib/arm/libhello-jni.so<br>Т.е. можно ставить бряку jni_onload() - она еще не выполнялась!<br><br><br>* Когда apk грузит либы, ida предлагает указать, где она лежит (уже разобранная?) на писюке.<br>Вот это еще не проверил, пора спать уже...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365434&amp;user=19416&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=20" class="addthx" data-post="365434"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=17319" title="26-06-2016 06:12, ранг:430.7" target="_blank">VodoleY</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 июня 2016 12:23 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#21');return false;">#21</a> </span><div align=left><br>
<I>Apokrif пишет:<br>Когда apk грузит либы, ida предлагает указать, где она лежит (уже разобранная?) на писюке. </I><br>А если ей подсунуть псевдокод hex-rays самой иды ? Во время отладки ида не особо выдает псевдокод чтобы отлаживать.<br><I>Apokrif пишет:<br>Как разрешить для девайса уже обсуждали. </I><br>Перепрошивать в рекавери ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365447&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=21" class="addthx" data-post="365447"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]reversecode[/b]','')">reversecode</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/15381.gif" alt=""><br><span class=txtSm>Ранг: 1053.6 <b><u>(!!!!)</u></b>, 1078thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.43'>Активность: 1.06<span style='color:red'>&searr;</span>0.81</span><br>Статус: <a href="action=userinfo&amp;user=15381">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 июня 2016 13:28 <br><script type="text/javascript">QU('reversecode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=reversecode" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#22');return false;">#22</a> </span><div align=left><br>
умеетют хексрейсы бегать под дебагером выдавая псевдокод
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365451&amp;user=15381&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=22" class="addthx" data-post="365451"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 июня 2016 19:10 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#23');return false;">#23</a> </span><div align=left><br>
<I>reversecode пишет:<br>умеетют хексрейсы бегать под дебагером выдавая псевдокод </I><br>Проблема в том, что локальный файл *.so весь чистый от красных кусков кода, а когда я аттачусь к этой либе, то в ида получаю много красных кусков кода, из-за чего хексрейс не может нормально делать псевдокод из него.<br>Почему так происходит, как это пофиксить ? Специально либу, которая на компе лежит прочистил, чтобы вся полоска синяя была, а во время аттача он свое грузит с красными кусками.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365466&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=23" class="addthx" data-post="365466"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]Apokrif[/b]','')">Apokrif</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 171.0 (ветеран), 11thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.5'>Активность: 0.05<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=19416">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 июня 2016 19:49 &middot; Поправил: Apokrif <br><script type="text/javascript">QU('Apokrif','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Apokrif" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#24');return false;">#24</a> </span><div align=left><br>
<I>mixer632 пишет:<br>Как разрешить для девайса уже обсуждали. <br>Перепрошивать в рекавери?</I><br>Можно и так.<br>Или попробовать выставить ro.debuggable=1 в build.prop через setpropex <br>Ссылка на setpropex есть <noindex><a href="https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=20#18" rel="nofollow" target="_blank">тут</a></noindex>, на новых андроидах не проверял.<br><br><I>Apokrif пишет:<br>Когда apk грузит либы, ida предлагает указать, где она лежит (уже разобранная?) на писюке.<br>Вот это еще не проверил, пора спать уже...</I><br>Если открыть ida с уже разобранной либой (просто переименовал пару функций!)<br>Потом присоединиться к андроиду (android_server/attach process) <br>Ida спросит, уже открытая либа и либа в attached process: same или нет?<br>Говорю same, но разобранная либа не подхватывается...<br>Даже rebase сделать не предлагает...<br>Наверное, какую-то мелочь упускаю?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365468&amp;user=19416&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=24" class="addthx" data-post="365468"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 июня 2016 21:19 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#25');return false;">#25</a> </span><div align=left><br>
<I>Apokrif пишет:<br>Говорю same </I><br>Да вот у меня аналогично, тоже same выбираю, но не подхватывает разобранную.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365469&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=25" class="addthx" data-post="365469"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]reversecode[/b]','')">reversecode</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/15381.gif" alt=""><br><span class=txtSm>Ранг: 1053.6 <b><u>(!!!!)</u></b>, 1078thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.43'>Активность: 1.06<span style='color:red'>&searr;</span>0.81</span><br>Статус: <a href="action=userinfo&amp;user=15381">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 июня 2016 21:43 <br><script type="text/javascript">QU('reversecode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=reversecode" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#26');return false;">#26</a> </span><div align=left><br>
<b>mixer632</b> потому что рейс декомпилит только полноценные функции а не огрызки кода которые не имеют ни начала ни конца<br>а у функции есть начало и конец и стек
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365470&amp;user=15381&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=26" class="addthx" data-post="365470"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]mixer632[/b]','')">mixer632</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 46.6 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.11'>Активность: 0.04<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=40768">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 июня 2016 22:39 <br><script type="text/javascript">QU('mixer632','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=mixer632" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#27');return false;">#27</a> </span><div align=left><br>
<I>reversecode пишет:<br>рейс декомпилит только полноценные функции а не огрызки кода </I><br>Я это понимаю, у меня либа на компе которая лежит хорошая и не умеет огрызков, огрызки в ней появляются когда аттачусь к ней на устройстве. Как этого избежать почему-то после аттача получаем много кусков не проанализированного кода.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365472&amp;user=40768&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=27" class="addthx" data-post="365472"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]reversecode[/b]','')">reversecode</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/15381.gif" alt=""><br><span class=txtSm>Ранг: 1053.6 <b><u>(!!!!)</u></b>, 1078thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.43'>Активность: 1.06<span style='color:red'>&searr;</span>0.81</span><br>Статус: <a href="action=userinfo&amp;user=15381">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 июня 2016 01:16 <br><script type="text/javascript">QU('reversecode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=reversecode" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#28');return false;">#28</a> </span><div align=left><br>
возможно потому что в статике либа имеет ельф формат и ида ее авто анализирует, <br>а при аттача это просто какая то память, ида ничего не знает о начале и конце кода
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365476&amp;user=15381&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=28" class="addthx" data-post="365476"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]Apokrif[/b]','')">Apokrif</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 171.0 (ветеран), 11thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.5'>Активность: 0.05<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=19416">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 июня 2016 01:51 &middot; Поправил: Apokrif <br><script type="text/javascript">QU('Apokrif','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Apokrif" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#29');return false;">#29</a> </span><div align=left><br>
<I>mixer632 пишет:<br>Как этого избежать почему-то после аттача получаем много кусков не проанализированного кода. </I><br><I>reversecode пишет:<br>возможно потому что в статике либа имеет ельф формат и ида ее авто анализирует, <br>а при аттача это просто какая то память, ида ничего не знает о начале и конце кода</I><br>Собственно вопрос (который мы задали в разной форме несколько раз):<br>Есть проект с разобранной либой, над которым мы потрудились.<br>Как при attach process подсказать ida, что либа в нашем process и разобранная либа это одно и тоже?<br>Ida ведь честно спрашиват &quot;уже открытая либа и либа в attached process: same или нет&quot;?<br>Но даже если ответить same, ida всё равно открывает либу &quot;по новой&quot;, и никаких результатов предыдущего анализа там нет. (Либа 100 пудово одна и таже!)<br>В инте проскакивают посты, что это возможно.<br>Т.е. у нас похоже не соблюдаются какие-то условия (например, &quot;ну очень кривые руки&quot; <img src="img/smilies/s16.gif" alt=""> )<br>Может есть (проверенный!) туториал, где по шагам расписано, что и как нужно делать?<br><br><b>Добавлено спустя 2 часа 50 минут</b><br><I>Apokrif пишет:<br>Может есть (проверенный!) туториал, где по шагам расписано, что и как нужно делать?</I><br>Заранее извиняюсь за длинный пост!<br><br>Если пройти по <noindex><a href="http://www.hexblog.com/?p=809" rel="nofollow" target="_blank">тутору</a></noindex><i class=x><br>* Неважно, по полному Dalvik debugger + Remote ARM Linux/Android debugger или только Remote ARM Linux/Android debugger, результат тот же!</i><br><br>Запускаем IDA, открываем либу не в папке, а именно из apk.<br>Находим нашу функцию <b>Java_ida_debug_hellojni2_MainActivity_stringFromJNI</b><br>Меняем имя на <b>XXX_Java_ida_debug_hellojni2_MainActivity_stringFromJNI</b><br>(Это типа наш анализ и есть!)<br>Ставим на ней breakpoint<br><br>Уточню, чуть поменял прогу (java part!), сделал 2 кнопки:<br>загрузить либу<br>вызвать нашу функцию<br>На код либы это, ессно, никак не влияет.<br><br>IDA | Attach process | Remote ARM Linux/Android debugger<br>Видим:<br><i class=x>Rebasing program to 0xB6F82BA0...<br>Debugger: attached to process /system/bin/app_process32_original (pid=15777)</i><br>Проходит быстро, 1-2 сек<br>Откуда взялся этот &quot;Rebasing program&quot;?<br>Ведь наша либа еще не загружена...<br><br>В нашей проге на Andriod-е нажимаем кнопку &quot;загрузить либу&quot;<br>Выскакивает окно про новую либу у процесса - говорим &quot;same&quot;<br>Видим:<br><i class=x>Rebasing program to 0x9BCC1BA0...<br>9BCC1000: loaded /data/app/ida.debug.hellojni2-2/lib/arm/libhello-jni.so<br>Debugger: thread 15810 has exited (code 0)</i><br>IDA что-то довольно долго делает, 3-4 минуты.<br>Похоже IDA пытается как то увязать, загрузку новой либы и наш предварительный анализ?<br><br>Либа крошечная, на диске 13kB, в памяти 6kB<br>При первом открытии из apk открывается и анализируется меньше чем за секунду!<br><br>В окне Module появляется наша либа<br>Если на неё кликнуть ida скажет:<br><i class=x>Module /data/app/ida.debug.hellojni2-2/lib/arm/libhello-jni.so has no names</i><br>Т.е. этот новый module и та либа, что мы открывали из apk никак не связаны (пока?)<br><br>В нашей проге на Andriod-е нажимаем кнопку &quot;вызвать нашу функцию&quot;<br>Получаем Break на нашей функции!<br><br>Видим в окне IDA View-PC, наша функция показана как мы её переименовали<br>XXX_Java_ida_debug_hellojni2_MainActivity_stringFromJNI<br>Еще раз нажимаем на /data/app/ida.debug.hellojni2-2/lib/arm/libhello-jni.so в окне Module <br><br>Появляется Module: libhello-jni.so<br>И в нем наша функция показана как Java_ida_debug_hellojni2_MainActivity_stringFromJNI<br>(т.е. так, как называется в либе, а не как мы её переименовали при анализе!)<br>В окне функций всего 44, а при анализе было 69!<br>Т.е. наш предварительный анализ почему-то не показывается…<br>От того, что в окне IDA View-PC наша функция показана как нам нужно, как то не легче.<br><br>В общем всё, традиционный вопрос: кто виноват и что делать?<br>Это так и задумывалось или я что-то упустил?<br><br>Единственный понятный момент, при отладке ASLR лучше отключать, чтобы не тратить время на этот длительный Rebase...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=365477&amp;user=19416&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=29" class="addthx" data-post="365477"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=40768" title="27-06-2016 00:09, ранг:25.1" target="_blank">mixer632</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="30" onfocus="this.blur()" href="JavaScript:di('[b]VodoleY[/b]','')">VodoleY</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 488.1 (мудрец), 272thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.01'>Активность: 0.35<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=17319">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 июня 2016 09:08 <br><script type="text/javascript">QU('VodoleY','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VodoleY" target="_blank">Личное сообщение</a> &middot;  <a href="#30" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#30');return false;">#30</a> </span><div align=left><br>
<I>r_e пишет:<br>По ведропротекторам это SaNXа кастовать надо в топик.  </I><br>а я как бы про протекторы не спрашивал)
<br><br><font size="1"><i>-----<br>Наша работа во тьме, Мы делаем, что умеем. Мы отдаем, что имеем, Наша работа во тьме....</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=365487&amp;user=17319&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=30" class="addthx" data-post="365487"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="31" onfocus="this.blur()" href="JavaScript:di('[b]r_e[/b]','')">r_e</a></b><br></div>
<img src="img/s8.gif" alt=""><br><span class=txtSm>Ранг: 590.4 (<b>!</b>), 408thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.08'>Активность: 0.36<span style='color:red'>&searr;</span>0.18</span><br>Статус: <a href="action=userinfo&amp;user=11966">Модератор</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 27 июня 2016 09:26 <br><script type="text/javascript">QU('r_e','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=r_e" target="_blank">Личное сообщение</a> &middot;  <a href="#31" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=19046&amp;page=28#31');return false;">#31</a> </span><div align=left><br>
<b>Apokrif</b><br>Это может быть баг иды, как раньше было с пропадающими переменными.<br>Начальный ребейз, вероятно, из-за отличия базы самой программы (нативной части ВМ, например) от того куда ее загрузили. Поскольку он к модулю не относится - ребейз быстрый.<br>Второй ребейз более долгий потому что ремапится уже специфичный модуль.<br>Странно что при этом меняется состав экспорта. Это вы по Ctrl+E смотрите или в окне экспорта модуля?<br><br><b>VodoleY</b><br>Я на опережение работаю ))) Андроид в 6.8 был таки достаточно сырой, так что это гадание на кофейной гуще.
<br><br><font size="1"><i>-----<br>старый пень</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=365488&amp;user=11966&amp;forum_n=1&amp;topic=19046&amp;page=28&amp;anchor=31" class="addthx" data-post="365488"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=27.html">&lt;&lt;</a> <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=0.html">1</a> ... <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=26.html">27</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=27.html">28</a> . <b>29</b> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=29.html">30</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=30.html">31</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=31.html">32</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=32.html">33</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=33.html">34</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=34.html">35</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=35.html">36</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=36.html">37</a> ... <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=37.html">38</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=38.html">39</a> . <a href="action=vthread&amp;forum=1&amp;topic=19046&amp;page=29.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/green.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=1&sortBy=0&page=0.html"><b>Основной форум</b></a> <b class=bulletHead>&#8212;&#8250;</b> Взлом Android приложений</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#32" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="1">
<input type="hidden" name="topic" value="19046">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=19046" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
