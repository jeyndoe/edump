<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Справочник по командам ассемблера - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Начал писать проги на асме буквально 2-3 дня назад и вот у меня возник такая проблема. Нужен справочник по командам асма. Не учебник, а именно справочник(с програмированием проблем не возникало, но чувствую, что команд я заню">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=26261'>bartolomeo</a>, <a target='_blank' href='?action=userinfo&amp;user=28512'>-Sanchez-</a> (+3 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Справочник по командам ассемблера</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=5&amp;topic=3996&amp;page=0.html">&lt;&lt;</a> .  <a href="action=vthread&amp;forum=5&amp;topic=3996&amp;page=0.html">1</a> . <b>2</b> .</b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]Klajnor[/b]','')">Klajnor</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 50.7 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.78'>Активность: 0.06<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=2708">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 13 февраля 2006 23:42 <br><script type="text/javascript">QU('Klajnor','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Klajnor" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=3996&amp;page=1#1');return false;">#1</a> </span><div align=left><br>
Начал писать проги на асме буквально 2-3 дня назад и вот у меня возник такая проблема.
<br>Нужен справочник по командам асма. Не учебник, а именно справочник(с програмированием проблем не возникало, но чувствую, что команд я заню маловато). 
<br>Перечень команд, что команда делает, какие регистры и флаги меняет и т.д. и .т.п. Но желательно, чтобы всё это было описано в минимальном, но достаточном для понимания объёме.
<br>Кто чё посоветует?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=53969&amp;user=2708&amp;forum_n=5&amp;topic=3996&amp;page=1&amp;anchor=1" class="addthx" data-post="53969"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Ura_Orlov[/b]','')">Ura_Orlov</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.2 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.38'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=3867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 февраля 2006 00:59 <br><script type="text/javascript">QU('Ura_Orlov','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ura_Orlov" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=3996&amp;page=1#2');return false;">#2</a> </span><div align=left><br>
RCR Циклический сдвиг вправо через бит переноса
<br>
<br>Команда rсl осуществляет сдвиг вправо всех битов операнда. Если команда записана в формате
<br>
<br>rcl операнд,1
<br>
<br>сдвиг осуществляется на 1 бит. В старший бит операнда заносится значение флага CF; младший бит операнда загружается в CF. Если команда записана в формате
<br>
<br>rcl операнд,CL
<br>
<br>сдвиг осуществляется на число бит, указанное в регистре-счетчике CL, при этом в процессе последовательных сдвигов младшие биты операнда поступают сначала в CF, а оттуда - в старшие биты операнда (Рис. П5).
<br>Рис. П.5. Действие команды rcl.
<br>
<br>В качестве операнда можно указывать любой регистр (кроме сегментного) или ячейку памяти размером как в байт, так и в слово. Не допускается использовать в качестве операнда непосредственное значение. Команда воздействует на флаги OF и CF.
<br>
<br>Пример 1
<br>
<br>
<br>clc ;Сбросим флаг CF
<br>mov AX, 2
<br>rcr АХ,1 ;АХ=1, CF=0
<br>
<br>Пример 2
<br>
<br>
<br>stc ;Установим флаг CF
<br>mov DL,8
<br>rcr DL,1 ;DL=84h, CF=0
<br>
<br>Пример 3
<br>
<br>
<br>clc ;Сбросим флаг CF
<br>mov BX,OFh
<br>rcr BX,1 ;BX=7, CF=1
<br>
<br>Пример 4
<br>
<br>
<br>clc ;Сбросим флаг CF
<br>mov DH,80h
<br>mov CL,5 ;Счетчик сдвигов
<br>rcr DH,CL ;DH=4, CF=0
<br>
<br> Допустим сдвиг 32-битовых операндов. Допустимо указание числа бит сдвига как с помощью регистра CL, так и непосредственным значением. Максимальная величина сдвига составляет 31 бит.
<br>
<br>Пример
<br>
<br>
<br>mov ESI,0FFFF000lh
<br>clc ;Сбросим флаг CF
<br>rcr ESI,8 ;ESI=02FFFF00h, CF=0
<br>
<br> 
<br>
<br>Pentium+P RDMSR Чтение особого регистра модели
<br>
<br>
<br>Команда читает содержимое внутреннего регистра, специфического для конкретной модели процессора.
<br>
<br>REP Повторение
<br>
<br>REPE Повторение пока равно
<br>
<br>REPZ Повторение пока нуль
<br>
<br>REPNE Повторение пока равно
<br>
<br>REPNZ Повторение пока не равно
<br>
<br>
<br>Префиксы повторения, позволяющие организовывать циклическое выполнение команд обработки строк cmps, movs и seas, и при этом проверять наличие указанного в префиксе условия.
<br>Префикс rep, будучи установлен перед строковой командой movs или stos, заставляет ее выполняться СХ раз.
<br>Префикс rере (и полностью эквивалентный ему префикс repz), будучи установлен перед строковой командой cmps или seas, заставляет ее выполняться до тех пор, пока результат выполнения равен 0 и, соответственно, ZF=1, но не более СХ раз.
<br>Префикс rерnе (и полностью эквивалентный ему префикс repnz), будучи установлен перед строковой командой cmps или seas, заставляет ее выполняться до тех пор, пока результат выполнения не равен 0 и, соответственно, ZF=0, но не более СХ раз.
<br>Примеры использования префиксов повторения см. в описаниях строковых команд cmps, movs и seas.
<br>
<br> 
<br>
<br>RET Возврат из процедуры
<br>
<br>RETN Возврат из ближней процедуры
<br>
<br>RETF Возврат из дальней процедуры
<br>
<br>
<br>Команда ret извлекает из стека адрес возврата и передает управление назад в программу, первоначально вызвавшую процедуру. Если командой ret завершается ближняя процедура, объявленная с атрибутом near, или используется модификация команды retn, со стека снимается одно слово- относительный адрес точки возврата. Передача управления в этом случае осуществляется в пределах одного программного сегмента. Если командой ret завершается дальняя процедура, объявленная с атрибутом far, или используется модификация команды retf, со стека снимаются два слова: смещение и сегментный адрес точки возврата. В этом случае передача управления может быть межсегментной.
<br>В команду ret может быть включен необязательный операнд (кратный 2), который указывает, на сколько байтов дополнительно смещается указатель стека после возврата в вызывающую программу. Прибавляя эту константу к новому значению SP, команда ret обходит аргументы, помещенные в стек вызывающей программой (для передачи процедуре) перед выполнением команды call. Обе разновидности команды не воздействуют на флаги процессора.
<br>
<br>Пример 1
<br>
<br>
<br>…
<br>call subr ;Вызов подпрограммы
<br>subr proc near
<br>. . . ;Тело процедуры-подпрограммы
<br>ret subr endp
<br>
<br>Пример 2
<br>
<br>
<br>push AX ;Параметр 1, передаваемый в
<br>;подпрограмму
<br>push SI ;Параметр 2, передаваемый в
<br>;подпрограмму
<br>call subr ;Вызов подпрограммы
<br>…
<br>subr proc near
<br>…
<br>;Извлечение из стека параметров
<br>; (без изменения содержимого SP)
<br>ret 4 ;Возврат в вызывающую
<br>;программу и снятие со стека
<br>;двух слов с параметрами
<br>subr endp
<br>ROL Циклический сдвиг влево
<br>
<br>Команда rol осуществляет сдвиг влево всех битов операнда. Если команда записана в формате
<br>
<br>rol операнд,1
<br>
<br>сдвиг осуществляется на 1 бит. Старший бит операнда загружается в его младший разряд и одновременно заносится в флаг CF (рис. П6). Если команда записана в формате
<br>
<br>rol операнд,CL
<br>
<br>сдвиг осуществляется на число бит, указанное в регистре-счетчике CL, при этом в процессе последовательных сдвигов старшие биты операнда перемещаются в его младшие разряды. Последний перенесенный бит одновременно заносится в флаг CF.
<br>Рис. П6. Действие команды rol.
<br>
<br>В качестве операнда можно указывать любой регистр (кроме сегментного) или ячейку памяти размером как в байт, так и в слово. Не допускается использовать в качестве операнда непосредственное значение. Команда воздействует на флаги OF и CF.
<br>
<br>Пример 1
<br>
<br>
<br>mov AX,1
<br>rol AX,1 ;AX=0002h, CF=0
<br>
<br>Пример 2
<br>
<br>
<br>mov DL,8 Oh
<br>rol DL,1 ;DL=01h, CF=1
<br>
<br>Пример 3
<br>
<br>
<br>mov DX,3000h
<br>mov CL,4
<br>rol DX,CL ;DX=0003h, CF=1
<br>
<br>Пример 4
<br>
<br>
<br>mov DX,2000h
<br>mov CL,4
<br>rol DX,CL ;DX=0002h, CF=0
<br>
<br>
<br> Допустим сдвиг 32-битовых операндов. Допустимо указание числа бит сдвига как с помощью регистра CL, так и непосредственным значением. Максимальная величина сдвига составляет 31 бит.
<br>
<br>Пример
<br>
<br>
<br>mov ЕАХ,012345678h
<br>rol EАХ,16 ;EAX=56781234h
<br>
<br> 
<br>
<br>&gt;ROR Циклический сдвиг вправо
<br>
<br>
<br>Команда ROR осуществляет циклический сдвиг вправо всех битов операнда. Если команда записана в формате
<br>
<br>ror операнд,1
<br>
<br>сдвиг осуществляется на 1 бит. Младший бит операнда записывается в его старший разряд и одновременно поступает в флаг CF (рис.Ш). Если команда записана в формате
<br>
<br>ror операнд,CL
<br>
<br>сдвиг осуществляется на число бит, указанное в регистре-счетчике CL, при этом в процессе последовательных сдвигов младшие биты операнда перемещаются в его старшие разряды. Последний перенесенный бит одновременно заносится в флаг CF.
<br>Рис. П7. Действие команды ror.
<br>
<br>В качестве операнда можно указывать любой регистр (кроме сегментного) или ячейку памяти размером как в байт, так и в слово. Не допускается использовать в качестве операнда непосредственное значение. Команда воздействует на флаги OF и CF.
<br>
<br>Пример 1
<br>
<br>
<br>mov AX,2
<br>ror AX,1 ;AX=0001h, CF=0
<br>
<br>Пример 2
<br>
<br>
<br>mov DL,81h
<br>ror DL,1 ;DL=C0h, CF=1
<br>
<br>Пример 3
<br>
<br>
<br>mov BX,000Eh
<br>mov CL,4
<br>ror BX,CL ;BX=E000h, CF=1
<br>
<br>Пример 4
<br>
<br>
<br>mov BX,0009h
<br>mov CL,4
<br>ror BX,CL ;BX=9000h, CF=1
<br>
<br> Допустим сдвиг 32-битовых операндов. Допустимо указание числа бит сдвига как с помощью регистра CL, так и непосредственным значением. Максимальная величина сдвига составляет 31 бит.
<br>
<br>Пример
<br>
<br>
<br>mov EDI,90000001h
<br>ror EDI,12 ;EDI=00190000h
<br>
<br> 
<br>
<br>SAHF Запись содержимого регистра АН в регистр флагов
<br>
<br>
<br>Команда sahf копирует разряды 7, 6, 4, 2 и 0 регистра АН в регистр флагов процессора, устанавливая тем самым значения флагов SF, ZF, AF, PF и CF соответственно. Команда не имеет операндов.
<br>Команда sahf (совместно с командой lahf) дает возможность читать и изменять значения флагов процессора, в том числе флагов SF, ZF, AF и PF, которые нельзя изменить непосредственно. Однако следует иметь в виду, что команда sahf заполняет только младший байт регистра флагов. Поэтому нельзя изменить с ее помощью, например, состояние флага OF.
<br>
<br>Пример 1
<br>
<br>
<br>lahf ;Регистр АН отображает
<br>;состояние регистра флагов
<br>or АН,80h ;Установка бита 7 = SF
<br>sahf ;Загрузка АН в регистр
<br>;флагов, где теперь будет SF = 1
<br>
<br>Пример 2
<br>
<br>
<br>lahf ;Регистр АН отображает
<br>;состояние регистра флагов
<br>and АН,0BFh ;Сброс бита 6 = ZF
<br>sahf ;Загрузка АН в регистр
<br>;флагов, где теперь будет ZF = 0
<br>
<br>Пример 3
<br>
<br>
<br>mov АН, 5
<br>sahf ;Устанавливаются флаги PF и
<br>;CF и сбрасывается флаги SF,
<br>;ZF и AF
<br>
<br> 
<br>
<br>SAL Арифметический сдвиг влево
<br>
<br>
<br>Команда sal осуществляет сдвиг влево всех битов операнда. Старший бит операнда поступает в флаг CF. Если команда записана в формате
<br>
<br>sal операнд, 1
<br>
<br>сдвиг осуществляется на 1 бит. В младший бит операнда загружается 0. Если команда записана в формате
<br>
<br>sal операнд,CL
<br>
<br>сдвиг осуществляется на число битов, указанное в регистре-счетчике CL, при этом в процессе последовательных сдвигов старшие биты операнда, пройдя через флаг CF, теряются, а младшие заполняются нулями (рис. П8.).
<br>Рис. П8. Действие команды sal.
<br>
<br>В качестве операнда команды sal можно указывать любой регистр (кроме сегментного) или ячейку памяти размером как в байт, так и в слово. Не допускается использовать в качестве операнда непосредственное значение.
<br>Каждый сдвиг влево эквивалентен умножению знакового числа на 2, поэтому команду sal удобно использовать для возведения операнда в степень 2.
<br>Команда воздействует на флаги OF, SF, ZF, PF и CF.
<br>
<br>Пример 1
<br>
<br>
<br>mov AL,7
<br>sal AL,1 ;AL= 0Eh=7*2, CF=0
<br>
<br>Пример 2
<br>
<br>
<br>mov AX,IFh
<br>mov CL,8
<br>sal AX,CL ;AX=lF00h=lFFh*256, CF=0
<br>
<br>Пример 3
<br>
<br>
<br>mov SI,-1 ;SI=FFFFh
<br>mov CL,4
<br>sal SI,CL ;SI=FFF0h=-l*16=-16, CF=1
<br>
<br> Допустим сдвиг 32-битовых операндов. Допустимо указание числа бит сдвига как с помощью регистра CL, так и непосредственным значением. Максимальная величина сдвига составляет 31 бит.
<br>
<br>Пример
<br>
<br>
<br>mov EBX,0000C835h
<br>sal EBX,5 ;EBX=001906A0h
<br>
<br> 
<br>
<br>SAR Арифметический сдвиг вправо
<br>
<br>
<br>Команда sar осуществляет сдвиг вправо всех битов операнда. Младший бит операнда поступает в флаг CF. Если команда записана в формате
<br>
<br>sar операнд,1
<br>
<br>сдвиг осуществляется на 1 бит. Старший бит операнда сохраняет свое значение. Если команда записана в формате
<br>
<br>sar операнд,CL
<br>
<br>сдвиг осуществляется на число бит, указанное в регистре-счетчике CL, при этом в процессе последовательных сдвигов младшие биты операнда, пройдя через флаг CF, теряются, а старший бит расширяется вправо (рис. П9).
<br>Рис. П.9. Действие команды sar.
<br>
<br>В качестве операнда можно указывать любой регистр (кроме сегментного) или ячейку памяти размером как в байт, так и в слово. Не допускается использовать в качестве операнда непосредственное значение.
<br>Каждый сдвиг вправо эквивалентен делению знакового числа на 2, поэтому команду sar удобно исп
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=55291&amp;user=3867&amp;forum_n=5&amp;topic=3996&amp;page=1&amp;anchor=2" class="addthx" data-post="55291"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]Ura_Orlov[/b]','')">Ura_Orlov</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.2 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.38'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=3867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 февраля 2006 01:01 <br><script type="text/javascript">QU('Ura_Orlov','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ura_Orlov" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=3996&amp;page=1#3');return false;">#3</a> </span><div align=left><br>
поэтому команду sar удобно использовать для деления операнда на целые степени 2. Команда воздействует на флаги OF, SF, ZF, AF, PF и CF.
<br>
<br>Пример 1
<br>
<br>
<br>mov AL,7
<br>sar AL,1 ;AL=3=7/2, CF=1. Остаток
<br>;потерян
<br>
<br>Пример 2
<br>
<br>
<br>mov AX,lFF0h
<br>mov CL,4
<br>sar AX,CL ;AX=01FFh=lFF0h/16, CF=0
<br>
<br>Пример 3
<br>
<br>
<br>mov BX,-8 ;BX=FFF8h
<br>mov CL,2
<br>sar BX,CL ;BX=FFFEh=-2=-8/4, CF=0
<br>
<br> Допустим сдвиг 32-битовых операндов. Допустимо указание числа бит сдвига как с помощью регистра CL, так и непосредственным значением. Максимальная величина сдвига составляет 31 бит.
<br>
<br>Пример
<br>
<br>
<br>mov EAX,0F0001234h
<br>sar EAX,8 EAX=FFF00012h
<br>
<br> 
<br>SBB Целочисленное вычитание с займом
<br>
<br>Команда sbb вычитает второй операнд (источник) из первого (приемника). Результат замещает первый операнд, предыдущее значение которого теряется. Если установлен флаг CF, из результата вычитается еще 1. Таким образом, если команду вычитания записать в общем виде
<br>
<br>sbb операнд__1, операнд_2
<br>
<br>то ее действие можно условно изобразить следующим образом:
<br>
<br>
<br>операнд_1 - операнд_2 - CF -&gt; операнд_1
<br>
<br>В качестве первого операнда можно указывать регистр (кроме сегментного) или ячейку памяти, в качестве второго - регистр (кроме сегментного), ячейку памяти или непосредственное значение, однако не допускается определять оба операнда одновременно как ячейки памяти. Операнды могут быть байтами или словами и представлять числа со знаком или без знака. Команда sbb обычно используется для вычитания 32-разрядных чисел. Команда воздействует на флаги OF, SF, ZF, PF и CF.
<br>
<br>Пример 1
<br>
<br>
<br>mov AX,76A5h
<br>sbb AX,76A3h ;AX=1, если CF был = 1
<br>;AX=2, если CF был = 0
<br>
<br>Пример 2
<br>
<br>
<br>; В полях данных:
<br>numlow dw 000Ah ;Младшая часть вычитаемого
<br>numhigh dw 0001h ;Старшая часть вычитаемого
<br>;Число 1000Ah=65546
<br>;В программном сегменте:
<br>mov AX, 0 ;Младшая часть уменьшаемого
<br>mov DX,0002 ;Старшая часть уменьшаемого
<br>;Число 20000h=131072
<br>sub AX, numlow ;Вычитание младших частей.
<br>;AX=FFF6h, CF=1
<br>sbb DX,numhigh ;Вычитание старших частей с
<br>;займом.
<br>;DX:AX=0000:FFF6h=65526
<br>
<br> Допустимо использование 32-битовых операндов и дополнительных режимов адресации 32-разрядных процессоров.
<br>
<br>Пример
<br>
<br>
<br>;В полях данных:
<br>nlow dd 0Ch ;Младшая часть вычитаемого
<br>nhi dd 40000000h ;Старшая часть вычитаемого
<br>;Число 400000000000000Ch ;В программном сегменте:
<br>mov EAX,0Bh ;Младшая часть уменьшаемого
<br>mov EBX,60000000h ;Старшая часть уменьшаемого
<br>;Число 600000000000000Bh
<br>sub EAX,nlow ;Вычитание младших частей.
<br>;EAX=FFFFFFFFh, CF=1
<br>sbb EBX,nhi ;Вычитание старших частей с
<br>;займом. EBX=lFFFFFFFh
<br>;Разность IFFFFFFFFFFFFFFFh
<br>
<br>SCAS Сканирование строки с целью сравнения
<br>
<br>SCASB Сканирование строки байтов с целью сравнения
<br>
<br>SCASW Сканирование строки слов с целью сравнения
<br>
<br>
<br>Команды предназначены для операций над строками (строкой называется последовательность байтов или слов памяти с любым содержимым). Они сравнивают содержимое регистра AL (в случае операций над байтами) или АХ (в случае операций над словами) с содержимым ячейки памяти по адресу, находящемуся в паре регистров ES<img src="img/smilies/s5.gif" alt="">I. Операция сравнения осуществляется путем вычитания содержимого ячейки памяти из содержимого AL или АХ. Результат операции воздействует на регистр флагов, но не изменяет ни один из операндов. Таким образом, операцию сравнения можно условно изобразить следующим образом:
<br>
<br>АХ или AL - (ES<img src="img/smilies/s5.gif" alt="">I) ® флаги процессора
<br>
<br>После каждой операции сравнения регистр DI получает положительное (если флаг DF=0) или отрицательное (если флаг DF=1) приращение. Величина приращения составляет 1 или 2, в зависимости от размера сравниваемых элементов.
<br>Вариант команды SCAS имеет формат
<br>
<br>sсas строка
<br>
<br>(что не избавляет от необходимости инициализировать регистры ES<img src="img/smilies/s5.gif" alt="">I адресом строки строка). Замена сегмента строки невозможна.
<br>Рассматриваемые команды могут предваряться префиксами повторения repe/repz (повторять, пока элементы равны, т.е. до первого неравенства) и repne/repiiz (повторять, пока элементы не равны, т.е. до первого равенства). В любом случае выполняется не более СХ операций над последовательными элементами.
<br>После выполнения рассматриваемых команд регистр DI указывает на ячейку памяти, находящуюся за тем (если DF=0) или перед тем (если DF=1) элементом строки, на котором закончились операции сравнения. Команда воздействует на флаги OF, SF, ZF, AF, PF и CF.
<br>
<br>Пример 1
<br>
<br>
<br>;В полях данных сегмента данных, адресуемого через ES:
<br>string db &#039; /Т:4&#039;
<br>;В программном сегменте:
<br>сld ;Поиск вперед по строке
<br>lea DI,string ;ES<img src="img/smilies/s5.gif" alt="">I ® string
<br>mov AL, &#039; &#039; ;Символ, который мы пропускаем
<br>mov CX,8 ;Длина строки repe scasb
<br>;Поиск первого символа,
<br>;отличного от пробела
<br>je blank ;Символ не найден - одни пробелы
<br>gotit: ;Продолжение, если символ найден
<br>
<br>В примере 1 в строке имеются символы, отличные от искомого (кода пробела), и команда je выполнена не будет. После завершения сканирования управление будет передано на метку gotit. Содержимое регистров в этой точке: СХ=3 (так как не выполнено сканирование 3 символов), DI = &lt;смещение string&gt; + 5 (выполнено сканирование 5 символов). ES<img src="img/smilies/s5.gif" alt="">1 указывают на символ строки, следующий за отличным от пробела (в данном случае символ &quot;Т&quot;).
<br>
<br>Пример 2
<br>
<br>
<br>; В полях данных сегмента данных, адресуемого через ES:
<br>string db &#039; /Т:4&#039;
<br>; В программном сегменте:
<br>cld ;Поиск вперед по строке
<br>lea DI,string ;ES<img src="img/smilies/s5.gif" alt="">I ® string
<br>mov AL, &#039;/&#039; ;Искомый символ
<br>mov CX,8 ;Длина строки
<br>repne scasb ;Поиск символа / в строке
<br>jne blank ;Искомого символа нет
<br>g&#039;otit: ;Искомый символ найден
<br>
<br>В примере 2 в строке имеется искомый символ (&quot;/&quot;), и команда jne выполнена не будет. После завершения сканирования управление будет передано на метку gotit. Содержимое регистров в этой точке: СХ=3 (так как не выполнено сканирование 3 символов), DI = &lt;смещение string&gt; + 5 (выполнено сканирование 5 символов). ES<img src="img/smilies/s5.gif" alt="">I указывают на символ строки, следующий за найденным знаком &quot;/&quot; (в данном случае символ &quot;Т&quot;).
<br>
<br> 
<br>
<br>386+ SCASD
<br>
<br>
<br>Сканирование строки двойных слов с целью сравнения
<br>Команда аналогична командам МП 86 scab и scasw, но позволяет сравнивать содержимое расширенного регистра ЕАХ с двойным словом в памяти, адресуемым через регистры ES:EDI.
<br>
<br>Пример
<br>
<br>
<br>;В полях данных сегмента данных, адресуемого через ES:
<br>nums dd 156000,432666,100000,0,4567890, ...
<br>;В программном сегменте:
<br>cld ;Поиск вперед
<br>mov DI,offset nums ;ES<img src="img/smilies/s5.gif" alt="">I -&gt; nums
<br>mov EAX,0 ;Искомое число
<br>mov CX,10000 ;Максимальное число элементов
<br>repne scasd ;Поиск 0 среди чисел массива
<br>jne no0 ;Искомого числа нет
<br>isO: ;Искомое число найдено
<br>
<br>В примере в массиве чисел имеется искомое число 0 (с таким же успехом можно было искать любое другое число, например, 4567890). Команда jne выполнена не будет. После завершения сканирования управление будет передано на метку is0. Содержимое регистров в этой точке: СХ уменьшится на 4 (просмотрено 4 элемента), DI будет увеличено на 10h (4 числа по 4 байт в числе).
<br>
<br> 
<br>386+ SETcc Установка байта по условию
<br>
<br>Команды, обозначаемые (в книгах, не в программах!) SETcc, осуществляют запись в указанный байтовый операнд 1 или 0 в зависимости от одного из 16 условий, определяемых флагами состояния. Если условие ее выполняется, команда записывает в операнд 1; если условие не выполняется - 0.В качестве операнда можно использовать байтовый регистр или 8-битовую ячейку памяти.
<br>В составе команд процессора предусмотрены следующие команды условной установки байта:
<br>
<br>Команда Установить 1, если Условие установки 1
<br>seta выше CF=0 и ZF=0
<br>setae выше или равно CF=0
<br>setb ниже CF= I
<br>setbe ниже или равно CF=1 или ZF=1
<br>setc перенос CF=1
<br>sete равно ZF=1
<br>setg больше ZF=0 или SF=OF
<br>setge больше или равно SF=OF
<br>setl меньше SF не равно OF
<br>setle меньше или равно ZF=1 или SF не равно ОР
<br>setna не выше CF=1 или ZF=1
<br>setnae не выше и не равно CF=1
<br>setnb не ниже CF=0
<br>setnbe не ниже и не равно CF=0 и ZF=0
<br>setnc нет переноса CF=0
<br>setne не равно ZF=0
<br>setng не больше ZF=1 или SF не равно OF
<br>setnge не больше и не равно SF не равно OF
<br>setnl не меньше SF=OF
<br>setnle не меньше и не равно ZF=0 и SF=OF
<br>setno нет переполнения OF=0
<br>setnp нет четности PF=0
<br>setns знаковый бит равен О SF=0
<br>setnz не нуль ZF=0
<br>seto переполнение OF=1
<br>setp есть четность PF=1
<br>setpe сумма битов четная PF=1
<br>setpo сумма битов нечетная PF=0
<br>sets знаковый бит равен SF=1
<br>setz нуль ZF= I
<br>
<br>Команды, осуществляющие установку по условию &quot;выше - ниже&quot;, предназначены для анализа чисел без знака; команды, осуществляющие установку по условию &quot;больше - меньшее&quot;, предназначены для анализа чисел со знаком.
<br>
<br>Пример 1
<br>
<br>
<br>cmp AX,35h
<br>seta CH ;Если AX&gt;35h, CH=1
<br>;Если AX&lt;=35h, CH=0
<br>
<br>Пример 2
<br>
<br>
<br>; В полях данных
<br>flag db ?
<br>;В программном сегменте
<br>test AX,8000h
<br>sete flag ;Если в АХ установлен бит 7,
<br>;flag=l. Иначе flag=0
<br>
<br>386Р+ SGDT Сохранение в памяти содержимого регистра таблицы глобальных дескрипторов
<br>
<br>
<br>Команда копирует содержимое регистра таблицы глобальных дескрипторов GDTR (линейный базовый адрес таблицы и ее границу) в поле из 6 байт, указанное в качестве операнда.
<br>
<br> 
<br>
<br>SHL Логический сдвиг влево
<br>
<br>
<br>Команда полностью эквивалентна команде sal (арифметический сдвиг влево). См. описание команды sal.
<br>
<br> 
<br>
<br>386+ SHLD Логический сдвиг влево с двойной точностью
<br>
<br>
<br>Трехоперандная команда shld с операндами op1, ор2 и орЗ осуществляет сдвиг влево первого из своих операндов opl. Число битов сдвига определяется третьим операндом орЗ. По мере сдвига операнда opl влево, выдвигаемые из него старшие биты, пройдя через флаг CF, теряются, ; на освобождающиеся места со стороны его младших битов поступают ста
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=55292&amp;user=3867&amp;forum_n=5&amp;topic=3996&amp;page=1&amp;anchor=3" class="addthx" data-post="55292"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Ura_Orlov[/b]','')">Ura_Orlov</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.2 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.38'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=3867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 февраля 2006 01:02 <br><script type="text/javascript">QU('Ura_Orlov','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ura_Orlov" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=3996&amp;page=1#4');return false;">#4</a> </span><div align=left><br>
на освобождающиеся места со стороны его младших битов поступают старшие биты второго операнда ор2, как если бы он вдвигался своим левым (старшим) концом в opl. Однако после завершения сдвига значение операнда ор2 не изменяется (рис. П10). Во флаге CF остается последний выдвинутый из операнда opl бит. Максимальное число битов сдвига составляет 31.
<br>
<br>
<br>
<br>Рис. П10. Действие команды shld.
<br>
<br>В качестве первого операнда op1можно указывать 16- или 32-разрядный регистр общего назначения или 16- или 32-битовую ячейку памяти. Вторым операндом ор2 может служить только 16- или 32-разрядный регистр общего назначения. Третий операнд, характеризующий число битов сдвига, может находиться в регистре CL или быть непосредственным значением.
<br>Команда воздействует на флаги OF, SF, ZF, PF и CF.
<br>
<br>Пример 1
<br>
<br>
<br>mov AX,OC001h
<br>mov BX,900Fh
<br>shld AX,BX,1 ;AX=8003h, BX=900Fh, CF=1
<br>
<br>Пример 2
<br>
<br>
<br>mov AX,0C001h
<br>mov BX,900Fh
<br>shld AX,BX,2 ;AX=0006h, BX=900Fh, CF=1
<br>
<br>Пример 3
<br>
<br>
<br>mov AX,0C001h
<br>mov BX,900Fh
<br>shld AX,BX,3 ;AX=000Ch, BX=900Fh, CF=0
<br>
<br>Пример 4
<br>
<br>
<br>mov EBX,0FFCS000h
<br>mov ESI,12340000h
<br>mov CL,16
<br>shld EBX,ESI,CL ;EBX=80001234h,
<br>;ESI=12340000h, CF=0
<br>
<br> 
<br>
<br>SHR Логический сдвиг вправо
<br>
<br>
<br>Команда shr осуществляет сдвиг вправо всех битов операнда. Младший бит операнда поступает в флаг CF. Если команда записана в формате
<br>
<br>SHR операнд,1
<br>
<br>сдвиг осуществляется на 1 бит. В старший бит операнда загружается 0, а младший теряется. Если команда записана в формате
<br>
<br>SHR onepand,CL
<br>
<br>сдвиг осуществляется на число бит, указанное в регистре-счетчике CL, при этом в процессе последовательных сдвигов старшие биты операнда заполняются нулями, а младшие, пройдя через флаг CF, теряются (рис. П11).
<br>
<br>
<br>
<br>Рис. П11. Действие команды shr.
<br>
<br>В качестве операнда можно указывать любой регистр (кроме сегментного) или ячейку памяти размером как в байт, так и в слово. Не допускается использовать в качестве операнда непосредственное значение. Команда воздействует на флаги CF, OF, PF, SF и ZF.
<br>
<br>Пример 1
<br>
<br>
<br>mov AL,7
<br>shr AL,1 ;AL=3, CF=1
<br>
<br>Пример 2
<br>
<br>
<br>mov AX, lFF0h
<br>mov CL,4
<br>shr AX,CL ;AX=01FFh, CF=0
<br>
<br>Пример 3
<br>
<br>
<br>mov DX,9513h
<br>mov CL,8
<br>shr DX,CL ;DX=0095h, CF=0
<br>
<br> Допустим сдвиг 32-битовых операндов. Допустимо указание числа бит сдвига как с помощью регистра CL, так и непосредственным значением. Максимальная величина сдвига составляет 31 бит.
<br>
<br>Пример 1
<br>
<br>
<br>mov ESI,0FFFF0009h
<br>shr ESI,8 ;ESI=00FFFF00h, CF=0
<br>
<br>Пример 2
<br>
<br>
<br>; В полях данных
<br>mem dd 11111111h
<br>;B программном сегменте
<br>shr mem,12 ;mem=00011111h, CF=0
<br>
<br> 
<br>
<br>386+ SHRD Логический сдвиг вправо с двойной точностью
<br>
<br>
<br>Трехоперандная команда shrd с операндами opl, ор2 и орЗ осуществляет сдвиг вправо первого из своих операндов opl. Число битов сдвига определяется третьим операндом орЗ. По мере сдвига операнда opl вправо выдвигаемые из него младшие биты, пройдя через флаг CF, теряются, а на освобождающиеся места со стороны его старших битов поступают младшие биты второго операнда ор2, как если бы он вдвигался своим правым (младшим) концом в opl. Однако после завершения сдвига значение операнда ор2 не изменяется (рис. П12). Во флаге CF остается последний выдвинутый из операнда opl бит. Максимальное число битов сдвига составляет 31.
<br>В качестве первого операнда opl можно указывать 16- или 32-разрядный регистр общего назначения или 16- или 32-битовую ячейку памяти. Вторым операндом ор2 может служить только 16- или 32-разрядный регистр общего назначения.
<br>
<br>
<br>
<br>Рис. П12. Действие команды shrd.
<br>
<br>Третий операнд, характеризующий число битов сдвига, может находиться в регистре CL или быть непосредственным значением.
<br>Команда воздействует на флаги OF, SF, ZF, PF и CF.
<br>
<br>Пример 1
<br>
<br>
<br>mov AX,0C001h
<br>mov BX,900Eh
<br>shrd AX,BX,1 ;AX=6000h, BX=900Eh, CF=1
<br>
<br>Пример 2
<br>
<br>
<br>mov AX,0C001h
<br>mov BX,900Eh
<br>shrd AX,BX,2 ;AX=B000h, BX=900Eh, CF=0
<br>
<br>Пример 3
<br>
<br>
<br>mov AX,0C001h
<br>mov BX,900Eh
<br>shrd AX,BX,3 ;AX=D800h, BX=900Eh, CF=0
<br>
<br>Пример 4
<br>
<br>
<br>mov EBX,0FFCS000h
<br>mov ESI,12345678h
<br>mov CL,16
<br>shrd EBX,ESI,CL ;EBX=5678FFC8h,
<br>;ESI=12345678h, CF=0
<br>
<br> 
<br>
<br>386P+ SIDT Сохранение в памяти содержимого регистра таблицы дескрипторов прерываний
<br>
<br>Команда копирует содержимое регистра таблицы дескрипторов прерываний IDTR (линейный базовый адрес таблицы и ее границу) в поле из 6 байт, указанное в качестве операнда.
<br>
<br> 
<br>
<br>386Р+ SLDT Сохранение содержимого регистра таблицы локальных дескрипторов
<br>
<br>
<br>Команда копирует содержимое регистра таблицы локальных дескрипторов LDTR (селектор таблицы) в 16- или 32-разрядный регистр или в 16- или 32-битовое поле памяти, указанные в качестве операнда.
<br>
<br> 
<br>
<br>386Р+ SMSW Сохранение слова состояния машины
<br>
<br>
<br>Команда smsw считывает слово состояния машины (так называется младшая половина управляющего регистра процессора CRO) и загружает его в указанный в команде 16-разрядный регистр общего назначения или 16-битовое поле памяти.
<br>Команду srnsw можно использовать для перевода процессора из реального в защищенный режим или наоборот. В первом случае после чтения слова состояния командой smsw надо установить в нем бит 0 (бит РЕ) и загрузить назад в CRO командой Imsw. Во втором случае после после чтения слова состояния командой smsw надо сбросить в нем бит 0 и загрузить назад в CRO командой Imsw.
<br>
<br> 
<br>
<br>STC Установка флага переноса
<br>
<br>
<br>Команда stc устанавливает флаг переноса CF в регистре флагов. Команда не имеет параметров и не воздействует на остальные флаги процессора.
<br>
<br>Пример
<br>
<br>
<br>stc ;Флаг CF устанавливается
<br>
<br> 
<br>
<br>STD Установка флага направления
<br>
<br>
<br>Команда STD устанавливает флаг направления DF в регистре флагов, определяя тем самым обратное направление выполнения строковых операций (в порядке убывания адресов элементов строки). Команда не имеет параметров и не воздействует на остальные флаги процессора.
<br>
<br>Пример
<br>
<br>
<br>std ;Флаг направления устанавливается
<br>
<br> 
<br>
<br>STI Установка флага прерывания
<br>
<br>Команда STI устанавливает флаг разрешения прерываний IF в регистре флагов, разрешая все аппаратные прерывания (от таймера, клавиатуры, дисков и т.д.). Команда не имеет параметров и не воздействует на остальные флаги процессора.
<br>
<br>Пример
<br>
<br>
<br>sti ;Разрешение аппаратных прерываний
<br>
<br> 
<br>
<br>STOS Запись в строку данных
<br>
<br>STOSB Запись байта в строку данных
<br>
<br>STOSW Запись слова в строку данных
<br>
<br>
<br>Команды предназначены для операций над строками (строкой называется последовательность байтов или слов памяти с любым содержимым). Они копируют содержимое регистра AL (в случае операций над байтами) или АХ (в случае операций над словами) в ячейку памяти соответствующего размера по адресу, определяемому содержимым пары регистров ES<img src="img/smilies/s5.gif" alt="">I. После операции копирования регистр DI получает положительное (если флаг DF=0) или отрицательное (если флаг DF=1) приращение. Величина приращения составляет 1 или 2 в зависимости от размера копируемого элемента.
<br>Вариант команды stos имеет формат
<br>
<br>stos строка
<br>
<br>(что не избавляет от необходимости инициализировать регистры ES<img src="img/smilies/s5.gif" alt="">I адресом строки строка). Заменить сегментный регистр ES нельзя.
<br>Рассматриваемые команды могут предваряться префиксом повторения rep. В этом случае они повторяются СХ раз, заполняя последовательные ячейки памяти одним и тем же содержимым регистра AL или АХ. Команда не воздействует на флаги процессора.
<br>
<br>Пример 1
<br>
<br>
<br>;В полях данных сегмента данных, адресуемого через ES:
<br>id db &#039;ID:&#039;
<br>;В программном сегменте:
<br>eld ;Движение по строке вперед
<br>mov DI,offset id+3;DI -&gt; за знаком &#039;:&#039;
<br>mov AL,&#039;3&#039; ;Код ASCII цифры 3
<br>stosb ;Отправим в строку
<br>mov AL,&#039;9&#039; ;Код ASCII цифры 9
<br>stosb ;Отправим в строку
<br>;Теперь в строке id записано &#039;ID:39&#039;
<br>
<br>Пример 2
<br>
<br>
<br>;В полях данных сегмента данных, адресуемого через ES:
<br>array dw 10000 dup (?) ;Место под массив слов
<br>; В программном сегменте:
<br>mov AX,-1 ;Число-заполнитель
<br>mov CX,10000 ;Заполнить 10000 слов
<br>сld ;Движение по строке вперед
<br>lea DI,array ;ES<img src="img/smilies/s5.gif" alt="">I ® array
<br>rep stosw ;Bce 10000 элементов массива
<br>;получают значение -1 (FFFFh)
<br>
<br>Пример 3
<br>
<br>
<br>;В полях данных сегмента данных, адресуемого через ES:
<br>line db 80 dup (&#039; &#039;) ;Пустая пока строка
<br>;В программном сегменте:
<br>mov AL,&#039;&gt;&#039; ;Код ASCII знака &#039;&gt;&#039;
<br>mov CX,5 ;Заполнить 5 слов
<br>eld ;Движение по строке вперед
<br>lea DI,line ;ES<img src="img/smilies/s5.gif" alt="">I -&quot; line
<br>rep stos line ;Первые 5 байт строки line
<br>;заполняются кодом ASCII
<br>;знака &#039; &gt;&#039;
<br>
<br>Пример 4
<br>
<br>
<br>;В полях данных сегмента данных, адресуемого через ES:
<br>line dw 80 dup (0) ;Строка, заполненная нулями
<br>;В программном сегменте:
<br>mov AL,&#039;&gt;&#039; ;Код ASCII знака &#039;&gt;&#039;
<br>mov AH,31h ;Атрибут (синий по бирюзовому)
<br>mov CX,5 ; Заполнить 5 слов
<br>сld ;Движение по строке вперед
<br>lea DI,line ;ES<img src="img/smilies/s5.gif" alt="">I -&quot; line
<br>rep stos line ;Первые 5 слов строки line
<br>;заполняются кодом ASCII
<br>;знака &#039;&gt;&#039;вместе с атрибутом
<br>;для последующего вывода на экран
<br>
<br> 
<br>
<br>386+ STOSD Запись двойного слова в строку данных
<br>
<br>
<br>Команда аналогична командам МП 86 stosb и stosw, но позволяет записать в строку, адресуемую через регистры ES:EDI, двойное слово из регистра ЕАХ.
<br>
<br>Пример
<br>
<br>
<br>; В полях данных
<br>dat dd 12789,2,550000,100000
<br>; В программном сегменте
<br>mov ЕАХ,444777
<br>push DS
<br>pop ES ;ES=DS
<br>mov DI, off set dat
<br>add DI,4*2 ;DS:SI -&quot; 3-й элемент массива
<br>;чисел
<br>stosd ;dat=12789,2,444777,100000
<br>
<br> 
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=55293&amp;user=3867&amp;forum_n=5&amp;topic=3996&amp;page=1&amp;anchor=4" class="addthx" data-post="55293"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]Ura_Orlov[/b]','')">Ura_Orlov</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.2 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.38'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=3867">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 февраля 2006 01:03 <br><script type="text/javascript">QU('Ura_Orlov','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ura_Orlov" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=3996&amp;page=1#5');return false;">#5</a> </span><div align=left><br>
386P+ STR Сохранение содержимого регистра состояния задачи
<br>
<br>Команда str копирует содержимое регистра задачи TR (селектор сегмента состояния задачи) в двухбайтовый регистр общего назначения или 16-битовую ячейку памяти, указанные в качестве операнда.
<br>
<br> 
<br>
<br>SUB Вычитание целых чисел
<br>
<br>
<br>Команда sub вычитает второй операнд (источник) из первого (приемника) и помещает результат на место первого операнда. Исходное значение первого операнда (уменьшаемое) теряется. Таким образом, если команду вычитания записать в общем виде
<br>
<br>sub операнд_1, операнд_2
<br>
<br>то ее действие можно условно изобразить следующим образом:
<br>
<br>операнд_1 - операнд_2 -&gt; операнд_1
<br>
<br>В качестве первого операнда можно указывать регистр (кроме сегментного) или ячейку памяти, в качестве второго - регистр (кроме сегментного), ячейку памяти или непосредственное значение, однако не допускается определять оба операнда одновременно как ячейки памяти. Операнды могут быть байтами или словами и представлять числа со знаком или без знака. Команда воздействует на флаги OF, SF, ZF, AF, PF и CF.
<br>
<br>Пример 1
<br>
<br>
<br>mov AX,100
<br>mov BX,60
<br>sub АХ,ВХ ;АХ=40 (АХ-ВХ) , ВХ=60
<br>
<br>Пример 2
<br>
<br>
<br>mov DL, &#039;8 &#039; mov DH, &#039;0 &#039;
<br>sub DL,DH ;DL=8 (преобразование кода
<br>; ASCII в цифру))
<br>
<br>Пример 3
<br>
<br>
<br>; ; В полях данных
<br>datl dw -168
<br>dat2 dw 10
<br>; ; В программном сегменте
<br>mov AX,data2
<br>sub mem,AX ;mem = -178
<br>
<br> Допустимо использование 32-битовых операндов и дополнительных режимов адресации 32-разрядных процессоров.
<br>
<br>Пример
<br>
<br>
<br>mov EAX,1000000
<br>mov EBX,60000
<br>sub EAX,EBX ;EAX=40000
<br>
<br> 
<br>
<br>TEST Логическое сравнение
<br>
<br>
<br>Команда test выполняет операцию логического умножения И над двумя операндами и, в зависимости от результата, устанавливает флаги SF, ZF и PF. Флаги OF и CF сбрасываются, a AF имеет неопределенное значение. Состояние флагов можно затем проанализировать командами условных переходов. Команда test не изменяет ни один из операндов.
<br>В качестве первого операнда команды test можно указывать регистр (кроме сегментного) или ячейку памяти, в качестве второго - регистр (кроме сегментного), ячейку памяти или непосредственное значение, однако не допускается определять оба операнда одновременно как ячейки памяти. Операнды могут быть байтами или словами и представлять числа со знаком или без знака.
<br>
<br>Правила побитового умножения:
<br>
<br>
<br>Первый операнд-бит 0101
<br>
<br>Второй операнд-бит 0011
<br>
<br>Бит результата 0001
<br>
<br>
<br>Флаг SF устанавливается в 1, если в результате выполнения команды образовалось число с установленным знаковым битом.
<br>Флаг ZF устанавливается в 1, если в результате выполнения команды образовалось число, состоящее из одних двоичных нулей.
<br>Флаг PF устанавливается в 1, если в результате выполнения команды образовалось число с четным количеством двоичных единиц в его битах.
<br>
<br>Пример 1
<br>
<br>
<br>test AX,1
<br>jne bityes ;Переход, если бит 0 в АХ установлен
<br>je bitno ;Переход, если бит 0 в АХ сброшен
<br>
<br>Пример 2
<br>
<br>
<br>test SI,8
<br>jne bityes ;Переход, если бит 3 в SI установлен
<br>je bitno ;Переход, если бит 0 в АХ сброшен
<br>
<br>Пример 3
<br>
<br>
<br>test DX,0FFFFh
<br>jz null ;Переход, если DX=0
<br>jnz smth ;Переход, если DX не 0
<br>
<br>Пример 4
<br>
<br>
<br>test CX,0F000h
<br>jne bitsyes ;Переход, если какие-либо из
<br>;4 старших битов СХ установлены
<br>je bitsno ;Переход, если все 4 старших бита
<br>; СХ сброшены
<br>
<br>Пример 5
<br>
<br>
<br>test AX,AX
<br>jz zero ;Переход, если АХ=0
<br>jnz notzero ;Переход, если АХ не 0
<br>
<br> Допустимо использование 32-битовых операндов и дополнительных режимов адресации 32-разрядных процессоров.
<br>
<br>Пример
<br>
<br>
<br>test ЕАХ,80000000h
<br>jz b31 ;Переход, если бит 31 ЕАХ равен 0
<br>jnz nob31 ;Переход, если бит 31 ЕАХ равен 1
<br>
<br> 
<br>
<br>386Р+ VERR Проверка сегмента на чтение
<br>
<br>
<br>Команда verr позволяет определить, разрешено ли чтение из сегмента, за которым закреплен селектор, передаваемый команде в качестве ее операнда. Операндом может служить 16-разрядный регистр общего назначения или 16-битовая ячейка памяти.
<br>
<br> 
<br>
<br>386Р+ VERW Проверка сегмента на запись
<br>
<br>
<br>Команда verw позволяет определить, разрешена ли запись в сегмент, за которым закреплен селектор, передаваемый команде в качестве ее операнда. Операндом может служить 16-разрядный регистр общего назначения или 16-битовая ячейка памяти.
<br>
<br> 
<br>486+ XADD Обмен и сложение
<br>
<br>Команда xadd выполняет в одной операции сложение и обмен операндов. Команда требует двух операндов, причем первый операнд должен быть ячейкой памяти, а второй - регистром. После сложения операндов исходное содержимое памяти переносится во второй операнд (регистр), а полученная сумма записывается в память (на место первого слагаемого) (рис. П13). Команда воздействует на флаги OF, SF, ZF, AF, PF и CF.
<br>
<br>
<br>
<br>Рис. П13. Действие команды xadd.
<br>
<br>Пример
<br>
<br>
<br>; В полях данных
<br>mem dw 99
<br>;В программном сегменте
<br>mov AX,48
<br>xadd mem,AX ;mem=147, AX=99
<br>
<br> 
<br>
<br>XCHG Обмен данными между операндами
<br>
<br>
<br>Команда xchg пересылает значение первого операнда во второй, а второго - в первый. В качестве любого операнда можно указывать регистр (кроме сегментного) или ячейку памяти, однако не допускается определять оба операнда одновременно как ячейки памяти. Операнды могут быть байтами или словами и представлять числа со знаком или без знака. Команда не воздействует на флаги процессора.
<br>
<br>Пример 1
<br>
<br>
<br>mov AX,OFF01h
<br>mov SI,1000h
<br>xchg AX,SI ;AX=01000h, SI=FF01h
<br>
<br>Пример 2
<br>
<br>
<br>;В полях данных:
<br>mem dw 0F0F0h
<br>;В программном сегменте
<br>mov CX,1256h
<br>xchg CX,mem ;CX=F0F0h, mem=1256h
<br>
<br>Пример 3
<br>
<br>
<br>mov AX,6031h
<br>xchg AH,AL ;AX=3160h
<br>
<br> Допустимо использование 32-битовых операндов и дополнительных режимов адресации 32-разрядных процессоров.
<br>
<br>Пример
<br>
<br>
<br>xchg ESI,EDI ;ESI и EDI обмениваются содержимым
<br>
<br> 
<br>
<br>XLAT Табличная трансляция
<br>
<br>
<br>Команда xlat осуществляет выборку байта из массива байтов, который в этом случае называют таблицей трансляции. В регистре ВХ должен находиться относительный адрес таблицы, а в регистре AL - смещение в таблице к выбираемому байту (его индекс). Выбранный байт загружается в регистр AL, замещая находившееся в нем смещение. Длина таблицы может достигать 256 байт. Таблица должна находиться в сегменте данных, адресуемом через сегментный регистр DS. Замена сегмента не допускается. Команда xlat не имеет параметров, но требует предварительной настройки регистров ВХ и AL. Команда не воздействует на флаги процессора.
<br>
<br>Пример
<br>
<br>
<br>;Пример демонстрирует преобразование первых 14 скен-кодов
<br>;(фактически это скен-коды клавиш верхнего ряда
<br>;клавиатуры) в коды ASCII соответствующих символов
<br>; В полях данных:
<br>table db 0,27, &#039; 1234567890- = &#92;&#039;;Таблица кодов ASCII
<br>;В программном сегменте
<br>lea BX,table
<br>mov AL,5 ;Скен-код 5 клавиши &lt;4/&#036;&gt;
<br>xlat ;AL=34h, код ASCII символа 4
<br>
<br> 
<br>
<br>386+ XLAT
<br>
<br>386+ XLATB
<br>
<br>
<br>Команда xlatb эквивалентна команде xlat МП 86 за исключением того, что для 32-разрядных приложений относительный адрес таблицы размещается в расширенном регистре ЕВХ.
<br>Команда xlat может иметь в качестве операнда относительный адрес таблицы трансляции; в этом случае помещение адреса таблицы в регистр ЕВХ не требуется. Действие команды от этого не изменяется, однако возможна замена сегмента.
<br>
<br>Пример
<br>
<br>
<br>;В сегменте, адресуемом через сегментный регистр ES:
<br>table db 0,27,&#039;1234567890-=&#92;&#039;;Таблица кодов ASCII
<br>;В программном сегменте
<br>mov AL,13 ;Скен-код клавиши &lt;=/+&gt;
<br>xlat ES:table ;AL=3Dh, код ASCII символа =
<br>
<br> 
<br>
<br>XOR Логическое ИСКЛЮЧАЮЩЕЕ ИЛИ
<br>
<br>
<br>Команда хог выполняет операцию логического (побитового) ИСКЛЮЧАЮЩЕГО ИЛИ над своими двумя операндами. Результат операции замещает первый операнд; второй операнд не изменяется. Каждый бит результата устанавливается в 1, если соответствующие биты операндов различны, и сбрасывается в 0, если соответствующие биты операндов совпадают.
<br>В качестве первого операнда команды хог можно указывать регистр (кроме сегментного) или ячейку памяти, в качестве второго - регистр (кроме сегментного), ячейку памяти или непосредственное значение, однако не допускается определять оба операнда одновременно как ячейки памяти. Операнды могут быть байтами или словами. Команда воздействует на флаги OF, SF, ZF, PF и CF, причем флаги OF и CF всегда сбрасываются, а остальные флаги устанавливаются в зависимости от результата.
<br>
<br>Правила побитового ИСКЛЮЧАЮЩЕГО ИЛИ:
<br>
<br>
<br>Первый операнд-бит 0101
<br>
<br>Второй операнд-бит 0011
<br>
<br>Бит результата 0110
<br>
<br>Пример 1
<br>
<br>
<br>mov AX,0Fh
<br>хог AX,0FFFFh ;AX=FFF0h
<br>
<br>Пример 2
<br>
<br>
<br>хог ВХ,ВХ ;Обнуление ВХ
<br>
<br>Пример 3
<br>
<br>
<br>mov SI,0AAAAh
<br>mov BX,5555h
<br>xor SI,BX ;SI=FFFFh,BX=5555h
<br>
<br> Допустимо использование 32-битовьгх операндов и дополнительных режимов адресации 32-разрядных процессоров.
<br>
<br>Пример
<br>
<br>
<br>mov EAX,4444AAAAh
<br>xor EAX,4441AAACh ;EAX=00050006h
<br>
<br> 
<br>
<br>Фу. Всё!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=55294&amp;user=3867&amp;forum_n=5&amp;topic=3996&amp;page=1&amp;anchor=5" class="addthx" data-post="55294"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]PE_Kill[/b]','')">PE_Kill</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3232.gif" alt=""><br><span class=txtSm>Ранг: 793.4 <font color=magenta>(<b>! !</b>)</font>, 568thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.59'>Активность: 0.74<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3232">Участник</a><br><font color=blue>Шаман</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 февраля 2006 12:11 <br><script type="text/javascript">QU('PE_Kill','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=PE_Kill" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=3996&amp;page=1#6');return false;">#6</a> </span><div align=left><br>
Надо было сюда какую нибудь книгу запостить. Нах аттачи!
<br><br><font size="1"><i>-----<br>Yann Tiersen best and do not fuck</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=55319&amp;user=3232&amp;forum_n=5&amp;topic=3996&amp;page=1&amp;anchor=6" class="addthx" data-post="55319"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=5&amp;topic=3996&amp;page=0.html">&lt;&lt;</a> .  <a href="action=vthread&amp;forum=5&amp;topic=3996&amp;page=0.html">1</a> . <b>2</b> .</b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Справочник по командам ассемблера</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#7" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="5">
<input type="hidden" name="topic" value="3996">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=3996" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
