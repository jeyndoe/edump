<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>как в ida автоматически загружать  .pdb из подключившейся .dll - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Как в IDA 6.8 при загрузке DLL библиотеки автоматически загрузить PDB ( отладочные символы ) После загрузки DLL в память, адрес всегда разный например 0x6DЕ10000, при второй загрузки уже 0x69Е30000 Приходится вручную каждый раз">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=55995'>tyns777</a>, <a target='_blank' href='?action=userinfo&amp;user=6859'>cppasm</a>, <a target='_blank' href='?action=userinfo&amp;user=55996'>dutyfree</a>, <a target='_blank' href='?action=userinfo&amp;user=28016'>asfa</a> (+6 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> как в ida автоматически загружать  .pdb из подключившейся .dll</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]olia64[/b]','')">olia64</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 1.9 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.81'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=41353">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 сентября 2016 16:12 <br><script type="text/javascript">QU('olia64','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=olia64" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24319.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Как в IDA 6.8 при загрузке DLL библиотеки автоматически загрузить PDB ( отладочные символы ) <br>После загрузки DLL в память, адрес всегда разный например 0x6DЕ10000, при второй загрузки уже 0x69Е30000<br>Приходится вручную каждый раз выполнять загрузку PDB, это весьма утомительно.<br>Загружаю через GUI Ida  Load -&gt; Load File -&gt; PDB file...<br><br>Варианты решения:<br>1) Указать напрямую куда в память грузить DLL, чтоб адрес входа был всегда статическим.<br>2) Загружать pdb автоматически в зависимости от динамической точки входа.<br>Вопрос как это сделать на практике?<br>Пункт 2 более предпочтительный, потому что адреса брекпоинтов в эту DLL сохраняются старыми в итоге<br>ставить новые BP утомительно и медленно. <br><br>PS: Ищу специалиста  IDA 6.8 в Москве для того чтобы меня потренировал. Работу оплачу.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=367732&amp;user=41353&amp;forum_n=5&amp;topic=24319.html&amp;page=0&amp;anchor=1" class="addthx" data-post="367732"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]reversecode[/b]','')">reversecode</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/15381.gif" alt=""><br><span class=txtSm>Ранг: 1053.6 <b><u>(!!!!)</u></b>, 1078thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.43'>Активность: 1.06<span style='color:red'>&searr;</span>0.81</span><br>Статус: <a href="action=userinfo&amp;user=15381">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 сентября 2016 16:19 &middot; Поправил: reversecode <br><script type="text/javascript">QU('reversecode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=reversecode" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24319.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
ASLR в винде отключить - не ?<br><br>ps ближайшие платные курсы IDA у ильфака в бельгии
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=367733&amp;user=15381&amp;forum_n=5&amp;topic=24319.html&amp;page=0&amp;anchor=2" class="addthx" data-post="367733"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]olia64[/b]','')">olia64</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 1.9 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.81'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=41353">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 сентября 2016 18:21 <br><script type="text/javascript">QU('olia64','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=olia64" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24319.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
1)<br>Windows 7 x64 Pro  SP1<br>Отключаю ASLR через реестр<br>cmd - &gt; regedit.exe<br>В ветку<br>HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management\ <br>Добавляю параметр<br>&quot;MoveImages&quot;=dword:00000000<br>После ребута, в Process Explorer  метки ASLR у IDA -&gt; отлаживаемого процесса нет.<br><br>Но DLL все равно грузится  по разным смещениям.<br>Возможно, я неправильно отключил ASLR, но тогда как правильно отключить???<br><br>2) К Ильфаку в бельгию не поеду, нужен человек в теме реверса, IDA 6.8, ассемблера, который желает<br>со мной повозится(поучить меня), ну, а в качестве бонуса могу оплатить часы потраченные на меня.<br>Работа подразумевает длительное сотрудничество, вероятно, дружеские отношения в последствии.<br>Мне подойдет любой специалист в реверсе , готовый на контакт.<br><br><b>Добавлено спустя 1 час 11 минут</b><br>1) <br>IDA - &gt; <br>Debugger -&gt; Debugger Options...<br><br>2)<br>Включаю галочку AutoLoad PDB files...<br><br>3)<br>Теперь загружает автоматом мою EXE и DLL, но при этом IDA предлагает вручную указать путь к<br>25 виндовым DLL , которых у меня нет. Приходится 28 раз нажимать Cancel<br><br>PDB: could not process file C:\Windows\SysWOW64\sechost.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\syswow64\CRYPTBASE.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\syswow64\NSI.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\syswow64\USERENV.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\SysWOW64\MPR.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\syswow64\WS2_32.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\SysWOW64\WINSPOOL.DRV with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\syswow64\SHLWAPI.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\SysWOW64\apphelp.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\syswow64\USP10.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\syswow64\OLEAUT32.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br><br>Как исправить?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=367739&amp;user=41353&amp;forum_n=5&amp;topic=24319.html&amp;page=0&amp;anchor=3" class="addthx" data-post="367739"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Alf[/b]','')">Alf</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 56.2 (постоянный), 22thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.87'>Активность: 0.03<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 сентября 2016 19:38 <br><script type="text/javascript">QU('Alf','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Alf" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24319.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<I>olia64 пишет:<br>Возможно, я неправильно отключил ASLR, но тогда как правильно отключить???<br> </I><br>для длл нужно хакать в РЕ хидере в опции DllCharacteristics фичу &quot;DLL can move&quot; - т.е. минус 40h от имеющейся суммы офич
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=367740&amp;user=242&amp;forum_n=5&amp;topic=24319.html&amp;page=0&amp;anchor=4" class="addthx" data-post="367740"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]olia64[/b]','')">olia64</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 1.9 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.81'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=41353">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 сентября 2016 21:33 &middot; Поправил: <a href="action=stats#mods">Модератор</a> <br><script type="text/javascript">QU('olia64','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=olia64" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24319.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
Баг 1.<br>При  включенной опции дебагера AutoLoad PDB files... и отсутствии pdb файлов к DLL<br>невозможно отключить появление окна 28 раз ( столько DLL у которых нет pdb), остается только нажимать Cancel<br><br>Кто подтвердит у себя? IDA 6.8
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=367745&amp;user=41353&amp;forum_n=5&amp;topic=24319.html&amp;page=0&amp;anchor=5" class="addthx" data-post="367745"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]olia64[/b]','')">olia64</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 1.9 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 3.81'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=41353">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 сентября 2016 09:50 &middot; Поправил: olia64 <br><script type="text/javascript">QU('olia64','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=olia64" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=24319.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
plutos, эти разговоры нужно вести во флудильне, это отдаляет меня от всеобщего счастья, потому что тратит время и нервы. <br>У тебя какая версия IDA установлена?<br><br><b>Добавлено спустя 16 минут</b><br><I>Alf пишет:<br>для длл нужно хакать в РЕ хидере в опции DllCharacteristics фичу &quot;DLL can move&quot; - т.е. минус 40h от имеющейся суммы офич  </I><br>1) У тебя какая версия IDA установлена? <br>2) Про DllCharacteristics спасибо за инфу.<br>НО, предположим что программа далее будет детектить этот флаг и менять своё состояние из за этого?<br>Такое может быть или нет? Хэш exe меняется или нет? Получается, что ты предлагаешь сделать патч.<br>НО патч может изменить состояние программы и может привести к последствиям.<br>Наверняка есть способы получше? Вот, например: <br>1) IDA - &gt; Debugger -&gt; Debugger Options...<br>2) Включаю галочку AutoLoad PDB files...<br>Теперь PDB от DLL грузятся нормально автоматом на старте, внезависимости от адреса DLL в памяти, но есть фича,<br>приходится  28 раз нажать Cancel, при загрузке виндовых DLL<br>PDB: could not process file C:\Windows\SysWOW64\sechost.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\syswow64\CRYPTBASE.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>PDB: could not process file C:\Windows\syswow64\NSI.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br>Тоесть IDA предлагает для каждой виндовой dll вручную указать путь к DLL<br>Вопрос 1. Как не имея эти pdb, сказать IDA , что если этой PDB у меня нет, НЕ НАДО ПРОСИТЬ УКАЗАТЬ ПУТЬ ВРУЧНУЮ!<br>Вопрос 2. Откуда скачать эти pdb под Win7 x64 SP1 ( ссылка ), как альтернативное кривое решение.<br>Включать интернет на виртуалке где лежит IDA не хочется в целях безопасности.<br><br>Неужели в настройках IDA нет параметра, CANCEL для всех ( галка - запомнить выбор ) в окне выбора PDB для DLL , которое всплывает при каждом событии PDB: could not process file C:\Windows\SysWOW64\sechost.dll with DIA: Failed to open the file, or the file has an invalid format (E_PDB_NOT_FOUND)<br><br>PS^Получается чтоб работать в IDA нужно хакнуть саму IDA . Это патч размером в 1 байт ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=367770&amp;user=41353&amp;forum_n=5&amp;topic=24319.html&amp;page=0&amp;anchor=6" class="addthx" data-post="367770"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> как в ida автоматически загружать  .pdb из подключившейся .dll</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=24319" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
