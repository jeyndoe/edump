<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Несколько шаблонов в одном preg_match_all - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Не силён в регулярках, помогите объединить в один шаблон: Делаю так: Code:       preg_match_all('|name=&quot;(.*)&quot;|Uis',&nbsp;$text,&nbsp;$name);preg_match_all('|modificationDate=&quot;(.*)&quot;|Uis',&nbsp;$text,&nbsp;$dat);">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=55914'>Kybyx</a>, <a target='_blank' href='?action=userinfo&amp;user=44014'>user99</a> (+2 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/mod.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=7&sortBy=0&page=0.html"><b>Оффтоп</b></a> <b class=bulletHead>&#8212;&#8250;</b> Несколько шаблонов в одном preg_match_all</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2011 02:30 &middot; Поправил: ToBad <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=19220.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Не силён в регулярках, помогите объединить в один шаблон:<br>Делаю так:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">preg_match_all<span class="hl_char">(</span><span class="hl_quote">'|name=&quot;(.*)&quot;|Uis'</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>text<span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>name<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">preg_match_all<span class="hl_char">(</span><span class="hl_quote">'|modificationDate=&quot;(.*)&quot;|Uis'</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>text<span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>dat<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
 <br>Вырезаю имя и дату модификации, нужно только это. Обрабатываю этот текст:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_char">&lt;</span><span class="hl_char">?</span>xml&nbsp;version<span class="hl_char">=</span><span class="hl_quote">&quot;1.0&quot;</span>&nbsp;encoding<span class="hl_char">=</span><span class="hl_quote">&quot;UTF-8&quot;</span>&nbsp;standalone<span class="hl_char">=</span><span class="hl_quote">&quot;no&quot;</span><span class="hl_char">?</span><span class="hl_char">&gt;</span></li><li class="hl_l1"><span class="hl_char">&lt;</span>result<span class="hl_char">&gt;</span></li><li class="hl_l0"><span class="hl_char">&lt;</span>publicFiles&nbsp;familyFriendly<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;includeLinks<span class="hl_char">=</span><span class="hl_quote">&quot;false&quot;</span><span class="hl_char">&gt;</span></li><li class="hl_l1"><span class="hl_char">&lt;</span>items&nbsp;t<span class="hl_char">=</span><span class="hl_quote">&quot;images&quot;</span><span class="hl_char">&gt;</span></li><li class="hl_l0"><span class="hl_char">&lt;</span>item&nbsp;contentType<span class="hl_char">=</span><span class="hl_quote">&quot;image/jpeg&quot;</span>&nbsp;hasThumbnail<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;modificationDate<span class="hl_char">=</span><span class="hl_quote">&quot;1320330440&quot;</span>&nbsp;name<span class="hl_char">=</span><span class="hl_quote">&quot;3x12_maket(КВ-0127Б1,Б2).jpg&quot;</span>&nbsp;size<span class="hl_char">=</span><span class="hl_quote">&quot;51932&quot;</span>&nbsp;url<span class="hl_char">=</span><span class="hl_quote">&quot;...3x12_maket(КВ-0127Б1,Б2).jpg/&quot;</span><span class="hl_char">&gt;</span>3x12_maket<span class="hl_char">(</span>КВ<span class="hl_char">-</span>0127Б1<span class="hl_char">,</span>Б2<span class="hl_char">)</span><span class="hl_char">.</span>jpg<span class="hl_char">&lt;</span><span class="hl_char">/</span>item<span class="hl_char">&gt;</span></li><li class="hl_l1"><span class="hl_char">&lt;</span>item&nbsp;contentType<span class="hl_char">=</span><span class="hl_quote">&quot;image/jpeg&quot;</span>&nbsp;hasThumbnail<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;modificationDate<span class="hl_char">=</span><span class="hl_quote">&quot;1320328499&quot;</span>&nbsp;name<span class="hl_char">=</span><span class="hl_quote">&quot;3x6_bajana(КВ-0106Б).jpg&quot;</span>&nbsp;size<span class="hl_char">=</span><span class="hl_quote">&quot;60333&quot;</span>&nbsp;url<span class="hl_char">=</span><span class="hl_quote">&quot;...3x6_bajana(КВ-0106Б).jpg/&quot;</span><span class="hl_char">&gt;</span>3x6_bajana<span class="hl_char">(</span>КВ<span class="hl_char">-</span>0106Б<span class="hl_char">)</span><span class="hl_char">.</span>jpg<span class="hl_char">&lt;</span><span class="hl_char">/</span>item<span class="hl_char">&gt;</span></li><li class="hl_l0"><span class="hl_char">&lt;</span>item&nbsp;contentType<span class="hl_char">=</span><span class="hl_quote">&quot;image/jpeg&quot;</span>&nbsp;hasThumbnail<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;modificationDate<span class="hl_char">=</span><span class="hl_quote">&quot;1320328251&quot;</span>&nbsp;name<span class="hl_char">=</span><span class="hl_quote">&quot;3x6_bajana(КВ 0127Б1, Б2).jpg&quot;</span>&nbsp;size<span class="hl_char">=</span><span class="hl_quote">&quot;60640&quot;</span>&nbsp;url<span class="hl_char">=</span><span class="hl_quote">&quot;...3x6_bajana(КВ%200127Б1,%20Б2).jpg/&quot;</span><span class="hl_char">&gt;</span>3x6_bajana<span class="hl_char">(</span>КВ&nbsp;0127Б1<span class="hl_char">,</span>&nbsp;Б2<span class="hl_char">)</span><span class="hl_char">.</span>jpg<span class="hl_char">&lt;</span><span class="hl_char">/</span>item<span class="hl_char">&gt;</span></li><li class="hl_l1"><span class="hl_char">&lt;</span>item&nbsp;contentType<span class="hl_char">=</span><span class="hl_quote">&quot;image/jpeg&quot;</span>&nbsp;hasThumbnail<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;modificationDate<span class="hl_char">=</span><span class="hl_quote">&quot;1320329521&quot;</span>&nbsp;name<span class="hl_char">=</span><span class="hl_quote">&quot;3x6_balzaka(5084).jpg&quot;</span>&nbsp;size<span class="hl_char">=</span><span class="hl_quote">&quot;61330&quot;</span>&nbsp;url<span class="hl_char">=</span><span class="hl_quote">&quot;...3x6_balzaka(5084).jpg/&quot;</span><span class="hl_char">&gt;</span>3x6_balzaka<span class="hl_char">(</span><span class="hl_number">5084</span><span class="hl_char">)</span><span class="hl_char">.</span>jpg<span class="hl_char">&lt;</span><span class="hl_char">/</span>item<span class="hl_char">&gt;</span></li><li class="hl_l0"><span class="hl_char">&lt;</span>item&nbsp;contentType<span class="hl_char">=</span><span class="hl_quote">&quot;image/jpeg&quot;</span>&nbsp;hasThumbnail<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;modificationDate<span class="hl_char">=</span><span class="hl_quote">&quot;1320329352&quot;</span>&nbsp;name<span class="hl_char">=</span><span class="hl_quote">&quot;3x6_balzaka(K130b).jpg&quot;</span>&nbsp;size<span class="hl_char">=</span><span class="hl_quote">&quot;60935&quot;</span>&nbsp;url<span class="hl_char">=</span><span class="hl_quote">&quot;...3x6_balzaka(K130b).jpg/&quot;</span><span class="hl_char">&gt;</span>3x6_balzaka<span class="hl_char">(</span>K130b<span class="hl_char">)</span><span class="hl_char">.</span>jpg<span class="hl_char">&lt;</span><span class="hl_char">/</span>item<span class="hl_char">&gt;</span></li><li class="hl_l1"><span class="hl_char">&lt;</span>item&nbsp;contentType<span class="hl_char">=</span><span class="hl_quote">&quot;image/jpeg&quot;</span>&nbsp;hasThumbnail<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;modificationDate<span class="hl_char">=</span><span class="hl_quote">&quot;1320329196&quot;</span>&nbsp;name<span class="hl_char">=</span><span class="hl_quote">&quot;3x6_balzaka(ki5511-1).jpg&quot;</span>&nbsp;size<span class="hl_char">=</span><span class="hl_quote">&quot;61472&quot;</span>&nbsp;url<span class="hl_char">=</span><span class="hl_quote">&quot;...3x6_balzaka(ki5511-1).jpg/&quot;</span><span class="hl_char">&gt;</span>3x6_balzaka<span class="hl_char">(</span>ki5511<span class="hl_char">-</span><span class="hl_number">1</span><span class="hl_char">)</span><span class="hl_char">.</span>jpg<span class="hl_char">&lt;</span><span class="hl_char">/</span>item<span class="hl_char">&gt;</span></li><li class="hl_l0"><span class="hl_char">&lt;</span>item&nbsp;contentType<span class="hl_char">=</span><span class="hl_quote">&quot;image/jpeg&quot;</span>&nbsp;hasThumbnail<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;modificationDate<span class="hl_char">=</span><span class="hl_quote">&quot;1320329003&quot;</span>&nbsp;name<span class="hl_char">=</span><span class="hl_quote">&quot;3x6_okipnoi(k60b).jpg&quot;</span>&nbsp;size<span class="hl_char">=</span><span class="hl_quote">&quot;60382&quot;</span>&nbsp;url<span class="hl_char">=</span><span class="hl_quote">&quot;...3x6_okipnoi(k60b).jpg/&quot;</span><span class="hl_char">&gt;</span>3x6_okipnoi<span class="hl_char">(</span>k60b<span class="hl_char">)</span><span class="hl_char">.</span>jpg<span class="hl_char">&lt;</span><span class="hl_char">/</span>item<span class="hl_char">&gt;</span></li><li class="hl_l1"><span class="hl_char">&lt;</span>item&nbsp;contentType<span class="hl_char">=</span><span class="hl_quote">&quot;image/jpeg&quot;</span>&nbsp;hasThumbnail<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;modificationDate<span class="hl_char">=</span><span class="hl_quote">&quot;1320329869&quot;</span>&nbsp;name<span class="hl_char">=</span><span class="hl_quote">&quot;3x6_perova.jpg&quot;</span>&nbsp;size<span class="hl_char">=</span><span class="hl_quote">&quot;60666&quot;</span>&nbsp;url<span class="hl_char">=</span><span class="hl_quote">&quot;...3x6_perova.jpg/&quot;</span><span class="hl_char">&gt;</span>3x6_perova<span class="hl_char">.</span>jpg<span class="hl_char">&lt;</span><span class="hl_char">/</span>item<span class="hl_char">&gt;</span></li><li class="hl_l0"><span class="hl_char">&lt;</span>item&nbsp;contentType<span class="hl_char">=</span><span class="hl_quote">&quot;image/jpeg&quot;</span>&nbsp;hasThumbnail<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;modificationDate<span class="hl_char">=</span><span class="hl_quote">&quot;1320329749&quot;</span>&nbsp;name<span class="hl_char">=</span><span class="hl_quote">&quot;3x6_vasilk.jpg&quot;</span>&nbsp;size<span class="hl_char">=</span><span class="hl_quote">&quot;60635&quot;</span>&nbsp;url<span class="hl_char">=</span><span class="hl_quote">&quot;...3x6_vasilk.jpg/&quot;</span><span class="hl_char">&gt;</span>3x6_vasilk<span class="hl_char">.</span>jpg<span class="hl_char">&lt;</span><span class="hl_char">/</span>item<span class="hl_char">&gt;</span></li><li class="hl_l1"><span class="hl_char">&lt;</span>item&nbsp;contentType<span class="hl_char">=</span><span class="hl_quote">&quot;image/jpeg&quot;</span>&nbsp;hasThumbnail<span class="hl_char">=</span><span class="hl_quote">&quot;true&quot;</span>&nbsp;modificationDate<span class="hl_char">=</span><span class="hl_quote">&quot;1320330056&quot;</span>&nbsp;name<span class="hl_char">=</span><span class="hl_quote">&quot;3x6_vishgor(29089).jpg&quot;</span>&nbsp;size<span class="hl_char">=</span><span class="hl_quote">&quot;61208&quot;</span>&nbsp;url<span class="hl_char">=</span><span class="hl_quote">&quot;...3x6_vishgor(29089).jpg/&quot;</span><span class="hl_char">&gt;</span>3x6_vishgor<span class="hl_char">(</span><span class="hl_number">29089</span><span class="hl_char">)</span><span class="hl_char">.</span>jpg<span class="hl_char">&lt;</span><span class="hl_char">/</span>item<span class="hl_char">&gt;</span></li><li class="hl_l0"><span class="hl_char">&lt;</span><span class="hl_char">/</span>items<span class="hl_char">&gt;</span></li><li class="hl_l1"><span class="hl_char">&lt;</span><span class="hl_char">/</span>publicFiles<span class="hl_char">&gt;</span></li><li class="hl_l0"><span class="hl_char">&lt;</span><span class="hl_char">/</span>result<span class="hl_char">&gt;</span></li>        </ol>
    </div>
</div></div>
<br><br>p.s. В итоге нужен массив, который сортирую к ключу modificationDate. Есть два рабочих куска гавнокода, второй чуть быстрее первого, но тоже не красивый. Можно тут что-то оптимизировать?<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">preg_match_all<span class="hl_char">(</span><span class="hl_quote">'|name=&quot;(.*)&quot;|Uis'</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>text<span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>name<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">preg_match_all<span class="hl_char">(</span><span class="hl_quote">'|modificationDate=&quot;(.*)&quot;|Uis'</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>text<span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>dat<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_char">$</span>array<span class="hl_char">=</span>array_combine<span class="hl_char">(</span><span class="hl_char">$</span>dat<span class="hl_char">[</span><span class="hl_number">1</span><span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>name<span class="hl_char">[</span><span class="hl_number">1</span><span class="hl_char">]</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">krsort<span class="hl_char">(</span><span class="hl_char">$</span>array<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">preg_match_all<span class="hl_char">(</span><span class="hl_quote">'|modificationDate=&quot;(.*)&quot; size=&quot;|Uis'</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>text<span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>name<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">foreach&nbsp;<span class="hl_char">(</span><span class="hl_char">$</span>name<span class="hl_char">[</span><span class="hl_number">1</span><span class="hl_char">]</span>&nbsp;as&nbsp;<span class="hl_char">$</span>v<span class="hl_char">)</span>&nbsp;{</li><li class="hl_l0"><span class="hl_char">$</span>v<span class="hl_char">=</span>explode<span class="hl_char">(</span><span class="hl_quote">'&quot; name=&quot;'</span><span class="hl_char">,</span><span class="hl_char">$</span>v<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span class="hl_char">$</span>array<span class="hl_char">[</span><span class="hl_char">$</span>v<span class="hl_char">[</span><span class="hl_number">0</span><span class="hl_char">]</span><span class="hl_char">]</span><span class="hl_char">=</span><span class="hl_char">$</span>v<span class="hl_char">[</span><span class="hl_number">1</span><span class="hl_char">]</span><span class="hl_comment">;}</span></li><li class="hl_l0">krsort<span class="hl_char">(</span><span class="hl_char">$</span>array<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=294711&amp;user=702&amp;forum_n=7&amp;topic=19220.html&amp;page=0&amp;anchor=1" class="addthx" data-post="294711"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]PE_Kill[/b]','')">PE_Kill</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3232.gif" alt=""><br><span class=txtSm>Ранг: 793.4 <font color=magenta>(<b>! !</b>)</font>, 568thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.59'>Активность: 0.74<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3232">Участник</a><br><font color=blue>Шаман</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2011 05:39 <br><script type="text/javascript">QU('PE_Kill','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=PE_Kill" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=19220.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Это же XML, возьми SimplePie
<br><br><font size="1"><i>-----<br>Yann Tiersen best and do not fuck</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=294717&amp;user=3232&amp;forum_n=7&amp;topic=19220.html&amp;page=0&amp;anchor=2" class="addthx" data-post="294717"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2011 06:15 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=19220.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<I>PE_Kill пишет:<br>Это же XML, возьми SimplePie </I><br><br>Я находил класс для работы с XML, но получается громоздко и в разы медленнее.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=294720&amp;user=702&amp;forum_n=7&amp;topic=19220.html&amp;page=0&amp;anchor=3" class="addthx" data-post="294720"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]PE_Kill[/b]','')">PE_Kill</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3232.gif" alt=""><br><span class=txtSm>Ранг: 793.4 <font color=magenta>(<b>! !</b>)</font>, 568thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.59'>Активность: 0.74<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3232">Участник</a><br><font color=blue>Шаман</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2011 07:53 <br><script type="text/javascript">QU('PE_Kill','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=PE_Kill" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=19220.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
Лучший SimplePie, а если регулярками, то типа того:<br><br>preg_match_all(&#039;!modificationDate=&quot;([0-9]+)&quot;[\s]+name=&quot;(.*)&quot;[\s]+size=!Uis&#039;, &#036;text, &#036;matches);<br>if (isset(&#036;matches[0]) &amp;&amp; isset(&#036;matches[1]) &amp;&amp; isset(&#036;matches[2])) {<br>  for (&#036;i=0; &#036;i&lt; count(&#036;matches[0]); &#036;i++) {<br>    echo &quot;Date: &quot;.&#036;matches[1][&#036;i].&quot;, Name: &quot;.&#036;matches[2][&#036;i].&quot;&lt;br/&gt;&quot;;<br>  }<br>}<br><br>PS. Не проверял, навскидку написал.
<br><br><font size="1"><i>-----<br>Yann Tiersen best and do not fuck</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=294722&amp;user=3232&amp;forum_n=7&amp;topic=19220.html&amp;page=0&amp;anchor=4" class="addthx" data-post="294722"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]ToBad[/b]','')">ToBad</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/702.gif" alt=""><br><span class=txtSm>Ранг: 450.3 (мудрец), 13thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.67'>Активность: 0.2<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=702">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2011 15:53 <br><script type="text/javascript">QU('ToBad','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ToBad" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=7&amp;topic=19220.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>PE_Kill пишет:<br>preg_match_all(&#039;!modificationDate=&quot;([0-9]+)&quot;[\s]+name=&quot;(.*)&quot;[\s]+size=!Uis&#039;, &#036;text, &#036;matches); </I><br><br>Супер, спасибо! Это и нужно было, работает на 20% быстрее, чем мой второй код с foreach и explode.<br>Теперь так получается:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">preg_match_all<span class="hl_char">(</span><span class="hl_quote">'!modificationDate=&quot;([0-9]+)&quot;[\s]+name=&quot;(.*)&quot;[\s]+size=!Uis'</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>text<span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>matches<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span class="hl_char">$</span>array<span class="hl_char">=</span>array_combine<span class="hl_char">(</span><span class="hl_char">$</span>matches<span class="hl_char">[</span><span class="hl_number">1</span><span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">$</span>matches<span class="hl_char">[</span><span class="hl_number">2</span><span class="hl_char">]</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">krsort<span class="hl_char">(</span><span class="hl_char">$</span>array<span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=294741&amp;user=702&amp;forum_n=7&amp;topic=19220.html&amp;page=0&amp;anchor=5" class="addthx" data-post="294741"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/mod.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=7&sortBy=0&page=0.html"><b>Оффтоп</b></a> <b class=bulletHead>&#8212;&#8250;</b> Несколько шаблонов в одном preg_match_all</span></td>
</tr></table>
</div>
<a name=newreply></a>
<center><h3>У вас должно быть 20 пунктов ранга, чтобы оставлять сообщения в  этом подфоруме, но у вас только 0</h3></center><script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=19220" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
