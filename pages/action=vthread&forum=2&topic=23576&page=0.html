<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Извлечь ресурсы из прошивки и запаковать обратно - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Добрый день. Имеется желание модифицировать прошивку от плеера Cowon U5. Как выглядит в жизни:  Как выглядит у меня:   Использовал инфу: Code:       Для&nbsp;D2&nbsp;выпущено&nbsp;несколько&nbsp;маленьких&nbsp;программ&nbsp;для&nb">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=8344'>Magister Yoda</a>, <a target='_blank' href='?action=userinfo&amp;user=50833'>vasilevradislav</a> (+3 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/red.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=2&sortBy=0&page=0.html"><b>Крэки, обсуждения</b></a> <b class=bulletHead>&#8212;&#8250;</b> Извлечь ресурсы из прошивки и запаковать обратно</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]dean999[/b]','')">dean999</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.5 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 5.4'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=38791">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2015 00:26 &middot; Поправил: dean999 <br><script type="text/javascript">QU('dean999','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dean999" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=23576.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Добрый день.<br>Имеется желание модифицировать прошивку от плеера Cowon U5.<br><br>Как выглядит в жизни: <br><img src="https://pp.vk.me/c628519/v628519600/aae/azMNnT4CvUE.jpg" border="0" align="" alt=""><br><br>Как выглядит у меня:<br><img src="https://pp.vk.me/c628519/v628519600/a81/aMZglDdmOBo.jpg" border="0" align="" alt=""><br><img src="https://pp.vk.me/c628519/v628519600/a8a/wr110GWCNaY.jpg" border="0" align="" alt=""><br><img src="https://pp.vk.me/c628519/v628519600/ab5/4C5Vp6N-HyU.jpg" border="0" align="" alt=""><br><br>Использовал инфу:<br><i class=x>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">Для&nbsp;D2&nbsp;выпущено&nbsp;несколько&nbsp;маленьких&nbsp;программ&nbsp;для&nbsp;распаковки&nbsp;тем<span class="hl_char">,</span>&nbsp;увеличение&nbsp;читабельности&nbsp;шрифотов<span class="hl_char">,</span><span style="word-break: break-all">&nbsp;добавление&nbsp;нужных&nbsp;кодировок&nbsp;для&nbsp;тегов&nbsp;и&nbsp;читалки&nbsp;текста&nbsp;а&nbsp;так&nbsp;же&nbsp;скриншотов</span><span class="hl_char">.</span>&nbsp;Сейчас&nbsp;я&nbsp;кратко&nbsp;расскажу&nbsp;о&nbsp;каждой<span class="hl_char">:</span></li><li class="hl_l1">D2toTGA<span class="hl_char">,</span>&nbsp;TGAtoD2&nbsp;<span class="hl_char">-</span>&nbsp;софт&nbsp;для&nbsp;распаковки&nbsp;тем<span class="hl_char">.</span>&nbsp;Просто&nbsp;складываем&nbsp;файл&nbsp;D2N_rs<span class="hl_char">.</span>bin&nbsp;в&nbsp;ту&nbsp;же&nbsp;папку&nbsp;где&nbsp;лежит&nbsp;D2toTGA&nbsp;и&nbsp;запускает&nbsp;D2toTGA<span class="hl_char">.</span>exe<span class="hl_char">,</span>&nbsp;после&nbsp;чего&nbsp;получаем&nbsp;множество&nbsp;TGA&nbsp;файлов<span class="hl_char">,</span>&nbsp;которые&nbsp;можно&nbsp;редактировать&nbsp;через&nbsp;фотошоп&nbsp;или&nbsp;другой&nbsp;софт<span class="hl_char">,</span>&nbsp;после&nbsp;редактирования<span class="hl_char">,</span>&nbsp;запускаем&nbsp;TGAtoD2<span class="hl_char">.</span>exe&nbsp;и&nbsp;он&nbsp;запаковывает&nbsp;всё&nbsp;обратно<span class="hl_char">.</span>&nbsp;Чтобы&nbsp;посмотреть&nbsp;что&nbsp;вышло&nbsp;<span class="hl_char">(</span>скриншоты<span class="hl_char">)</span>&nbsp;<span class="hl_char">-</span>&nbsp;можно&nbsp;использовать&nbsp;D2Screen<span class="hl_char">.</span>exe<span class="hl_char">,</span>&nbsp;использование&nbsp;аналогично&nbsp;D2toTGA<span class="hl_char">.</span></li><li class="hl_l0">Важно<span class="hl_char">:</span>&nbsp;чтобы&nbsp;редактировать&nbsp;темы&nbsp;для&nbsp;D2<span class="hl_char">+</span><span class="hl_char">,</span>&nbsp;или&nbsp;делать&nbsp;скриншоты&nbsp;нужно&nbsp;переименовать&nbsp;файл&nbsp;D2N_P_RS<span class="hl_char">.</span>bin&nbsp;в&nbsp;D2N_rs<span class="hl_char">.</span>bin<span class="hl_char">,</span>&nbsp;а&nbsp;перед&nbsp;копированием&nbsp;файла&nbsp;не&nbsp;плеер<span class="hl_char">,</span>&nbsp;нужно&nbsp;переименовать&nbsp;файл&nbsp;обратно<span class="hl_char">,</span>&nbsp;в&nbsp;D2N_P_RS<span class="hl_char">.</span>bin</li>        </ol>
    </div>
</div></div>
</i><br><b>Не подходит</b><br><br>Возможно истина есть в этом исходнике:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;</li><li class="hl_l1">#include&nbsp;<span class="hl_char">&lt;</span>stdio<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l0">#include&nbsp;<span class="hl_char">&lt;</span>stdlib<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l1">#include&nbsp;<span class="hl_char">&lt;</span>conio<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>const</b></span>&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;CSIZE&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">6</span><span class="hl_char">*</span><span class="hl_number">1024</span><span class="hl_char">*</span><span class="hl_number">1024</span><span class="hl_comment">;</span></li><li class="hl_l0">unsigned&nbsp;<span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_function">Data</span><span class="hl_char">[</span>CSIZE<span class="hl_char">]</span><span class="hl_comment">; </span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>int</b></span>&nbsp;main<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;argc<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>char</b></span>&nbsp;<span class="hl_char">*</span>&nbsp;argv<span class="hl_char">[</span><span class="hl_char">]</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0"><span class="hl_function"><b>int</b></span>&nbsp;i<span class="hl_char">,</span>&nbsp;j<span class="hl_char">,</span>&nbsp;n<span class="hl_char">,</span>&nbsp;c<span class="hl_char">,</span>&nbsp;size<span class="hl_char">,</span>&nbsp;xres<span class="hl_char">,</span>&nbsp;yres<span class="hl_char">,</span>&nbsp;bpp<span class="hl_comment">;</span></li><li class="hl_l1"><span class="hl_function"><b>char</b></span>&nbsp;szImage<span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_quote">&quot;img000.tga&quot;</span><span class="hl_comment">;</span></li><li class="hl_l0">FILE&nbsp;<span class="hl_char">*</span>&nbsp;f1<span class="hl_comment">;</span></li><li class="hl_l1">FILE&nbsp;<span class="hl_char">*</span>&nbsp;f2<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">(</span>f1&nbsp;<span class="hl_char">=</span>&nbsp;fopen<span class="hl_char">(</span><span class="hl_quote">&quot;D2N_rs.bin&quot;</span><span class="hl_char">,</span>&nbsp;<span class="hl_quote">&quot;rb&quot;</span><span class="hl_char">)</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">!</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span>&nbsp;</li><li class="hl_l0">{</li><li class="hl_l1">size&nbsp;<span class="hl_char">=</span>&nbsp;fread<span class="hl_char">(</span><span class="hl_char">&amp;</span><span class="hl_function">Data</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">,</span>&nbsp;CSIZE<span class="hl_char">,</span>&nbsp;f1<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">fclose<span class="hl_char">(</span>f1<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li><li class="hl_l0"><span class="hl_function">else</span></li><li class="hl_l1">{</li><li class="hl_l0">printf<span class="hl_char">(</span>&nbsp;<span class="hl_quote">&quot;ERROR: D2N_rs.bin not found\n&quot;</span>&nbsp;<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">return&nbsp;<span class="hl_number">1</span><span class="hl_comment">;</span></li><li class="hl_l0">}</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">c&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l1">n&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>while</b></span>&nbsp;<span class="hl_char">(</span>c<span class="hl_char">+</span><span class="hl_number">4</span><span class="hl_char">&lt;</span>size<span class="hl_char">)</span></li><li class="hl_l0">{</li><li class="hl_l1">bpp&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">1</span><span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">16</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">bpp&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">2</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li><li class="hl_l0"><span class="hl_function">else</span></li><li class="hl_l1"><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">(</span><span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">]</span>&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">24</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">&amp;</span><span class="hl_char">&amp;</span>&nbsp;<span class="hl_char">(</span><span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">]</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">32</span><span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l0">{</li><li class="hl_l1">bpp&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">4</span><span class="hl_comment">;</span></li><li class="hl_l0">}</li><li class="hl_l1">xres&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">+</span><span class="hl_number">1</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_char">(</span><span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">+</span><span class="hl_number">2</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&lt;</span>&nbsp;<span class="hl_number">8</span>&nbsp;<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">yres&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">+</span><span class="hl_number">3</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_char">(</span><span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">+</span><span class="hl_number">4</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&lt;</span>&nbsp;<span class="hl_number">8</span>&nbsp;<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">(</span>bpp&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">|</span><span class="hl_char">|</span>&nbsp;<span class="hl_char">(</span>xres&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">|</span><span class="hl_char">|</span>&nbsp;<span class="hl_char">(</span>xres&nbsp;<span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">160</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">|</span><span class="hl_char">|</span>&nbsp;<span class="hl_char">(</span>yres&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">|</span><span class="hl_char">|</span>&nbsp;<span class="hl_char">(</span>yres&nbsp;<span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">128</span><span class="hl_char">)</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">c<span class="hl_char">+</span><span class="hl_char">+</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li><li class="hl_l0"><span class="hl_function">else</span></li><li class="hl_l1">{</li><li class="hl_l0">unsigned&nbsp;<span class="hl_function"><b>short</b></span>&nbsp;TGAheader<span class="hl_char">[</span><span class="hl_number">9</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span>&nbsp;{0<span class="hl_char">,</span><span class="hl_number">2</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span><span class="hl_number">0</span><span class="hl_char">,</span>xres<span class="hl_char">,</span>yres<span class="hl_char">,</span>2080}<span class="hl_comment">;</span></li><li class="hl_l1">unsigned&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;p0<span class="hl_char">,</span>&nbsp;p1<span class="hl_char">,</span>&nbsp;r<span class="hl_char">,</span>&nbsp;g<span class="hl_char">,</span>&nbsp;b<span class="hl_char">,</span>&nbsp;a<span class="hl_char">,</span>&nbsp;col<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">szImage<span class="hl_char">[</span><span class="hl_number">3</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_quote">'0'</span><span class="hl_char">+</span><span class="hl_char">(</span><span class="hl_char">(</span>n<span class="hl_char">/</span><span class="hl_number">100</span><span class="hl_char">)</span><span class="hl_char">%</span><span class="hl_number">10</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">szImage<span class="hl_char">[</span><span class="hl_number">4</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_quote">'0'</span><span class="hl_char">+</span><span class="hl_char">(</span><span class="hl_char">(</span>n<span class="hl_char">/</span><span class="hl_number">10</span><span class="hl_char">)</span><span class="hl_char">%</span><span class="hl_number">10</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">szImage<span class="hl_char">[</span><span class="hl_number">5</span><span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_quote">'0'</span><span class="hl_char">+</span><span class="hl_char">(</span>n<span class="hl_char">%</span><span class="hl_number">10</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">printf<span class="hl_char">(</span>&nbsp;<span class="hl_quote">&quot;0x%6X: %s [%dx%d] (%d bit)\n&quot;</span><span class="hl_char">,</span>&nbsp;c<span class="hl_char">,</span>&nbsp;szImage<span class="hl_char">,</span>&nbsp;xres<span class="hl_char">,</span>&nbsp;yres<span class="hl_char">,</span>&nbsp;<span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">]</span>&nbsp;<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span><span class="hl_char">(</span>f2&nbsp;<span class="hl_char">=</span>&nbsp;fopen<span class="hl_char">(</span>szImage<span class="hl_char">,</span>&nbsp;<span class="hl_quote">&quot;wb&quot;</span><span class="hl_char">)</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">!</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_char">)</span>&nbsp;</li><li class="hl_l0">{</li><li class="hl_l1">fwrite<span class="hl_char">(</span><span class="hl_char">&amp;</span>TGAheader<span class="hl_char">,</span>&nbsp;<span class="hl_function">sizeof</span><span class="hl_char">(</span>TGAheader<span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">,</span>&nbsp;f2<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_function"><b>if</b></span>&nbsp;<span class="hl_char">(</span>bpp&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;<span class="hl_number">2</span><span class="hl_char">)</span></li><li class="hl_l1">{</li><li class="hl_l0">for&nbsp;<span class="hl_char">(</span>j<span class="hl_char">=</span><span class="hl_number">0</span><span class="hl_comment">; j&lt;yres; j++)</span></li><li class="hl_l1">for&nbsp;<span class="hl_char">(</span>i<span class="hl_char">=</span><span class="hl_number">0</span><span class="hl_comment">; i&lt;xres; i++)</span></li><li class="hl_l0">{</li><li class="hl_l1">p0&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">+</span><span class="hl_number">5</span><span class="hl_char">+</span><span class="hl_char">(</span>yres<span class="hl_char">-</span><span class="hl_number">1</span><span class="hl_char">-</span>j<span class="hl_char">)</span><span class="hl_char">*</span>xres<span class="hl_char">*</span><span class="hl_number">2</span><span class="hl_char">+</span>i<span class="hl_char">*</span><span class="hl_number">2</span><span class="hl_char">]</span><span class="hl_comment">;</span></li><li class="hl_l0">p1&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">+</span><span class="hl_number">5</span><span class="hl_char">+</span><span class="hl_char">(</span>yres<span class="hl_char">-</span><span class="hl_number">1</span><span class="hl_char">-</span>j<span class="hl_char">)</span><span class="hl_char">*</span>xres<span class="hl_char">*</span><span class="hl_number">2</span><span class="hl_char">+</span>i<span class="hl_char">*</span><span class="hl_number">2</span><span class="hl_char">+</span><span class="hl_number">1</span><span class="hl_char">]</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">r&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>p1&nbsp;<span class="hl_char">&amp;</span>&nbsp;0xF8<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">g&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span><span class="hl_char">(</span>p1&nbsp;<span class="hl_char">&amp;</span>&nbsp;0x07<span class="hl_char">)</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&lt;</span>&nbsp;<span class="hl_number">5</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_char">(</span><span class="hl_char">(</span>p0&nbsp;<span class="hl_char">&amp;</span>&nbsp;0xE0<span class="hl_char">)</span>&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">3</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">b&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>p0&nbsp;<span class="hl_char">&amp;</span>&nbsp;0x1F<span class="hl_char">)</span>&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&lt;</span>&nbsp;<span class="hl_number">3</span><span class="hl_comment">;</span></li><li class="hl_l1">a&nbsp;<span class="hl_char">=</span>&nbsp;0xFF<span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_function">if</span><span class="hl_char">(</span>&nbsp;g&nbsp;<span class="hl_char">=</span><span class="hl_char">=</span>&nbsp;0xFC&nbsp;<span class="hl_char">&amp;</span><span class="hl_char">&amp;</span>&nbsp;r<span class="hl_char">=</span><span class="hl_char">=</span><span class="hl_number">0</span>&nbsp;<span class="hl_char">&amp;</span><span class="hl_char">&amp;</span>&nbsp;b<span class="hl_char">=</span><span class="hl_char">=</span><span class="hl_number">0</span><span class="hl_char">)</span></li><li class="hl_l1">a&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">col&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>a<span class="hl_char">&lt;</span><span class="hl_char">&lt;</span><span class="hl_number">24</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_char">(</span>r<span class="hl_char">&lt;</span><span class="hl_char">&lt;</span><span class="hl_number">16</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_char">(</span>g<span class="hl_char">&lt;</span><span class="hl_char">&lt;</span><span class="hl_number">8</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">+</span>&nbsp;b<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">fwrite<span class="hl_char">(</span><span class="hl_char">&amp;</span>col<span class="hl_char">,</span>&nbsp;<span class="hl_number">4</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">,</span>&nbsp;f2<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">}</li><li class="hl_l1">}</li><li class="hl_l0"><span class="hl_function">else</span></li><li class="hl_l1">{</li><li class="hl_l0">for&nbsp;<span class="hl_char">(</span>j<span class="hl_char">=</span><span class="hl_number">0</span><span class="hl_comment">; j&lt;yres; j++)</span></li><li class="hl_l1">{</li><li class="hl_l0">fwrite<span class="hl_char">(</span><span class="hl_char">&amp;</span><span class="hl_function">Data</span><span class="hl_char">[</span>c<span class="hl_char">+</span><span class="hl_number">5</span><span class="hl_char">+</span><span class="hl_char">(</span>yres<span class="hl_char">-</span><span class="hl_number">1</span><span class="hl_char">-</span>j<span class="hl_char">)</span><span class="hl_char">*</span>xres<span class="hl_char">*</span><span class="hl_number">4</span><span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;xres<span class="hl_char">*</span><span class="hl_number">4</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">,</span>&nbsp;f2<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li><li class="hl_l0">}</li><li class="hl_l1">fclose<span class="hl_char">(</span>f2<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">}</li><li class="hl_l1">c&nbsp;<span class="hl_char">+</span><span class="hl_char">=</span>&nbsp;xres<span class="hl_char">*</span>yres<span class="hl_char">*</span>bpp<span class="hl_char">+</span><span class="hl_number">5</span><span class="hl_comment">;</span></li><li class="hl_l0">n<span class="hl_char">+</span><span class="hl_char">+</span><span class="hl_comment">;</span></li><li class="hl_l1">}</li><li class="hl_l0">}</li><li class="hl_l1">printf<span class="hl_char">(</span><span class="hl_quote">&quot;\nOK\n&quot;</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">return&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li>        </ol>
    </div>
</div></div>
<br><br>Из статьи понял <b> <noindex><a href="http://www.igromania.ru/articles/46767/Kak_dostat_grafiku_iz_igry_Igrovaya_palitra.htm" rel="nofollow" target="_blank">&quot;Как достать графику из игры. Игровая палитра&quot;</a></noindex></b>, как найди изображения в коде:<br><br>08 10 00 10 00 = 16x16 BIT 8<br><br>08 39 00 49 00 = 57x73 BIT 8<br><br>08 36 00 4d 00 = 54x77 BIT 8<br><br>Должно после излечения получится примерно такое (набросок в фотошопе):<br><img src="https://pp.vk.me/c628519/v628519600/abc/r27Nzo5Ie5Q.jpg" border="0" align="" alt=""><br><br>На изображение выше, видно что не корректно цвет отображается, возможно есть некие альфа каналы и подобные силы.<br><br>Использовал софт:<br><i class=x><b><noindex><a href="http://forum.sgh.ru/ipb.html?act=Attach&amp;type=post&amp;id=110970" rel="nofollow" target="_blank">BinEdit 2011.11.2</a></noindex><br><noindex><a href="https://fs05n2.sendspace.com/dl/393851dd6086ea07e8bf34f1da208e6e/5551189d121491ce/wy99f3/TextureFinder.v21.zip" rel="nofollow" target="_blank">TextureFinder.v21.exe</a></noindex><br><noindex><a href="http://cowonworld.ru/forum/download/file.php?id=2206" rel="nofollow" target="_blank"> D2toTGA, TGAtoD2</a></noindex><br></b></i><br><br><b>Прошивка:</b><br><noindex><a href="http://rghost.ru/85TSlVQK9" rel="nofollow" target="_blank">Прошивка для плеера</a></noindex><br><br><b>Вопрос: <i class=x>Как достать и модифицровать изображение (прошивку)?</i></b>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=355343&amp;user=38791&amp;forum_n=2&amp;topic=23576.html&amp;page=0&amp;anchor=1" class="addthx" data-post="355343"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]unknownproject[/b]','')">unknownproject</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 95.1 (постоянный), 247thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.52'>Активность: 0.26<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=27422">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2015 03:37 &middot; Поправил: unknownproject <br><script type="text/javascript">QU('unknownproject','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=unknownproject" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=23576.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
<I>dean999 пишет:<br>Как достать и модифицровать изображение </I><br>Перерисовать и сделать замену, определив границы изображения, т.е. byte-to-byte замена.<br>Начать нужно с анализа заголовка.Даю подсказку.<br><img src="http://i.snag.gy/la9bo.jpg" border="0" align="" alt=""><br>Поиск по строкам даст отсылку на указатели и поддерживаемые форматы изображений.Строки все читаются нормально.
<br><br><font size="1"><i>-----<br>TEST YOUR MIGHT</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=355346&amp;user=27422&amp;forum_n=2&amp;topic=23576.html&amp;page=0&amp;anchor=2" class="addthx" data-post="355346"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]-=AkaBOSS=-[/b]','')">-=AkaBOSS=-</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/26242.png" alt=""><br><span class=txtSm>Ранг: 150.3 (ветеран), 175thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.88'>Активность: 0.16<span style='color:red'>&searr;</span>0.07</span><br>Статус: <a href="action=userinfo&amp;user=26242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2015 10:36 &middot; Поправил: -=AkaBOSS=- <br><script type="text/javascript">QU('-=AkaBOSS=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=AkaBOSS=-" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=23576.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<I>dean999 пишет:<br>Для D2 выпущено несколько маленьких программ для распаковки тем, увеличение читабельности шрифотов, добавление нужных кодировок для тегов и читалки текста а так же скриншотов. </I><br>и в этом главная, на мой взгляд, проблема - утилиты предназначены для работы с темами, а ковырять вы пытаетесь firmware целиком. Таким образом, из прошивки или устройства нужно сначала каким-то образом извлечь файл с темой оформления, а потом уже приступать к редактированию.<br><br>В противном случае, придётся еще выяснять, каким образом контролируется целостность прошивки, и править контрольную сумму.<br><br>А насчёт вопроса о цвете - битовая глубина изображений - 8 бит, тоесть каждый байт представляет собой не цвет, а индекс палитры. Судя по фотографии плеера, палитра там - обычный градиент, который вполне может быть создан программно на основе конкретного цвета.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=355348&amp;user=26242&amp;forum_n=2&amp;topic=23576.html&amp;page=0&amp;anchor=3" class="addthx" data-post="355348"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]VodoleY[/b]','')">VodoleY</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 488.1 (мудрец), 272thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.01'>Активность: 0.35<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=17319">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2015 13:56 <br><script type="text/javascript">QU('VodoleY','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=VodoleY" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=23576.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
касательно палитры я автору топика уже говорил.. а ЛС.. но меня тут смущает код<br>r = (p1 &amp; 0xF8);<br>g = ((p1 &amp; 0x07) &lt;&lt; 5) + ((p0 &amp; 0xE0) &gt;&gt; 3);<br>b = (p0 &amp; 0x1F) &lt;&lt; 3;<br>a = 0xFF;<br><br>ммм. 8 бит глубина? 5 бит кастрируем? с альфа каналом у нас совсем беда? палитры нет вообще..
<br><br><font size="1"><i>-----<br>Наша работа во тьме, Мы делаем, что умеем. Мы отдаем, что имеем, Наша работа во тьме....</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=355354&amp;user=17319&amp;forum_n=2&amp;topic=23576.html&amp;page=0&amp;anchor=4" class="addthx" data-post="355354"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]-=AkaBOSS=-[/b]','')">-=AkaBOSS=-</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/26242.png" alt=""><br><span class=txtSm>Ранг: 150.3 (ветеран), 175thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.88'>Активность: 0.16<span style='color:red'>&searr;</span>0.07</span><br>Статус: <a href="action=userinfo&amp;user=26242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2015 15:47 &middot; Поправил: -=AkaBOSS=- <br><script type="text/javascript">QU('-=AkaBOSS=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=AkaBOSS=-" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=23576.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>VodoleY пишет:<br>но меня тут смущает код </I><br>условие этого кода: <i class=x>if (bpp == 2)</i>, что соответствует 16 битам, а в файле наблюдаются именно 8 битные изображения (которые, кстати, в приведённом сорце никак не поддерживаются - тоже, видать, не разобрались)<br><br>Наваял небольшой скрипт на бмс, вытащил все картинки (см. аттач)<br>При желании можно глянуть через программы, поддерживающие RAW изображения. Но к пониманию организации данных в прошивке это, к сожалению, не приведёт<br><br>формат простой:<br>bpp db ?<br>width dw ?<br>height dw ?<br>&#92; дальше пошли данные<br><br><br><img src="img/attach.gif" alt=""> <a href="./files/19be_12.05.2015_EXELAB.rU.tgz">19be_12.05.2015_EXELAB.rU.tgz</a> - files.zip<br><br><b>?обавлено спуст¤ 27 минут</b><br>хм.. судя по всему, все адреса записаны относительно базового адреса 0х20000000<br><br><b>dean999</b>, предоставленный вами файл - это firmware или непосредственно дамп прошивки из устройства?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=355355&amp;user=26242&amp;forum_n=2&amp;topic=23576.html&amp;page=0&amp;anchor=5" class="addthx" data-post="355355"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]dean999[/b]','')">dean999</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.5 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 5.4'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=38791">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 12 мая 2015 16:23 &middot; Поправил: dean999 <br><script type="text/javascript">QU('dean999','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dean999" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=23576.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<b>-=AkaBOSS=-</b><br><br>Это часть прошивки, другая часть шрифты.<br>Разбиты на 2 части в моем случае.<br>Посмотрел бегло в фотошопе, вижу чернобелые картинки.<br><br>Сорц был представлен для ознакомления от другого плеера.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=355357&amp;user=38791&amp;forum_n=2&amp;topic=23576.html&amp;page=0&amp;anchor=6" class="addthx" data-post="355357"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]dean999[/b]','')">dean999</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.5 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 5.4'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=38791">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 мая 2015 14:39 &middot; Поправил: dean999 <br><script type="text/javascript">QU('dean999','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dean999" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=23576.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Думаю не градиент. т.к. есть изображения сложные, где градиентом не справится, если тока не заливать по координатам<br><br><img src="https://pp.vk.me/c628519/v628519600/1fa4/zICpmLheW9E.jpg" border="0" align="" alt=""><br><br><img src="https://pp.vk.me/c628519/v628519600/1fad/KN24FugF3-g.jpg" border="0" align="" alt=""><br><br>Анимированное лого, создал сам.<br><br><img src="http://s017.radikal.ru/i436/1505/d6/0873ef8252a1.gif" border="0" align="" alt=""><br><br>Создавался в программе JetLogo.<br>Положил файл в папку system\logo.ilb
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=355563&amp;user=38791&amp;forum_n=2&amp;topic=23576.html&amp;page=0&amp;anchor=7" class="addthx" data-post="355563"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]-=AkaBOSS=-[/b]','')">-=AkaBOSS=-</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/26242.png" alt=""><br><span class=txtSm>Ранг: 150.3 (ветеран), 175thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.88'>Активность: 0.16<span style='color:red'>&searr;</span>0.07</span><br>Статус: <a href="action=userinfo&amp;user=26242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 25 мая 2015 17:03 &middot; Поправил: -=AkaBOSS=- <br><script type="text/javascript">QU('-=AkaBOSS=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=AkaBOSS=-" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=23576.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
Базовый адрес прошивки - 0x20000000<br><br>Данные по адресу 0x200B44E4 действительно представляют собой массив 16 битных цветов палитры.<br><br>Функции sub_2002C018 и sub_2002E1F8 выполняют собственно распаковку изображений в экранный буфер.<br>Первая работает со всем экраном, а вторая с областью 60x70 пикселей.<br><br>Процедура sub_2002B504 инициализирует структуру с настройками экрана. Пара интересных моментов:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;&nbsp;LDR&nbsp;&nbsp;&nbsp;R4<span class="hl_char">,</span>&nbsp;<span class="hl_char">=</span>0x201C0BFC</li><li class="hl_l1">&nbsp;&nbsp;LDR&nbsp;&nbsp;&nbsp;R0<span class="hl_char">,</span>&nbsp;unk_200B44E4</li><li class="hl_l0">&nbsp;&nbsp;<span class="hl_function"><b>STR</b></span>&nbsp;&nbsp;&nbsp;R0<span class="hl_char">,</span>&nbsp;<span class="hl_char">[</span>R4<span class="hl_char">,</span>#0x2C<span class="hl_char">]</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;<span class="hl_char">+</span>0x2C&nbsp;<span class="hl_char">-</span>&nbsp;сохраняется&nbsp;адрес&nbsp;палитры</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;R0<span class="hl_char">,</span>&nbsp;#0x8A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;индекс&nbsp;прозрачности</li><li class="hl_l1">&nbsp;&nbsp;STRB&nbsp;&nbsp;R0<span class="hl_char">,</span>&nbsp;<span class="hl_char">[</span>R4<span class="hl_char">,</span>#0x2A<span class="hl_char">]</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;<span class="hl_char">+</span>0x2A&nbsp;<span class="hl_char">-</span>&nbsp;если&nbsp;попадается&nbsp;в&nbsp;изображении<span class="hl_char">,</span>&nbsp;пиксель&nbsp;в&nbsp;экранный&nbsp;буфер&nbsp;не&nbsp;пишется</li>        </ol>
    </div>
</div></div>
<br><br><br>Проблема в том, что как бы я не извращался над этой палитрой, получается сплошная цветовая мешанина. Но судя по фото в шапке, цветовой разброс на одном изображении должен быть минимальным.<br><br>Накопал пару даташитов на дисплейные контроллеры со схожими характеристиками (128х160, 18bit). Судя по ним, цвет хранится в формате 5-6-5 и при передаче расширяется до 6-6-6.<br><img src="http://s7.postimg.org/o9gc0x2ez/16to18.png" border="0" align="" alt=""><br><br>Но даже теперь не могу понять, что же я упускаю... <br><br>Даташит на дисплей из <noindex><a href="http://www.rockbox.org/wiki/IaudioU3Info" rel="nofollow" target="_blank">Cowon iAudio U3</a></noindex>: <noindex><a href="http://www.rockbox.org/twiki/pub/Main/IriverH10Info/VL-FS-TLM-L120FTH-01REV.A.pdf" rel="nofollow" target="_blank">--&gt; Link &lt;--</a></noindex>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=355715&amp;user=26242&amp;forum_n=2&amp;topic=23576.html&amp;page=0&amp;anchor=8" class="addthx" data-post="355715"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]dean999[/b]','')">dean999</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.5 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 5.4'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=38791">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 26 мая 2015 10:57 <br><script type="text/javascript">QU('dean999','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dean999" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=23576.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<img src="https://pp.vk.me/c628216/v628216600/677b/Uqj43N8_NRw.jpg" border="0" align="" alt=""><br><br> Cowon iAudio U3: Очень похож!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=355730&amp;user=38791&amp;forum_n=2&amp;topic=23576.html&amp;page=0&amp;anchor=9" class="addthx" data-post="355730"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]dean999[/b]','')">dean999</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.5 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 5.4'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=38791">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 28 июня 2015 01:53 &middot; Поправил: dean999 <br><script type="text/javascript">QU('dean999','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dean999" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=2&amp;topic=23576.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Спасибо <b>-=AkaBOSS=-</b><br><br>Есть результат.<br><br><img src="http://i003.radikal.ru/1506/79/6255a912ea72.png" border="0" align="" alt=""><br><img src="http://s018.radikal.ru/i510/1506/d9/8008cd48fc1f.png" border="0" align="" alt=""><br><img src="http://s017.radikal.ru/i420/1506/21/4df5a6dda784.png" border="0" align="" alt=""><br><img src="http://s020.radikal.ru/i701/1506/84/596ccda032f6.png" border="0" align="" alt=""><br><br><img src="https://pp.vk.me/c628216/v628216600/1ab48/iQatFSNdfNo.jpg" border="0" align="" alt=""><br><br>Как было:<br><img src="https://pp.vk.me/c628216/v628216600/1abbf/RC7zw8q0zKI.jpg" border="0" align="" alt=""><br><br>Как хочу сделать:<br><img src="https://pp.vk.me/c628216/v628216600/1abc6/AujupZz1BJE.jpg" border="0" align="" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=356634&amp;user=38791&amp;forum_n=2&amp;topic=23576.html&amp;page=0&amp;anchor=10" class="addthx" data-post="356634"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/red.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=2&sortBy=0&page=0.html"><b>Крэки, обсуждения</b></a> <b class=bulletHead>&#8212;&#8250;</b> Извлечь ресурсы из прошивки и запаковать обратно</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#11" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="2">
<input type="hidden" name="topic" value="23576">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=23576" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
