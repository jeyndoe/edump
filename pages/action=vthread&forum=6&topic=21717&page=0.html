<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>косяк при переводе с Java на С++ - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="доброго времени суток есть игра - Minecraft, написана на Java. музыка в ней хранится в зашифрованном виде, а я пытаюсь расшифровать её. декомпилил код, переписал... и получил облом. после первых 15 байт расшифровка даёт сбой, и">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=31361'>zds</a>, <a target='_blank' href='?action=userinfo&amp;user=1288'>UniSoft</a> (+5 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> косяк при переводе с Java на С++</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]-=AkaBOSS=-[/b]','')">-=AkaBOSS=-</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/26242.png" alt=""><br><span class=txtSm>Ранг: 150.3 (ветеран), 175thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.88'>Активность: 0.16<span style='color:red'>&searr;</span>0.07</span><br>Статус: <a href="action=userinfo&amp;user=26242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 15:22 <br><script type="text/javascript">QU('-=AkaBOSS=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=AkaBOSS=-" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
доброго времени суток<br>есть игра - Minecraft, написана на Java.<br>музыка в ней хранится в зашифрованном виде, а я пытаюсь расшифровать её.<br>декомпилил код, переписал... и получил облом.<br>после первых 15 байт расшифровка даёт сбой, и дальше идёт мусор.<br>кто-нибудь может подсказать, что я не учёл?<br><br>в архиве:<br>1. несколько java файлов, относящихся к выводу звука. сам алго декрипта - в файле MusInputStream.java<br>2. пример оригинального/зашифрованного файла<br>3. моя программа. код ужасен, я знаю.<br><br><noindex><a href="http://rusfolder.com/36223844" rel="nofollow" target="_blank"> <img src="http://rusfolder.com./images/download_2.jpg" border="0" align="" alt=""></a></noindex>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324157&amp;user=26242&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=1" class="addthx" data-post="324157"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]ZaZa[/b]','')">ZaZa</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/3691.jpg" alt=""><br><span class=txtSm>Ранг: 158.5 (ветеран), 219thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.43'>Активность: 0.12<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=3691">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 15:28 &middot; Поправил: ZaZa <br><script type="text/javascript">QU('ZaZa','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ZaZa" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
<b>-=AkaBOSS=-</b><br>Посмотрел бегло: <br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">unsigned&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;hash&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">for&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;j&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">; j &lt; datasize; j++)</span></li><li class="hl_l1">{</li><li class="hl_l0">buf<span class="hl_char">[</span>j<span class="hl_char">]</span>&nbsp;^<span class="hl_char">=</span>&nbsp;hash&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">8</span><span class="hl_comment">;</span></li><li class="hl_l1">hash&nbsp;<span class="hl_char">=</span>&nbsp;hash&nbsp;<span class="hl_char">*</span>&nbsp;<span class="hl_number">498729871</span>&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">85731</span>&nbsp;<span class="hl_char">*</span>&nbsp;buf<span class="hl_char">[</span>j<span class="hl_char">]</span><span class="hl_comment">;</span></li><li class="hl_l0">}</li>        </ol>
    </div>
</div></div>
 <br>Переполнения не будет?<br><br>В-общем, мне кажется проблема с типами и их границами...<br><br><I>-=AkaBOSS=- пишет: <br>массив, в котором держатся обрабатываеммые данные, я объявил как unsigned char, и это было БОЛЬШОЙ ошибкой.</I><br>Ха... я так и написал )) <img src="img/smilies/s8.gif" alt="">
<br><br><font size="1"><i>-----<br>One death is a tragedy, one million is a statistic.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324159&amp;user=3691&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=2" class="addthx" data-post="324159"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=26242" title="30-04-2013 17:42, ранг:33.6" target="_blank">-=AkaBOSS=-</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]-=AkaBOSS=-[/b]','')">-=AkaBOSS=-</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/26242.png" alt=""><br><span class=txtSm>Ранг: 150.3 (ветеран), 175thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.88'>Активность: 0.16<span style='color:red'>&searr;</span>0.07</span><br>Статус: <a href="action=userinfo&amp;user=26242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 15:38 <br><script type="text/javascript">QU('-=AkaBOSS=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=AkaBOSS=-" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<I>ZaZa пишет:<br>Переполнения не будет?  </I><br>оно происходит еще на первой итерации.<br>но код почти один-в-один слизан с джавы.<br>там ведь тоже должно происходить переполнение... разве нет?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324160&amp;user=26242&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=3" class="addthx" data-post="324160"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 16:17 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
В джавах не силен, но по моему тут присутствует рекурсия:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>public</b></span>&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;read<span class="hl_char">(</span><span class="hl_function">byte</span><span class="hl_char">[</span><span class="hl_char">]</span>&nbsp;par1ArrayOfByte<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;par2<span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;par3<span class="hl_char">)</span>&nbsp;throws&nbsp;IOException</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;par3&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function">this</span><span class="hl_char">.</span>inputStream<span class="hl_char">.</span>read<span class="hl_char">(</span>par1ArrayOfByte<span class="hl_char">,</span>&nbsp;par2<span class="hl_char">,</span>&nbsp;par3<span class="hl_char">)</span><span class="hl_comment">; // &lt;--ВОТ ТУТА</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;var4&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">; var4 &lt; par3; ++var4)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>byte</b></span>&nbsp;var5&nbsp;<span class="hl_char">=</span>&nbsp;par1ArrayOfByte<span class="hl_char">[</span>par2&nbsp;<span class="hl_char">+</span>&nbsp;var4<span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span><span class="hl_function">byte</span><span class="hl_char">)</span><span class="hl_char">(</span>par1ArrayOfByte<span class="hl_char">[</span>par2&nbsp;<span class="hl_char">+</span>&nbsp;var4<span class="hl_char">]</span>&nbsp;^&nbsp;<span class="hl_function">this</span><span class="hl_char">.</span>hash&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">8</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">this</span><span class="hl_char">.</span>hash&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function">this</span><span class="hl_char">.</span>hash&nbsp;<span class="hl_char">*</span>&nbsp;<span class="hl_number">498729871</span>&nbsp;<span class="hl_char">+</span>&nbsp;<span class="hl_number">85731</span>&nbsp;<span class="hl_char">*</span>&nbsp;var5<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;par3<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;}</li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324162&amp;user=26651&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=4" class="addthx" data-post="324162"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]-=AkaBOSS=-[/b]','')">-=AkaBOSS=-</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/26242.png" alt=""><br><span class=txtSm>Ранг: 150.3 (ветеран), 175thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.88'>Активность: 0.16<span style='color:red'>&searr;</span>0.07</span><br>Статус: <a href="action=userinfo&amp;user=26242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 16:57 <br><script type="text/javascript">QU('-=AkaBOSS=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=AkaBOSS=-" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>ELF_7719116 пишет:<br>тут присутствует рекурсия<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">par3&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function">this</span><span class="hl_char">.</span>inputStream<span class="hl_char">.</span>read<span class="hl_char">(</span>par1ArrayOfByte<span class="hl_char">,</span>&nbsp;par2<span class="hl_char">,</span>&nbsp;par3<span class="hl_char">)</span><span class="hl_comment">; // &lt;--ВОТ ТУТА</span></li>        </ol>
    </div>
</div></div>
</I><br><br>не похоже что-то<br>она бы так из этой рекурсии и не вылезла.<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;в&nbsp;конструкторе&nbsp;указано<span class="hl_char">:</span></li><li class="hl_l1"><span class="hl_function">this</span><span class="hl_char">.</span>inputStream&nbsp;<span class="hl_char">=</span>&nbsp;par3InputStream<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">/</span>&nbsp;а&nbsp;вызывается&nbsp;он&nbsp;<span class="hl_char">(</span>в&nbsp;CodecMus<span class="hl_char">.</span>java<span class="hl_char">)</span>&nbsp;так<span class="hl_char">:</span></li><li class="hl_l0"><span class="hl_function"><b>new</b></span>&nbsp;MusInputStream<span class="hl_char">(</span><span class="hl_function">this</span><span class="hl_char">,</span>&nbsp;<span class="hl_function">this</span><span class="hl_char">.</span>url<span class="hl_char">,</span>&nbsp;<span class="hl_function">this</span><span class="hl_char">.</span>urlConnection<span class="hl_char">.</span>getInputStream<span class="hl_char">(</span><span class="hl_char">)</span><span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br><b>ZaZa</b><br>нельзя забывать, что хэш инициализируется на основе имени входного файла.<br>поэтому, к моменту начала расшифровки потока там уже есть какое-то значение.<br>после первой же итерации наступает переполнение (результат не умещается в регистр).<br>но, при этом, в джаве хэш тоже объявлен как int, и никаких проблем не возникает (джава установлена х32)<br>я эту задачу уже с пару недель долблю, так и не понял, где нестыковка.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324165&amp;user=26242&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=5" class="addthx" data-post="324165"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]ZaZa[/b]','')">ZaZa</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/3691.jpg" alt=""><br><span class=txtSm>Ранг: 158.5 (ветеран), 219thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.43'>Активность: 0.12<span style='color:red'>&searr;</span>0.01</span><br>Статус: <a href="action=userinfo&amp;user=3691">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 17:04 &middot; Поправил: ZaZa <br><script type="text/javascript">QU('ZaZa','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ZaZa" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<b>-=AkaBOSS=-</b><br>В Java int = -2,147,483,648 to 2,147,483,647<br>C++ unsigned int = 0 to 4,294,967,295<br>C++ int = –2,147,483,648 to 2,147,483,647<br><br>Может попробовать использовать INT вместо UNSIGNED INT<br><br><I>-=AkaBOSS=- пишет:<br>нельзя забывать, что хэш инициализируется на основе имени входного файла.поэтому, к моменту начала расшифровки потока там уже есть какое-то значение. </I><br>Не доглядел... но я ведь предупреждал, что смотрел бегло <img src="img/smilies/s6.gif" alt="">
<br><br><font size="1"><i>-----<br>One death is a tragedy, one million is a statistic.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324166&amp;user=3691&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=6" class="addthx" data-post="324166"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]hors[/b]','')">hors</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/31056.jpg" alt=""><br><span class=txtSm>Ранг: 136.0 (ветеран), 360thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.52'>Активность: 0.27<span style='color:red'>&searr;</span>0.14</span><br>Статус: <a href="action=userinfo&amp;user=31056">Участник</a><br><font color=blue>Qt Developer</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 17:19 <br><script type="text/javascript">QU('hors','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=hors" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Открыть два отладчика и по шагам сравнивать результат.
<br><br><font size="1"><i>-----<br>http://ntinfo.biz</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324167&amp;user=31056&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=7" class="addthx" data-post="324167"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=3691" title="30-04-2013 13:23, ранг:114.0" target="_blank">ZaZa</a>, <a href="action=userinfo&user=33253" title="30-04-2013 14:28, ранг:11.0" target="_blank">Abraham</a>, <a href="action=userinfo&user=26242" title="30-04-2013 17:20, ранг:33.6" target="_blank">-=AkaBOSS=-</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]-=AkaBOSS=-[/b]','')">-=AkaBOSS=-</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/26242.png" alt=""><br><span class=txtSm>Ранг: 150.3 (ветеран), 175thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.88'>Активность: 0.16<span style='color:red'>&searr;</span>0.07</span><br>Статус: <a href="action=userinfo&amp;user=26242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 17:33 <br><script type="text/javascript">QU('-=AkaBOSS=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=AkaBOSS=-" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<I>ZaZa пишет:<br>Может попробовать использовать INT вместо UNSIGNED INT </I><br>пробовал раньше, попробовал еще раз. разницы никакой.<br>я уже чего только не перепробовал.<br>даже проверял порядок присвоения здесь:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>byte</b></span>&nbsp;var5&nbsp;<span class="hl_char">=</span>&nbsp;par1ArrayOfByte<span class="hl_char">[</span>par2&nbsp;<span class="hl_char">+</span>&nbsp;var4<span class="hl_char">]</span>&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span><span class="hl_function">byte</span><span class="hl_char">)</span><span class="hl_char">(</span>par1ArrayOfByte<span class="hl_char">[</span>par2&nbsp;<span class="hl_char">+</span>&nbsp;var4<span class="hl_char">]</span>&nbsp;^&nbsp;<span class="hl_function">this</span><span class="hl_char">.</span>hash&nbsp;<span class="hl_char">&gt;</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">8</span><span class="hl_char">)</span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br>ничего не помогает <img src="img/smilies/s4.gif" alt=""><br><br><I>hors пишет:<br>Открыть два отладчика и по шагам сравнивать результат. </I><br>стратегия хорошая, но рабочий код на джаве, и даже в условиях JIT компиляции его там фиг найдёшь
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324169&amp;user=26242&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=8" class="addthx" data-post="324169"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]hors[/b]','')">hors</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/31056.jpg" alt=""><br><span class=txtSm>Ранг: 136.0 (ветеран), 360thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.52'>Активность: 0.27<span style='color:red'>&searr;</span>0.14</span><br>Статус: <a href="action=userinfo&amp;user=31056">Участник</a><br><font color=blue>Qt Developer</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 17:38 <br><script type="text/javascript">QU('hors','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=hors" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<I>-=AkaBOSS=- пишет:<br>стратегия хорошая, но рабочий код на джаве, и даже в условиях JIT компиляции его там фиг найдёшь  </I><br><br>Встроенный в eclipse отладчик для java? <br>Встроенный в Visual Studio отладчик для c++?
<br><br><font size="1"><i>-----<br>http://ntinfo.biz</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324171&amp;user=31056&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=9" class="addthx" data-post="324171"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 17:48 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<I>-=AkaBOSS=- пишет:<br>она бы так из этой рекурсии и не вылезла. </I><br>Эт понятно. Очевидно, строка - аналог <b>fread</b>. <br><br>Тогда обращаю внимание на расстановку инкремента <b>В ОРИГИНАЛЕ</b><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;<span class="hl_char">/</span><span class="hl_char">*</span>&nbsp;В&nbsp;ОРИГИНАЛЕ&nbsp;<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l1">for&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;var4&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">; var4 &lt; par3; ++var4)</span></li>        </ol>
    </div>
</div></div>
<br><b>ВАШ ЦПП ВАРИАНТ</b><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;<span class="hl_char">/</span><span class="hl_char">*</span>С<span class="hl_char">+</span><span class="hl_char">+</span>&nbsp;ВАРИАНТ<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l1">for&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>int</b></span>&nbsp;j&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">; j &lt; datasize; j++)</span></li>        </ol>
    </div>
</div></div><br><br><span class="txtGoods"><a href="action=addthx&amp;post=324172&amp;user=26651&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=10" class="addthx" data-post="324172"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]-=AkaBOSS=-[/b]','')">-=AkaBOSS=-</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/26242.png" alt=""><br><span class=txtSm>Ранг: 150.3 (ветеран), 175thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.88'>Активность: 0.16<span style='color:red'>&searr;</span>0.07</span><br>Статус: <a href="action=userinfo&amp;user=26242">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 30 апреля 2013 18:09 &middot; Поправил: -=AkaBOSS=- <br><script type="text/javascript">QU('-=AkaBOSS=-','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=-=AkaBOSS=-" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=21717.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
разобрался таки.<br>спасибо <b>hors</b> за совет про отладчик.<br>запустил игру, приаттачился олькой, нашел по константам нужный код, и понял, почему я дурак <img src="img/smilies/s14.gif" alt=""><br>массив, в котором держатся обрабатываеммые данные, я объявил как unsigned char, и это было БОЛЬШОЙ ошибкой. <br>переделал в char, и всё заработало.<br><br>проблема решена, тему закрываю
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=324173&amp;user=26242&amp;forum_n=6&amp;topic=21717.html&amp;page=0&amp;anchor=11" class="addthx" data-post="324173"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> косяк при переводе с Java на С++</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=21717" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
