<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Как заставить switch всегда возвращать один и тот же результат? - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Нам в школе выдали новый годовой пакет учебников от томского университета (ТУСУР) - пытаются воспитать программистов Вместе с красивой коробочкой, там лежал диск с &quot;учебниками по визуальному программированию&quot;, из">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=5602'>ut2004</a>, <a target='_blank' href='?action=userinfo&amp;user=40607'>vsv1</a> (+8 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Как заставить switch всегда возвращать один и тот же результат?</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]Ice[/b]','')">Ice</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 7.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.42'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3744">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2006 15:43 <br><script type="text/javascript">QU('Ice','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Нам в школе выдали новый годовой пакет учебников <img src="img/smilies/s1.gif" alt=""> от томского университета (ТУСУР) - пытаются воспитать программистов <img src="img/smilies/s1.gif" alt=""> Вместе с красивой коробочкой, там лежал диск с &quot;учебниками по визуальному программированию&quot;, из которого положено получать &quot;знания&quot; по Делфи и присылать свои работы..<br>Так вот, мне остался последний шаг, чтобы прислать им патч для пакета учебников с этого диска.. <br>С-сно инсталлер мне с диалапа не выложить, да и там нет ничего интересного. Поковырялся, посмотрел:<br>1 рег. инфа ХРАНИТСЯ В ОТКРЫТОМ ВИДЕ В РЕЕСТРЕ - любой, введенный мной, пароль оказывался там (тут у них мегазащита - заныкали оочень глубоко в реестр :s1<img src="img/smilies/s1.gif" alt=""><br>2 пакер был.., его я уже снял<br>3 изучение исполняемого файла ничего не дало - мегазащита подразумевает хранение кода защиты в длл, лежащей рядом с файлом<br>4 поковырял длл, нашел несколько ф-ций защиты<br>5 две уже отцепил, теперь прога кидает ошибку на тему &quot;кривой ключ&quot; - рулез<img src="img/smilies/s1.gif" alt=""> никакого ключа введено не было<br>И вот сейчас я запнулся на довольно простом фрагменте кода, смысл его следующий:<br>switch результат_проверки_на_ошибки_и_регистрации<br>case много разных ошибок<br>else нормально работаем<br>Извините за глупый вопрос, но я правда не знаю как это подправить<img src="img/smilies/s11.gif" alt=""><br>100064E2   . 48             DEC EAX                                 <br>100064E3   . 83F8 06        CMP EAX,6<br>100064E6   . 0F87 6A010000  JA HtmlBook.10006656<br>100064EC   . FF2485 3468001&gt;JMP DWORD PTR DS:[EAX*4+10006834]<br>100064F3   &gt; 68 E4070110    PUSH HtmlBook.100107E4                  <br>100064F8   . 8D45 B4        LEA EAX,DWORD PTR SS:[EBP-4C]<br>100064FB   . 50             PUSH EAX<br>100064FC   . 8D8D A0FBFFFF  LEA ECX,DWORD PTR SS:[EBP-460]<br>10006502   . 51             PUSH ECX<br>10006503   . E8 08FEFFFF    CALL HtmlBook.10006310<br>10006508   . 83C4 0C        ADD ESP,0C<br>1000650B   . 6A FF          PUSH -1<br>1000650D   . 53             PUSH EBX<br>1000650E   . 50             PUSH EAX<br>1000650F   . 8D4D D0        LEA ECX,DWORD PTR SS:[EBP-30]<br>10006512   . C645 FC 06     MOV BYTE PTR SS:[EBP-4],6<br>10006516   . E8 F5DAFFFF    CALL HtmlBook.10004010<br>1000651B   . 8D8D A0FBFFFF  LEA ECX,DWORD PTR SS:[EBP-460]<br>10006521   . E9 27010000    JMP HtmlBook.1000664D<br>10006526   &gt; 68 C8070110    PUSH HtmlBook.100107C8                   <br>1000652B   . 8D55 B4        LEA EDX,DWORD PTR SS:[EBP-4C]<br>1000652E   . 52             PUSH EDX<br>1000652F   . 8D85 F8FAFFFF  LEA EAX,DWORD PTR SS:[EBP-508]<br>10006535   . 50             PUSH EAX<br>10006536   . E8 D5FDFFFF    CALL HtmlBook.10006310<br>1000653B   . 83C4 0C        ADD ESP,0C<br>1000653E   . 6A FF          PUSH -1<br>10006540   . 53             PUSH EBX<br>10006541   . 50             PUSH EAX<br>10006542   . 8D4D D0        LEA ECX,DWORD PTR SS:[EBP-30]<br>10006545   . C645 FC 07     MOV BYTE PTR SS:[EBP-4],7<br>10006549   . E8 C2DAFFFF    CALL HtmlBook.10004010<br>1000654E   . 8D8D F8FAFFFF  LEA ECX,DWORD PTR SS:[EBP-508]<br>10006554   . E9 F4000000    JMP HtmlBook.1000664D<br>10006559   &gt; 68 A8070110    PUSH HtmlBook.100107A8                  <br>1000655E   . 8D4D B4        LEA ECX,DWORD PTR SS:[EBP-4C]<br>10006561   . 51             PUSH ECX<br>10006562   . 8D95 14FBFFFF  LEA EDX,DWORD PTR SS:[EBP-4EC]<br>10006568   . 52             PUSH EDX<br>10006569   . E8 A2FDFFFF    CALL HtmlBook.10006310<br>1000656E   . 83C4 0C        ADD ESP,0C<br>10006571   . 6A FF          PUSH -1<br>10006573   . 53             PUSH EBX<br>10006574   . 50             PUSH EAX<br>10006575   . 8D4D D0        LEA ECX,DWORD PTR SS:[EBP-30]<br>10006578   . C645 FC 08     MOV BYTE PTR SS:[EBP-4],8<br>1000657C   . E8 8FDAFFFF    CALL HtmlBook.10004010<br>10006581   . 8D8D 14FBFFFF  LEA ECX,DWORD PTR SS:[EBP-4EC]<br>10006587   . E9 C1000000    JMP HtmlBook.1000664D<br>1000658C   &gt; 68 8C070110    PUSH HtmlBook.1001078C                  <br>10006591   . 8D45 B4        LEA EAX,DWORD PTR SS:[EBP-4C]<br>10006594   . 50             PUSH EAX<br>10006595   . 8D8D 4CFBFFFF  LEA ECX,DWORD PTR SS:[EBP-4B4]<br>1000659B   . 51             PUSH ECX<br>1000659C   . E8 6FFDFFFF    CALL HtmlBook.10006310<br>100065A1   . 83C4 0C        ADD ESP,0C<br>100065A4   . 6A FF          PUSH -1<br>100065A6   . 53             PUSH EBX<br>100065A7   . 50             PUSH EAX<br>100065A8   . 8D4D D0        LEA ECX,DWORD PTR SS:[EBP-30]<br>100065AB   . C645 FC 09     MOV BYTE PTR SS:[EBP-4],9<br>100065AF   . E8 5CDAFFFF    CALL HtmlBook.10004010<br>100065B4   . 8D8D 4CFBFFFF  LEA ECX,DWORD PTR SS:[EBP-4B4]<br>100065BA   . E9 8E000000    JMP HtmlBook.1000664D<br>100065BF   &gt; 68 6C070110    PUSH HtmlBook.1001076C                  <br>100065C4   . 8D55 B4        LEA EDX,DWORD PTR SS:[EBP-4C]<br>100065C7   . 52             PUSH EDX<br>100065C8   . 8D85 84FBFFFF  LEA EAX,DWORD PTR SS:[EBP-47C]<br>100065CE   . 50             PUSH EAX<br>100065CF   . E8 3CFDFFFF    CALL HtmlBook.10006310<br>100065D4   . 83C4 0C        ADD ESP,0C<br>100065D7   . 6A FF          PUSH -1<br>100065D9   . 53             PUSH EBX<br>100065DA   . 50             PUSH EAX<br>100065DB   . 8D4D D0        LEA ECX,DWORD PTR SS:[EBP-30]<br>100065DE   . C645 FC 0A     MOV BYTE PTR SS:[EBP-4],0A<br>100065E2   . E8 29DAFFFF    CALL HtmlBook.10004010<br>100065E7   . 8D8D 84FBFFFF  LEA ECX,DWORD PTR SS:[EBP-47C]<br>100065ED   . EB 5E          JMP SHORT HtmlBook.1000664D<br>100065EF   &gt; 68 4C070110    PUSH HtmlBook.1001074C                   <br>100065F4   . 8D4D B4        LEA ECX,DWORD PTR SS:[EBP-4C]<br>100065F7   . 51             PUSH ECX<br>100065F8   . 8D95 68FBFFFF  LEA EDX,DWORD PTR SS:[EBP-498]<br>100065FE   . 52             PUSH EDX<br>100065FF   . E8 0CFDFFFF    CALL HtmlBook.10006310<br>10006604   . 83C4 0C        ADD ESP,0C<br>10006607   . 6A FF          PUSH -1<br>10006609   . 53             PUSH EBX<br>1000660A   . 50             PUSH EAX<br>1000660B   . 8D4D D0        LEA ECX,DWORD PTR SS:[EBP-30]<br>1000660E   . C645 FC 0B     MOV BYTE PTR SS:[EBP-4],0B<br>10006612   . E8 F9D9FFFF    CALL HtmlBook.10004010<br>10006617   . 8D8D 68FBFFFF  LEA ECX,DWORD PTR SS:[EBP-498]<br>1000661D   . EB 2E          JMP SHORT HtmlBook.1000664D<br>1000661F   &gt; 68 2C070110    PUSH HtmlBook.1001072C                  <br>10006624   . 8D45 B4        LEA EAX,DWORD PTR SS:[EBP-4C]<br>10006627   . 50             PUSH EAX<br>10006628   . 8D8D 30FBFFFF  LEA ECX,DWORD PTR SS:[EBP-4D0]<br>1000662E   . 51             PUSH ECX<br>1000662F   . E8 DCFCFFFF    CALL HtmlBook.10006310<br>10006634   . 83C4 0C        ADD ESP,0C<br>10006637   . 6A FF          PUSH -1<br>10006639   . 53             PUSH EBX<br>1000663A   . 50             PUSH EAX<br>1000663B   . 8D4D D0        LEA ECX,DWORD PTR SS:[EBP-30]<br>1000663E   . C645 FC 0C     MOV BYTE PTR SS:[EBP-4],0C<br>10006642   . E8 C9D9FFFF    CALL HtmlBook.10004010<br>10006647   . 8D8D 30FBFFFF  LEA ECX,DWORD PTR SS:[EBP-4D0]<br>1000664D   &gt; C645 FC 05     MOV BYTE PTR SS:[EBP-4],5<br>10006651   . E8 2ABDFFFF    CALL HtmlBook.10002380<br>10006656   &gt; 8B45 E8        MOV EAX,DWORD PTR SS:[EBP-18]  ///  как сделать безусловный переход сюда?      <br>10006659   . 8B55 44        MOV EDX,DWORD PTR SS:[EBP+44]<br>1000665C   . BE 10000000    MOV ESI,10<br>10006661   . 3BC6           CMP EAX,ESI<br>10006663   . 8B45 D4        MOV EAX,DWORD PTR SS:[EBP-2C]<br>10006666   . 891A           MOV DWORD PTR DS:[EDX],EBX<br>10006668   . 73 03          JNB SHORT HtmlBook.1000666D<br>1000666A   . 8D45 D4        LEA EAX,DWORD PTR SS:[EBP-2C]<br><br>Заранее благодарен, длл в аттаче
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99828&amp;user=3744&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=1" class="addthx" data-post="99828"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]fix200[/b]','')">fix200</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 22.0 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.92'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5986">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2006 21:20 <br><script type="text/javascript">QU('fix200','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=fix200" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Вариант  ELSE идёт по дефаулту и будет последним,   достаточно подправить в начале условный  переход на безусловный в самый  конец
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99838&amp;user=5986&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=2" class="addthx" data-post="99838"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]Ice[/b]','')">Ice</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 7.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.42'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3744">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2006 21:43 <br><script type="text/javascript">QU('Ice','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
100064E6 . 0F87 6A010000 JA HtmlBook.10006656  на JMP HtmlBook.10006656 ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99840&amp;user=3744&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=3" class="addthx" data-post="99840"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Ice[/b]','')">Ice</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 7.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.42'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3744">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2006 22:51 <br><script type="text/javascript">QU('Ice','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
сори, только что заметил что аттч не прицепился, вот линк:<br>rapidshare.de/files/37422785/HtmlBook.zip.html (45кб)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99847&amp;user=3744&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=4" class="addthx" data-post="99847"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]fix200[/b]','')">fix200</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 22.0 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.92'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5986">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2006 22:55 <br><script type="text/javascript">QU('fix200','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=fix200" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
наверное...<br>смотри ниже,  там идет:<br>10006656 &gt; 8B45 E8 MOV EAX,DWORD PTR SS:[EBP-18] <br>чуть ниже:<br>1000665C . BE 10000000 MOV ESI,10 <br>а тут  сравнивается EAX с 10:<br>10006661 . 3BC6 CMP EAX,ESI <br>и далее у тебя условный  переход:<br>10006668 . 73 03 JNB SHORT HtmlBook.1000666D <br><br>а ниже наверное что-то интересное происходит....
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99848&amp;user=5986&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=5" class="addthx" data-post="99848"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]Ice[/b]','')">Ice</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 7.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.42'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3744">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2006 02:12 <br><script type="text/javascript">QU('Ice','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<I>fix200 пишет:<br>а ниже наверное что-то интересное происходит.... </I><br>спасибо, я правда ошибся - там еще столько же рег. кода <br><b>fix200</b> буду очень благодарен, если посмотришь длл, ссылка выше.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99875&amp;user=3744&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=6" class="addthx" data-post="99875"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]fix200[/b]','')">fix200</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 22.0 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.92'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5986">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2006 05:18 <br><script type="text/javascript">QU('fix200','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=fix200" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
пошарил эту функцию, так и не понял что за число она должна возвращать, запутанно как-то всё. Немного поправил ее, смотри в аттаче.<br><br><img src="img/attach.gif" alt=""> <a href="./files/e819_20.10.2006_CRACKLAB.rU.tgz">e819_20.10.2006_CRACKLAB.rU.tgz</a> - _HtmlBook.zip
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99896&amp;user=5986&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=7" class="addthx" data-post="99896"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]fix200[/b]','')">fix200</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 22.0 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.92'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5986">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2006 05:21 <br><script type="text/javascript">QU('fix200','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=fix200" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
посмотри откуда она из Ехе вызывается, может проблема там решится
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99897&amp;user=5986&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=8" class="addthx" data-post="99897"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]Ice[/b]','')">Ice</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 7.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.42'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3744">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2006 09:16 <br><script type="text/javascript">QU('Ice','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
Даа, защита немного сложнее, чем я думал - в exe я проглядел четвертую функцию, они, вроде, полностью связаны. <br><code>00404EC3   . 51             PUSH ECX                                 ; |Subkey<br>00404EC4   . 68 02000080    PUSH 80000002                            ; |hKey = HKEY_LOCAL_MACHINE<br>00404EC9   . C68424 7004000&gt;MOV BYTE PTR SS:[ESP+470],5              ; |<br>00404ED1   . 897424 28      MOV DWORD PTR SS:[ESP+28],ESI            ; |<br>00404ED5   . FF15 04E04300  CALL DWORD PTR DS:[&lt;&amp;ADVAPI32.RegOpenKey&gt;; &#92;RegOpenKeyExA<br>00404EDB   . 3BC6           CMP EAX,ESI<br>00404EDD   . 75 08          JNZ SHORT _BookBro.00404EE7<br></code><br>...<br><code>00403626   . 68 02000080    PUSH 80000002                            ; |hKey = HKEY_LOCAL_MACHINE<br>0040362B   . C74424 30 0000&gt;MOV DWORD PTR SS:[ESP+30],0              ; |<br>00403633   . FF15 04E04300  CALL DWORD PTR DS:[&lt;&amp;ADVAPI32.RegOpenKey&gt;; &#92;RegOpenKeyExA<br>00403639   . 85C0           TEST EAX,EAX<br>0040363B   . 75 0A          JNZ SHORT _BookBro.00403647<br>0040363D   . 8B7424 1C      MOV ESI,DWORD PTR SS:[ESP+1C]<br></code><br>...<br><code>00404F21   . 68 40F84300    PUSH _BookBro.0043F840                   ; |ValueName = &quot;name&quot;<br>00404F26   . 56             PUSH ESI                                 ; |hKey<br>00404F27   . C74424 28 C800&gt;MOV DWORD PTR SS:[ESP+28],0C8            ; |<br>00404F2F   . FFD3           CALL EBX                                 ; &#92;RegQueryValueExA<br></code><br>Далее - процедура, очень похожая на библиотечную, и очередной условный переход.<br>Распакованый exe&#039;шник:<br>rapidshare.com/files/38455/BookBrowser.zip.html<br>(сервер почему-то ругается и не дает прикрепить аттач)<br>Сейчас засяду патчить..
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99935&amp;user=3744&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=9" class="addthx" data-post="99935"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]Ice[/b]','')">Ice</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 7.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.42'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3744">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2006 09:33 <br><script type="text/javascript">QU('Ice','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
нашел еще один очень интересный фрагмент - я думал, что раз уж прога просто пишет введенный ключ в реестр, там никаких функций нет.. оказалось.. <br>Видимо, для проверки того, что нарисовать в главном окне (незарегистрированная версия = &quot;замочек&quot;), сюда включили полный код проверки ключа. <br>начинается с:<br><code>00404ED5   . FF15 04E04300  CALL DWORD PTR DS:[&lt;&amp;ADVAPI32.RegOpenKey&gt;; &#92;RegOpenKeyExA<br></code><br>Попробую сгенерить себе ключ - может что и получится.. (там сильно много вызывается исключений)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99943&amp;user=3744&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=10" class="addthx" data-post="99943"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Ice[/b]','')">Ice</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 7.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.42'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3744">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2006 10:13 &middot; Поправил: Ice <br><script type="text/javascript">QU('Ice','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
И очередной облом - там какие-то антиотладочные средства <img src="img/smilies/s11.gif" alt=""> не удается даже потрассировать программу.. Реализованы они в самом коде - ничего сверху на файле не довешано.<br>Подскажите, пожалуйста, зародышу крекера: где происходит обращение к библиотеке на чтение книги? я уже запутался <img src="img/smilies/s4.gif" alt=""> в этих дебрях кода защиты, перемешанных с функциональным, да еще и с антиотладкой. Там где-то будут и параметры обращения к длл, и, что самое главное, условие открытия книги или файла ошибок, которое передается из блиотеки.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99950&amp;user=3744&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=11" class="addthx" data-post="99950"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]Ice[/b]','')">Ice</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 7.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.42'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3744">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 октября 2006 11:28 <br><script type="text/javascript">QU('Ice','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<I>fix200 пишет:<br>пошарил эту функцию, так и не понял что за число она должна возвращать, запутанно как-то всё. Немного поправил ее, смотри в аттаче. </I><br>Ошибка, которую кидает программа (makeerror) генерируется в этой же библиотеке, чуть ниже.<br>может, все-таки возможно подправить только ее, в exe&#039;шнике, вроде, нет проверок на тему &quot;что отображать&quot;, он просто выводит то, что вернула библиотечная функция<br><I>Ice пишет:<br>они, вроде, полностью связаны.  </I>, а может и нет
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=99965&amp;user=3744&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=12" class="addthx" data-post="99965"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]Ice[/b]','')">Ice</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 7.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.42'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3744">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 октября 2006 07:10 <br><script type="text/javascript">QU('Ice','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ice" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=6554.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
Ok, все, проблема решилась - в моем посте от <i class=x>Окт 20, 2006 20:16:07</i> был указан последний фрагмент кода, который надо было патчить. Теперь все работает. <img src="img/smilies/s1.gif" alt=""> <br><b>fix200</b> спасибо тебе огромное за помощь.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=100070&amp;user=3744&amp;forum_n=5&amp;topic=6554.html&amp;page=0&amp;anchor=13" class="addthx" data-post="100070"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Как заставить switch всегда возвращать один и тот же результат?</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=6554" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
