<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Опознать стандартную функцию TurboPascal - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Ковыряю старинную программку (для DOS&#039;а). Написана изначально на какой-то из старых версий TurboPascal. Интересует в той программке конкретно одна функция, которую IDA определила так: Code:       ; =============== S U B R O">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=55995'>tyns777</a>, <a target='_blank' href='?action=userinfo&amp;user=55997'>bezumchik</a>, <a target='_blank' href='?action=userinfo&amp;user=55477'>Lohmaty</a> (+7 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Опознать стандартную функцию TurboPascal</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 марта 2019 06:26 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=25654.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Ковыряю старинную <noindex><a href="http://old-dos.ru/dl.php?i" rel="nofollow" target="_blank">программку</a></noindex> (для DOS&#039;а).<br>Написана изначально на какой-то из старых версий TurboPascal.<br><br>Интересует в той программке конкретно одна функция,<br>которую IDA определила так:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_comment">; =============== S U B R O U T I N E =======================================</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_comment">; Attributes: bp-based frame</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">sub_14C&nbsp;&nbsp;<span class="hl_function"><b>proc</b></span>&nbsp;<span class="hl_function"><b>near</b></span>&nbsp;<span class="hl_comment">; CODE XREF: sub_1A3+Fp sub_1A3+21p ...</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">var_1&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>byte</b></span>&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;<span class="hl_char">-</span><span class="hl_number">1</span></li><li class="hl_l1">arg_0&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>word</b></span>&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;&nbsp;<span class="hl_number">4</span></li><li class="hl_l0">arg_2&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>word</b></span>&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;&nbsp;<span class="hl_number">6</span></li><li class="hl_l1">arg_4&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_function"><b>word</b></span>&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;&nbsp;<span class="hl_number">8</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;<span class="hl_registr">bp</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">bp</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">sp</span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>sub</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">sp</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">2</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">ax</span><span class="hl_char">,</span>&nbsp;word_27B4</li><li class="hl_l1">&nbsp;<span class="hl_function"><b>xor</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">dx</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">dx</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;@Real<span class="hl_char">$</span>q7Longint&nbsp;<span class="hl_comment">; Real(x: Longint{DX:AX}): Real</span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">cx</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">bp</span><span class="hl_char">+</span>arg_0<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">si</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">bp</span><span class="hl_char">+</span>arg_2<span class="hl_char">]</span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">di</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">bp</span><span class="hl_char">+</span>arg_4<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;@<span class="hl_char">$</span>brdiv<span class="hl_char">$</span>q4Realt1&nbsp;<span class="hl_comment">; Real(AX:BX:DX)/=Real(CX:SI:DI)</span></li><li class="hl_l1"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_comment">; Real(CX:SI:DI)=Real(AX:BX:DX)%Real(CX:SI:DI)</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;@Frac<span class="hl_char">$</span>q4Real&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; Frac(x: Real): Real</span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">cx</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">2182h</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">si</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0DAA2h</span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">di</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">490Fh</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;@<span class="hl_char">$</span>brmul<span class="hl_char">$</span>q4Realt1&nbsp;<span class="hl_comment">; Real(AX:BX:DX)*=Real(CX:SI:DI)</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_comment">;???????????????????????????????????? </span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;@Sin<span class="hl_char">$</span>q4Real&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; Sin(x: Real): Real</span></li><li class="hl_l0"><span class="hl_comment">;????????????????????????????????????</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;<span class="hl_function"><b>and</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">dh</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">7Fh</span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">cx</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">87h</span>&nbsp;<span class="hl_comment">; '&amp;#231;'</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>xor</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">si</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">si</span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">di</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">4800h</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;@<span class="hl_char">$</span>brmul<span class="hl_char">$</span>q4Realt1&nbsp;<span class="hl_comment">; Real(AX:BX:DX)*=Real(CX:SI:DI)</span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;@Round<span class="hl_char">$</span>q4Real&nbsp;&nbsp;&nbsp;<span class="hl_comment">; Round(x: Real): Longint</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_char">[</span><span class="hl_registr">bp</span><span class="hl_char">+</span>var_1<span class="hl_char">]</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">al</span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">al</span><span class="hl_char">,</span>&nbsp;<span class="hl_char">[</span><span class="hl_registr">bp</span><span class="hl_char">+</span>var_1<span class="hl_char">]</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">sp</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">bp</span></li><li class="hl_l1">&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_registr">bp</span></li><li class="hl_l0">&nbsp;<span class="hl_function"><b>retn</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">6</span></li><li class="hl_l1">sub_14C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">endp</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_comment">;;;.................</span></li><li class="hl_l0"><span class="hl_comment">;----------------------------------------------------------------------------</span></li><li class="hl_l1"><span class="hl_comment">; [00000074 BYTES: COLLAPSED FUNCTION Sin(Real). PRESS KEYPAD &quot;+&quot; TO EXPAND]</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0918</span>&nbsp;<span class="hl_comment">; Sin(x: Real): Real</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0918</span>&nbsp;<span class="hl_comment">; Attributes: library function</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0918</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0918</span>&nbsp;<span class="hl_comment">; Sin(Real)</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0918</span>&nbsp;@Sin<span class="hl_char">$</span>q4Real&nbsp;<span class="hl_function"><b>proc</b></span>&nbsp;<span class="hl_function"><b>far</b></span>&nbsp;&nbsp;<span class="hl_comment">; CODE XREF: sub_14C+31P</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0918</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">cx</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">2181h</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">091B</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">si</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0DAA2h</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">091E</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">di</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0C90Fh</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0921</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;__RealAdd</li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0924</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">al</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">al</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0926</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>short</b></span>&nbsp;@Cos<span class="hl_char">$</span>q4Real&nbsp;<span class="hl_comment">; Cos(x: Real): Real</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0928</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>xor</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">dh</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">80h</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">092B</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">092B</span>&nbsp;<span class="hl_comment">; Cos(Real)</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">092B</span>&nbsp;@Cos<span class="hl_char">$</span>q4Real<span class="hl_char">:</span>&nbsp;<span class="hl_comment">; CODE XREF: Sin(Real)+Ej</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">092B</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">al</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">6Ch</span>&nbsp;<span class="hl_comment">; 'l'   ; Cos(x: Real): Real</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">092D</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jb</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>short</b></span>&nbsp;locret_1C4B</li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">092F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">cx</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">2183h</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0932</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">si</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0DAA2h</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">di</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">490Fh</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0938</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">dx</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0939</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>and</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">dh</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">7Fh</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">093C</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;__RealCmp</li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">093F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">dx</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jb</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>short</b></span>&nbsp;loc_1C12</li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0942</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;sub_1B0C</li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">di</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0946</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">si</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0947</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">cx</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0948</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>push</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">cs</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0949</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>near</b></span>&nbsp;<span class="hl_function"><b>ptr</b></span>&nbsp;@Frac<span class="hl_char">$</span>q4Real&nbsp;<span class="hl_comment">; Frac(x: Real): Real</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">094C</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">cx</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">094D</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">si</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">094E</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>pop</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">di</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">094F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;sub_1B02</li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0952</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0952</span>&nbsp;loc_1C12<span class="hl_char">:</span>&nbsp;<span class="hl_comment">; CODE XREF: Sin(Real)+28j</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0952</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>test</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">dh</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">80h</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0955</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>short</b></span>&nbsp;loc_1C1A</li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0957</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;sub_1AEE</li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">095A</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">095A</span>&nbsp;loc_1C1A<span class="hl_char">:</span>&nbsp;<span class="hl_comment">; CODE XREF: Sin(Real)+3Dj</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">095A</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dec</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">cl</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">095C</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;__RealCmp</li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">095F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">pushf</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0960</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jb</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>short</b></span>&nbsp;loc_1C25</li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0962</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;sub_1AF8</li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0965</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0965</span>&nbsp;loc_1C25<span class="hl_char">:</span>&nbsp;<span class="hl_comment">; CODE XREF: Sin(Real)+48j</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>dec</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">cl</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0967</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;__RealCmp</li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">096A</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jb</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>short</b></span>&nbsp;loc_1C34</li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">096C</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>inc</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">cl</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">096E</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">dh</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">80h</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0971</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;__RealAdd</li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0974</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0974</span>&nbsp;loc_1C34<span class="hl_char">:</span>&nbsp;&nbsp;<span class="hl_comment">; CODE XREF: Sin(Real)+52j</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0974</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>cmp</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">al</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">6Ch</span>&nbsp;<span class="hl_comment">; 'l'</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0976</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jb</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>short</b></span>&nbsp;loc_1C41</li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0978</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">di</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">98Ch</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">097B</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">cx</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">7</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">097E</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;sub_1EF7</li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0981</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0981</span>&nbsp;loc_1C41<span class="hl_char">:</span>&nbsp;&nbsp;<span class="hl_comment">; CODE XREF: Sin(Real)+5Ej</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0981</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">popf</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0982</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jb</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>short</b></span>&nbsp;locret_1C4B</li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0984</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">al</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr">al</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0986</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>jz</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>short</b></span>&nbsp;locret_1C4B</li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0988</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>xor</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">dh</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">80h</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">098B</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">098B</span>&nbsp;locret_1C4B<span class="hl_char">:</span>&nbsp;&nbsp;<span class="hl_comment">; CODE XREF: Sin(Real)+15j</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">098B</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; Sin(Real)+6Aj ...</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">098B</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">retf</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">098B</span>&nbsp;@Sin<span class="hl_char">$</span>q4Real&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">endp</span></li>        </ol>
    </div>
</div></div>
<br><br>Собственно, вопрос по той функции, которую IDA обозвала как <b>@Sin&#036;q4Real(x)</b>, якобы она из RTL.<br>Но RTL используется, видимо, кастомная, не от NorbertJuffa.<br><br><b>И похоже, что то не sin(x) вовсе.</b><br><br>Для справок дальше  выложу RTL-ную fsin.asm от TurboPascal 7...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=392507&amp;user=35473&amp;forum_n=5&amp;topic=25654.html&amp;page=0&amp;anchor=1" class="addthx" data-post="392507"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 марта 2019 06:33 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=25654.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
<b>[продолжение]</b><br><br><br>Файл fsin.asm от TurboPascal 7 стандартной RTL, для сравнения:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_comment">; *******************************************************</span></li><li class="hl_l1"><span class="hl_comment">; *                                                     *</span></li><li class="hl_l0"><span class="hl_comment">; *     Turbo Pascal Runtime Library Version 7.0        *</span></li><li class="hl_l1"><span class="hl_comment">; *     Real Sine/Cosine                                *</span></li><li class="hl_l0"><span class="hl_comment">; *                                                     *</span></li><li class="hl_l1"><span class="hl_comment">; *     Copyright (C) 1989-1993 Norbert Juffa           *</span></li><li class="hl_l0"><span class="hl_comment">; *                                                     *</span></li><li class="hl_l1"><span class="hl_comment">; *******************************************************</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TITLE&nbsp;&nbsp;&nbsp;FPSIN</li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>CODE</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>SEGMENT</b></span>&nbsp;<span class="hl_function"><b>BYTE</b></span>&nbsp;<span class="hl_function">PUBLIC</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>ASSUME</b></span>&nbsp;&nbsp;<span class="hl_registr">CS</span><span class="hl_char">:</span><span class="hl_function">CODE</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>EXTRN</b></span>&nbsp;&nbsp;&nbsp;RealAdd<span class="hl_char">:</span><span class="hl_function">NEAR</span><span class="hl_char">,</span>RealSub<span class="hl_char">:</span><span class="hl_function">NEAR</span><span class="hl_char">,</span>RealPoly<span class="hl_char">:</span><span class="hl_function">NEAR</span><span class="hl_char">,</span>RealMulNoChk<span class="hl_char">:</span><span class="hl_function">NEAR</span><span class="hl_char">,</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>EXTRN</b></span>&nbsp;&nbsp;&nbsp;HaltError<span class="hl_char">:</span><span class="hl_function">NEAR</span><span class="hl_char">,</span>RealTrunc<span class="hl_char">:</span><span class="hl_function">NEAR</span><span class="hl_char">,</span>RealMul<span class="hl_char">:</span><span class="hl_function">NEAR</span><span class="hl_char">,</span>RealFloat<span class="hl_char">:</span><span class="hl_function">NEAR</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>EXTRN</b></span>&nbsp;&nbsp;&nbsp;RealReduceMP<span class="hl_char">:</span><span class="hl_function">NEAR</span><span class="hl_char">,</span>RFrac<span class="hl_char">:</span><span class="hl_function">FAR</span><span class="hl_char">,</span>RealMulFNoChk<span class="hl_char">:</span><span class="hl_function">NEAR</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PUBLIC</b></span>&nbsp;&nbsp;RSin<span class="hl_char">,</span>RCos</li><li class="hl_l0">&nbsp;</li><li class="hl_l1">RCos&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PROC</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">FAR</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PUSH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>BP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; save caller's frame pointer</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>AND</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">DH</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">7Fh</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; abs(x), since cos (x) = cos (abs(x))</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">BP</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; load function code for cosine</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>JMP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">$</span>cos_entry&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; goto sine/cosine computation</span></li><li class="hl_l0">RCos&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">ENDP</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>ALIGN</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_number">4</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">RSin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PROC</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">FAR</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PUSH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>BP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; save caller's frame pointer</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>XOR</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">BP</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr"><b>BP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; load function code for sine</span></li><li class="hl_l1"><span class="hl_char">$</span>cos_entry<span class="hl_char">:</span>&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">CH</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">80h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; load mask to extract sign bit</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>AND</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">CH</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr"><b>DH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; extract sign bit</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>XOR</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">DH</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr"><b>CH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; x := abs(x)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PUSH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>CX</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; save sign</span></li><li class="hl_l1"><span class="hl_char">$</span>value_ok<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">CX</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">04E81h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; load</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">SI</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0836Eh</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;  real constant</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">DI</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">022F9h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;   4/pi</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CMP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">AL</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">9Fh</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; x &gt;= 2^30 ?</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>JAE</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">$</span>big_val&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; x/(pi/4) too big to be stored in long</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PUSH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>AX</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; save x</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PUSH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>BX</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;  on</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PUSH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>DX</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;   stack</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RealMulFNoChk&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; compute x/(pi/4)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>XOR</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">CH</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr"><b>CH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; signal truncation desired</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RealTrunc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; n = Trunc (x/(pi/4))</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>ROR</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">AL</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; if quadrant odd, set CF=1</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>ROL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">AL</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; restore register, CF=1 if odd quadrant</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>ADC</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">AX</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; increment quadrant</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>ADC</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">DX</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;  if quadrant odd</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>ADD</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">BP</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr"><b>AX</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; q := quadrant + flag</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RealFloat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; convert quadrant to REAL value</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>POP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>DI</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; get</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>POP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>SI</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;  back</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>POP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>CX</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;   x</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>TEST</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">BP</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; determine octants that use cos,sin</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PUSHF</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; save sin/cos flag</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>PUSH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>BP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; save q</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">BP</span><span class="hl_char">,</span>&nbsp;<span class="hl_function"><b>OFFSET</b></span>&nbsp;c1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; pointer to reduction constant table</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RealReduceMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; compute x + n*(pi/2) to full precision</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">CX</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; use five coefficients</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>XOR</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">SI</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr"><b>SI</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; signal P(x&amp;#178;)*x+x wanted</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>POP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>BP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; get back q</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>POPF</b></span><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_comment">; get back sin/cos flag</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>JPE</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">$</span>sine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; octants 0, 3, 4, 7 take sine</span></li><li class="hl_l1"><span class="hl_char">$</span>cosine<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">DI</span><span class="hl_char">,</span><span class="hl_function"><b>OFFSET</b></span>&nbsp;CS_COEFF<span class="hl_comment">; pointer to 1st coeff. of cos approx.</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>INC</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>SI</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; signal P(x&amp;#178;) wanted</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RealPoly&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; P(x&amp;#178;) in DX:BX:AX</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">CX</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">00081h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; load</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>XOR</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">SI</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr"><b>SI</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;  floating-point</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">DI</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr"><b>SI</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;   constant 1.0</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RealAdd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; 1 + P(x&amp;#178;)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>JMP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">$</span>make_sign&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; put appropriate sign on result</span></li><li class="hl_l1"><span class="hl_char">$</span>sine<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">DI</span><span class="hl_char">,</span><span class="hl_function"><b>OFFSET</b></span>&nbsp;SN_COEFF<span class="hl_comment">; pointer to 1st coeff. of sin approx.</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RealPoly&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; P(x&amp;#178;)*x+x in DX:BX:AX</span></li><li class="hl_l1"><span class="hl_char">$</span>make_sign<span class="hl_char">:</span>&nbsp;&nbsp;<span class="hl_function"><b>POP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>CX</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; get sign mask</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>INC</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>BP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; determine if</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>TEST</b></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">BP</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;  result has to negated</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>JZ</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">$</span>ende&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; result ok</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>XOR</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">CH</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">80h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; negate sign flag</span></li><li class="hl_l0"><span class="hl_char">$</span>ende<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>POP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr"><b>BP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; restore caller's frame pointer</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>OR</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">AL</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr"><b>AL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; result zero ?</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>JZ</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">$</span>end_sin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; yes, done</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>XOR</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">DH</span><span class="hl_char">,</span>&nbsp;<span class="hl_registr"><b>CH</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; make sign bit</span></li><li class="hl_l0"><span class="hl_char">$</span>end_sin<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>RET</b></span><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_comment">; done</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_char">$</span>big_val<span class="hl_char">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>SUB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">CL</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; 1/(2*pi) in DI:SI:CX</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RealMulNoChk&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; x/(2*pi)</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RFrac&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; frac (x/(2*pi))</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">CX</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">02183h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; load</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">SI</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0DAA2h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;  constant</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">DI</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0490Fh</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;   2*pi</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RealMulNoChk&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; 2*pi * frac (x/(2*pi)) = remainder</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>JMP</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">$</span>value_ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; reduction to 0..2*pi done</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">SN_COEFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">067h</span><span class="hl_char">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0B1h</span><span class="hl_char">,</span><span class="hl_number">0D4h</span>&nbsp;&nbsp;<span class="hl_comment">; -2.476053850842e-8</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">06Eh</span><span class="hl_char">,</span><span class="hl_number">05Ch</span><span class="hl_char">,</span><span class="hl_number">08Bh</span><span class="hl_char">,</span><span class="hl_number">0B6h</span><span class="hl_char">,</span><span class="hl_number">0EBh</span><span class="hl_char">,</span><span class="hl_number">038h</span>&nbsp;&nbsp;<span class="hl_comment">;  2.755533965768e-6</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">074h</span><span class="hl_char">,</span><span class="hl_number">0B5h</span><span class="hl_char">,</span><span class="hl_number">09Ch</span><span class="hl_char">,</span><span class="hl_number">0FCh</span><span class="hl_char">,</span><span class="hl_number">00Ch</span><span class="hl_char">,</span><span class="hl_number">0D0h</span>&nbsp;&nbsp;<span class="hl_comment">; -1.984126372865e-4</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">07Ah</span><span class="hl_char">,</span><span class="hl_number">044h</span><span class="hl_char">,</span><span class="hl_number">086h</span><span class="hl_char">,</span><span class="hl_number">088h</span><span class="hl_char">,</span><span class="hl_number">088h</span><span class="hl_char">,</span><span class="hl_number">008h</span>&nbsp;&nbsp;<span class="hl_comment">;  8.333333325083e-3</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">07Eh</span><span class="hl_char">,</span><span class="hl_number">0A9h</span><span class="hl_char">,</span><span class="hl_number">0AAh</span><span class="hl_char">,</span><span class="hl_number">0AAh</span><span class="hl_char">,</span><span class="hl_number">0AAh</span><span class="hl_char">,</span><span class="hl_number">0AAh</span>&nbsp;&nbsp;<span class="hl_comment">; -1.666666666663e-1</span></li><li class="hl_l0">CS_COEFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">06Bh</span><span class="hl_char">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">0C7h</span><span class="hl_char">,</span><span class="hl_number">091h</span>&nbsp;&nbsp;<span class="hl_comment">; -2.715314622037e-7</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">071h</span><span class="hl_char">,</span><span class="hl_number">034h</span><span class="hl_char">,</span><span class="hl_number">0B7h</span><span class="hl_char">,</span><span class="hl_number">0A1h</span><span class="hl_char">,</span><span class="hl_number">006h</span><span class="hl_char">,</span><span class="hl_number">050h</span>&nbsp;&nbsp;<span class="hl_comment">;  2.479862035332e-5</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">077h</span><span class="hl_char">,</span><span class="hl_number">02Eh</span><span class="hl_char">,</span><span class="hl_number">00Ah</span><span class="hl_char">,</span><span class="hl_number">058h</span><span class="hl_char">,</span><span class="hl_number">00Bh</span><span class="hl_char">,</span><span class="hl_number">0B6h</span>&nbsp;&nbsp;<span class="hl_comment">; -1.388887879411e-3</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">07Ch</span><span class="hl_char">,</span><span class="hl_number">018h</span><span class="hl_char">,</span><span class="hl_number">0A0h</span><span class="hl_char">,</span><span class="hl_number">0AAh</span><span class="hl_char">,</span><span class="hl_number">0AAh</span><span class="hl_char">,</span><span class="hl_number">02Ah</span>&nbsp;&nbsp;<span class="hl_comment">;  4.166666651281e-2</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">07Fh</span><span class="hl_char">,</span><span class="hl_number">0EFh</span><span class="hl_char">,</span><span class="hl_number">0FFh</span><span class="hl_char">,</span><span class="hl_number">0FFh</span><span class="hl_char">,</span><span class="hl_number">0FFh</span><span class="hl_char">,</span><span class="hl_number">0FFh</span>&nbsp;&nbsp;<span class="hl_comment">; -4.999999999923e-1</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">C1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">080h</span><span class="hl_char">,</span><span class="hl_number">000h</span><span class="hl_char">,</span><span class="hl_number">000h</span><span class="hl_char">,</span><span class="hl_number">000h</span><span class="hl_char">,</span><span class="hl_number">00Fh</span><span class="hl_char">,</span><span class="hl_number">0C9h</span>&nbsp;&nbsp;<span class="hl_comment">; pi/4-eps =</span></li><li class="hl_l1">C2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>DB</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">070h</span><span class="hl_char">,</span><span class="hl_number">0c2h</span><span class="hl_char">,</span><span class="hl_number">068h</span><span class="hl_char">,</span><span class="hl_number">021h</span><span class="hl_char">,</span><span class="hl_number">0a2h</span><span class="hl_char">,</span><span class="hl_number">0dah</span>&nbsp;&nbsp;<span class="hl_comment">;      eps =</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">RSIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">ENDP</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>ALIGN</b></span>&nbsp;&nbsp;&nbsp;<span class="hl_number">4</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_function"><b>CODE</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">ENDS</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">END</span></li><li class="hl_l0">&nbsp;</li>        </ol>
    </div>
</div></div>
<br><br><br><br>Ну и собственно, в чём затык - переписал функцию на Си<br>- Всё работает, за исключением функции sin(x), по которой как раз и были вопросы.<br>В тексте комментариями обозначены места, где затык:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_large">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;</li><li class="hl_l1">#include&nbsp;<span class="hl_char">&lt;</span>stdio<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l0">#include&nbsp;<span class="hl_char">&lt;</span>math<span class="hl_char">.</span>h<span class="hl_char">&gt;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">*</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l1">unsigned&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;dwWord12result&nbsp;&nbsp;<span class="hl_char">=</span>&nbsp;0x17AD&nbsp;<span class="hl_comment">;</span></li><li class="hl_l0">unsigned&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;&nbsp;&nbsp;iPersent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">*</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l1">unsigned&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;get_persent&nbsp;<span class="hl_char">(</span><span class="hl_function"><b>double</b></span>&nbsp;factor<span class="hl_char">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">*</span>&nbsp;sub_14C&nbsp;originally&nbsp;<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l0">{</li><li class="hl_l1">unsigned&nbsp;<span class="hl_function"><b>int</b></span>&nbsp;&nbsp;result&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">0</span><span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_function"><b>double</b></span>&nbsp;compat_double<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compat_double&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span><span class="hl_function">double</span><span class="hl_char">)</span>&nbsp;dwWord12result&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compat_double&nbsp;<span class="hl_char">=</span>&nbsp;compat_double&nbsp;<span class="hl_char">/</span>&nbsp;factor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compat_double&nbsp;<span class="hl_char">=</span>&nbsp;compat_double&nbsp;<span class="hl_char">-</span>&nbsp;floor<span class="hl_char">(</span>compat_double<span class="hl_char">)</span>&nbsp;<span class="hl_comment">;   /*Frac()*/</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compat_double&nbsp;<span class="hl_char">=</span>&nbsp;compat_double&nbsp;<span class="hl_char">*</span>&nbsp;<span class="hl_number">3</span><span class="hl_char">.</span><span class="hl_number">14159265358979</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;   /*PI*/</span></li><li class="hl_l0"><span style="word-break: break-all">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">*</span>&nbsp;&nbsp;here&nbsp;compat_double&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">2</span><span class="hl_char">.</span><span class="hl_number">71193340012178</span>&nbsp;<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span>&nbsp;ERROR&nbsp;&nbsp;&nbsp;f<span class="hl_char">(</span><span class="hl_number">2</span><span class="hl_char">.</span><span class="hl_number">71193340012178</span><span class="hl_char">)</span>&nbsp;must&nbsp;be&nbsp;<span class="hl_char">-</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">909107744182620</span>&nbsp;<span class="hl_char">!</span><span class="hl_char">!</span><span class="hl_char">!</span><span class="hl_char">!</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">)</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compat_double&nbsp;<span class="hl_char">=</span>&nbsp;sin<span class="hl_char">(</span>&nbsp;compat_double&nbsp;&nbsp;<span class="hl_char">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1"><span class="hl_char">/</span><span class="hl_char">*</span>&nbsp;must&nbsp;be&nbsp;<span class="hl_char">-</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">909107744182620</span>&nbsp;<span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span><span class="hl_char">?</span>&nbsp;<span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l0">#if&nbsp;<span class="hl_number">0</span></li><li class="hl_l1">&nbsp;&nbsp;compat_double&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">-</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">909107744182620</span><span class="hl_comment">;</span></li><li class="hl_l0">#endif</li><li class="hl_l1">&nbsp;</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function">if</span><span class="hl_char">(</span>compat_double<span class="hl_char">&lt;</span><span class="hl_number">0</span>&nbsp;<span class="hl_char">)</span>&nbsp;compat_double<span class="hl_char">=</span><span class="hl_char">-</span>compat_double&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compat_double&nbsp;<span class="hl_char">=</span>&nbsp;compat_double&nbsp;<span class="hl_char">*</span>&nbsp;<span class="hl_number">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_char">(</span>unsigned&nbsp;<span class="hl_function">int</span><span class="hl_char">)</span>&nbsp;<span class="hl_char">(</span>compat_double<span class="hl_char">+</span><span class="hl_number">0</span><span class="hl_char">.</span><span class="hl_number">5</span><span class="hl_char">)</span>&nbsp;&nbsp;&nbsp;<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">=</span>&nbsp;result&nbsp;<span class="hl_char">&amp;</span><span style="word-break: break-all">&nbsp;0xFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">return&nbsp;<span class="hl_char">(</span>result<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">}</li><li class="hl_l1">&nbsp;</li><li class="hl_l0"><span class="hl_char">/</span><span class="hl_char">*</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">-</span><span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l1"><span class="hl_function"><b>void</b></span>&nbsp;main<span class="hl_char">(</span><span class="hl_function">void</span><span class="hl_char">)</span></li><li class="hl_l0">{</li><li class="hl_l1">&nbsp;&nbsp;iPersent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_char">=</span>&nbsp;get_persent&nbsp;<span class="hl_char">(</span>&nbsp;<span class="hl_number">23</span><span class="hl_char">.</span><span class="hl_number">6884365000005</span>&nbsp;<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;<span class="hl_char">/</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;Here&nbsp;error&nbsp;<span class="hl_char">-</span>&nbsp;iPersent&nbsp;must&nbsp;be&nbsp;<span class="hl_char">=</span>&nbsp;<span class="hl_number">91</span>&nbsp;&nbsp;<span class="hl_char">,</span>&nbsp;<span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span>&nbsp;but&nbsp;it&nbsp;is&nbsp;<span class="hl_number">42</span><span class="hl_char">.</span><span class="hl_char">.</span><span class="hl_char">.</span></li><li class="hl_l1">&nbsp;&nbsp;<span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">*</span><span class="hl_char">/</span></li><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;printf<span class="hl_char">(</span><span class="hl_quote">&quot;Calculated: %i%%&quot;</span><span class="hl_char">,</span>iPersent<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">}</li>        </ol>
    </div>
</div></div>
<br><br>- Эта тестовая программа, будучи запущенной, должна  написать:<br><br><b>Calculated: 91%</b><br><br>но вместо этого  пишет:<br><br><b>Calculated: 42%</b><br><br>Трассируя оригинальную программу и тестовый пример, вижу  промежуточные результаты совпадающими вплоть до вызова функции <b>sin()</b><br><br>Если в тестовом примере вместо &quot;#if 0&quot; написать &quot;#if 1&quot;, то функция  <b>get_persent (double factor)</b> вернёт 91, как ей и положено.<br>...<br><br><br>То, что функция обозвана как <b>sin(x)</b> неверно, подтверждается тем,<br>что вызов  sin(2.71) и на Си, и на Паскале даёт одинаковый результат, примерно 0.415.<br><br>Что и приводит по итогу к результату 42% вместо 91%.<br><br>Но вот что это за функция в действительности, мне пока определить не удалось, сходу.<br><b><br></b>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=392508&amp;user=35473&amp;forum_n=5&amp;topic=25654.html&amp;page=0&amp;anchor=2" class="addthx" data-post="392508"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 марта 2019 09:09 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=25654.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<I>dosprog пишет:<br>что то не sin(x) вовсе. </I><br>cos(x)?<img src="img/smilies/s11.gif" alt=""> tg, ctg
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=392513&amp;user=26651&amp;forum_n=5&amp;topic=25654.html&amp;page=0&amp;anchor=3" class="addthx" data-post="392513"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 марта 2019 09:48 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=25654.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
Проверял..  как вечерком перед сном сел глянуть программульку, так и загляделся уже.<br>Психану и просто воспроизведу оригинальную функцию.<br>..С этим их нестрандартным Real&#039;ом один головнякъ..<br><b><br></b>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=392516&amp;user=35473&amp;forum_n=5&amp;topic=25654.html&amp;page=0&amp;anchor=4" class="addthx" data-post="392516"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]ELF_7719116[/b]','')">ELF_7719116</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 419.0 (мудрец), 647thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.73'>Активность: 0.46<span style='color:green'>&nearr;</span>0.51</span><br>Статус: <a href="action=userinfo&amp;user=26651">Участник</a><br><font color=blue>&quotТибериумный реверсинг&quot</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 марта 2019 10:16 <br><script type="text/javascript">QU('ELF_7719116','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ELF_7719116" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=25654.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<I>dosprog пишет:<br>..С этим их нестрандартным </I><br>load действительно различаются,но по числам функи очень похожи <br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0"><span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">CX</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">02183h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; load</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">SI</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0DAA2h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; constant</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>MOV</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">DI</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0490Fh</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; 2*pi</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>CALL</b></span>&nbsp;&nbsp;&nbsp;&nbsp;RealMulNoChk&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">; 2*pi * frac (x/(2*pi)) = remainder</span></li>        </ol>
    </div>
</div></div>
<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">0918</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">cx</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">2181h</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">091B</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">si</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0DAA2h</span></li><li class="hl_l0">seg006<span class="hl_char">:</span><span class="hl_number">091E</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>mov</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_registr">di</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">0C90Fh</span></li><li class="hl_l1">seg006<span class="hl_char">:</span><span class="hl_number">0921</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>call</b></span>&nbsp;&nbsp;&nbsp;&nbsp;__RealAdd</li>        </ol>
    </div>
</div></div>
<br>RealMulNoChk == __RealAdd?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=392518&amp;user=26651&amp;forum_n=5&amp;topic=25654.html&amp;page=0&amp;anchor=5" class="addthx" data-post="392518"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 марта 2019 10:36 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=25654.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<I>ELF_7719116 пишет:<br>load действительно различаются,но по числам функи очень похожи  </I><br><br>Та константа это PI. Только и всего.. Так, наверное, и IDA пыталась опознавать эту функцию.<br><br><I>ELF_7719116 пишет:<br>RealMulNoChk == __RealAdd?  </I><br><br>Не.. RealMul это умножение..<br><br>Функции разные, однозначно.<br><br>В стандартной RTL пытался искать что-то похожее, в том числе и по этим константам,<br>но ничего похожего нет. <br><br>.. Это был у паскальщиков в 90-х такой фетиш - подцепляли всякие самодельные RTL&#039;ы.<br>Считалось признаком определённой крутости, - но иногда потом эта крутость выливалась в непонятные глюки софта.  <br><b><br></b>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=392519&amp;user=35473&amp;forum_n=5&amp;topic=25654.html&amp;page=0&amp;anchor=6" class="addthx" data-post="392519"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]2nd[/b]','')">2nd</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 39.4 (посетитель), 9thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.04'>Активность: 0.01=0.01</span><br>Статус: <a href="action=userinfo&amp;user=2094">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 марта 2019 10:49 <br><script type="text/javascript">QU('2nd','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=2nd" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=25654.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Begin<br>  WriteLn(Cos(2.71));<br>End.<br><br>---------------<br>Borland Pascal  Version 7.0  Copyright (c) 1983,92 Borland International<br>-9.0830066636E-01
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=392520&amp;user=2094&amp;forum_n=5&amp;topic=25654.html&amp;page=0&amp;anchor=7" class="addthx" data-post="392520"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=35473" title="11-03-2019 08:00, ранг:392.4" target="_blank">dosprog</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]dosprog[/b]','')">dosprog</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 431.7 (мудрец), 390thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 6.95'>Активность: 0.73<span style='color:red'>&searr;</span>0.32</span><br>Статус: <a href="action=userinfo&amp;user=35473">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 11 марта 2019 11:03 &middot; Поправил: dosprog <br><script type="text/javascript">QU('dosprog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dosprog" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=25654.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<I>2nd пишет:<br>Begin<br>WriteLn(Cos(2.71));<br>End. </I><br><br>)) Точно.  И ведь пробовал, вплоть до тангенсов, - видно, было уже поздно..<br><br>Проверил - всё работает.<br><br>.. Ну, бывает..<br><b><br></b>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=392521&amp;user=35473&amp;forum_n=5&amp;topic=25654.html&amp;page=0&amp;anchor=8" class="addthx" data-post="392521"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Опознать стандартную функцию TurboPascal</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=25654" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
