<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Передача параметров функцией на асме - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Вопрос возник такой.. Есть ф-ия. Она возвращает результат (это число) допустим в EAX. При ошибке (я не имею ввиду битые указатели или прочие exeption - для этого есть SEH) ф-ия должна сообщить об этом нулем в регистре. Но в EAX">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=39467'>hgdagon</a>, <a target='_blank' href='?action=userinfo&amp;user=28016'>asfa</a> (+4 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Передача параметров функцией на асме</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=6&amp;topic=8102&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=6&amp;topic=8102&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 02:22 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Вопрос возник такой.. Есть ф-ия. Она возвращает результат (это число) допустим в EAX. При ошибке (я не имею ввиду битые указатели или прочие exeption - для этого есть SEH) ф-ия должна сообщить об этом нулем в регистре. Но в EAX может быть 0 и без ошибки! Т.е. результат обработки может быть равен 00h. Как быть? Есть пока 2 решения:<br>1. В EAX результат, в другом регистре 0 или не 0 для контроля ошибки.<br>(Но вызов твкой ф-ии выглядит не красиво. Хотелось бы использовать только 1 регистр)<br>2. Результат помещается в память. В EAX указатель или 0 при ошибке.<br>(Результат помещается в память ф-ей, а программисту это может и не надо. Придется ему обратно из памяти в регистр пересылать. Оптимизацией не пахнет!).<br>Так вот. Можно ли использовать для контроля ошибок ФЛАГИ! Я сам в принципе не встречал таких ф-ий. Но тогда почему? Ведь команды ret и pop не влияют на состояние флагов!<br>Зато как красиво бы было:<br>&gt; call  fMyFunction<br>&gt; jnz   lError<br>&gt; результат в EAX<br>Заранее спасибо за помощь начинающему <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=125943&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=1" class="addthx" data-post="125943"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]RSI[/b]','')">RSI</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 284.8 (наставник), 6thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.85'>Активность: 0.15<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6361">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 05:11 <br><script type="text/javascript">QU('RSI','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=RSI" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
<b>X_MEM</b><br>А какие числа должна возвращать функция? если положительные, тогда в случае <br>ошибки будет уместно написать mov eax,-1
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=125968&amp;user=6361&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=2" class="addthx" data-post="125968"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]SLV[/b]','')">SLV</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 309.8 (мудрец), 21thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.69'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=663">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 07:59 <br><script type="text/javascript">QU('SLV','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SLV" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
carry flag мона приспособить как индикатор error&#039;а...
<br><br><font size="1"><i>-----<br>Shalom ebanats!</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=126001&amp;user=663&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=3" class="addthx" data-post="126001"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Bitfry[/b]','')">Bitfry</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 495.3 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.8'>Активность: 0.3<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=410">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 08:18 <br><script type="text/javascript">QU('Bitfry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Bitfry" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<I>SLV пишет:<br>carry flag мона приспособить как индикатор error&#039;а... </I><br>Сам сегодня так стал делать, но почему другие так не делают?<br><br>Перефразирую вопрос: <br>что мешает индикации ошибок через регистр флагов в общем случае?
<br><br><font size="1"><i>-----<br>Всем привет, я вернулся</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=126002&amp;user=410&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=4" class="addthx" data-post="126002"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]UsAr[/b]','')">UsAr</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 66.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.14'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1854">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 08:23 <br><script type="text/javascript">QU('UsAr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UsAr" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
можно еще использовать SetLastError/GetLastError
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126005&amp;user=1854&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=5" class="addthx" data-post="126005"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]HoBleen[/b]','')">HoBleen</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/5110.jpg" alt=""><br><span class=txtSm>Ранг: 240.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.09'>Активность: 0.19<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5110">Участник</a><br><font color=blue>Author of ACKiller </font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 08:23 <br><script type="text/javascript">QU('HoBleen','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HoBleen" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<I>SLV пишет:<br>carry flag мона приспособить как индикатор error&#039;а... </I><br>+1, ИМХО самое четкое обозначение - stc &amp; clc.<br>Только будет ли вообще такой способ быстрым? Мб перегружается кеш кода при jzz после retn, не знаю..
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126006&amp;user=5110&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=6" class="addthx" data-post="126006"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]asd[/b]','')">asd</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 162.2 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.58'>Активность: 0.09<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3241">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 08:39 <br><script type="text/javascript">QU('asd','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=asd" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
ИМХО - неудобно. в функции нужно его ставить - скорее всего это отдельное действие. потом проверять - причём сразу после выхода из функции, или сохранять регистр флагов, что тоже не всегда удобно.<br><br><I>Bitfry пишет:<br>о почему другие так не делают? </I><br>Ну делают, иногда. К примеку дизасм длин от Ms-Rem-а так делает вроде.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126012&amp;user=3241&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=7" class="addthx" data-post="126012"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]Bitfry[/b]','')">Bitfry</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 495.3 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.8'>Активность: 0.3<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=410">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 09:12 <br><script type="text/javascript">QU('Bitfry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Bitfry" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<I>UsAr пишет:<br>можно еще использовать SetLastError/GetLastError </I><br>Не хочу вызывать WinAPI.<br><I>HoBleen пишет:<br>Только будет ли вообще такой способ быстрым? Мб перегружается кеш кода при jzz после retn, не знаю.. </I><br>После функции как-то надо разветвить действия (нормальный ход и ошибка).<br>Мы рассмотрим любые предложения (более-менее красивые и простые).<br><br><I>asd пишет:<br>ИМХО - неудобно. в функции нужно его ставить - скорее всего это отдельное действие. потом проверять - причём сразу после выхода из функции, или сохранять регистр флагов, что тоже не всегда удобно.  </I><br>Вот в данном случае отдельное действие только для SHE (одна команда or), а так CF выставляется в ходе вычислений.<br><br>На мой взгляд, идея довольно красивая. Функция как бы превращается в команду, влияющую на флаг.<br><br><I>asd пишет:<br>Ну делают, иногда. К примеку дизасм длин от Ms-Rem-а так делает вроде. </I><br>Хм... Надо глянуть, хотя говорят, код Ms-Rem-а плохо читается, так что он для меня не пример.<br><br>Кто-нибудь знает ЯВУ-компилятор, который такое создаёт?
<br><br><font size="1"><i>-----<br>Всем привет, я вернулся</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=126020&amp;user=410&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=8" class="addthx" data-post="126020"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]UsAr[/b]','')">UsAr</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 66.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.14'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1854">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 09:22 <br><script type="text/javascript">QU('UsAr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UsAr" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<I>Bitfry writes:<br>Не хочу вызывать WinAPI </I><br>Их можно юзать не как WinAPI, а на прямую править/читать TEB.LastErrorValue <img src="img/smilies/s1.gif" alt=""><br>Кстати еще можно сразу параметром передавать указатель на код который должен выполняться в случае ошибки
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126021&amp;user=1854&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=9" class="addthx" data-post="126021"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]Chingachguk[/b]','')">Chingachguk</a></b><br></div>
<img src="img/s5.gif" alt=""><br><img style="padding-top:3px;" src="av/8962.jpg" alt=""><br><span class=txtSm>Ранг: 113.0 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.51'>Активность: 0.05<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8962">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 07 марта 2007 10:32 <br><script type="text/javascript">QU('Chingachguk','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Chingachguk" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
&gt; Сам сегодня так стал делать, но почему другие так не делают? <br><br>Dos-компиллеры HLL так делают вроде (видел несколько раз).
<br><br><font size="1"><i>-----<br>The one derivative you manage is the one I abhore (c) Slipknot</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=126030&amp;user=8962&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=10" class="addthx" data-post="126030"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 марта 2007 20:21 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<b>UsAr</b><br>Что за структура <b>TEB</b>? GetLastError - это я так понимаю функция API. А что если моя ф-ия не возвращает никаких ошибок? Т.е. ошибка то есть, но об этом знает тольео мой код. А в системе ошибки никакой не зафиксировано!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126182&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=11" class="addthx" data-post="126182"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 марта 2007 20:24 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<I>RSI пишет:<br>X_MEM <br>А какие числа должна возвращать функция? если положительные, тогда в случае <br>ошибки будет уместно написать mov eax,-1 </I><br>от 0 до FFFFFFFF, т.ч. не пойдет. В том то и дело, что число в EAX может быть любое!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126183&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=12" class="addthx" data-post="126183"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 марта 2007 20:25 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
<I>Bitfry пишет:<br>Сам сегодня так стал делать, но почему другие так не делают?  </I><br>Вот вопрос!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126185&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=13" class="addthx" data-post="126185"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]UsAr[/b]','')">UsAr</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 66.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.14'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1854">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 марта 2007 23:15 <br><script type="text/javascript">QU('UsAr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UsAr" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
<I>X_MEM writes:<br>UsAr<br>Что за структура TEB? GetLastError - это я так понимаю функция API. А что если моя ф-ия не возвращает никаких ошибок? Т.е. ошибка то есть, но об этом знает тольео мой код. А в системе ошибки никакой не зафиксировано! </I><br>Вот структура TEB hxxp://usar.pp.ru/download/trash/TEB.inc<br>просто пишешь<br>assume fs:nothing<br>xor eax,eax<br>mov fs:[eax].TEB.LastErrorValue,ERROR_SUCCESS если небыло ошибок или что угодно другое если были.<br>А вторую часть вопроса не понял. Какая разница системная функция вызвала ошибку или твой код.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126196&amp;user=1854&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=14" class="addthx" data-post="126196"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 марта 2007 23:23 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
Разница в самой ошибке! Я же говорил, что exception обрабатывается SEH&#039;ом. Системная ф-ия такого рода ошибки не фиксирует. Т.е. если например функции передали строку с числом такого вида: &#039;Yahoo&#039;, то ошибки никакой нету для системы. А я то должен сказать программисту, что он дурак <img src="img/smilies/s1.gif" alt="">  При этом значение <b>TEB.LastErrorValue</b> не меняется!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126198&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=15" class="addthx" data-post="126198"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]UsAr[/b]','')">UsAr</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 66.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.14'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1854">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 08 марта 2007 23:45 &middot; Поправил: UsAr <br><script type="text/javascript">QU('UsAr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UsAr" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
<code>Error codes are 32-bit values (bit 31 is the most significant bit). Bit 29 is reserved for application-defined error codes; no Win32 API error code has this bit set. If you are defining an error code for your application, set this bit to indicate that the error code has been defined by your application and to ensure that your error code does not conflict with any system-defined error codes.</code><br>устанавливай 29 бит и не мучайся <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126199&amp;user=1854&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=16" class="addthx" data-post="126199"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]Bitfry[/b]','')">Bitfry</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 495.3 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.8'>Активность: 0.3<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=410">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 05:17 <br><script type="text/javascript">QU('Bitfry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Bitfry" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
<I>UsAr пишет:<br>Их можно юзать не как WinAPI, а на прямую править/читать TEB.LastErrorValue </I><br>Объясни смысл?<br>Лучше уж тогда просто определить переменную в секции данных для своих ошибок, это будет корректнее и обращение одной командой, а не двумя одна из которых с префиксом.
<br><br><font size="1"><i>-----<br>Всем привет, я вернулся</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=126248&amp;user=410&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=17" class="addthx" data-post="126248"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 06:03 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
<b>UsAr</b> Пока не совсем пойму. Надо почитать инфу. А Carry flag кстати работает ;)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126253&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=18" class="addthx" data-post="126253"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]UsAr[/b]','')">UsAr</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 66.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.14'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1854">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 06:39 <br><script type="text/javascript">QU('UsAr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UsAr" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
<I>Bitfry writes:<br>Лучше уж тогда просто определить переменную в секции данных для своих ошибок, это будет корректнее и обращение одной командой, а не двумя одна из которых с префиксом. </I><br>Что может быть некорректного в методе описанном в MSDN? Имхо, нормальные функции должны быть легко отделимы от самого кода и переписаны на другом HLL языке. Если надо оптимизировать по размеру или функцию никто на другой язык переносить не собирается, то другое дело. Тут можно использовать хоть второй регистр, хоть флаги.<br>Лично я бы записывал результат по указателю переданному одним из параметров, а в eax возвращал статус, многие WinAPI так поступают <img src="img/smilies/s1.gif" alt=""><br>PS: mov fs:[0].TEB.LastErrorValue,ERROR_SUCCESS в одну комманду, но по размеру больше <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126257&amp;user=1854&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=19" class="addthx" data-post="126257"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 08:28 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
<I>UsAr пишет:<br>многие WinAPI так поступают  </I><br>Ну и что? Почему бы не сделать быстрее или красивее чем многие?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126281&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=20" class="addthx" data-post="126281"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]UsAr[/b]','')">UsAr</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 66.8 (постоянный)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.14'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=1854">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 08:35 <br><script type="text/javascript">QU('UsAr','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UsAr" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
Да делайте как хотите, я же никого ни к чему не принуждаю <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126282&amp;user=1854&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=21" class="addthx" data-post="126282"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 08:55 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
Но за инфу про TEB спасибо!
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126286&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=22" class="addthx" data-post="126286"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]Bitfry[/b]','')">Bitfry</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 495.3 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.8'>Активность: 0.3<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=410">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 09:24 <br><script type="text/javascript">QU('Bitfry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Bitfry" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
<I>UsAr пишет:<br>Имхо, нормальные функции должны быть легко отделимы от самого кода и переписаны на другом HLL языке.</I><br>Согласен. Это аргумент. <br>Просто я кроме Асма других языков пока не знаю, так что такие моменты вообще не учитываю.
<br><br><font size="1"><i>-----<br>Всем привет, я вернулся</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=126291&amp;user=410&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=23" class="addthx" data-post="126291"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]HoBleen[/b]','')">HoBleen</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/5110.jpg" alt=""><br><span class=txtSm>Ранг: 240.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.09'>Активность: 0.19<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5110">Участник</a><br><font color=blue>Author of ACKiller </font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 09:36 <br><script type="text/javascript">QU('HoBleen','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HoBleen" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
<I>X_MEM пишет:<br>Придется ему обратно из памяти в регистр пересылать. Оптимизацией не пахнет! </I><br>Это &quot;потерянное&quot; время, ИМХО, очень мало относительно самого времени выполнения функции. А вот удобство, красота (+переносимость) и надежность намного важнее пары тактов, тогда уж надо улучшать сам алгоритм ф-и, который зачастую можно НАМНОГО сильнее ускорить нежели избавление обращений к памяти ИМХО.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126293&amp;user=5110&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=24" class="addthx" data-post="126293"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 09:48 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#25');return false;">#25</a> </span><div align=left><br>
<I>HoBleen пишет:<br>надежность намного важнее  </I><br>т.е. ты хочешь сказать, что исп-ие флагов - это не надежно? То что красиво - это доказано. Насчет переносимости ты прав конечно..
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126294&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=25" class="addthx" data-post="126294"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]HoBleen[/b]','')">HoBleen</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/5110.jpg" alt=""><br><span class=txtSm>Ранг: 240.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.09'>Активность: 0.19<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5110">Участник</a><br><font color=blue>Author of ACKiller </font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 09:59 <br><script type="text/javascript">QU('HoBleen','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=HoBleen" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#26');return false;">#26</a> </span><div align=left><br>
Да нет, насчет надежности - это я в общем случае, когда пытаешься все соптимизить, извращаешься, тратишь туеву хучу времени на отладку и в результате получается либо глюкалово, либо овчинка не стоила выделки... Так становится жалко за время... Так что лучше не парься и не придавай значения такой ерунде =)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126295&amp;user=5110&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=26" class="addthx" data-post="126295"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 10:17 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#27');return false;">#27</a> </span><div align=left><br>
Ясно <img src="img/smilies/s1.gif" alt=""> В пинципе суть вопроса раскрыта я считаю..
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126299&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=27" class="addthx" data-post="126299"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]Demon666[/b]','')">Demon666</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 213.5 (наставник)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.21'>Активность: 0.12<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4551">Участник</a><br><font color=blue>забанен</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 10:54 <br><script type="text/javascript">QU('Demon666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Demon666" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#28');return false;">#28</a> </span><div align=left><br>
Ого-го, это че за наезды на <b>UsAr</b>,он предоставил инфу, которую должен знать(!) каждый кодер, ведь вопрос как поставили:<br><I>Bitfry пишет:<br>Мы рассмотрим любые предложения...</I><br>Это был один из вариантов, тем более:<br><I>HoBleen пишет:<br>...А вот удобство, красота (+переносимость) и надежность намного важнее пары тактов, тогда уж надо улучшать сам алгоритм ф-и, который зачастую можно НАМНОГО сильнее ускорить нежели избавление обращений к памяти ИМХО. </I><br>Какое тут нах ИМХО(?) – это золотые слова, особенно если учесть:<br>Хотел бы на их лица посмотреть, когда начнут писать проги на ASM`е размером ~3метра, одни только прототипы для функций чего стоят, не говоря уже о времени компиляции при обработке директифф.., макрософф и т. д.<br>Когда в проекте участвуют 17 человек и некоторые из них пишут модули на ЯВУ, причем технологии COM (интерфейс) тоже участвует в проекте, мда… короче я в шоке… <b>UsAr</b> не обращай внимание и не злись всегда рады твоему участию на форуме… пиши побольше паблик-исходников!!! Они многим могут помочь!!!
<br><br><font size="1"><i>-----<br>ЗЫ: истЕна где-то рядом, Welcome@Google.com</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=126304&amp;user=4551&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=28" class="addthx" data-post="126304"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]S_T_A_S_[/b]','')">S_T_A_S_</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 163.7 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.87'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=251">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 23:34 <br><script type="text/javascript">QU('S_T_A_S_','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=S_T_A_S_" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#29');return false;">#29</a> </span><div align=left><br>
<I>X_MEM пишет:<br>Можно ли использовать для контроля ошибок ФЛАГИ! Я сам в принципе не встречал таких ф-ий. Но тогда почему?</I><br>Всегда на асме так и писали, кроме тех, кто учился по туториалам Iczelion&#039;а. <br><br>Не обязательно привязываться к флагу C. Можно посмотреть, что делает и в каком контексте вызывается функция и смысл возвращаемой ошибки. Часто флаги можно установить без отдельной команды, как побочный результат других. Используя несколько флагов, можно вазвращать более 2х состояний.<br><br><I>Bitfry пишет:<br>говорят, код Ms-Rem-а плохо читается </I><br>Еще говорят, что сорцы fasm читаются хорошо ;)<br><br><I>Bitfry пишет:<br>определить переменную в секции данных для своих ошибок, это будет корректнее</I><br>Это не многопоточно, в отличае от SEH.<br><br><I>Chingachguk пишет:<br>Dos-компиллеры HLL так делают вроде </I><br>Современные компиляторы обычно делают ужас из типа bool, хотя могли бы поступать так же.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126370&amp;user=251&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=29" class="addthx" data-post="126370"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="30" onfocus="this.blur()" href="JavaScript:di('[b]X_MEM[/b]','')">X_MEM</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 14.8 (новичок)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.62'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8139">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 09 марта 2007 23:50 <br><script type="text/javascript">QU('X_MEM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=X_MEM" target="_blank">Личное сообщение</a> &middot;  <a href="#30" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=6&amp;topic=8102&amp;page=0#30');return false;">#30</a> </span><div align=left><br>
<I>S_T_A_S_ пишет:<br>Часто флаги можно установить без отдельной команды, как побочный результат других </I><br>Так оно и получилось:<br><I>Bitfry пишет:<br>Вот в данном случае отдельное действие только для SHE (одна команда or), а так CF выставляется в ходе вычислений. </I><br><br><I>S_T_A_S_ пишет:<br>Используя несколько флагов, можно вазвращать более 2х состояний </I><br>Правильно <img src="img/smilies/s1.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=126374&amp;user=8139&amp;forum_n=6&amp;topic=8102&amp;page=0&amp;anchor=30" class="addthx" data-post="126374"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> .  <b>1</b> . <a href="action=vthread&amp;forum=6&amp;topic=8102&amp;page=1.html">2</a> . <a href="action=vthread&amp;forum=6&amp;topic=8102&amp;page=1.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/p.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=6&sortBy=0&page=0.html"><b>Программирование</b></a> <b class=bulletHead>&#8212;&#8250;</b> Передача параметров функцией на асме</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=8102" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
