<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Как передать файл прошивки микроконтроллера через ЮСБ-канал? - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Я в прошлой теме научился кодировать-раскодировать файл прошивки. Спасибо за помощь. Сделал свой (исправленный) кодированный файл, но родной апдейтер программы, видимо не признает его за то, что ему нужно. Передавать-передает, но">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=41701'>_MBK_</a>, <a target='_blank' href='?action=userinfo&amp;user=41144'>Adler</a> (+6 невидимых)</b></span>
</td>
</tr>
</table>

<table class=forums>
 
</tr></table>

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Как передать файл прошивки микроконтроллера через ЮСБ-канал?</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 октября 2011 16:50 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Я в прошлой теме научился кодировать-раскодировать файл прошивки. Спасибо за помощь. Сделал свой (исправленный) кодированный файл, но родной апдейтер программы, видимо не признает его за то, что ему нужно. Передавать-передает, но умышленно портит несколько байт. Чтоб вопросов было меньше, он (апдейтер), точно так-же поступает и с файлом от другой версии программы. Вопрос примерно такой. Есть-ли готовые сорцы под передачу и прием файлов по ЮСБ-каналу? Защиту-то родного апдейтера, мне точно не сломать, думал КС, нашел, вычислил, но этого оказалось мало.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293291&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=1" class="addthx" data-post="293291"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]reversecode[/b]','')">reversecode</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/15381.gif" alt=""><br><span class=txtSm>Ранг: 1053.6 <b><u>(!!!!)</u></b>, 1078thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.43'>Активность: 1.06<span style='color:red'>&searr;</span>0.81</span><br>Статус: <a href="action=userinfo&amp;user=15381">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 октября 2011 17:44 <br><script type="text/javascript">QU('reversecode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=reversecode" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
а вы уверены что портит софт который заливает? а не бут который его принимает и пишет<br>а склоняюсь ко второму случаю
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293294&amp;user=15381&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=2" class="addthx" data-post="293294"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]PE_Kill[/b]','')">PE_Kill</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3232.gif" alt=""><br><span class=txtSm>Ранг: 793.4 <font color=magenta>(<b>! !</b>)</font>, 568thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.59'>Активность: 0.74<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3232">Участник</a><br><font color=blue>Шаман</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 октября 2011 17:44 <br><script type="text/javascript">QU('PE_Kill','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=PE_Kill" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<b>Kuzya69</b> как трава отпустит напиши нормально, по русски. (c) PE_Kill
<br><br><font size="1"><i>-----<br>Yann Tiersen best and do not fuck</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=293295&amp;user=3232&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=3" class="addthx" data-post="293295"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]kp0m[/b]','')">kp0m</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 26.1 (посетитель), 10thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.8'>Активность: 0.01=0.01</span><br>Статус: <a href="action=userinfo&amp;user=22498">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 октября 2011 17:58 <br><script type="text/javascript">QU('kp0m','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=kp0m" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
умышленно портить может из-за ECC (error corection code) с кратностью скажем в 0x210 байт, здесь сорцы не помогут, надо копать оригинальный флешер
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293298&amp;user=22498&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=4" class="addthx" data-post="293298"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 октября 2011 18:44 &middot; Поправил: Kuzya69 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
Оригинальный флешер я раскопал, контрольку вычислил. Портит именно апдейтер, я уже писАл, если в программу подложить дамп от другой версии (старше или младше), то происходит то-же самое. Хотя нужной версией, заливается без ошибок. То-есть дамп заведомо верный, а вот апдейтер не признает его. Да и если подсмотреть протокол передачи через ЮСБ-монитор, то видно, что эти байты (испорченные), вылезают в хаотичном порядке. Один раз прошивка даже запустилась, но при работе повисла.<br><br><br><br>Мне по сути надо мою переделанную, зашифрованную прошивку, передать байт в байт, порциями по 128 байт, добавив впереди посылки три байта служебных, и сзади два (посчитанную контрольку передачи).<br>Дождаться ответа о правильной передаче и продолжить дальше передавать следующие 128 байт.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293300&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=5" class="addthx" data-post="293300"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]reversecode[/b]','')">reversecode</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/15381.gif" alt=""><br><span class=txtSm>Ранг: 1053.6 <b><u>(!!!!)</u></b>, 1078thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.43'>Активность: 1.06<span style='color:red'>&searr;</span>0.81</span><br>Статус: <a href="action=userinfo&amp;user=15381">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 октября 2011 20:10 <br><script type="text/javascript">QU('reversecode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=reversecode" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
ключевое слово - <i class=x>апдейтер не признает его</i>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293304&amp;user=15381&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=6" class="addthx" data-post="293304"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 октября 2011 20:31 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
<b>ключевое слово - апдейтер не признает его </b><br>Ну и как нибудь сделать самому апдейтер-то можно? Есть какие-нибудь примеры, открытых кодов, посмотреть подучиться? Алгоритм-то передачи не особо сложный.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293305&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=7" class="addthx" data-post="293305"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]kp0m[/b]','')">kp0m</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 26.1 (посетитель), 10thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.8'>Активность: 0.01=0.01</span><br>Статус: <a href="action=userinfo&amp;user=22498">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 октября 2011 20:35 <br><script type="text/javascript">QU('kp0m','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=kp0m" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
что вы называете &quot;апдейтером&quot;, где он у вас тут ?:  файл-&gt;флешер-&gt;драйвер-&gt;ром_микроконтроллера-&gt;флешка<br><br>если можете снифить и в снифе видно битые байты(биты), значит или плохо перексорили бинарник или одно из двух о чем и пишет <b>reversecode</b><br><br>попробуйте в патченой прошивке подменить сигнатуру/хидер на сигнатуру правильной версии, код ревизии или что-то еще
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293306&amp;user=22498&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=8" class="addthx" data-post="293306"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]reversecode[/b]','')">reversecode</a></b><br></div>
<img src="img/s9.gif" alt=""><br><img style="padding-top:3px;" src="av/15381.gif" alt=""><br><span class=txtSm>Ранг: 1053.6 <b><u>(!!!!)</u></b>, 1078thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 12.43'>Активность: 1.06<span style='color:red'>&searr;</span>0.81</span><br>Статус: <a href="action=userinfo&amp;user=15381">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 17 октября 2011 22:01 <br><script type="text/javascript">QU('reversecode','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=reversecode" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
я так понимаю &quot;файл&quot; и есть прошивка которую вы пытаететь залить через апдейтер(флешер)<br>и оригианльным файлы апдейтер никакие байты не меняет<br>а в вашем файле(что бы перехачили) он меняет два байта<br>может это ценные два байта? может там какая нибудь crc? которую вставляет флешер<br><br>если вы расковыряли прошивку, то расковырят флешер тем более сможете<br>может и есть опенсоурсный, но обычно флешеры(апдейтеры) пишутся под что то конкретное, там есть какие то байты синхронизации или заголовки...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293311&amp;user=15381&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=9" class="addthx" data-post="293311"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 00:37 &middot; Поправил: Kuzya69 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<b>где он у вас тут ?: файл-&gt;флешер-&gt;драйвер-&gt;ром_микроконтроллера-&gt;флешка</b><br>Судя по этим порядкам это &quot;флешер&quot;. Просто я думал, что флешер это бутлоадер внутри контроллера, раз он с флешем работает.<br>Просто в каждой версии программы &quot;флешер&quot; расчитан так, что он признает только файл той прошивки, версия которой соответствует именно версии программы (честое слово не курил). И не только версии, но и проверяется целостность прошивки. Поэтому даже попытка подсунуть заведомо правильный файл (который успешно заливается флешером другой версии в этот-же контроллер, с этим-же бутлоадером), приводит к появлению в потоке &quot;случайных&quot; ошибочных байт. Они появляются в произвольном количестве и в произвольном месте. <br>Для того, чтобы после флеширования бутлоадер пропускал в начало флеша (прошел тест) существует контролька, ее я пересчитал. Если мою переделанную, но не закодированную под апдейт через &quot;через ЮСБ канал&quot;, прошивку залить программатором в контроллер, то она работает и проходит тест бутлоадера. Расшифровав гамму по которой кодируется прошивка для &quot;апдейта через ЮСБ&quot;, я ее переделал, но флешер где-то проверяет ее на соответствие нужному, и умышленно портит. Поэтому я и хочу подобрать (написать) другой флешер, который будет просто тупо лить по очереди байты из подготовленного файла, не обращая внимания на версию и состояние заливаемой прошивки. Потому-что по правилам бутлоадера это пройдет.<br><b>если вы расковыряли прошивку, то расковырят флешер тем более сможете<br>может и есть опенсоурсный, но обычно флешеры(апдейтеры) пишутся под что то конкретное, там есть какие то байты синхронизации или заголовки... </b><br>Да это Россовская программа ВЦДС. Есть там и заголовки и шифрованные данные...... Я хочу заливать во флеш вместо родной прошивки, свою. Отработать с ней, и потом спокойно опять обновиться родной россовской. Остался только один этап (но он самый трудный для меня), как залить мою прошивку в контроллер?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293315&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=10" class="addthx" data-post="293315"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Tyra[/b]','')">Tyra</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 78.7 (постоянный), 43thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.45'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3632">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 01:30 <br><script type="text/javascript">QU('Tyra','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Tyra" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<I>Kuzya69 пишет:<br>но флешер где-то проверяет ее на соответствие нужному, и умышленно портит </I><br>Может проще от мониторить Флешер с той прошивкой, с которой работает без ошибок и сравнить с работой Флешера на Фашей прошивке. Может там банальный MD5 , а может и CRC ! Попробуйте отмониторить начиная с ОЕП !
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293322&amp;user=3632&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=11" class="addthx" data-post="293322"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 01:50 &middot; Поправил: Kuzya69 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<b>Попробуйте отмониторить начиная с ОЕП ! </b><br>Ну во первых флешер встроен в основную программу, и включается в работу, если видит, что прошивка адаптера ниже версией чем прошивка предлагаемая для флеширования. К тому-же к вашей задаче добавится еще распаковка самой проги. А этого я делать не умею.<br><b>Может проще от мониторить Флешер с той прошивкой, с которой работает без ошибок и сравнить с работой Флешера на Фашей прошивке. </b><br>Я-же объяснял, что моя прошивка тоже льется, но в потоке появляются одиночные ошибочные данные, причем в разных местах.<br>Или я вас неправильно понял? Я под словом монитор подразумеваю, лог обмена байтами между контроллером и компьютером по шине ЮСБ.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293328&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=12" class="addthx" data-post="293328"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]Tyra[/b]','')">Tyra</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 78.7 (постоянный), 43thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.45'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3632">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 15:16 <br><script type="text/javascript">QU('Tyra','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Tyra" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
<I>Kuzya69 пишет:<br>Или я вас неправильно понял? </I><br>Наверно я Неверно Выяснился !<br>Я Имел ввиду, что нужно проследить Работу Флешера С Той, что Льется намано(сделать типа ЛОГа Бряков и т.д.) и Аналогчиное сделать со своей прошивкой ! Сравнить и Понять, Где прога Палит Вашу Прошивку !
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293352&amp;user=3632&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=13" class="addthx" data-post="293352"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 17:43 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
Ну мне это не осилить. Поэтому и спрашиваю флешер какой-нибудь. Загнать прошивку в режим флеширования не сложно, а залить тоже алгоритм не из сложных. Меня правда пугали таймингами, но не думаю что это верх мастерства. Как порт настраивать в бутлоадере контроллера есть.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293356&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=14" class="addthx" data-post="293356"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]PE_Kill[/b]','')">PE_Kill</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/3232.gif" alt=""><br><span class=txtSm>Ранг: 793.4 <font color=magenta>(<b>! !</b>)</font>, 568thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.59'>Активность: 0.74<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3232">Участник</a><br><font color=blue>Шаман</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 19:12 <br><script type="text/javascript">QU('PE_Kill','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=PE_Kill" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<b>Kuzya69</b> может пора всё отложить и изуть masm? Или так и будишь побираться по топикам? Как я понял с твоим скилом изучение основ и сбор нужного файла дастся тебе максимум за 3-4 дня, На крайняк wasm поможет.
<br><br><font size="1"><i>-----<br>Yann Tiersen best and do not fuck</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=293359&amp;user=3232&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=15" class="addthx" data-post="293359"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]SergX[/b]','')">SergX</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 226.0 (наставник), 67thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.08'>Активность: 0.16<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=11974">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 20:12 <br><script type="text/javascript">QU('SergX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SergX" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
<I>Kuzya69 пишет:<br>Загнать прошивку в режим флеширования не сложно, а залить тоже алгоритм не из сложных. </I><br>Можно предположить что под словом &quot;прошивка&quot; в данном контексте имеется в виду последовательность данных. Но каким же таким нехитрым образом аффтор &quot;заганяет&quot; эти данные в &quot;режим флеширования&quot; ?? Как вообще последовательность данных можно &quot;загнать&quot; в какой-то режим ???<br>У меня от этого выражения происходит разрыв шаблона...<br><br><I>Kuzya69 пишет:<br>Меня правда пугали таймингами, но не думаю что это верх мастерства. </I><br>Да конечно, ерунда это все. Не стоит такими мелочами замарачиваться.<br><br>Ни слова о том что за девайс, какой там контроллер, в каком именно режиме используется юсб...<br><br><b>Kuzya69</b> неужели вы думаете что действительно существует какой-то универсальный способ для обновления по в разных девайсах ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293360&amp;user=11974&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=16" class="addthx" data-post="293360"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 21:24 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#17');return false;">#17</a> </span><div align=left><br>
<b>Как вообще последовательность данных можно &quot;загнать&quot; в какой-то режим ???<br></b><br>Ну не умею я правильно &quot;выражаться&quot;, хотелось-бы матом, да нельзя. <img src="img/smilies/s1.gif" alt=""> И так вон целые поэмы пишу, чтоб объяснить как можно понятней.<br>Я хотел сказать, что чтобы перевести этот контроллер, с которым я мучаюсь, в режим флеширования, не обязательно проходить очень много шагов как это делается в программе, когда начинается апдейт. Все проверки там нужны только, чтобы убедиться, что флешироваться будет именно-то что нужно. А если убрать все проверки, то можно при включении адаптера, после ответа &quot;44&quot;, от адаптера, сразу начинать передачу страниц.<br><b>Да конечно, ерунда это все. Не стоит такими мелочами замарачиваться</b>.<br>И тут меня неправильно поняли. Просто я не думаю, что это так сложно, переделать в каком-то похожем по действию флешере.<br><b>Ни слова о том что за девайс, какой там контроллер, в каком именно режиме используется юсб...</b><br>Кратко уже упоминал это ВЦДС, от РоссТеч. Бывший ВАГ-КОМ. Конроллер там атмега162. В каком режиме ЮСБ, не знаю. Может есть другие вопросы для уточнения?  Отвечу.<br><b>неужели вы думаете что действительно существует какой-то универсальный способ для обновления по в разных девайсах ? </b><br>Именно это я как раз и не думаю, просто хочется посмотреть работу похожих флешеров, и на их основе или написать свой, или переправить готовый.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293364&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=17" class="addthx" data-post="293364"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]Tyra[/b]','')">Tyra</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 78.7 (постоянный), 43thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.45'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3632">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 21:50 <br><script type="text/javascript">QU('Tyra','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Tyra" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#18');return false;">#18</a> </span><div align=left><br>
<I>Kuzya69 пишет:<br>Конроллер там атмега162 </I><br>Может стоит поискать Флешер под Данный Чип ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293365&amp;user=3632&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=18" class="addthx" data-post="293365"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 22:34 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#19');return false;">#19</a> </span><div align=left><br>
<b>Может стоит поискать Флешер под Данный Чип ?</b><br>Именно это я хочу, но только в открытом виде. Потому как, даже если и выдернуть его из программы, то этого мало, надо будет еще от защит избавлять.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293368&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=19" class="addthx" data-post="293368"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]SergX[/b]','')">SergX</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 226.0 (наставник), 67thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.08'>Активность: 0.16<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=11974">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 18 октября 2011 23:19 <br><script type="text/javascript">QU('SergX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SergX" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#20');return false;">#20</a> </span><div align=left><br>
В атмеге 162 нет аппаратного USB. Значит используется софтовая реализация, что врядли, или на плате есть преобразователь USB2UART например FTDI232, PL2302 или подобные.<br>Если это так, значит никаким USB там и не пахнет. Обмен данными идет по UART.<br><br>Прошить сам контроллер ATmega162 вообще никаких проблем не представляет. Засунул в прогер и пишеш туда что душе угодно. Если прогера подходящего нет то можно SPI шнурок на коленке спаять.<br><br>В данном случае сложность совсем в другом. <b>Kuzya69</b> хочет прошить контроллер через функцию обновления. В флеше контроллера ATmega162 есть область BootLoader из которой возможно выполнять команды записи в флеш область программы контроллера. Код BootLoader разрабочтик пишет сам, как ему вздумается, поэтому искать какие-то флешеры просто глупо. В данном случае BootLoader принимает криптованную прошивку по UART, раскриптовывает и пишет в флеш. При этом сам BootLoader скорее всего не обновляется и соответственно не содержится в криптованой прошивке. Поскольку в контроллере установленны локбиты, прочитать его программатором не выйдет. Значит даже если раскриптовать ту часть прошивки которая имеется, толку будет мало.<br><br>Софт там пакован вроде обычным UPX.<br><br>Вот очень мне интересно что <b>Kuzya69</b> удумал там менять ?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293370&amp;user=11974&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=20" class="addthx" data-post="293370"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2011 01:42 &middot; Поправил: Kuzya69 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#21');return false;">#21</a> </span><div align=left><br>
Ну все верно.<br><b>преобразователь USB2UART например FTDI232</b><br>FT232В<br><b>Kuzya69 хочет прошить контроллер через функцию обновления.</b><br>И это верно<br><b>Код BootLoader разрабочтик пишет сам, как ему вздумается, поэтому искать какие-то флешеры просто глупо.</b><br>Код этот я знаю, и не только я. Правда для старых адаптеров, но пока так. Так я не ищу готовый флешер, я ищу близкий по смыслу, но чтоб был как база для переделки в свой.<br><b>При этом сам BootLoader скорее всего не обновляется и соответственно не содержится в криптованой прошивке.</b><br>Все верно, всегда один и тот-же.<br><b>Вот очень мне интересно что Kuzya69 удумал там менять ?</b><br>Менять так, чтоб контроллер выдавал некриптованную область ЕЕПРОМА, в порт UART. А так он выдает криптованную. ЕЕПРОМ-это самое ценное в кабеле. <br><b>Софт там пакован вроде обычным UPX.</b><br>Вот там ПС-Гуард и виртуалка. Я не смог. Мне так проще.<br>Вот темка моя была, пришлось забить<br>https://ssl.exelab.ru/f/action=vthread&amp;forum=5&amp;topic=18543&amp;page=0#25
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293378&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=21" class="addthx" data-post="293378"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]SergX[/b]','')">SergX</a></b><br></div>
<img src="img/s6.gif" alt=""><br><span class=txtSm>Ранг: 226.0 (наставник), 67thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.08'>Активность: 0.16<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=11974">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2011 14:39 <br><script type="text/javascript">QU('SergX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=SergX" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#22');return false;">#22</a> </span><div align=left><br>
<b>Kuzya69</b>, дык гуглите библеотеку для работы с ком портом для любого удобного Вам языка программирования. И сможете принимать/отправлять байты или пакеты как Вым будет угодно.<br><br>вот пример для C++ и Delphi: <noindex><a href="http://www.virun.com.ua/info/?delphi.action&amp;id=02003" rel="nofollow" target="_blank">--&gt; Link &lt;--</a></noindex><br><br>В теме про расспаковку ссылки битые. Хотелось бы на ЕХЕ глянуть.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293393&amp;user=11974&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=22" class="addthx" data-post="293393"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2011 16:46 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#23');return false;">#23</a> </span><div align=left><br>
<b>Хотелось бы на ЕХЕ глянуть.</b><br>Это версия 10.6.1, она как раз работает с той прошивкой, над версией которой я ломаю голову.<br>http://zalil.ru/31895818<br>Или может ехе-инсталку надо? Но там хитрая прога она регится самим шнуром. И функция обновления включится, когда прога поймет, что фирмваре шнура устарело.<br>Спасибо, за линк, буду разбираться.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293397&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=23" class="addthx" data-post="293397"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]BfoX[/b]','')">BfoX</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 397.0 (мудрец), 179thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.13'>Активность: 0.17<span style='color:red'>&searr;</span>0.1</span><br>Статус: <a href="action=userinfo&amp;user=1865">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2011 18:11 <br><script type="text/javascript">QU('BfoX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=BfoX" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#24');return false;">#24</a> </span><div align=left><br>
rt-usb.dll где?
<br><br><font size="1"><i>-----<br>...или ты работаешь хорошо, или ты работаешь много...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=293398&amp;user=1865&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=24" class="addthx" data-post="293398"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 октября 2011 19:08 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#25');return false;">#25</a> </span><div align=left><br>
<b>rt-usb.dll где?</b><br>http://zalil.ru/31896751<br>Пожалста, может вообще всю папку запаковать?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293401&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=25" class="addthx" data-post="293401"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]BfoX[/b]','')">BfoX</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 397.0 (мудрец), 179thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.13'>Активность: 0.17<span style='color:red'>&searr;</span>0.1</span><br>Статус: <a href="action=userinfo&amp;user=1865">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 октября 2011 16:44 <br><script type="text/javascript">QU('BfoX','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=BfoX" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#26');return false;">#26</a> </span><div align=left><br>
<b>Kuzya69</b><br><br>посмотрите http://zalil.ru/31908586
<br><br><font size="1"><i>-----<br>...или ты работаешь хорошо, или ты работаешь много...</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=293505&amp;user=1865&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=26" class="addthx" data-post="293505"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 21 октября 2011 18:39 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#27');return false;">#27</a> </span><div align=left><br>
<b>BfoX</b><br>Не запускается, в личке подробности.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293516&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=27" class="addthx" data-post="293516"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]Ratinsh[/b]','')">Ratinsh</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 191.8 (ветеран), 46thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.54'>Активность: 0.17<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3333">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 октября 2011 04:48 &middot; Поправил: Ratinsh <br><script type="text/javascript">QU('Ratinsh','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Ratinsh" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#28');return false;">#28</a> </span><div align=left><br>
на глаза попался, сам не пользовался<br>http://www.232analyzer.com/232default.htm<br><br>PS По моему Кузя вы сто лет сом-портом занимаетесь <img src="img/smilies/s1.gif" alt=""> , если вы тот Кузя ?!<br>И скрипты свободно пишите ?! Так что вы нам здесь голову морочите?<br>Или задача прогу заломать...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293573&amp;user=3333&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=28" class="addthx" data-post="293573"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]Kuzya69[/b]','')">Kuzya69</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 30.1 (посетитель)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.16'>Активность: 0.07<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=29098">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 23 октября 2011 15:01 <br><script type="text/javascript">QU('Kuzya69','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kuzya69" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=19142.html&amp;page=0#29');return false;">#29</a> </span><div align=left><br>
<b>По моему Кузя вы сто лет сом-портом занимаетесь</b><br>Нет, видимо я не тот Кузя. Жаль. <br><b>Или задача прогу заломать... </b><br>Задача сделать флешер, или старый упростить, избавить от проверок. А прога распакованная и так есть. Только слаб я в этих тонкостях, как кусок из общего кода вынимать, как от проверок избавлять. С сырцами еще могу попробовать повозиться, а вот с кодом без опыта вряд-ли справлюсь.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=293595&amp;user=29098&amp;forum_n=5&amp;topic=19142.html&amp;page=0&amp;anchor=29" class="addthx" data-post="293595"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Как передать файл прошивки микроконтроллера через ЮСБ-канал?</span></td>
</tr></table>
</div>
<a name=newreply></a>
<script type="text/javascript">
function check_form(f)
{
  f.elements['b1'].value = 'Отправка...';
  f.elements['b1'].disabled = true;
  return true;
}
</script>

<div align="center">
<form name="postMsg" action="#30" method="post" class="formStyle" enctype="multipart/form-data" onsubmit="return check_form(this);" onkeydown="ctrle(event, this)">
<table class="forums">

<tr>
<td class="caption2">
<span class="txtSm"><b>:: Ваш ответ</b></span>
</td>
</tr>
<tr>
<td class="caption7">

<img class="toolButton" src="./img/button_bold.gif" width="23" height="22" border="0" title="Жирный" alt="Жирный" onmouseover="window.status='Жирный'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[b]','[/b]');">&nbsp;
<img class="toolButton" src="./img/button_italic.gif" width="23" height="22" border="0" title="Курсив" alt="Курсив" onmouseover="window.status='Курсив'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[t]','[/t]');">&nbsp;
<img class="toolButton" src="./img/button_underlined.gif" width="23" height="22" border="0" title="Подчеркнутый" alt="Подчеркнутый" onmouseover="window.status='Подчеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[u]','[/u]');">&nbsp;
<img class="toolButton" src="./img/button_strike.gif" width="23" height="22" border="0" title="Перечеркнутый" alt="Перечеркнутый" onmouseover="window.status='Перечеркнутый'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[s]','[/s]');">&nbsp;
<img class="toolButton" src="./img/button_code.gif" width="23" height="22" border="0" title="Код" alt="{mpf5}" onmouseover="window.status='Код'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[ASM]','[/ASM]');">&nbsp;
<img class="toolButton" src="./img/button_image.gif" width="23" height="22" border="0" title="Ссылка на картинку" alt="Код" onmouseover="window.status='Ссылка на картинку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[img]','[/img]');">&nbsp;
<img class="toolButton" src="./img/button_url.gif" width="23" height="22" border="0" title="Вставить ссылку" alt="Вставить ссылку" onmouseover="window.status='Вставить ссылку'; return true" onmouseout="window.status=''; return true" onclick="JavaScript:di('[url=',']--&gt; Link &lt;--[/url]');">&nbsp;

<!-- mod by arnix start 
<select style="position: relative; top: -7; width: 150px;" id="addHighlightedCode" onchange="insertHl(this);">
<option value="0">Подсветка кода...</option>
<option value="asm">Assembler</option>
<option value="c">C</option>
<option value="cpp">C++</option>
<option value="pascal">Pascal</option>
<option value="delphi">Delphi</option>
<option value="php">PHP</option>
<option value="vb">Visual Basic</option>
</select>&nbsp;
 mod by arnix end -->

<br>
<a href="JavaScript:di(':s1:','');"><img src="./img/smilies/s1.gif" border="0" alt=":s1:"></a>
<a href="JavaScript:di(':s2:','');"><img src="./img/smilies/s2.gif" border="0" alt=":s2:"></a>
<a href="JavaScript:di(':s3:','');"><img src="./img/smilies/s3.gif" border="0" alt=":s3:"></a>
<a href="JavaScript:di(':s4:','');"><img src="./img/smilies/s4.gif" border="0" alt=":s4:"></a>
<a href="JavaScript:di(':s5:','');"><img src="./img/smilies/s5.gif" border="0" alt=":s5:"></a>
<a href="JavaScript:di(':s6:','');"><img src="./img/smilies/s6.gif" border="0" alt=":s6:"></a>
<a href="JavaScript:di(':s7:','');"><img src="./img/smilies/s7.gif" border="0" alt=":s7:"></a>
<a href="JavaScript:di(':s8:','');"><img src="./img/smilies/s8.gif" border="0" alt=":s8:"></a>
<a href="JavaScript:di(':s9:','');"><img src="./img/smilies/s9.gif" border="0" alt=":s9:"></a>
<a href="JavaScript:di(':s10:','');"><img src="./img/smilies/s10.gif" border="0" alt=":s10:"></a>
<a href="JavaScript:di(':s11:','');"><img src="./img/smilies/s11.gif" border="0" alt=":s11:"></a>
<a href="JavaScript:di(':s12:','');"><img src="./img/smilies/s12.gif" border="0" alt=":s12:"></a>
<a href="JavaScript:di(':s13:','');"><img src="./img/smilies/s13.gif" border="0" alt=":s13:"></a>
<a href="JavaScript:di(':s14:','');"><img src="./img/smilies/s14.gif" border="0" alt=":s14:"></a>
<a href="JavaScript:di(':s15:','');"><img src="./img/smilies/s15.gif" border="0" alt=":s15:"></a>
<a href="JavaScript:di(':s16:','');"><img src="./img/smilies/s16.gif" border="0" alt=":s16:"></a>
</td></tr>
<tr>
<td class="caption5"><textarea name="postText" rows="10" class="textForm" tabindex="2" style="width:100%"></textarea>
<BR><INPUT class="textForm" type="file" name="fileAttach"><BR><SMALL>Максимальный размер аттача: <b>500KB</b>.</SMALL>
<br><span class="txtSm"> </span>
</td>
</tr>
<tr>
<td class="caption7">
<table class=tbTransparent>
<tr valign=middle>
<td class=tbTransparent><span class=txtSm>Ваш логин: <b><a href="https://exelab.ru/f/action=userinfo&amp;user=55973">german1505</a></b>  &raquo; <a href="mode=logout">Выход</a> &raquo; <a href="?action=pmail"><b>ЛС</b></a></span></td>
</tr>
</table>

</td>
</tr>


<tr>
<td class="caption5"><input type="submit" value="Отправить сообщение" class="inputButton" name="b1" tabindex="5"></td>
</tr>
</table>
<input type="hidden" name="action" value="pthread">
<input type="hidden" name="forum" value="5">
<input type="hidden" name="topic" value="19142">
</form>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=19142" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
