<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Передача аргументов через стек - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Господа! Столкнулся со следующей проблемой: задача - вызвать функцию находящуюся в готовой dll библиотеке на языке высокого уровня. Вот что выдал IDA  .text:10001250 ; int __cdecl SetSize(int &amp;,float *,char *) .text:10001250">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=8605'>Rio</a> (+10 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/green.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=1&sortBy=0&page=0.html"><b>Основной форум</b></a> <b class=bulletHead>&#8212;&#8250;</b> Передача аргументов через стек</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]bloM[/b]','')">bloM</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.28'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=4284">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 апреля 2006 08:15 <br><script type="text/javascript">QU('bloM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=bloM" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Господа! Столкнулся со следующей проблемой: задача - вызвать функцию находящуюся в готовой dll библиотеке на языке высокого уровня. Вот что выдал IDA 
<br>
<br>.text:10001250 ; int __cdecl SetSize(int &amp;,float *,char *) 
<br>.text:10001250 public ?SetSize@@Z 
<br>.text:10001250 ?SetSize@@Z proc near 
<br>.text:10001250 
<br>.text:10001250 var_C = dword ptr -0Ch 
<br>.text:10001250 var_4 = dword ptr -4 
<br>.text:10001250 arg_0 = dword ptr 4 
<br>.text:10001250 arg_4 = dword ptr 8 
<br>.text:10001250 arg_8 = dword ptr 0Ch 
<br>.text:10001250 
<br>.text:10001250 mov eax, large fs:0 
<br>.text:10001256 mov ecx, [esp+arg_0] 
<br>...............................................................
<br>...............................................................
<br>и выход из нее
<br>
<br>mov ecx, [esp+18h+var_C] 
<br>pop edi 
<br>pop esi 
<br>xor eax, eax 
<br>mov large fs:0, ecx 
<br>pop ebp 
<br>add esp, 0Ch 
<br>retn
<br>
<br>Если с arg0,arg_4,arg_8 вроде как все ясно, то что такое var_C и var_4 Почему возращаемые аргументы - ниже вершины стека???
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=60899&amp;user=4284&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=1" class="addthx" data-post="60899"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]asd[/b]','')">asd</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 162.2 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.58'>Активность: 0.09<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3241">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 апреля 2006 09:23 <br><script type="text/javascript">QU('asd','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=asd" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Натупил что-то я, спать надо по ночам<img src="img/smilies/s15.gif" alt="">
<br>Допустим есть функция, которая принимает 3 параметра и имеет локальные переменные. Тгда при входе в ф-ию будет примерно след: 
<br>push ebp
<br>mov ebp,esp
<br>sub esp,xx
<br>
<br>тогда 
<br>arg_4,arg_8 - обращение к переданным параметрам
<br>arg_4,arg_8 - обращение к локальным переменным
<br>
<br>p.s. зачем второй топик-то создавать?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=60909&amp;user=3241&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=2" class="addthx" data-post="60909"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]bloM[/b]','')">bloM</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.28'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=4284">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 апреля 2006 10:28 <br><script type="text/javascript">QU('bloM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=bloM" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
Так понимаю ты хотел сказать var_C и var_4 - обращение к локальным переменным. НО переменные на то и локальные - они не могут быть использованы в ином месте - кроме как в функции в которой их описали. А в моем случае - они возвращаются в [ESP-0Ch] и [ESP-4] 
<br>Как, прмерно, будет выглядеть вызов этой функции на языке высокого уровня?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=60932&amp;user=4284&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=3" class="addthx" data-post="60932"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]tundra37[/b]','')">tundra37</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 310.8 (мудрец), 29thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.32'>Активность: 0.43<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4072">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 апреля 2006 10:33 <br><script type="text/javascript">QU('tundra37','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tundra37" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<I>bloM пишет:
<br>Почему возращаемые аргументы - ниже вершины стека??? </I>
<br> Это штучки Микрософтовского Си. Для оптимизации он временные переменные
<br>на стеке создает. В обычных дизассемблерах дельта по подпрограммам &quot;плавает&quot;.
<br>IDA пытается отследить такие переменные и создает для них единое имя.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=60935&amp;user=4072&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=4" class="addthx" data-post="60935"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]asd[/b]','')">asd</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 162.2 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.58'>Активность: 0.09<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3241">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 апреля 2006 10:50 <br><script type="text/javascript">QU('asd','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=asd" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<b>bloM</b>
<br><i class=x>А в моем случае - они возвращаются в [ESP-0Ch] и [ESP-4] 
<br></i>
<br>Где? Покажи в коде, где что возвращается. 
<br>.text:10001250 var_C = dword ptr -0Ch 
<br>.text:10001250 var_4 = dword ptr -4 
<br>это не возвращаемые значения, или я чего-то не понимаю.
<br>Что и куда функция возвращает можно сказать только после её полного реверса.
<br>
<br><b>bloM</b>
<br><i class=x>Как, прмерно, будет выглядеть вызов этой функции на языке высокого уровня?</i>
<br>Передай ей 3 параметра.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=60940&amp;user=3241&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=5" class="addthx" data-post="60940"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]bloM[/b]','')">bloM</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.28'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=4284">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 апреля 2006 11:54 &middot; Поправил: bloM <br><script type="text/javascript">QU('bloM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=bloM" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
Похоже в  [ESP-0Ch] и [ESP-4] и впрямь мусор...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=60956&amp;user=4284&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=6" class="addthx" data-post="60956"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]elishe[/b]','')">elishe</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 1.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.34'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=4015">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 апреля 2006 13:31 <br><script type="text/javascript">QU('elishe','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=elishe" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
чтобы вызвать фунцкцию надо написать:
<br> int __cdecl SetSize(int &amp;,float *,char *)
<br>push arg3_ptr_string
<br>push arg2_ptr_float
<br>push arg1_int
<br>call SetSize
<br>
<br>в функцию передаются указатели на переменные, скорее всего функцияизменяет их
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=60968&amp;user=4015&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=7" class="addthx" data-post="60968"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]tundra37[/b]','')">tundra37</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 310.8 (мудрец), 29thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.32'>Активность: 0.43<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4072">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 апреля 2006 20:31 <br><script type="text/javascript">QU('tundra37','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tundra37" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
<I>bloM пишет:
<br>Почему возращаемые аргументы - ниже вершины стека??? </I>
<br> Внимательнее смотри :   var_C  и  arg_8  -  это  одно то же место,
<br>  то же самое   var_4  и   arg_0.  Просто  в  аргументы  идет  присваивание
<br> и ИДА  решила, что это локальные переменные на стеке - ошиблась.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=61027&amp;user=4072&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=8" class="addthx" data-post="61027"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]asd[/b]','')">asd</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 162.2 (ветеран)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.58'>Активность: 0.09<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=3241">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 апреля 2006 23:32 <br><script type="text/javascript">QU('asd','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=asd" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<I>tundra37 пишет:
<br>Внимательнее смотри : var_C и arg_8 - это одно то же место, 
<br>то же самое var_4 и arg_0.  </I>
<br>Совсем не так, это две разные переменныё.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=61068&amp;user=3241&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=9" class="addthx" data-post="61068"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]tundra37[/b]','')">tundra37</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 310.8 (мудрец), 29thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.32'>Активность: 0.43<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=4072">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 апреля 2006 08:38 &middot; Поправил: tundra37 <br><script type="text/javascript">QU('tundra37','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tundra37" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
<I>bloM пишет:
<br>mov ecx, [esp+18h+var_C] 
<br>pop edi  </I>
<br> Ну во-первых я перепутал  arg&#039;s  местами. Внимательно считаем :
<br>на стеке сохранено 3 регистра = +С  и еще +С   на  3  аргумента.
<br>  С+С=18.  Т.е.   18+var_С   указывает на верхушку стека - там где arg_0.
<br>  Соответственно   var_4 - это  arg_8. Просто тов.  <I>bloM</I>
<br> начало должен был поподробнее указать. 
<br> Там обязательно стоит кроме
<br><I>.text:10001250 mov eax, large fs:0 
<br>.text:10001256 mov ecx, [esp+arg_0] 
<br>...............................................................  </I>
<br>  еще
<br>      push   ebp
<br>      push   esi
<br>      push   edi    -  Это  же  Си - их не может не быть.
<br>  Соответственно   esp   просто  разный  и естественно   
<br>    
<br><I>bloM пишет:
<br>Похоже в [ESP-0Ch] и [ESP-4] и впрямь мусор... </I>
<br>   - эти ячейки ничего общего  не  имеют  с  <u> [sp+18h+var_c] и .... </u>
<br>
<br><I>asd пишет:
<br>Натупил что-то я, спать надо по ночам </I>  
<br>Особенно весной !
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=61104&amp;user=4072&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=10" class="addthx" data-post="61104"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]bloM[/b]','')">bloM</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 4.8 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.28'>Активность: 0=0</span><br>Статус: <a href="action=userinfo&amp;user=4284">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 апреля 2006 09:21 <br><script type="text/javascript">QU('bloM','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=bloM" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
Всем спасибо за помощь. Подитожив все сказанное вами -   var_C и var_4 - просто локальные переменные, которые после возврата из call SetSize просто напросто затираются.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=61109&amp;user=4284&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=11" class="addthx" data-post="61109"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]Asterix[/b]','')">Asterix</a></b><br></div>
<img src="img/s7.gif" alt=""><br><span class=txtSm>Ранг: 450.1 (мудрец)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.96'>Активность: 0.26<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=58">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 апреля 2006 10:12 <br><script type="text/javascript">QU('Asterix','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Asterix" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=1&amp;topic=4452.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<a href="http://www.exelab.ru/f/action=vthread&amp;forum=5&amp;topic=4449" target="_new">http://www.exelab.ru/f/action=vthread&amp;forum=5&amp;topic=4449</a>
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=61111&amp;user=58&amp;forum_n=1&amp;topic=4452.html&amp;page=0&amp;anchor=12" class="addthx" data-post="61111"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/green.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=1&sortBy=0&page=0.html"><b>Основной форум</b></a> <b class=bulletHead>&#8212;&#8250;</b> Передача аргументов через стек</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=4452" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
