<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Вопрос про WriteProcessMemory Delphi7 - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Здравствуйте, уважаемые пользователи. Помогите мне решить невнятную проблему. Объясню суть, имеется программа, написанная на c#, мне необходимо изменить всего лишь один байт в памяти этой программы при её работе. Для изменения">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=55995'>tyns777</a>, <a target='_blank' href='?action=userinfo&amp;user=55997'>bezumchik</a> (+5 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Вопрос про WriteProcessMemory Delphi7</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=5&amp;topic=26155&amp;page=0.html">&lt;&lt;</a> .  <a href="action=vthread&amp;forum=5&amp;topic=26155&amp;page=0.html">1</a> . <b>2</b> . <a href="action=vthread&amp;forum=5&amp;topic=26155&amp;page=2.html">3</a> . <a href="action=vthread&amp;forum=5&amp;topic=26155&amp;page=2.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]wladimir55[/b]','')">wladimir55</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.35'>Активность: 0.01<span style='color:green'>&nearr;</span>0.04</span><br>Статус: <a href="action=userinfo&amp;user=40398">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 03 ноября 2019 19:08 <br><script type="text/javascript">QU('wladimir55','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=wladimir55" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#1');return false;">#1</a> </span><div align=left><br>
Здравствуйте, уважаемые пользователи. Помогите мне решить невнятную проблему.<br>Объясню суть, имеется программа, написанная на c#, мне необходимо изменить всего лишь один байт в памяти этой программы при её работе. Для изменения памяти я использую функцию, которую использовал очень часто:<br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">procedure&nbsp;MemWrite<span class="hl_char">(</span>pHandle<span class="hl_char">:</span>THandle<span class="hl_comment">;Address:Pointer; Bytes:pchar; nSize:DWORD);</span></li><li class="hl_l1">var</li><li class="hl_l0">&nbsp;&nbsp;BytesWrite<span class="hl_char">:</span><span class="hl_function"><b>Dword</b></span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;oldprotect<span class="hl_char">:</span>&nbsp;<span class="hl_function"><b>DWORD</b></span><span class="hl_comment">;</span></li><li class="hl_l0">begin</li><li class="hl_l1">&nbsp;&nbsp;VirtualProtectEx<span class="hl_char">(</span>pHandle<span class="hl_char">,</span>Address<span class="hl_char">,</span>&nbsp;nSize<span class="hl_char">,</span>&nbsp;PAGE_EXECUTE_READWRITE<span class="hl_char">,</span>&nbsp;@oldProtect<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;WriteProcessMemory<span class="hl_char">(</span>pHandle<span class="hl_char">,</span>Address<span class="hl_char">,</span>&nbsp;Bytes<span class="hl_char">,</span>&nbsp;nSize<span class="hl_char">,</span>&nbsp;BytesWrite<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;VirtualProtectEx<span class="hl_char">(</span>pHandle<span class="hl_char">,</span>Address<span class="hl_char">,</span>&nbsp;nSize<span class="hl_char">,</span>&nbsp;oldProtect<span class="hl_char">,</span>&nbsp;@oldProtect<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_function"><b>end</b></span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>Всё работает, байт меняется. НО есть одно НО, через время работы программы на ПК возникает ошибка &quot;На компьютере не достаточно памяти&quot;, следом идут всяческие ошибки с закрытием этой программы.<br>Но суть в том, что если эту программу перезапустить и сделать тоже самое, эта ошибка появится уже очень скоро, через минут 5 работы. Складывается такое ощущение, что память забивается непонятно где и не освобождается при закрытии этой программы.<br>Однако, если не менять этот байт, программа успешно может работать и 48 часов без перебоев.<br>Также я заметил, что если изменить этот байт через CheatEngine - всё также хорошо работает.<br>Вопрос, в чем проблема возникает? Проверяется на х64 системе. Прошу мне помочь.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399562&amp;user=40398&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=1" class="addthx" data-post="399562"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]wladimir55[/b]','')">wladimir55</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.35'>Активность: 0.01<span style='color:green'>&nearr;</span>0.04</span><br>Статус: <a href="action=userinfo&amp;user=40398">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 ноября 2019 13:31 <br><script type="text/javascript">QU('wladimir55','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=wladimir55" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#2');return false;">#2</a> </span><div align=left><br>
Вы серьезно? Я повторяю ещё раз, именно КОД поиска адреса не является основой для проблемы. ПОВТОРЮСЬ ещё раз, без этого кода, а только сам MemWrite с указанием адреса, который был найден через CheatEngine, вызывает эту проблему.<br>Напишу ещё раз, если использовать только <br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">var</li><li class="hl_l1">ProcessHandle<span class="hl_char">:</span>&nbsp;THandle<span class="hl_comment">;</span></li><li class="hl_l0">begin</li><li class="hl_l1">ProcessHandle&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;OpenProcess<span class="hl_char">(</span>PROCESS_VM_OPERATION&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;PROCESS_VM_WRITE&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;PROCESS_VM_READ<span class="hl_char">,</span>&nbsp;<span class="hl_function">false</span><span class="hl_char">,</span>&nbsp;ProcessID<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_function"><b>if</b></span>&nbsp;ProcessHandle&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">0</span>&nbsp;then</li><li class="hl_l1">MemWrite<span class="hl_char">(</span>ProcessHandle<span class="hl_char">,</span>&nbsp;<span class="hl_function">Ptr</span><span class="hl_char">(</span><span class="hl_char">$</span><span class="hl_number">007CCE18</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;#<span class="hl_char">$</span><span class="hl_number">61</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">CloseHandle<span class="hl_char">(</span>ProcessHandle<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1"><span class="hl_function"><b>end</b></span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div>
<br><br>Проблема остаётся.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399605&amp;user=40398&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=2" class="addthx" data-post="399605"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]Kindly[/b]','')">Kindly</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/1883.jpg" alt=""><br><span class=txtSm>Ранг: 275.9 (наставник), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.13'>Активность: 0.22=0.22</span><br>Статус: <a href="action=userinfo&amp;user=1883">Участник</a><br><font color=blue>RBC</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 ноября 2019 13:40 <br><script type="text/javascript">QU('Kindly','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kindly" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#3');return false;">#3</a> </span><div align=left><br>
Был такой анекдот:<br>Приходит молодой программист к матерому и говорит:<br>- Вот моя программа, и она почему то не работает. Можешь найти ошибку?<br>Матерый программист посмотрел код и сказал:<br>- Знаешь, где у тебя ошибка?<br>Молодой спрашивает:<br>- Где?<br>Матерый:<br>- В генетическом коде! <img src="img/smilies/s6.gif" alt=""><br><br>Сорри за оффтоп, но ТС не хочет сначала изучать азы программирования, зато сразу читы писать и банчить ими поскорей бы <img src="img/smilies/s3.gif" alt="">
<br><br><font size="1"><i>-----<br>Array[Login..Logout] of Life</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399606&amp;user=1883&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=3" class="addthx" data-post="399606"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]user99[/b]','')">user99</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 43.1 (посетитель), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 2.06'>Активность: 0.16<span style='color:green'>&nearr;</span>0.29</span><br>Статус: <a href="action=userinfo&amp;user=44014">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 ноября 2019 14:58 <br><script type="text/javascript">QU('user99','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=user99" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#4');return false;">#4</a> </span><div align=left><br>
<b>wladimir55</b>, приведенный фрагмент кода не содержит каких-либо аномалий, но если смотреть на качество кода в целом, то вашим словам особой веры нет, вы можете делать что-то еще, вроде как незначимое на ваш взгляд, но значимое для операционки (например, в ProcessID передавать какую-то ересь). Не обладая целевой программой, как уже говорилось ранее, угадать в чем конкретно проблема никто не сможет.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399607&amp;user=44014&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=4" class="addthx" data-post="399607"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 ноября 2019 15:22 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#5');return false;">#5</a> </span><div align=left><br>
#&#036;61 - тип Char, символ &#039;a&#039;<br>WriteProcessMemory() принимает Pointer<br><br>Вопрос: Как преобразуется в Delphi Char в Pointer ?<br><br>Давно не писал не дельфи, и у меня сейчас 2 варианта ответа:<br>1) Char -&gt; PChar -&gt; Pointer<br>2) Char -&gt; Integer -&gt; Pointer (как в си)<br><br>Во втором случае  WriteProcessMemory() просто вернула бы FALSE.<br><br>Претензий к короткому фрагменту нет. Из-за чего могут быть утечки памяти - а тот ли байт, по тому ли адресу патчится? Если байт &#036;61 занести в секцию кода там, где он будет первым байтом инструкции, то это будет инструкция popad. В x86 стек увеличится на 32 байта, в x64 на 64. Кроме того, поскольку, как правило, инструкции из 2х и более байт, 2й байт бывшей инструкции станет 1м новой инструкции. Поведение непредсказуемо...<br><br><b>Добавлено спустя 2 минуты</b><br><b>Совет:</b><br>Поставь бряк на WriteProcessMemory() и на останове загляни в asm
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399608&amp;user=24257&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=5" class="addthx" data-post="399608"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]ClockMan[/b]','')">ClockMan</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/17432.jpg" alt=""><br><span class=txtSm>Ранг: 568.2 (<b>!</b>), 465thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.99'>Активность: 0.55<span style='color:green'>&nearr;</span>0.57</span><br>Статус: <a href="action=userinfo&amp;user=17432">Участник</a><br><font color=blue>оптимист</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 ноября 2019 15:25 &middot; Поправил: ClockMan <br><script type="text/javascript">QU('ClockMan','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ClockMan" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#6');return false;">#6</a> </span><div align=left><br><div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">var&nbsp;_buf&nbsp;<span class="hl_char">:</span>&nbsp;pdword<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_Adr<span class="hl_char">,</span>_Lp<span class="hl_char">,</span>_hproc<span class="hl_char">:</span><span class="hl_function"><b>dword</b></span><span class="hl_comment">;</span></li><li class="hl_l0">begin</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;_Adr<span class="hl_char">:</span><span class="hl_char">=</span><span class="hl_char">$</span><span class="hl_number">007CCE18</span>&nbsp;<span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;_buf<span class="hl_char">:</span><span class="hl_char">=</span>pdword<span class="hl_char">(</span><span class="hl_char">$</span><span class="hl_number">61</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;WriteProcessMemory<span class="hl_char">(</span>_hproc<span class="hl_char">,</span>pdword<span class="hl_char">(</span>_Adr<span class="hl_char">)</span><span class="hl_char">,</span>@_buf<span class="hl_char">,</span><span class="hl_number">1</span><span class="hl_char">,</span>_Lp<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0"><span class="hl_function"><b>end</b></span><span class="hl_comment">;</span></li>        </ol>
    </div>
</div></div><br><br><font size="1"><i>-----<br>Чтобы правильно задать вопрос, нужно знать большую часть  ответа. Р.Шекли.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399609&amp;user=17432&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=6" class="addthx" data-post="399609"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]user99[/b]','')">user99</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 43.1 (посетитель), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 2.06'>Активность: 0.16<span style='color:green'>&nearr;</span>0.29</span><br>Статус: <a href="action=userinfo&amp;user=44014">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 ноября 2019 16:05 <br><script type="text/javascript">QU('user99','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=user99" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#7');return false;">#7</a> </span><div align=left><br>
<I>DenCoder пишет:<br>Вопрос: Как преобразуется в Delphi Char в Pointer ? </I><br>Там нет преобразований, MemWrite принимает аргумент PChar, т.е. #&#036;61 в данном случае является не символом, а строкой (два символа #&#036;61 и #0).
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399610&amp;user=44014&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=7" class="addthx" data-post="399610"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 04 ноября 2019 16:19 &middot; Поправил: DenCoder <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#8');return false;">#8</a> </span><div align=left><br>
<I>wladimir55 пишет:<br>Складывается такое ощущение, что память забивается непонятно где и не освобождается при закрытии этой программы. </I><br>Складывается ощущение, что в программе одни ошибки добавляют в таргет другие. Реакция на первые - ось требует закрыть программу, на вторые - таргет пожирает память.<br><br>Кстати, если программа не зависла на закрытии, память вся должна освободиться нормально. Видимо, я прав - таргет всё сжирает.
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399611&amp;user=24257&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=8" class="addthx" data-post="399611"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]bartolomeo[/b]','')">bartolomeo</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 42.8 (посетитель), 16thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 9.87'>Активность: 0.02<span style='color:green'>&nearr;</span>0.06</span><br>Статус: <a href="action=userinfo&amp;user=26261">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 02:09 <br><script type="text/javascript">QU('bartolomeo','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=bartolomeo" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#9');return false;">#9</a> </span><div align=left><br>
<I>DenCoder пишет:<br>В x86 стек увеличится на 32 байта, в x64 на 64 </I><br>в х64 нет команды popad.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399623&amp;user=26261&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=9" class="addthx" data-post="399623"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 02:50 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#10');return false;">#10</a> </span><div align=left><br>
Ну да, пардон
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399624&amp;user=24257&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=10" class="addthx" data-post="399624"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Alchemistry[/b]','')">Alchemistry</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 145.8 (ветеран), 191thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 11.05'>Активность: 0.14<span style='color:green'>&nearr;</span>0.36</span><br>Статус: <a href="action=userinfo&amp;user=21411">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 09:16 <br><script type="text/javascript">QU('Alchemistry','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Alchemistry" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#11');return false;">#11</a> </span><div align=left><br>
<I>wladimir55 пишет:<br>Вы серьезно? Я повторяю ещё раз, именно КОД поиска адреса не является основой для проблемы. ПОВТОРЮСЬ ещё раз, без этого кода, а только сам MemWrite с указанием адреса, который был найден через CheatEngine, вызывает эту проблему.<br>Напишу ещё раз, если использовать только  </I><br><br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">&nbsp;</li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;var</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;ProcessHandle<span class="hl_char">:</span>&nbsp;THandle<span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;begin</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;ProcessHandle&nbsp;<span class="hl_char">:</span><span class="hl_char">=</span>&nbsp;OpenProcess<span class="hl_char">(</span>PROCESS_VM_OPERATION&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;PROCESS_VM_WRITE&nbsp;<span class="hl_function"><b>or</b></span>&nbsp;PROCESS_VM_READ<span class="hl_char">,</span>&nbsp;<span class="hl_function">false</span><span class="hl_char">,</span>&nbsp;ProcessID<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>if</b></span>&nbsp;ProcessHandle&nbsp;<span class="hl_char">&lt;</span><span class="hl_char">&gt;</span>&nbsp;<span class="hl_number">0</span>&nbsp;then</li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;MemWrite<span class="hl_char">(</span>ProcessHandle<span class="hl_char">,</span>&nbsp;<span class="hl_function">Ptr</span><span class="hl_char">(</span><span class="hl_char">$</span><span class="hl_number">007CCE18</span><span class="hl_char">)</span><span class="hl_char">,</span>&nbsp;#<span class="hl_char">$</span><span class="hl_number">61</span><span class="hl_char">,</span>&nbsp;<span class="hl_number">1</span><span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;&nbsp;&nbsp;&nbsp;CloseHandle<span class="hl_char">(</span>ProcessHandle<span class="hl_char">)</span><span class="hl_comment">;</span></li><li class="hl_l0">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_function"><b>end</b></span><span class="hl_comment">;</span></li><li class="hl_l1">&nbsp;</li>        </ol>
    </div>
</div></div>
<br><br>Ты даже в этих нескольких строчках умудрился обосраться с невалидным хендлом в конце, потому что проибал begin end, знаешь почему? Потому что не знаешь что он там должен быть. Потому что не знаешь как это работает и кто это такие - какие-то OpenProcess/CloseHandle.<br><br>Ок, специально для барыги читами, который накопировал свой кодес откуда-то, повторяю тебе еще раз.<br><br>Твой код гавно, именно он источник проблемы. Твой поиск по сигнатуре лютое гавно, именно он источник проблемы. Не удивлюсь если там патчится каждый раз рандомное место в целевом АП, перетирая что угодно.<br><br>Удачи вам посоны в переписывании этого патчера для этого необучаемого. Может он вас там в кредитс добавит потом когда релизнет свой МЕГАЧИТ с каким-нибудь приклееным хмриг заодно :D
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399625&amp;user=21411&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=11" class="addthx" data-post="399625"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 10:42 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#12');return false;">#12</a> </span><div align=left><br>
<I>wladimir55 пишет:<br>BytesWrite:Dword;<br>WriteProcessMemory(pHandle,Address, Bytes, nSize, BytesWrite); </I><br>Я в Делфи не разбираюсь, но, наверное, переменная и указатель и в них не одно и то же...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399626&amp;user=51133&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=12" class="addthx" data-post="399626"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 12:03 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#13');return false;">#13</a> </span><div align=left><br>
<b>wladimir55</b><br>Тебе мешает уверенность в собственной непогрешимости. Точнее - в непогрешимости поиска. Но что мешает просто выложить программу сюда? Думаешь, она кому-то нужна? Нужна здесь только тем, кто может тебе помочь. Кстати, одной её мало, нужна ещё та, которую ты патчишь.<br><br><b>Добавлено спустя 1 минуту</b><br>По тимвью мог бы предоставить доступ, кому не лень
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399627&amp;user=24257&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=13" class="addthx" data-post="399627"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]user99[/b]','')">user99</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 43.1 (посетитель), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 2.06'>Активность: 0.16<span style='color:green'>&nearr;</span>0.29</span><br>Статус: <a href="action=userinfo&amp;user=44014">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 12:34 <br><script type="text/javascript">QU('user99','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=user99" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#14');return false;">#14</a> </span><div align=left><br>
<b>AE</b>, в Делфи во многих WinAPI-функциях вместо указателя (в основном на DWORD) используется передача аргумента по ссылке, с точки зрения asm-кода одно и тоже, а вот с точки зрения Делфи-кода получается такая несуразица.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399628&amp;user=44014&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=14" class="addthx" data-post="399628"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=208" title="05-11-2019 12:11, ранг:160.9" target="_blank">Cigan</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 14:13 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#15');return false;">#15</a> </span><div align=left><br>
<b>user99</b>, то есть там не будет попытки записать результат по хз какому адресу? <br>Удивительно...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399630&amp;user=51133&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=15" class="addthx" data-post="399630"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]wladimir55[/b]','')">wladimir55</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.35'>Активность: 0.01<span style='color:green'>&nearr;</span>0.04</span><br>Статус: <a href="action=userinfo&amp;user=40398">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 15:17 <br><script type="text/javascript">QU('wladimir55','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=wladimir55" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#16');return false;">#16</a> </span><div align=left><br>
<I>Alchemistry пишет:<br>https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1# </I><br>Почему люди на форуме с высоким рейтингом такие злые или обиженные? Естественно, возможно закрытие пустой хендла с дальнейшим исключением. Однако, я тестирую это, когда ProcessID у нас априори не пустой. И даже если бы вызвалось исключение, разве это было бы ошибкой, которая приводила бы к забиваю памяти винды? Но повторюсь ещё раз - такой ошибки никогда не было. И повторюсь в некоторый раз, я тестировал эту штуку БЕЗ ПОИСКА АДРЕСА, код которого я, кстати, нашёл на этом же форуме от &quot;высокорейтингового&quot; пользователя.<br>И после самого &quot;патча&quot;, я естественно проверяю (CheatEngine), а изменился ли байт - да он поменялся именно там где нужно.<br>Почему лишь пользователи с маленьким рейтингом пытаются хоть чем-то помочь? А вот пользователи с большим, считая себя гуру во всех делах, пытаются исключительно говорить, что твой код говно.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399632&amp;user=40398&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=16" class="addthx" data-post="399632"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="17" onfocus="this.blur()" href="JavaScript:di('[b]dezmand07[/b]','')">dezmand07</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 19.5 (новичок), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 2.98'>Активность: 0.05<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=42822">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 15:29 &middot; Поправил: dezmand07 <br><script type="text/javascript">QU('dezmand07','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dezmand07" target="_blank">Личное сообщение</a> &middot;  <a href="#17" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#17');return false;">#17</a> </span><div align=left><br>
<I>wladimir55 пишет:<br>Почему лишь пользователи с маленьким рейтингом пытаются хоть чем-то помочь? </I><br>наверно хотят стать пользователями с высоким рейтингом <img src="img/smilies/s6.gif" alt=""><br><br>по сабжу: принципиально использовать delphi?<br>этим языком мало кто пользуется, имхо синтаксис не удобный.<br>пиши на плюсах и вопросов станет меньше и помощи получишь больше.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399633&amp;user=42822&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=17" class="addthx" data-post="399633"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="18" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 15:32 &middot; Поправил: DenCoder <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#18" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#18');return false;">#18</a> </span><div align=left><br>
<I>wladimir55 пишет:<br>Почему лишь пользователи с маленьким рейтингом пытаются хоть чем-то помочь? А вот пользователи с большим, считая себя гуру во всех делах, пытаются исключительно говорить, что твой код говно. </I><br>Хотел было сказать, что всё наоборот вообще-то. Но заметил, что отчасти ты прав. Но лишь только отчасти. Как я заметил, не зависит от рейтинга - Алхимик тут самый злобный, почти всегда таким был тут, другого не замечал ) Но по коду - да, пишешь ты очень заурядно.<br><br><b>Добавлено спустя 2 минуты</b><br><b>wladimir55</b><br>Откуда у тебя утечка памяти-то? Из программы, которой патчишь? Или которую патчишь? Ты это определил?
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399634&amp;user=24257&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=18" class="addthx" data-post="399634"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="19" onfocus="this.blur()" href="JavaScript:di('[b]wladimir55[/b]','')">wladimir55</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.35'>Активность: 0.01<span style='color:green'>&nearr;</span>0.04</span><br>Статус: <a href="action=userinfo&amp;user=40398">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 15:38 <br><script type="text/javascript">QU('wladimir55','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=wladimir55" target="_blank">Личное сообщение</a> &middot;  <a href="#19" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#19');return false;">#19</a> </span><div align=left><br>
Которую я патчу, по крайней мере, так показывается в событиях винды.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399635&amp;user=40398&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=19" class="addthx" data-post="399635"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="20" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 15:48 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#20" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#20');return false;">#20</a> </span><div align=left><br>
Поставь прогу, которую патчишь, на отладку. До патча нужно поставить бряк(и) на используемые функции выделения памяти. Поскольку прогу не даёшь, определить нужно их тебе самому. Ничего в проге не делай, патчь. Если утечка памяти происходит, то это из-за многочисленных аллокаций. Если прога непосредственно перед патчем была в &quot;дежурном&quot; режиме(ожидала действий от пользователя, или данных из сети, или ещё откуда), то сразу после патча бряк(точка останова) должен сработать.<br><br>А так, если всё в порядке с kernel32.dll, ntdll.dll, ядро не патчено, поставлен некривой антивирус, антишпион или вообще его или их нет, то WriteProcessMemory() не при чём! Чего я здесь ещё не заметил - никто не упомянул про DEBUG_PRIVILEGE, которую нужно получить в программе, чтобы WriteProcessMemory() делала, что ей предписано. Без этой привилегии, просто функа вернёт FALSE.
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399636&amp;user=24257&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=20" class="addthx" data-post="399636"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="21" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 15:48 &middot; Поправил: AE <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#21" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#21');return false;">#21</a> </span><div align=left><br>
<I>wladimir55 пишет:<br>а изменился ли байт - да он поменялся именно там где нужно </I><br>Только он?, а то там наверху спрашивали, видел, ответа не видел...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399637&amp;user=51133&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=21" class="addthx" data-post="399637"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="22" onfocus="this.blur()" href="JavaScript:di('[b]wladimir55[/b]','')">wladimir55</a></b><br></div>
<img src="img/s1.gif" alt=""><br><span class=txtSm>Ранг: 2.0 (гость)<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 4.35'>Активность: 0.01<span style='color:green'>&nearr;</span>0.04</span><br>Статус: <a href="action=userinfo&amp;user=40398">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 15:52 <br><script type="text/javascript">QU('wladimir55','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=wladimir55" target="_blank">Личное сообщение</a> &middot;  <a href="#22" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#22');return false;">#22</a> </span><div align=left><br>
<I>dezmand07 пишет:<br>https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=-1# </I><br>Хорошее замечание, переписал это на плюсах и тестирую сейчас... Точнее уже 12 часов программа работает
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399638&amp;user=40398&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=22" class="addthx" data-post="399638"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="23" onfocus="this.blur()" href="JavaScript:di('[b]dezmand07[/b]','')">dezmand07</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 19.5 (новичок), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 2.98'>Активность: 0.05<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=42822">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 16:02 <br><script type="text/javascript">QU('dezmand07','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dezmand07" target="_blank">Личное сообщение</a> &middot;  <a href="#23" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#23');return false;">#23</a> </span><div align=left><br>
<b>DenCoder</b> не понял, зачем привилегия отладчика на WriteProcessMemory?<br>если только патчиться системный процесс (в сессии пользователя конечно же), но ТС вроде не упоминал про сиспроцесс, или я не заметил.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399640&amp;user=42822&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=23" class="addthx" data-post="399640"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="24" onfocus="this.blur()" href="JavaScript:di('[b]user99[/b]','')">user99</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 43.1 (посетитель), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 2.06'>Активность: 0.16<span style='color:green'>&nearr;</span>0.29</span><br>Статус: <a href="action=userinfo&amp;user=44014">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 16:29 &middot; Поправил: user99 <br><script type="text/javascript">QU('user99','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=user99" target="_blank">Личное сообщение</a> &middot;  <a href="#24" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#24');return false;">#24</a> </span><div align=left><br>
<b>AE</b>, прототип функции объявлен так:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">function&nbsp;WriteProcessMemory<span class="hl_char">(</span>hProcess<span class="hl_char">:</span>&nbsp;THandle<span class="hl_comment">; const lpBaseAddress: Pointer; lpBuffer: Pointer; nSize: SIZE_T; var lpNumberOfBytesWritten: SIZE_T): BOOL; stdcall;</span></li>        </ol>
    </div>
</div></div>
<br>а можно объявить так:<br>
<div class="hl_container">
<div class="hl_header">Code:</div>
<div class="hl_scroll_part_normal">
    <div class="hl_normal"> 
        <ol class="hl_main"><li class="hl_l0">function&nbsp;WriteProcessMemory<span class="hl_char">(</span>hProcess<span class="hl_char">:</span>&nbsp;THandle<span class="hl_comment">; const lpBaseAddress: Pointer; lpBuffer: Pointer; nSize: SIZE_T; lpNumberOfBytesWritten: PSIZE_T): BOOL; stdcall;</span></li>        </ol>
    </div>
</div></div>
<br>по сути это одно и тоже, но с мелким отличием, во втором случае можно в последний аргумент передать nil (NULL), а в первом нет, т.е. параметр из опционального становится обязательным.<br><br><I>wladimir55 пишет:<br>Но повторюсь ещё раз - такой ошибки никогда не было </I><br>Я тоже повторюсь: ничего удивительного в таком отношении нет, сложно на слово верить человеку с таким уровнем кодинга.<br><br><I>wladimir55 пишет:<br>А вот пользователи с большим, считая себя гуру во всех делах, пытаются исключительно говорить, что твой код говно </I><br>Может быть потому что они давно сидят на этом форуме и видели уже сотни подобных творений? И самое печальное, что 99% подобных творений заканчивается ничем, а это грусть-тоска.<br>Но могу дать добрый совет: лучше не принимать близко к сердцу написанное, а понять почему свой код говно и стараться его улучшить.<br><br><b>dezmand07</b>, если уметь готовить, то Делфи нормальный язык, хотя и не без изъянов
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399642&amp;user=44014&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=24" class="addthx" data-post="399642"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=18316" title="05-11-2019 16:47, ранг:298.2" target="_blank">SReg</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="25" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 16:30 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#25" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#25');return false;">#25</a> </span><div align=left><br>
To open a handle to another local process and obtain full access rights, you must enable the SeDebugPrivilege privilege. А на какие именно права нужна эта привилегия, я уже помню точно. Права на WriteProcessMemory(), по-моему, в их числе. В последнее время при манипуляциях с процессами просто по дефолту вставляю код с получением привилегии.<br><br><b>Добавлено спустя 1 минуту</b><br><b>user99</b><br>Второй вариант, кстати, правильный<br><br><b>Добавлено спустя 8 минут</b><br>SeDebugPrivilege:<br>Required to debug and adjust the memory of a process owned by another account.
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399643&amp;user=24257&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=25" class="addthx" data-post="399643"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="26" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 16:42 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#26" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#26');return false;">#26</a> </span><div align=left><br>
<I>user99 пишет:<br>с мелким отличием </I><br>вы, я прошу прощения, про мелкое отличие &quot;0&quot; от &quot;4985243&quot;
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399644&amp;user=51133&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=26" class="addthx" data-post="399644"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="27" onfocus="this.blur()" href="JavaScript:di('[b]dezmand07[/b]','')">dezmand07</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 19.5 (новичок), 8thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 2.98'>Активность: 0.05<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=42822">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 16:51 <br><script type="text/javascript">QU('dezmand07','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=dezmand07" target="_blank">Личное сообщение</a> &middot;  <a href="#27" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#27');return false;">#27</a> </span><div align=left><br>
<I>DenCoder пишет:<br>В последнее время при манипуляциях с процессами просто по дефолту вставляю код с получением привилегии. </I><br>она требует админской учётки (запуска апп из-под админа), поэтому для мастхева не пригодна (только для собственных нужд).<br>для юзерских процессов запущенных в окружении пользователя (SessionId) эта привилегия не нужна для WriteProcessMemory, проверено много тысяч раз <img src="img/smilies/s2.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399646&amp;user=42822&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=27" class="addthx" data-post="399646"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="28" onfocus="this.blur()" href="JavaScript:di('[b]AE[/b]','')">AE</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 10.8 (новичок), 4thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 0.82'>Активность: 0.17=0.17</span><br>Статус: <a href="action=userinfo&amp;user=51133">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 17:18 <br><script type="text/javascript">QU('AE','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=AE" target="_blank">Личное сообщение</a> &middot;  <a href="#28" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#28');return false;">#28</a> </span><div align=left><br>
<b>user99</b>, пардон, въехал....
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399647&amp;user=51133&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=28" class="addthx" data-post="399647"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="29" onfocus="this.blur()" href="JavaScript:di('[b]user99[/b]','')">user99</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 43.1 (посетитель), 20thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 2.06'>Активность: 0.16<span style='color:green'>&nearr;</span>0.29</span><br>Статус: <a href="action=userinfo&amp;user=44014">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 17:23 <br><script type="text/javascript">QU('user99','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=user99" target="_blank">Личное сообщение</a> &middot;  <a href="#29" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#29');return false;">#29</a> </span><div align=left><br>
<I>DenCoder пишет:<br>Второй вариант, кстати, правильный </I><br>Оба варианта правильные, но второй вариант максимально точный (скажем так &quot;на 100% по стандарту&quot;).<br><br><I>AE пишет:<br>вы, я прошу прощения, про мелкое отличие &quot;0&quot; от &quot;4985243&quot;  </I><br>Не понял к чему это. Еще раз повторюсь, отличие этих двух прототипов только в одном: в первом варианте аргумент lpNumberOfBytesWritten является обязательным, а во втором - нет. Ну и как следствие, при вызове функции по первому прототипу вы будете в функцию передавать саму DWORD-переменную, а во втором нужно передавать указатель на эту переменную. Оба варианта отработают без ошибок, и Делфи не перепутает самое значение находящее в переменной и адрес этой переменной. И если вы в дизассемблере посмотрите сгенерированный код для этих двух прототипов (где lpNumberOfBytesWritten не NULL), то он будет идентичным.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399649&amp;user=44014&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=29" class="addthx" data-post="399649"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="30" onfocus="this.blur()" href="JavaScript:di('[b]DenCoder[/b]','')">DenCoder</a></b><br></div>
<img src="img/s7.gif" alt=""><br><img style="padding-top:3px;" src="av/24257.jpg" alt=""><br><span class=txtSm>Ранг: 324.3 (мудрец), 222thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 10.42'>Активность: 0.48<span style='color:red'>&searr;</span>0.37</span><br>Статус: <a href="action=userinfo&amp;user=24257">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 17:58 <br><script type="text/javascript">QU('DenCoder','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=DenCoder" target="_blank">Личное сообщение</a> &middot;  <a href="#30" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#30');return false;">#30</a> </span><div align=left><br>
<b>dezmand07</b><br>Привычка включать SeDebugPrivilege появилась с начала практики инжекта. Тогда использовал CreateRemoteThread(), для неё в любом случае нужна эта привилегия. А так, поскольку прятать мне нечего и не от кого, то в манифесте практически всегда задаю requireAdministrator.<br><br><b>Добавлено спустя 3 минуты</b><br><I>wladimir55 пишет:<br>Точнее уже 12 часов программа работает </I><br>Во как, на си работает, на дельфи не хочет. Дельфи виноват? )
<br><br><font size="1"><i>-----<br>IZ.RU</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=399651&amp;user=24257&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=30" class="addthx" data-post="399651"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:inline"> | Сообщение посчитали полезным: <span class="total_thx"><a href="action=userinfo&user=39556" title="05-11-2019 15:04, ранг:69.1" target="_blank">sefkrd</a></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="31" onfocus="this.blur()" href="JavaScript:di('[b]UniSoft[/b]','')">UniSoft</a></b><br></div>
<img src="img/s4.gif" alt=""><br><img style="padding-top:3px;" src="av/1288.png" alt=""><br><span class=txtSm>Ранг: 52.0 (постоянный), 146thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.41'>Активность: 0.03<span style='color:green'>&nearr;</span>0.08</span><br>Статус: <a href="action=userinfo&amp;user=1288">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 05 ноября 2019 18:29 &middot; Поправил: UniSoft <br><script type="text/javascript">QU('UniSoft','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=UniSoft" target="_blank">Личное сообщение</a> &middot;  <a href="#31" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=26155&amp;page=1#31');return false;">#31</a> </span><div align=left><br>
<I>DenCoder пишет:<br>Дельфи виноват? )  </I><br>Так блин Delphi 7 вышел когда...<br><br><I>wladimir55 пишет:<br>И после самого &quot;патча&quot;, я естественно проверяю (CheatEngine), а изменился ли байт - да он поменялся именно там где нужно. </I><br>Ну это еще раз говорит о некорректном патче, возможно из-за патча пропустили сборщик мусора, пропустили освобождение какого-либо объекта (а в .NET любая сущность есть объект).<br>Опять же, тут нужно смотреть сам код, что именно патчите и где, т.е. нужно смотреть цель.<br>Это что-то секретное?<br>Раз уж это .NET, почему бы просто не пропатчить сам файл?<br>Или на нем висит какой-либо протектор?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=399652&amp;user=1288&amp;forum_n=5&amp;topic=26155&amp;page=1&amp;anchor=31" class="addthx" data-post="399652"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b> <a href="action=vthread&amp;forum=5&amp;topic=26155&amp;page=0.html">&lt;&lt;</a> .  <a href="action=vthread&amp;forum=5&amp;topic=26155&amp;page=0.html">1</a> . <b>2</b> . <a href="action=vthread&amp;forum=5&amp;topic=26155&amp;page=2.html">3</a> . <a href="action=vthread&amp;forum=5&amp;topic=26155&amp;page=2.html">&gt;&gt;</a></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Вопрос про WriteProcessMemory Delphi7</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=26155" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
