<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Закончились идеи, может подскажете парочку (хитрая защита) - eXeL@B</title>
<meta NAME="DESCRIPTION" CONTENT="Лечу удивительную програму &quot;GameMaker Studio&quot; Поборол практически все, кроме одного. После запуска проги можно нормально работать... но по прошествии неопределнного времени (может быть и 5 минут может быть и час) все">
<meta NAME="KEYWORDS" CONTENT="x64_dbg windbg ollydbg ida скачать взлом отладчик ассемблер дизассемблер крэкер cracker реверсер keygen кейген кодер патч патчер крэкми лоадер брутфорсер протектор распаковщик пароль ключ ключфайл шпион oep key защита программа winapi faq hiew windasm softice winhex">
<META NAME="Document-state" CONTENT="Dynamic">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<link rel="SHORTCUT ICON" href="/favicon.ico">
<meta name="viewport" content="width=device-width">
<link href="./skin/s0.css" type="text/css" rel="STYLESHEET">
<link href="./skin/code.css" type="text/css" rel="STYLESHEET">
<script type="text/javascript" src="./js/jq.js"></script>
<link rel="alternate" type="application/rss+xml" title="eXeL@B" href="./rss.php">
<style type="text/css">.username div .dops{display:none;}</style>
<link href="../menu.css" type="text/css" rel="stylesheet">
</head>

<body>
<a id="to_top"></a>
<div id="wrapper">
 
<div class="mob-hamburger"><span></span></div>
 
</center></div><script type='text/javascript'>
function lst(){var i=0;var htm='';var a='';var timer=setInterval(function(){if(i<10){i=i+10;}else{clearInterval(timer);i=0;}document.getElementById('kurs_container').style.marginLeft='-'+i+'px';},100);}
document.addEventListener('DOMContentLoaded',function(event){setTimeout(lst,1500);setInterval(lst,10000);});
</script></div></div>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery(".mob-hamburger").on("click", function() {
        jQuery(".mob-hamburger").toggleClass("active");
        jQuery("#site-navigation").slideToggle();
		if (jQuery('.mob-hamburger').hasClass('active')) {
			var i = jQuery('#site-navigation').offset().top;
		} else { 
			var i = 0;
		}
			
		jQuery("html, body").animate({ scrollTop: i }, 600);
    });
	var btn = jQuery('#to_top');
	jQuery(window).scroll(function() {
		if (jQuery(window).scrollTop() > 300) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	btn.on('click', function(e) {
		e.preventDefault();
		jQuery('html, body').animate({scrollTop:0}, '300');
	});
});
</script>
 
<div id="content">
<div align=center style="margin-top:15px">

<table class=tbTransparent>
<tr><td class=tbTransparent>
<span class=txtSm>Сейчас на форуме: <b><a target='_blank' href='?action=userinfo&amp;user=28016'>asfa</a>, <a target='_blank' href='?action=userinfo&amp;user=41701'>_MBK_</a>, <a target='_blank' href='?action=userinfo&amp;user=41144'>Adler</a>, <a target='_blank' href='?action=userinfo&amp;user=26261'>bartolomeo</a> (+9 невидимых)</b></span>
</td>
</tr>
</table>

 

</div><br>
<script language="javascript" type="text/javascript" charset="windows-1251" src="templates/base.js"></script>

<div align=center><table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Закончились идеи, может подскажете парочку (хитрая защита)</span></td>
</tr></table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width="15%" class=caption4><span class=txtSm><b>Посл.ответ</b></span></td>
<td width="85%" class=caption4><span class=txtSm><b>Сообщение</b></span></td></tr>
<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="1" onfocus="this.blur()" href="JavaScript:di('[b]figgler[/b]','')">figgler</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 11.2 (новичок), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.5'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8982">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 сентября 2012 20:58 <br><script type="text/javascript">QU('figgler','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=figgler" target="_blank">Личное сообщение</a> &middot;  <a href="#1" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#1');return false;">#1</a> </span><div align=left><br>
Лечу удивительную програму &quot;GameMaker Studio&quot;<br>Поборол практически все, кроме одного.<br>После запуска проги можно нормально работать... но по прошествии неопределнного времени (может быть и 5 минут может быть и час) все изображения типа &quot;спрайт&quot; в программе модифицируются путем наложения на оригиналы изображения черепа. Происходит это непотребство исключительно в памяти - но если нажать сохранение проэкта то сохранятся изображения с черепками.<br>Происходит такое только в случае если основной исполняемый файл модифицирован, то есть прога проверяет саму себя.<br><br>Собственно интересуют идеи - что можно попробовать отловить чтобы найти функции творящие такую гадость.<br><br>Прога написана на делфи (но не декомпилируется доступными декомпиляторами), не сжата, никакой навесной защиты, только своя вот такая.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311767&amp;user=8982&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=1" class="addthx" data-post="311767"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr><td class=caption4 colspan=2></td></tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="2" onfocus="this.blur()" href="JavaScript:di('[b]Flasher-11[/b]','')">Flasher-11</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 11.2 (новичок), 9thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 7.95'>Активность: 0.03<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=32610">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 сентября 2012 21:02 &middot; Поправил: Flasher-11 <br><script type="text/javascript">QU('Flasher-11','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Flasher-11" target="_blank">Личное сообщение</a> &middot;  <a href="#2" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#2');return false;">#2</a> </span><div align=left><br>
Была одна у меня такая, пофиксил CRC и все встало на свои места<img src="img/smilies/s1.gif" alt=""><br>В Вашем случае не знаю, поможет или нет. Думаю там все похитрожопее будет.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311768&amp;user=32610&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=2" class="addthx" data-post="311768"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="3" onfocus="this.blur()" href="JavaScript:di('[b]sivorog[/b]','')">sivorog</a></b><br></div>
<img src="img/s3.gif" alt=""><br><span class=txtSm>Ранг: 49.7 (посетитель), 19thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 8.49'>Активность: 0.05<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=31142">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 сентября 2012 21:04 &middot; Поправил: sivorog <br><script type="text/javascript">QU('sivorog','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=sivorog" target="_blank">Личное сообщение</a> &middot;  <a href="#3" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#3');return false;">#3</a> </span><div align=left><br>
<b>figgler</b><br>если файл проверяет себя на модификацию, то, возможно, используется API функция <u>ReadFile</u> с последующим подсчетом CRC (или другой хэш-суммы), либо проверка конкретных байтов в файле...<br>также может независимо от этого проверяться образ файла в памяти, разными способами. <br><br>попробуйте для начала так: снимите трассу в Олли для исходного exe и для твоего модифицированного, сравните.<br><br>а также попробуйте IDR как декомпилятор Дельфи - DeDe уже безусловно староват, а IDR поновее.<br><br>З.Ы. кстати да, <b>Vovan666 </b> прав: не забывайте про GetTickCount и иже с ним <img src="img/smilies/s2.gif" alt="">
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311769&amp;user=31142&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=3" class="addthx" data-post="311769"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="4" onfocus="this.blur()" href="JavaScript:di('[b]Hellspawn[/b]','')">Hellspawn</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/72.gif" alt=""><br><span class=txtSm>Ранг: 990.2 <font color=red>(<b>! ! !</b>)</font>, 380thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.95'>Активность: 0.68<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=72">Модератор</a><br><font color=blue>Author of DiE</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 сентября 2012 21:06 <br><script type="text/javascript">QU('Hellspawn','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Hellspawn" target="_blank">Личное сообщение</a> &middot;  <a href="#4" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#4');return false;">#4</a> </span><div align=left><br>
<b>figgler</b><br><br>больше своих наработjк, или распиши поподробнее, т.к. твоих дейстий ~0 (запустил, нашел ограничения)
<br><br><font size="1"><i>-----<br>[nice coder and reverser]</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=311770&amp;user=72&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=4" class="addthx" data-post="311770"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="5" onfocus="this.blur()" href="JavaScript:di('[b]Vovan666[/b]','')">Vovan666</a></b><br></div>
<img src="img/s8.gif" alt=""><br><span class=txtSm>Ранг: 617.3 (<b>!</b>), 677thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 14.06'>Активность: 0.54<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=5291">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 сентября 2012 21:06 <br><script type="text/javascript">QU('Vovan666','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Vovan666" target="_blank">Личное сообщение</a> &middot;  <a href="#5" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#5');return false;">#5</a> </span><div align=left><br>
<b>figgler</b><br>Вроде на всякие таймеры надо ловить, причем там несколько проверок на вшивость.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311771&amp;user=5291&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=5" class="addthx" data-post="311771"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="6" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.85'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 19 сентября 2012 23:32 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#6" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#6');return false;">#6</a> </span><div align=left><br>
<b>figgler</b><br>Да метод классический - модифицируем прогу, потом на модифицированные байты ставим аппаратный брейкпоинт на чтение и смотрим, откуда программа эти байты читает. Это если не помогло отлавливание ReadFile. <br><br>Если отловили ReadFile, дайте ей отработать и тогда в памяти появится некий буфер. В этом буфере находите модифицированные байты, на них - опять аппаратник и ищете, откуда обращения к байтам.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=311775&amp;user=6336&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=6" class="addthx" data-post="311775"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="7" onfocus="this.blur()" href="JavaScript:di('[b]tomac[/b]','')">tomac</a></b><br></div>
<img src="img/s4.gif" alt=""><br><span class=txtSm>Ранг: 65.3 (постоянный), 10thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.82'>Активность: 0.02<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=6470">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 сентября 2012 00:12 &middot; Поправил: tomac <br><script type="text/javascript">QU('tomac','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=tomac" target="_blank">Личное сообщение</a> &middot;  <a href="#7" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#7');return false;">#7</a> </span><div align=left><br>
Или CreateFileMapping/MapViewOfFile, да.<br><br>UPD: Какую версию ломаешь?<br>Если IDR показывает формы, можно сразу увидеть, есть ли там VCLные таймеры. И если да, то смотреть уже на них. Вообще, событие, происходящее через сколько-то времени, это почти всегда таймер. Или вцл-ный, или виндовый.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311777&amp;user=6470&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=7" class="addthx" data-post="311777"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="8" onfocus="this.blur()" href="JavaScript:di('[b]figgler[/b]','')">figgler</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 11.2 (новичок), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.5'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8982">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 сентября 2012 00:23 <br><script type="text/javascript">QU('figgler','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=figgler" target="_blank">Личное сообщение</a> &middot;  <a href="#8" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#8');return false;">#8</a> </span><div align=left><br>
Спасибо за идеи.<br><br>IDR - не берет эту прогу (только формы показывает)<br><br>Фикс СРС не помогает.<br><br>Остальные идеи тоже приходили в голову, вот с таймерами не совсем понятна логика, хотя о них я тоже думал.<br><br>В общем, сейчас вроде отловил место где определяется полный путь к исполняемому файлу и передается дальше для анализа, нашел вроде и функцию в которой решение принимается - сейчас тестирую. <br>Проблема только в том, что ефект проявляется не сразу и надо долго ждать...<br><br>Спасибо за советы.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311778&amp;user=8982&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=8" class="addthx" data-post="311778"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="9" onfocus="this.blur()" href="JavaScript:di('[b]Kindly[/b]','')">Kindly</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/1883.jpg" alt=""><br><span class=txtSm>Ранг: 275.9 (наставник), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.13'>Активность: 0.22=0.22</span><br>Статус: <a href="action=userinfo&amp;user=1883">Участник</a><br><font color=blue>RBC</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 сентября 2012 00:38 &middot; Поправил: Kindly <br><script type="text/javascript">QU('Kindly','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kindly" target="_blank">Личное сообщение</a> &middot;  <a href="#9" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#9');return false;">#9</a> </span><div align=left><br>
<b>figgler</b> - с ней сейчас гимору не оберешся <img src="img/smilies/s16.gif" alt=""><br>Там не проверяется crc файла вроде, но определенных кусков кода это точно, там еще проверяется размер в .NET лаунчере.<br>Защита в основном реализована на таймерах, так что найди и отруби основной таймер, по которому идут все заподлянки. Регу так просто там уже не пропатчишь, наткнешся на дополнительные проверки, которые проверяют кей или его часть. Также если рега неправильно пропатчена - не получишь выбор форматов компиляции, а если и найдешь его и пропатчишь напрямую, то не видать рабочего файло, т.к. еще сервис какой-то подключают при компиляции, и он тоже что-то чекает. Короче, кидай лучше этот гимор - за бесплатно нехрен возится. И да, как только авторам попадет патч, они сразу оперативно отреагируют и добавят еще десяток проверок. Имхо, лучше всего скардить ключ, выкачать офлайн модуль активации и пропатчить онлайн чек.
<br><br><font size="1"><i>-----<br>Array[Login..Logout] of Life</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=311781&amp;user=1883&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=9" class="addthx" data-post="311781"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="10" onfocus="this.blur()" href="JavaScript:di('[b]figgler[/b]','')">figgler</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 11.2 (новичок), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.5'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8982">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 сентября 2012 00:50 &middot; Поправил: figgler <br><script type="text/javascript">QU('figgler','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=figgler" target="_blank">Личное сообщение</a> &middot;  <a href="#10" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#10');return false;">#10</a> </span><div align=left><br>
Я ж говорю, все работает... с лицензией все просто, НЕТ ланчер - работает на себя, такая же проверка в самом основном ехе есть (убита), все форматы доступны, ограничения сняты, компиляция пашет нормально...<br>Вот только если там действительно таймер - то я его пробовал искать, но потом решил пойти другим путем...<br>Искал по функциям SetTimer - может не правильно, где бы почитать как таймеры ловить.<br><br><br>Кстати - офлайн модуля активации там нет.<br><br>Собсно есть простой способ - написать ланчер думаю с ним все будет ок работать. Просто интересно найти где эти чертовы черепа вылазят...<br><br>&gt;UPD: Какую версию ломаешь?<br>&gt;Если IDR показывает формы, можно сразу увидеть, есть ли там VCLные таймеры. И если да, то смотреть &gt;уже на них. Вообще, событие, происходящее через сколько-то времени, это почти всегда таймер. Или &gt;вцл-ный, или виндовый.<br><br>Версию - последнюю 450. IDR пишет Cannot find table of initialization and finalization procedures<br>И да, там есть 2 таймера (по крайней мере на MainForm), но как найти адреса их процедур?
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311782&amp;user=8982&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=10" class="addthx" data-post="311782"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="11" onfocus="this.blur()" href="JavaScript:di('[b]Kindly[/b]','')">Kindly</a></b><br></div>
<img src="img/s6.gif" alt=""><br><img style="padding-top:3px;" src="av/1883.jpg" alt=""><br><span class=txtSm>Ранг: 275.9 (наставник), 340thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 15.13'>Активность: 0.22=0.22</span><br>Статус: <a href="action=userinfo&amp;user=1883">Участник</a><br><font color=blue>RBC</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 сентября 2012 01:29 &middot; Поправил: Kindly <br><script type="text/javascript">QU('Kindly','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=Kindly" target="_blank">Личное сообщение</a> &middot;  <a href="#11" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#11');return false;">#11</a> </span><div align=left><br>
<b>figgler</b>, ты уверен, что осталось тебе только &quot;черепа&quot;? Это всего лишь одно из видимых ограничений, ты же не знаешь про проверки с определенным интервалом времени, то стирающей комнату, то код, то еще какая нибудь лажа при вычислениях и открывании/закрывании форм? То что я ковырял, то и видел, давно уже, для кустомер юзеров там в кодесе был вариант офлайн активации, что там счас хз. Вот когда ты будешь прибивать события по таймеру (коих должно быть очень много), тогда с дополнительными граблями и столкнешся, если найдешь общий вызов - его нельзя патчить, т.к. там переплетаются нужные функции для программы и проверки, так что удачи <img src="img/smilies/s8.gif" alt="">
<br><br><font size="1"><i>-----<br>Array[Login..Logout] of Life</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=311785&amp;user=1883&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=11" class="addthx" data-post="311785"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="12" onfocus="this.blur()" href="JavaScript:di('[b]crypto[/b]','')">crypto</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 188.1 (ветеран), 419thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.61'>Активность: 0.14<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8210">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 сентября 2012 08:40 &middot; Поправил: crypto <br><script type="text/javascript">QU('crypto','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=crypto" target="_blank">Личное сообщение</a> &middot;  <a href="#12" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#12');return false;">#12</a> </span><div align=left><br>
<b>figgler</b><br><i class=x>IDR пишет Cannot find table of initialization and finalization procedures</i><br>Исполняемый файл бросьте мне пож-ста на crypto2011@gmail.com. Если IDR показывает формы, то похоже, что файл написан на BC++, а не на Delphi.
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311786&amp;user=8210&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=12" class="addthx" data-post="311786"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="13" onfocus="this.blur()" href="JavaScript:di('[b]figgler[/b]','')">figgler</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 11.2 (новичок), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.5'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8982">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 сентября 2012 09:50 &middot; Поправил: figgler <br><script type="text/javascript">QU('figgler','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=figgler" target="_blank">Личное сообщение</a> &middot;  <a href="#13" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#13');return false;">#13</a> </span><div align=left><br>
<b>crypto</b> файл скинул. (раньше они всегда на делфе писали)<br><br>Вот почикал еще один переход - всю ночь студия работала - черепов нет... с остальным будут разбираться уже пользователи (сообщать о возможных новых ловушках)...<br><br><b>kyndly</b> Я вот рассуждал логически - можно конечно ломать механизм лицензирования и активации, поймать при этом кучу необычного, но ведь можно и другим путем пойти, тем более что товарищи разработчики сами дают нам такую возможность введя &quot;Фрии лайсенз&quot;. В итоге получается, на мой взгляд, 2 проблемы - 1 - нужно чтобы программа думала что она полная и для всех платформ, 2 - учитывая что модифицируется файл, выплывают (как выяснилось) проблемы с проверкой его целостности. 1 проблема решилась просто и элементарно - в определенных местах изменил ссылки на строки из лицензии и программа теперь при старте всегда думает что она полная и для всех платформ - причем решение это принимает она сама (ни одного перехода не изменено) и механизм активации не затрагивается, а вот со 2 возникли в итоге проблемы, причем чисто технического характера, часть проверок успешно была отключена (использовались функции WinTrust) ну и надеюсь вторая часть теперь тоже отключена (была отловлена функция с CASE которая вызывалась весьма редко и только после получения полного пути к исполняемому файлу)...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311791&amp;user=8982&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=13" class="addthx" data-post="311791"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="14" onfocus="this.blur()" href="JavaScript:di('[b]ARCHANGEL[/b]','')">ARCHANGEL</a></b><br></div>
<img src="img/s8.gif" alt=""><br><img style="padding-top:3px;" src="av/6336.png" alt=""><br><span class=txtSm>Ранг: 681.5 <font color=magenta>(<b>! !</b>)</font>, 405thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.85'>Активность: 0.42<span style='color:red'>&searr;</span>0.21</span><br>Статус: <a href="action=userinfo&amp;user=6336">Участник</a><br><font color=blue>ALIEN Hack Team</font></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 сентября 2012 10:11 <br><script type="text/javascript">QU('ARCHANGEL','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=ARCHANGEL" target="_blank">Личное сообщение</a> &middot;  <a href="#14" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#14');return false;">#14</a> </span><div align=left><br>
<b>figgler</b><br>Как мне кажется, нужно пойти таким путём. Вначале проверяем, работает ли прога с лоадером (луанчером/загрузчиком), который бы патчил нужные байтики в памяти, не трогая бинарь на диске. Тут два варианта - либо работает, либо нет.<br><br>Если работает. Значит для проверки используется механизм чтения файла с диска, а раз так, то можно отслеживать любое открытие файла через CreateFileW (можно даже через NtCreateFile), и подсовывать проге полный путь до непатченного образа. И пусть таймеров там хоть миллион, лес им обеспечен.<br><br>Если не работает. Значит используются только/также проверки целостности в памяти. Здесь нужно попытаться локализовать проверяемые куски. Т.е. не вся память проверяется. Проверяются обычно критически важные для защиты участки. А значит есть ещё такие, которые не проверяются. Т.е. их можно патчить безболезненно.  Тогда идея в следующем. Выделяете критически важную функцию и переносите её в выделенную область памяти, эту область выделяете через VirtualAlloc. Это называется морфинг. Далее в коде патчите все обращения так, чтоб они шли в новую область, а старый непатченный код попросту не вызывался бы. И получаете две копии одной функции. Первая непропатчена, но и не работает, а присутствует для прохождения всяких проверок на целостность, а вторая работает. На практике это связано с определёнными сложностями. Во-первых, нужен морфирующий движок, во-вторых, нужно как-то определить, какие области чекаются, а какие - нет. Т.к. софт написан то ли на BC++, то ли на делфи, то морфинг возможен. Если сложно определить границы критического кода, можно отморфить побольше с запасом, захватив в отморфленную область часть некритического, того, который не проверяется. Плюс никто не запрещает комбинировать этот способ со способом подмены полного пути к бинарнику. Есть ещё модификация этого способа, при котором на выделенную область ставиться доступ PAGE_GUARD, но мне кажется, что в человеке должно быть много энтузиазма для реализации этих техник. Плюсом является относительно высокая надёжность и быстрая адаптация к новым релизам. Т.е. вшла новая версия, вы нашли место, где патчить проверку, а потом для сокрытия патчинга заюзали свой движок, и жизнь прекрасна.
<br><br><font size="1"><i>-----<br>Stuck to the plan, always think that we would stand up, never ran.</i></font><br><br><span class="txtGoods"><a href="action=addthx&amp;post=311793&amp;user=6336&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=14" class="addthx" data-post="311793"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel1>
<td width="17%" class=caption1>
<div class=username><div><b><a name="15" onfocus="this.blur()" href="JavaScript:di('[b]crypto[/b]','')">crypto</a></b><br></div>
<img src="img/s5.gif" alt=""><br><span class=txtSm>Ранг: 188.1 (ветеран), 419thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.61'>Активность: 0.14<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8210">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 сентября 2012 17:54 <br><script type="text/javascript">QU('crypto','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=crypto" target="_blank">Личное сообщение</a> &middot;  <a href="#15" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#15');return false;">#15</a> </span><div align=left><br>
<b>figgler</b><br>Написана на Дельфи 2010. Используйте базу для него (см. мыло)
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311810&amp;user=8210&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=15" class="addthx" data-post="311810"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>

<tr valign=top class=tbCel2>
<td width="17%" class=caption1>
<div class=username><div><b><a name="16" onfocus="this.blur()" href="JavaScript:di('[b]figgler[/b]','')">figgler</a></b><br></div>
<img src="img/s2.gif" alt=""><br><span class=txtSm>Ранг: 11.2 (новичок), 1thx<br><span title='Сообщений в день (с регистрации) / За последний год / Лет с регистрации: 13.5'>Активность: 0.01<span style='color:red'>&searr;</span>0</span><br>Статус: <a href="action=userinfo&amp;user=8982">Участник</a></span></div>
<br>
</td>
<td width="83%" class="caption1 post"><span class=txtSm>Создано: 20 сентября 2012 20:05 <br><script type="text/javascript">QU('figgler','Цитата','пишет');</script> &middot; <a href="?step=sendmsg&amp;action=pmail&amp;userto=figgler" target="_blank">Личное сообщение</a> &middot;  <a href="#16" onClick="prompt('Ссылка на сообщение', 'https://exelab.ru/f/action=vthread&amp;forum=5&amp;topic=20342.html&amp;page=0#16');return false;">#16</a> </span><div align=left><br>
<b>crypto</b> спасибо, уже...
<br><br><span class="txtGoods"><a href="action=addthx&amp;post=311814&amp;user=8982&amp;forum_n=5&amp;topic=20342.html&amp;page=0&amp;anchor=16" class="addthx" data-post="311814"><img src="img/tu.png" border=0 title="Полезное сообщение"></a><span class="have_thx" style="display:none"> | Сообщение посчитали полезным: <span class="total_thx"></span></span></span><br></div></td>
</tr>


</table>
<table class=tbTransparent><tr><td class=tbTransparent><span class=txtSm><b></b></span></td></tr></table>
<table class=forums><tr>
<td width=16 valign=top class=caption3><img src="./img/forum_icons/nub.gif" width=16 height=16 alt=""></td>
<td width="100%" class=caption3><span class=header>&nbsp;<a href="../index.html"><b>eXeL@B</b></a> <b class=bulletHead>&#8212;&#8250;</b> <a href="action=vtopic&amp;forum=5&sortBy=0&page=0.html"><b>Вопросы новичков</b></a> <b class=bulletHead>&#8212;&#8250;</b> Закончились идеи, может подскажете парочку (хитрая защита)</span></td>
</tr></table>
</div>
<a name=newreply></a>
<div align=center>
<table class=forums>
<tr>
<td class=caption4 width="100%"><span class=header>Эта тема закрыта. Ответы больше не принимаются.</span></td>
</tr>
</table>
</div>
<script type="text/javascript" src="templates/vthread_logged.js"></script>
<div align=center><table class=tbTransparent><tr>
<td class=tbTransparent><span class=txtSm>      &nbsp;&nbsp;&nbsp;<a href="/f/forprint.php?topic_id=20342" title="Версия для печати"><img src="img/forprint.gif" border="0" alt="Для печати"> Для печати</a>&nbsp;</span></td>
</tr></table></div>
<br>
 
<br><br><br></center>

</div>
<div id="footer">Вы находитесь на EXELAB.rU</div>
<div id="footer_btns">
<a href="http://www.reactos.org" rel="nofollow" target="_blank"><img src="./images/react.png" height="31" width="88" border="0" title="" alt=""></a> <script type="text/javascript"><!--
document.write("<img src='//counter.yadro.ru/hit?t44.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' "+
"border='0' width='31' height='31'>")
//--></script>
</div>
</div>

</body></html>
